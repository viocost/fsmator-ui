(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const g of d.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function s(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(c){if(c.ep)return;c.ep=!0;const d=s(c);fetch(c.href,d)}})();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(a){return a===null||typeof a!="object"?null:(a=z$1&&a[z$1]||a["@@iterator"],typeof a=="function"?a:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$2={};function E$1(a,e,s){this.props=a,this.context=e,this.refs=D$2,this.updater=s||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(a,e){if(typeof a!="object"&&typeof a!="function"&&a!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,a,e,"setState")};E$1.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(a,e,s){this.props=a,this.context=e,this.refs=D$2,this.updater=s||B$1}var H$2=G$1.prototype=new F;H$2.constructor=G$1;C$1(H$2,E$1.prototype);H$2.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$2={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(a,e,s){var o,c={},d=null,g=null;if(e!=null)for(o in e.ref!==void 0&&(g=e.ref),e.key!==void 0&&(d=""+e.key),e)J.call(e,o)&&!L$1.hasOwnProperty(o)&&(c[o]=e[o]);var b=arguments.length-2;if(b===1)c.children=s;else if(1<b){for(var j=Array(b),_e=0;_e<b;_e++)j[_e]=arguments[_e+2];c.children=j}if(a&&a.defaultProps)for(o in b=a.defaultProps,b)c[o]===void 0&&(c[o]=b[o]);return{$$typeof:l$2,type:a,key:d,ref:g,props:c,_owner:K$2.current}}function N$1(a,e){return{$$typeof:l$2,type:a.type,key:e,ref:a.ref,props:a.props,_owner:a._owner}}function O$1(a){return typeof a=="object"&&a!==null&&a.$$typeof===l$2}function escape(a){var e={"=":"=0",":":"=2"};return"$"+a.replace(/[=:]/g,function(s){return e[s]})}var P$1=/\/+/g;function Q$1(a,e){return typeof a=="object"&&a!==null&&a.key!=null?escape(""+a.key):e.toString(36)}function R$1(a,e,s,o,c){var d=typeof a;(d==="undefined"||d==="boolean")&&(a=null);var g=!1;if(a===null)g=!0;else switch(d){case"string":case"number":g=!0;break;case"object":switch(a.$$typeof){case l$2:case n$1:g=!0}}if(g)return g=a,c=c(g),a=o===""?"."+Q$1(g,0):o,I$1(c)?(s="",a!=null&&(s=a.replace(P$1,"$&/")+"/"),R$1(c,e,s,"",function(_e){return _e})):c!=null&&(O$1(c)&&(c=N$1(c,s+(!c.key||g&&g.key===c.key?"":(""+c.key).replace(P$1,"$&/")+"/")+a)),e.push(c)),1;if(g=0,o=o===""?".":o+":",I$1(a))for(var b=0;b<a.length;b++){d=a[b];var j=o+Q$1(d,b);g+=R$1(d,e,s,j,c)}else if(j=A$1(a),typeof j=="function")for(a=j.call(a),b=0;!(d=a.next()).done;)d=d.value,j=o+Q$1(d,b++),g+=R$1(d,e,s,j,c);else if(d==="object")throw e=String(a),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return g}function S$1(a,e,s){if(a==null)return a;var o=[],c=0;return R$1(a,o,"","",function(d){return e.call(s,d,c++)}),o}function T$1(a){if(a._status===-1){var e=a._result;e=e(),e.then(function(s){(a._status===0||a._status===-1)&&(a._status=1,a._result=s)},function(s){(a._status===0||a._status===-1)&&(a._status=2,a._result=s)}),a._status===-1&&(a._status=0,a._result=e)}if(a._status===1)return a._result.default;throw a._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$2};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(a,e,s){S$1(a,function(){e.apply(this,arguments)},s)},count:function(a){var e=0;return S$1(a,function(){e++}),e},toArray:function(a){return S$1(a,function(e){return e})||[]},only:function(a){if(!O$1(a))throw Error("React.Children.only expected to receive a single React element child.");return a}};react_production_min.Component=E$1;react_production_min.Fragment=p$3;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(a,e,s){if(a==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+a+".");var o=C$1({},a.props),c=a.key,d=a.ref,g=a._owner;if(e!=null){if(e.ref!==void 0&&(d=e.ref,g=K$2.current),e.key!==void 0&&(c=""+e.key),a.type&&a.type.defaultProps)var b=a.type.defaultProps;for(j in e)J.call(e,j)&&!L$1.hasOwnProperty(j)&&(o[j]=e[j]===void 0&&b!==void 0?b[j]:e[j])}var j=arguments.length-2;if(j===1)o.children=s;else if(1<j){b=Array(j);for(var _e=0;_e<j;_e++)b[_e]=arguments[_e+2];o.children=b}return{$$typeof:l$2,type:a.type,key:c,ref:d,props:o,_owner:g}};react_production_min.createContext=function(a){return a={$$typeof:u,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},a.Provider={$$typeof:t,_context:a},a.Consumer=a};react_production_min.createElement=M$1;react_production_min.createFactory=function(a){var e=M$1.bind(null,a);return e.type=a,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(a){return{$$typeof:v$2,render:a}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(a){return{$$typeof:y$1,_payload:{_status:-1,_result:a},_init:T$1}};react_production_min.memo=function(a,e){return{$$typeof:x$1,type:a,compare:e===void 0?null:e}};react_production_min.startTransition=function(a){var e=V$1.transition;V$1.transition={};try{a()}finally{V$1.transition=e}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(a,e){return U$1.current.useCallback(a,e)};react_production_min.useContext=function(a){return U$1.current.useContext(a)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(a){return U$1.current.useDeferredValue(a)};react_production_min.useEffect=function(a,e){return U$1.current.useEffect(a,e)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(a,e,s){return U$1.current.useImperativeHandle(a,e,s)};react_production_min.useInsertionEffect=function(a,e){return U$1.current.useInsertionEffect(a,e)};react_production_min.useLayoutEffect=function(a,e){return U$1.current.useLayoutEffect(a,e)};react_production_min.useMemo=function(a,e){return U$1.current.useMemo(a,e)};react_production_min.useReducer=function(a,e,s){return U$1.current.useReducer(a,e,s)};react_production_min.useRef=function(a){return U$1.current.useRef(a)};react_production_min.useState=function(a){return U$1.current.useState(a)};react_production_min.useSyncExternalStore=function(a,e,s){return U$1.current.useSyncExternalStore(a,e,s)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs$1(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k$1=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q(a,e,s){var o,c={},d=null,g=null;s!==void 0&&(d=""+s),e.key!==void 0&&(d=""+e.key),e.ref!==void 0&&(g=e.ref);for(o in e)m$1.call(e,o)&&!p$2.hasOwnProperty(o)&&(c[o]=e[o]);if(a&&a.defaultProps)for(o in e=a.defaultProps,e)c[o]===void 0&&(c[o]=e[o]);return{$$typeof:k$1,type:a,key:d,ref:g,props:c,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(a){function e(wr,$r){var Ar=wr.length;wr.push($r);e:for(;0<Ar;){var Sr=Ar-1>>>1,kr=wr[Sr];if(0<c(kr,$r))wr[Sr]=$r,wr[Ar]=kr,Ar=Sr;else break e}}function s(wr){return wr.length===0?null:wr[0]}function o(wr){if(wr.length===0)return null;var $r=wr[0],Ar=wr.pop();if(Ar!==$r){wr[0]=Ar;e:for(var Sr=0,kr=wr.length,Mr=kr>>>1;Sr<Mr;){var qr=2*(Sr+1)-1,Tr=wr[qr],Pr=qr+1,Br=wr[Pr];if(0>c(Tr,Ar))Pr<kr&&0>c(Br,Tr)?(wr[Sr]=Br,wr[Pr]=Ar,Sr=Pr):(wr[Sr]=Tr,wr[qr]=Ar,Sr=qr);else if(Pr<kr&&0>c(Br,Ar))wr[Sr]=Br,wr[Pr]=Ar,Sr=Pr;else break e}}return $r}function c(wr,$r){var Ar=wr.sortIndex-$r.sortIndex;return Ar!==0?Ar:wr.id-$r.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;a.unstable_now=function(){return d.now()}}else{var g=Date,b=g.now();a.unstable_now=function(){return g.now()-b}}var j=[],_e=[],er=1,rr=null,tr=3,nr=!1,ar=!1,lr=!1,or=typeof setTimeout=="function"?setTimeout:null,ir=typeof clearTimeout=="function"?clearTimeout:null,sr=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ur(wr){for(var $r=s(_e);$r!==null;){if($r.callback===null)o(_e);else if($r.startTime<=wr)o(_e),$r.sortIndex=$r.expirationTime,e(j,$r);else break;$r=s(_e)}}function cr(wr){if(lr=!1,ur(wr),!ar)if(s(j)!==null)ar=!0,Rr(fr);else{var $r=s(_e);$r!==null&&Cr(cr,$r.startTime-wr)}}function fr(wr,$r){ar=!1,lr&&(lr=!1,ir(vr),vr=-1),nr=!0;var Ar=tr;try{for(ur($r),rr=s(j);rr!==null&&(!(rr.expirationTime>$r)||wr&&!mr());){var Sr=rr.callback;if(typeof Sr=="function"){rr.callback=null,tr=rr.priorityLevel;var kr=Sr(rr.expirationTime<=$r);$r=a.unstable_now(),typeof kr=="function"?rr.callback=kr:rr===s(j)&&o(j),ur($r)}else o(j);rr=s(j)}if(rr!==null)var Mr=!0;else{var qr=s(_e);qr!==null&&Cr(cr,qr.startTime-$r),Mr=!1}return Mr}finally{rr=null,tr=Ar,nr=!1}}var hr=!1,dr=null,vr=-1,gr=5,pr=-1;function mr(){return!(a.unstable_now()-pr<gr)}function yr(){if(dr!==null){var wr=a.unstable_now();pr=wr;var $r=!0;try{$r=dr(!0,wr)}finally{$r?br():(hr=!1,dr=null)}}else hr=!1}var br;if(typeof sr=="function")br=function(){sr(yr)};else if(typeof MessageChannel<"u"){var Er=new MessageChannel,_r=Er.port2;Er.port1.onmessage=yr,br=function(){_r.postMessage(null)}}else br=function(){or(yr,0)};function Rr(wr){dr=wr,hr||(hr=!0,br())}function Cr(wr,$r){vr=or(function(){wr(a.unstable_now())},$r)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(wr){wr.callback=null},a.unstable_continueExecution=function(){ar||nr||(ar=!0,Rr(fr))},a.unstable_forceFrameRate=function(wr){0>wr||125<wr?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):gr=0<wr?Math.floor(1e3/wr):5},a.unstable_getCurrentPriorityLevel=function(){return tr},a.unstable_getFirstCallbackNode=function(){return s(j)},a.unstable_next=function(wr){switch(tr){case 1:case 2:case 3:var $r=3;break;default:$r=tr}var Ar=tr;tr=$r;try{return wr()}finally{tr=Ar}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(wr,$r){switch(wr){case 1:case 2:case 3:case 4:case 5:break;default:wr=3}var Ar=tr;tr=wr;try{return $r()}finally{tr=Ar}},a.unstable_scheduleCallback=function(wr,$r,Ar){var Sr=a.unstable_now();switch(typeof Ar=="object"&&Ar!==null?(Ar=Ar.delay,Ar=typeof Ar=="number"&&0<Ar?Sr+Ar:Sr):Ar=Sr,wr){case 1:var kr=-1;break;case 2:kr=250;break;case 5:kr=1073741823;break;case 4:kr=1e4;break;default:kr=5e3}return kr=Ar+kr,wr={id:er++,callback:$r,priorityLevel:wr,startTime:Ar,expirationTime:kr,sortIndex:-1},Ar>Sr?(wr.sortIndex=Ar,e(_e,wr),s(j)===null&&wr===s(_e)&&(lr?(ir(vr),vr=-1):lr=!0,Cr(cr,Ar-Sr))):(wr.sortIndex=kr,e(j,wr),ar||nr||(ar=!0,Rr(fr))),wr},a.unstable_shouldYield=mr,a.unstable_wrapCallback=function(wr){var $r=tr;return function(){var Ar=tr;tr=$r;try{return wr.apply(this,arguments)}finally{tr=Ar}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(a){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+a,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+a+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(a,e){ha(a,e),ha(a+"Capture",e)}function ha(a,e){for(ea[a]=e,a=0;a<e.length;a++)da.add(e[a])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(a){return ja.call(ma,a)?!0:ja.call(la,a)?!1:ka.test(a)?ma[a]=!0:(la[a]=!0,!1)}function pa(a,e,s,o){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return o?!1:s!==null?!s.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function qa(a,e,s,o){if(e===null||typeof e>"u"||pa(a,e,s,o))return!0;if(o)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v$1(a,e,s,o,c,d,g){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=o,this.attributeNamespace=c,this.mustUseProperty=s,this.propertyName=a,this.type=e,this.sanitizeURL=d,this.removeEmptyString=g}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){z[a]=new v$1(a,0,!1,a,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var e=a[0];z[e]=new v$1(e,1,!1,a[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){z[a]=new v$1(a,2,!1,a.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){z[a]=new v$1(a,2,!1,a,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){z[a]=new v$1(a,3,!1,a.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(a){z[a]=new v$1(a,3,!0,a,null,!1,!1)});["capture","download"].forEach(function(a){z[a]=new v$1(a,4,!1,a,null,!1,!1)});["cols","rows","size","span"].forEach(function(a){z[a]=new v$1(a,6,!1,a,null,!1,!1)});["rowSpan","start"].forEach(function(a){z[a]=new v$1(a,5,!1,a.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var e=a.replace(ra,sa);z[e]=new v$1(e,1,!1,a,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var e=a.replace(ra,sa);z[e]=new v$1(e,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var e=a.replace(ra,sa);z[e]=new v$1(e,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(a){z[a]=new v$1(a,1,!1,a.toLowerCase(),null,!1,!1)});z.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(a){z[a]=new v$1(a,1,!1,a.toLowerCase(),null,!0,!0)});function ta(a,e,s,o){var c=z.hasOwnProperty(e)?z[e]:null;(c!==null?c.type!==0:o||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,s,c,o)&&(s=null),o||c===null?oa(e)&&(s===null?a.removeAttribute(e):a.setAttribute(e,""+s)):c.mustUseProperty?a[c.propertyName]=s===null?c.type===3?!1:"":s:(e=c.attributeName,o=c.attributeNamespace,s===null?a.removeAttribute(e):(c=c.type,s=c===3||c===4&&s===!0?"":""+s,o?a.setAttributeNS(o,e,s):a.setAttribute(e,s))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(a){return a===null||typeof a!="object"?null:(a=Ja&&a[Ja]||a["@@iterator"],typeof a=="function"?a:null)}var A=Object.assign,La;function Ma(a){if(La===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+a}var Na=!1;function Oa(a,e){if(!a||Na)return"";Na=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(_e){var o=_e}Reflect.construct(a,[],e)}else{try{e.call()}catch(_e){o=_e}a.call(e.prototype)}else{try{throw Error()}catch(_e){o=_e}a()}}catch(_e){if(_e&&o&&typeof _e.stack=="string"){for(var c=_e.stack.split(`
`),d=o.stack.split(`
`),g=c.length-1,b=d.length-1;1<=g&&0<=b&&c[g]!==d[b];)b--;for(;1<=g&&0<=b;g--,b--)if(c[g]!==d[b]){if(g!==1||b!==1)do if(g--,b--,0>b||c[g]!==d[b]){var j=`
`+c[g].replace(" at new "," at ");return a.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",a.displayName)),j}while(1<=g&&0<=b);break}}}finally{Na=!1,Error.prepareStackTrace=s}return(a=a?a.displayName||a.name:"")?Ma(a):""}function Pa(a){switch(a.tag){case 5:return Ma(a.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return a=Oa(a.type,!1),a;case 11:return a=Oa(a.type.render,!1),a;case 1:return a=Oa(a.type,!0),a;default:return""}}function Qa(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Ca:return(a.displayName||"Context")+".Consumer";case Ba:return(a._context.displayName||"Context")+".Provider";case Da:var e=a.render;return a=a.displayName,a||(a=e.displayName||e.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Ga:return e=a.displayName||null,e!==null?e:Qa(a.type)||"Memo";case Ha:e=a._payload,a=a._init;try{return Qa(a(e))}catch{}}return null}function Ra(a){var e=a.type;switch(a.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=e.render,a=a.displayName||a.name||"",e.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ta(a){var e=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(a){var e=Ta(a)?"checked":"value",s=Object.getOwnPropertyDescriptor(a.constructor.prototype,e),o=""+a[e];if(!a.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,d=s.set;return Object.defineProperty(a,e,{configurable:!0,get:function(){return c.call(this)},set:function(g){o=""+g,d.call(this,g)}}),Object.defineProperty(a,e,{enumerable:s.enumerable}),{getValue:function(){return o},setValue:function(g){o=""+g},stopTracking:function(){a._valueTracker=null,delete a[e]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var e=a._valueTracker;if(!e)return!0;var s=e.getValue(),o="";return a&&(o=Ta(a)?a.checked?"true":"false":a.value),a=o,a!==s?(e.setValue(a),!0):!1}function Xa(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ya(a,e){var s=e.checked;return A({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??a._wrapperState.initialChecked})}function Za(a,e){var s=e.defaultValue==null?"":e.defaultValue,o=e.checked!=null?e.checked:e.defaultChecked;s=Sa(e.value!=null?e.value:s),a._wrapperState={initialChecked:o,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(a,e){e=e.checked,e!=null&&ta(a,"checked",e,!1)}function bb(a,e){ab(a,e);var s=Sa(e.value),o=e.type;if(s!=null)o==="number"?(s===0&&a.value===""||a.value!=s)&&(a.value=""+s):a.value!==""+s&&(a.value=""+s);else if(o==="submit"||o==="reset"){a.removeAttribute("value");return}e.hasOwnProperty("value")?cb(a,e.type,s):e.hasOwnProperty("defaultValue")&&cb(a,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(a.defaultChecked=!!e.defaultChecked)}function db(a,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!(o!=="submit"&&o!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+a._wrapperState.initialValue,s||e===a.value||(a.value=e),a.defaultValue=e}s=a.name,s!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,s!==""&&(a.name=s)}function cb(a,e,s){(e!=="number"||Xa(a.ownerDocument)!==a)&&(s==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+s&&(a.defaultValue=""+s))}var eb=Array.isArray;function fb(a,e,s,o){if(a=a.options,e){e={};for(var c=0;c<s.length;c++)e["$"+s[c]]=!0;for(s=0;s<a.length;s++)c=e.hasOwnProperty("$"+a[s].value),a[s].selected!==c&&(a[s].selected=c),c&&o&&(a[s].defaultSelected=!0)}else{for(s=""+Sa(s),e=null,c=0;c<a.length;c++){if(a[c].value===s){a[c].selected=!0,o&&(a[c].defaultSelected=!0);return}e!==null||a[c].disabled||(e=a[c])}e!==null&&(e.selected=!0)}}function gb(a,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A({},e,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function hb(a,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(p$1(92));if(eb(s)){if(1<s.length)throw Error(p$1(93));s=s[0]}e=s}e==null&&(e=""),s=e}a._wrapperState={initialValue:Sa(s)}}function ib(a,e){var s=Sa(e.value),o=Sa(e.defaultValue);s!=null&&(s=""+s,s!==a.value&&(a.value=s),e.defaultValue==null&&a.defaultValue!==s&&(a.defaultValue=s)),o!=null&&(a.defaultValue=""+o)}function jb(a){var e=a.textContent;e===a._wrapperState.initialValue&&e!==""&&e!==null&&(a.value=e)}function kb(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(a,e){return a==null||a==="http://www.w3.org/1999/xhtml"?kb(e):a==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var mb,nb=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,o,c){MSApp.execUnsafeLocalFunction(function(){return a(e,s,o,c)})}:a}(function(a,e){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;e.firstChild;)a.appendChild(e.firstChild)}});function ob(a,e){if(e){var s=a.firstChild;if(s&&s===a.lastChild&&s.nodeType===3){s.nodeValue=e;return}}a.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(a){qb.forEach(function(e){e=e+a.charAt(0).toUpperCase()+a.substring(1),pb[e]=pb[a]})});function rb(a,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||pb.hasOwnProperty(a)&&pb[a]?(""+e).trim():e+"px"}function sb(a,e){a=a.style;for(var s in e)if(e.hasOwnProperty(s)){var o=s.indexOf("--")===0,c=rb(s,e[s],o);s==="float"&&(s="cssFloat"),o?a.setProperty(s,c):a[s]=c}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(a,e){if(e){if(tb[a]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p$1(137,a));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p$1(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p$1(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p$1(62))}}function vb(a,e){if(a.indexOf("-")===-1)return typeof e.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var yb=null,zb=null,Ab=null;function Bb(a){if(a=Cb(a)){if(typeof yb!="function")throw Error(p$1(280));var e=a.stateNode;e&&(e=Db(e),yb(a.stateNode,a.type,e))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,e=Ab;if(Ab=zb=null,Bb(a),e)for(a=0;a<e.length;a++)Bb(e[a])}}function Gb(a,e){return a(e)}function Hb(){}var Ib=!1;function Jb(a,e,s){if(Ib)return a(e,s);Ib=!0;try{return Gb(a,e,s)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(a,e){var s=a.stateNode;if(s===null)return null;var o=Db(s);if(o===null)return null;s=o[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(a=a.type,o=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!o;break e;default:a=!1}if(a)return null;if(s&&typeof s!="function")throw Error(p$1(231,e,typeof s));return s}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(a,e,s,o,c,d,g,b,j){var _e=Array.prototype.slice.call(arguments,3);try{e.apply(s,_e)}catch(er){this.onError(er)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(a){Ob=!0,Pb=a}};function Tb(a,e,s,o,c,d,g,b,j){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(a,e,s,o,c,d,g,b,j){if(Tb.apply(this,arguments),Ob){if(Ob){var _e=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=_e)}}function Vb(a){var e=a,s=a;if(a.alternate)for(;e.return;)e=e.return;else{a=e;do e=a,e.flags&4098&&(s=e.return),a=e.return;while(a)}return e.tag===3?s:null}function Wb(a){if(a.tag===13){var e=a.memoizedState;if(e===null&&(a=a.alternate,a!==null&&(e=a.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(a){if(Vb(a)!==a)throw Error(p$1(188))}function Yb(a){var e=a.alternate;if(!e){if(e=Vb(a),e===null)throw Error(p$1(188));return e!==a?null:a}for(var s=a,o=e;;){var c=s.return;if(c===null)break;var d=c.alternate;if(d===null){if(o=c.return,o!==null){s=o;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===s)return Xb(c),a;if(d===o)return Xb(c),e;d=d.sibling}throw Error(p$1(188))}if(s.return!==o.return)s=c,o=d;else{for(var g=!1,b=c.child;b;){if(b===s){g=!0,s=c,o=d;break}if(b===o){g=!0,o=c,s=d;break}b=b.sibling}if(!g){for(b=d.child;b;){if(b===s){g=!0,s=d,o=c;break}if(b===o){g=!0,o=d,s=c;break}b=b.sibling}if(!g)throw Error(p$1(189))}}if(s.alternate!==o)throw Error(p$1(190))}if(s.tag!==3)throw Error(p$1(188));return s.stateNode.current===s?a:e}function Zb(a){return a=Yb(a),a!==null?$b(a):null}function $b(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var e=$b(a);if(e!==null)return e;a=a.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(a){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,a,void 0,(a.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(a){return a>>>=0,a===0?32:31-(pc(a)/qc|0)|0}var rc=64,sc=4194304;function tc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function uc(a,e){var s=a.pendingLanes;if(s===0)return 0;var o=0,c=a.suspendedLanes,d=a.pingedLanes,g=s&268435455;if(g!==0){var b=g&~c;b!==0?o=tc(b):(d&=g,d!==0&&(o=tc(d)))}else g=s&~c,g!==0?o=tc(g):d!==0&&(o=tc(d));if(o===0)return 0;if(e!==0&&e!==o&&!(e&c)&&(c=o&-o,d=e&-e,c>=d||c===16&&(d&4194240)!==0))return e;if(o&4&&(o|=s&16),e=a.entangledLanes,e!==0)for(a=a.entanglements,e&=o;0<e;)s=31-oc(e),c=1<<s,o|=a[s],e&=~c;return o}function vc(a,e){switch(a){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(a,e){for(var s=a.suspendedLanes,o=a.pingedLanes,c=a.expirationTimes,d=a.pendingLanes;0<d;){var g=31-oc(d),b=1<<g,j=c[g];j===-1?(!(b&s)||b&o)&&(c[g]=vc(b,e)):j<=e&&(a.expiredLanes|=b),d&=~b}}function xc(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function yc(){var a=rc;return rc<<=1,!(rc&4194240)&&(rc=64),a}function zc(a){for(var e=[],s=0;31>s;s++)e.push(a);return e}function Ac(a,e,s){a.pendingLanes|=e,e!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,e=31-oc(e),a[e]=s}function Bc(a,e){var s=a.pendingLanes&~e;a.pendingLanes=e,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=e,a.mutableReadLanes&=e,a.entangledLanes&=e,e=a.entanglements;var o=a.eventTimes;for(a=a.expirationTimes;0<s;){var c=31-oc(s),d=1<<c;e[c]=0,o[c]=-1,a[c]=-1,s&=~d}}function Cc(a,e){var s=a.entangledLanes|=e;for(a=a.entanglements;s;){var o=31-oc(s),c=1<<o;c&e|a[o]&e&&(a[o]|=e),s&=~c}}var C=0;function Dc(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(a,e){switch(a){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(a,e,s,o,c,d){return a===null||a.nativeEvent!==d?(a={blockedOn:e,domEventName:s,eventSystemFlags:o,nativeEvent:d,targetContainers:[c]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),a):(a.eventSystemFlags|=o,e=a.targetContainers,c!==null&&e.indexOf(c)===-1&&e.push(c),a)}function Uc(a,e,s,o,c){switch(e){case"focusin":return Lc=Tc(Lc,a,e,s,o,c),!0;case"dragenter":return Mc=Tc(Mc,a,e,s,o,c),!0;case"mouseover":return Nc=Tc(Nc,a,e,s,o,c),!0;case"pointerover":var d=c.pointerId;return Oc.set(d,Tc(Oc.get(d)||null,a,e,s,o,c)),!0;case"gotpointercapture":return d=c.pointerId,Pc.set(d,Tc(Pc.get(d)||null,a,e,s,o,c)),!0}return!1}function Vc(a){var e=Wc(a.target);if(e!==null){var s=Vb(e);if(s!==null){if(e=s.tag,e===13){if(e=Wb(s),e!==null){a.blockedOn=e,Ic(a.priority,function(){Gc(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){a.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Xc(a){if(a.blockedOn!==null)return!1;for(var e=a.targetContainers;0<e.length;){var s=Yc(a.domEventName,a.eventSystemFlags,e[0],a.nativeEvent);if(s===null){s=a.nativeEvent;var o=new s.constructor(s.type,s);wb=o,s.target.dispatchEvent(o),wb=null}else return e=Cb(s),e!==null&&Fc(e),a.blockedOn=s,!1;e.shift()}return!0}function Zc(a,e,s){Xc(a)&&s.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(a,e){a.blockedOn===e&&(a.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(a){function e(c){return ad(c,a)}if(0<Kc.length){ad(Kc[0],a);for(var s=1;s<Kc.length;s++){var o=Kc[s];o.blockedOn===a&&(o.blockedOn=null)}}for(Lc!==null&&ad(Lc,a),Mc!==null&&ad(Mc,a),Nc!==null&&ad(Nc,a),Oc.forEach(e),Pc.forEach(e),s=0;s<Qc.length;s++)o=Qc[s],o.blockedOn===a&&(o.blockedOn=null);for(;0<Qc.length&&(s=Qc[0],s.blockedOn===null);)Vc(s),s.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(a,e,s,o){var c=C,d=cd.transition;cd.transition=null;try{C=1,fd(a,e,s,o)}finally{C=c,cd.transition=d}}function gd(a,e,s,o){var c=C,d=cd.transition;cd.transition=null;try{C=4,fd(a,e,s,o)}finally{C=c,cd.transition=d}}function fd(a,e,s,o){if(dd){var c=Yc(a,e,s,o);if(c===null)hd(a,e,o,id,s),Sc(a,o);else if(Uc(c,a,e,s,o))o.stopPropagation();else if(Sc(a,o),e&4&&-1<Rc.indexOf(a)){for(;c!==null;){var d=Cb(c);if(d!==null&&Ec(d),d=Yc(a,e,s,o),d===null&&hd(a,e,o,id,s),d===c)break;c=d}c!==null&&o.stopPropagation()}else hd(a,e,o,null,s)}}var id=null;function Yc(a,e,s,o){if(id=null,a=xb(o),a=Wc(a),a!==null)if(e=Vb(a),e===null)a=null;else if(s=e.tag,s===13){if(a=Wb(e),a!==null)return a;a=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;a=null}else e!==a&&(a=null);return id=a,null}function jd(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var a,e=ld,s=e.length,o,c="value"in kd?kd.value:kd.textContent,d=c.length;for(a=0;a<s&&e[a]===c[a];a++);var g=s-a;for(o=1;o<=g&&e[s-o]===c[d-o];o++);return md=c.slice(a,1<o?1-o:void 0)}function od(a){var e=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&e===13&&(a=13)):a=e,a===10&&(a=13),32<=a||a===13?a:0}function pd(){return!0}function qd(){return!1}function rd(a){function e(s,o,c,d,g){this._reactName=s,this._targetInst=c,this.type=o,this.nativeEvent=d,this.target=g,this.currentTarget=null;for(var b in a)a.hasOwnProperty(b)&&(s=a[b],this[b]=s?s(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==yd&&(yd&&a.type==="mousemove"?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a),wd)},movementY:function(a){return"movementY"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(a){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(a):(a=Od[a])?!!e[a]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(a){if(a.key){var e=Md[a.key]||a.key;if(e!=="Unidentified")return e}return a.type==="keypress"?(a=od(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Nd[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return a.type==="keypress"?od(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?od(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce=ia&&"TextEvent"in window&&!be$1,de$1=ia&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$1=" ",fe$1=!1;function ge(a,e){switch(a){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ie$1=!1;function je(a,e){switch(a){case"compositionend":return he$1(e);case"keypress":return e.which!==32?null:(fe$1=!0,ee$1);case"textInput":return a=e.data,a===ee$1&&fe$1?null:a;default:return null}}function ke(a,e){if(ie$1)return a==="compositionend"||!ae$1&&ge(a,e)?(a=nd(),md=ld=kd=null,ie$1=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de$1&&e.locale!=="ko"?null:e.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var e=a&&a.nodeName&&a.nodeName.toLowerCase();return e==="input"?!!le$1[a.type]:e==="textarea"}function ne(a,e,s,o){Eb(o),e=oe(e,"onChange"),0<e.length&&(s=new td("onChange","change",null,s,o),a.push({event:s,listeners:e}))}var pe=null,qe=null;function re(a){se$1(a,0)}function te$1(a){var e=ue(a);if(Wa(e))return a}function ve(a,e){if(a==="change")return e}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(a){if(a.propertyName==="value"&&te$1(qe)){var e=[];ne(e,qe,a,xb(a)),Jb(re,e)}}function Ce$1(a,e,s){a==="focusin"?(Ae(),pe=e,qe=s,pe.attachEvent("onpropertychange",Be)):a==="focusout"&&Ae()}function De$1(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return te$1(qe)}function Ee$1(a,e){if(a==="click")return te$1(e)}function Fe(a,e){if(a==="input"||a==="change")return te$1(e)}function Ge(a,e){return a===e&&(a!==0||1/a===1/e)||a!==a&&e!==e}var He$1=typeof Object.is=="function"?Object.is:Ge;function Ie(a,e){if(He$1(a,e))return!0;if(typeof a!="object"||a===null||typeof e!="object"||e===null)return!1;var s=Object.keys(a),o=Object.keys(e);if(s.length!==o.length)return!1;for(o=0;o<s.length;o++){var c=s[o];if(!ja.call(e,c)||!He$1(a[c],e[c]))return!1}return!0}function Je(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ke(a,e){var s=Je(a);a=0;for(var o;s;){if(s.nodeType===3){if(o=a+s.textContent.length,a<=e&&o>=e)return{node:s,offset:e-a};a=o}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Je(s)}}function Le(a,e){return a&&e?a===e?!0:a&&a.nodeType===3?!1:e&&e.nodeType===3?Le(a,e.parentNode):"contains"in a?a.contains(e):a.compareDocumentPosition?!!(a.compareDocumentPosition(e)&16):!1:!1}function Me$1(){for(var a=window,e=Xa();e instanceof a.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)a=e.contentWindow;else break;e=Xa(a.document)}return e}function Ne(a){var e=a&&a.nodeName&&a.nodeName.toLowerCase();return e&&(e==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||e==="textarea"||a.contentEditable==="true")}function Oe$1(a){var e=Me$1(),s=a.focusedElem,o=a.selectionRange;if(e!==s&&s&&s.ownerDocument&&Le(s.ownerDocument.documentElement,s)){if(o!==null&&Ne(s)){if(e=o.start,a=o.end,a===void 0&&(a=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(a,s.value.length);else if(a=(e=s.ownerDocument||document)&&e.defaultView||window,a.getSelection){a=a.getSelection();var c=s.textContent.length,d=Math.min(o.start,c);o=o.end===void 0?d:Math.min(o.end,c),!a.extend&&d>o&&(c=o,o=d,d=c),c=Ke(s,d);var g=Ke(s,o);c&&g&&(a.rangeCount!==1||a.anchorNode!==c.node||a.anchorOffset!==c.offset||a.focusNode!==g.node||a.focusOffset!==g.offset)&&(e=e.createRange(),e.setStart(c.node,c.offset),a.removeAllRanges(),d>o?(a.addRange(e),a.extend(g.node,g.offset)):(e.setEnd(g.node,g.offset),a.addRange(e)))}}for(e=[],a=s;a=a.parentNode;)a.nodeType===1&&e.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)a=e[s],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(a,e,s){var o=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te||Qe==null||Qe!==Xa(o)||(o=Qe,"selectionStart"in o&&Ne(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Se&&Ie(Se,o)||(Se=o,o=oe(Re,"onSelect"),0<o.length&&(e=new td("onSelect","select",null,e,s),a.push({event:e,listeners:o}),e.target=Qe)))}function Ve$1(a,e){var s={};return s[a.toLowerCase()]=e.toLowerCase(),s["Webkit"+a]="webkit"+e,s["Moz"+a]="moz"+e,s}var We={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(a){if(Xe[a])return Xe[a];if(!We[a])return a;var e=We[a],s;for(s in e)if(e.hasOwnProperty(s)&&s in Ye)return Xe[a]=e[s];return a}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(a,e){df.set(a,e),fa(e,[a])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(a,e,s){var o=a.type||"unknown-event";a.currentTarget=s,Ub(o,e,void 0,a),a.currentTarget=null}function se$1(a,e){e=(e&4)!==0;for(var s=0;s<a.length;s++){var o=a[s],c=o.event;o=o.listeners;e:{var d=void 0;if(e)for(var g=o.length-1;0<=g;g--){var b=o[g],j=b.instance,_e=b.currentTarget;if(b=b.listener,j!==d&&c.isPropagationStopped())break e;nf(c,b,_e),d=j}else for(g=0;g<o.length;g++){if(b=o[g],j=b.instance,_e=b.currentTarget,b=b.listener,j!==d&&c.isPropagationStopped())break e;nf(c,b,_e),d=j}}}if(Qb)throw a=Rb,Qb=!1,Rb=null,a}function D$1(a,e){var s=e[of];s===void 0&&(s=e[of]=new Set);var o=a+"__bubble";s.has(o)||(pf(e,a,2,!1),s.add(o))}function qf(a,e,s){var o=0;e&&(o|=4),pf(s,a,o,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(a){if(!a[rf]){a[rf]=!0,da.forEach(function(s){s!=="selectionchange"&&(mf.has(s)||qf(s,!1,a),qf(s,!0,a))});var e=a.nodeType===9?a:a.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(a,e,s,o){switch(jd(e)){case 1:var c=ed;break;case 4:c=gd;break;default:c=fd}s=c.bind(null,e,s,a),c=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(c=!0),o?c!==void 0?a.addEventListener(e,s,{capture:!0,passive:c}):a.addEventListener(e,s,!0):c!==void 0?a.addEventListener(e,s,{passive:c}):a.addEventListener(e,s,!1)}function hd(a,e,s,o,c){var d=o;if(!(e&1)&&!(e&2)&&o!==null)e:for(;;){if(o===null)return;var g=o.tag;if(g===3||g===4){var b=o.stateNode.containerInfo;if(b===c||b.nodeType===8&&b.parentNode===c)break;if(g===4)for(g=o.return;g!==null;){var j=g.tag;if((j===3||j===4)&&(j=g.stateNode.containerInfo,j===c||j.nodeType===8&&j.parentNode===c))return;g=g.return}for(;b!==null;){if(g=Wc(b),g===null)return;if(j=g.tag,j===5||j===6){o=d=g;continue e}b=b.parentNode}}o=o.return}Jb(function(){var _e=d,er=xb(s),rr=[];e:{var tr=df.get(a);if(tr!==void 0){var nr=td,ar=a;switch(a){case"keypress":if(od(s)===0)break e;case"keydown":case"keyup":nr=Rd;break;case"focusin":ar="focus",nr=Fd;break;case"focusout":ar="blur",nr=Fd;break;case"beforeblur":case"afterblur":nr=Fd;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nr=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nr=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nr=Vd;break;case $e:case af:case bf:nr=Hd;break;case cf:nr=Xd;break;case"scroll":nr=vd;break;case"wheel":nr=Zd;break;case"copy":case"cut":case"paste":nr=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nr=Td}var lr=(e&4)!==0,or=!lr&&a==="scroll",ir=lr?tr!==null?tr+"Capture":null:tr;lr=[];for(var sr=_e,ur;sr!==null;){ur=sr;var cr=ur.stateNode;if(ur.tag===5&&cr!==null&&(ur=cr,ir!==null&&(cr=Kb(sr,ir),cr!=null&&lr.push(tf(sr,cr,ur)))),or)break;sr=sr.return}0<lr.length&&(tr=new nr(tr,ar,null,s,er),rr.push({event:tr,listeners:lr}))}}if(!(e&7)){e:{if(tr=a==="mouseover"||a==="pointerover",nr=a==="mouseout"||a==="pointerout",tr&&s!==wb&&(ar=s.relatedTarget||s.fromElement)&&(Wc(ar)||ar[uf]))break e;if((nr||tr)&&(tr=er.window===er?er:(tr=er.ownerDocument)?tr.defaultView||tr.parentWindow:window,nr?(ar=s.relatedTarget||s.toElement,nr=_e,ar=ar?Wc(ar):null,ar!==null&&(or=Vb(ar),ar!==or||ar.tag!==5&&ar.tag!==6)&&(ar=null)):(nr=null,ar=_e),nr!==ar)){if(lr=Bd,cr="onMouseLeave",ir="onMouseEnter",sr="mouse",(a==="pointerout"||a==="pointerover")&&(lr=Td,cr="onPointerLeave",ir="onPointerEnter",sr="pointer"),or=nr==null?tr:ue(nr),ur=ar==null?tr:ue(ar),tr=new lr(cr,sr+"leave",nr,s,er),tr.target=or,tr.relatedTarget=ur,cr=null,Wc(er)===_e&&(lr=new lr(ir,sr+"enter",ar,s,er),lr.target=ur,lr.relatedTarget=or,cr=lr),or=cr,nr&&ar)r:{for(lr=nr,ir=ar,sr=0,ur=lr;ur;ur=vf(ur))sr++;for(ur=0,cr=ir;cr;cr=vf(cr))ur++;for(;0<sr-ur;)lr=vf(lr),sr--;for(;0<ur-sr;)ir=vf(ir),ur--;for(;sr--;){if(lr===ir||ir!==null&&lr===ir.alternate)break r;lr=vf(lr),ir=vf(ir)}lr=null}else lr=null;nr!==null&&wf(rr,tr,nr,lr,!1),ar!==null&&or!==null&&wf(rr,or,ar,lr,!0)}}e:{if(tr=_e?ue(_e):window,nr=tr.nodeName&&tr.nodeName.toLowerCase(),nr==="select"||nr==="input"&&tr.type==="file")var fr=ve;else if(me(tr))if(we)fr=Fe;else{fr=De$1;var hr=Ce$1}else(nr=tr.nodeName)&&nr.toLowerCase()==="input"&&(tr.type==="checkbox"||tr.type==="radio")&&(fr=Ee$1);if(fr&&(fr=fr(a,_e))){ne(rr,fr,s,er);break e}hr&&hr(a,tr,_e),a==="focusout"&&(hr=tr._wrapperState)&&hr.controlled&&tr.type==="number"&&cb(tr,"number",tr.value)}switch(hr=_e?ue(_e):window,a){case"focusin":(me(hr)||hr.contentEditable==="true")&&(Qe=hr,Re=_e,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(rr,s,er);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(rr,s,er)}var dr;if(ae$1)e:{switch(a){case"compositionstart":var vr="onCompositionStart";break e;case"compositionend":vr="onCompositionEnd";break e;case"compositionupdate":vr="onCompositionUpdate";break e}vr=void 0}else ie$1?ge(a,s)&&(vr="onCompositionEnd"):a==="keydown"&&s.keyCode===229&&(vr="onCompositionStart");vr&&(de$1&&s.locale!=="ko"&&(ie$1||vr!=="onCompositionStart"?vr==="onCompositionEnd"&&ie$1&&(dr=nd()):(kd=er,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),hr=oe(_e,vr),0<hr.length&&(vr=new Ld(vr,a,null,s,er),rr.push({event:vr,listeners:hr}),dr?vr.data=dr:(dr=he$1(s),dr!==null&&(vr.data=dr)))),(dr=ce?je(a,s):ke(a,s))&&(_e=oe(_e,"onBeforeInput"),0<_e.length&&(er=new Ld("onBeforeInput","beforeinput",null,s,er),rr.push({event:er,listeners:_e}),er.data=dr))}se$1(rr,e)})}function tf(a,e,s){return{instance:a,listener:e,currentTarget:s}}function oe(a,e){for(var s=e+"Capture",o=[];a!==null;){var c=a,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=Kb(a,s),d!=null&&o.unshift(tf(a,d,c)),d=Kb(a,e),d!=null&&o.push(tf(a,d,c))),a=a.return}return o}function vf(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function wf(a,e,s,o,c){for(var d=e._reactName,g=[];s!==null&&s!==o;){var b=s,j=b.alternate,_e=b.stateNode;if(j!==null&&j===o)break;b.tag===5&&_e!==null&&(b=_e,c?(j=Kb(s,d),j!=null&&g.unshift(tf(s,j,b))):c||(j=Kb(s,d),j!=null&&g.push(tf(s,j,b)))),s=s.return}g.length!==0&&a.push({event:e,listeners:g})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(a){return(typeof a=="string"?a:""+a).replace(xf,`
`).replace(yf,"")}function Af(a,e,s){if(e=zf(e),zf(a)!==e&&s)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(a,e){return a==="textarea"||a==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(a){return Hf.resolve(null).then(a).catch(If)}:Ff;function If(a){setTimeout(function(){throw a})}function Kf(a,e){var s=e,o=0;do{var c=s.nextSibling;if(a.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"){if(o===0){a.removeChild(c),bd(e);return}o--}else s!=="$"&&s!=="$?"&&s!=="$!"||o++;s=c}while(s);bd(e)}function Lf(a){for(;a!=null;a=a.nextSibling){var e=a.nodeType;if(e===1||e===3)break;if(e===8){if(e=a.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return a}function Mf(a){a=a.previousSibling;for(var e=0;a;){if(a.nodeType===8){var s=a.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return a;e--}else s==="/$"&&e++}a=a.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(a){var e=a[Of];if(e)return e;for(var s=a.parentNode;s;){if(e=s[uf]||s[Of]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(a=Mf(a);a!==null;){if(s=a[Of])return s;a=Mf(a)}return e}a=s,s=a.parentNode}return null}function Cb(a){return a=a[Of]||a[uf],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function ue(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(p$1(33))}function Db(a){return a[Pf]||null}var Sf=[],Tf=-1;function Uf(a){return{current:a}}function E(a){0>Tf||(a.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(a,e){Tf++,Sf[Tf]=a.current,a.current=e}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(a,e){var s=a.type.contextTypes;if(!s)return Vf;var o=a.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in s)c[d]=e[d];return o&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=c),c}function Zf(a){return a=a.childContextTypes,a!=null}function $f(){E(Wf),E(H$1)}function ag(a,e,s){if(H$1.current!==Vf)throw Error(p$1(168));G(H$1,e),G(Wf,s)}function bg(a,e,s){var o=a.stateNode;if(e=e.childContextTypes,typeof o.getChildContext!="function")return s;o=o.getChildContext();for(var c in o)if(!(c in e))throw Error(p$1(108,Ra(a)||"Unknown",c));return A({},s,o)}function cg(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G(H$1,a),G(Wf,Wf.current),!0}function dg(a,e,s){var o=a.stateNode;if(!o)throw Error(p$1(169));s?(a=bg(a,e,Xf),o.__reactInternalMemoizedMergedChildContext=a,E(Wf),E(H$1),G(H$1,a)):E(Wf),G(Wf,s)}var eg=null,fg=!1,gg=!1;function hg(a){eg===null?eg=[a]:eg.push(a)}function ig(a){fg=!0,hg(a)}function jg(){if(!gg&&eg!==null){gg=!0;var a=0,e=C;try{var s=eg;for(C=1;a<s.length;a++){var o=s[a];do o=o(!0);while(o!==null)}eg=null,fg=!1}catch(c){throw eg!==null&&(eg=eg.slice(a+1)),ac(fc,jg),c}finally{C=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(a,e){kg[lg++]=ng,kg[lg++]=mg,mg=a,ng=e}function ug(a,e,s){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=a;var o=rg;a=sg;var c=32-oc(o)-1;o&=~(1<<c),s+=1;var d=32-oc(e)+c;if(30<d){var g=c-c%5;d=(o&(1<<g)-1).toString(32),o>>=g,c-=g,rg=1<<32-oc(e)+c|s<<c|o,sg=d+a}else rg=1<<d|s<<c|o,sg=a}function vg(a){a.return!==null&&(tg(a,1),ug(a,1,0))}function wg(a){for(;a===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;a===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(a,e){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=a,e=a.deletions,e===null?(a.deletions=[s],a.flags|=16):e.push(s)}function Cg(a,e){switch(a.tag){case 5:var s=a.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(a.stateNode=e,xg=a,yg=Lf(e.firstChild),!0):!1;case 6:return e=a.pendingProps===""||e.nodeType!==3?null:e,e!==null?(a.stateNode=e,xg=a,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=qg!==null?{id:rg,overflow:sg}:null,a.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Bg(18,null,null,0),s.stateNode=e,s.return=a,a.child=s,xg=a,yg=null,!0):!1;default:return!1}}function Dg(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Eg(a){if(I){var e=yg;if(e){var s=e;if(!Cg(a,e)){if(Dg(a))throw Error(p$1(418));e=Lf(s.nextSibling);var o=xg;e&&Cg(a,e)?Ag(o,s):(a.flags=a.flags&-4097|2,I=!1,xg=a)}}else{if(Dg(a))throw Error(p$1(418));a.flags=a.flags&-4097|2,I=!1,xg=a}}}function Fg(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;xg=a}function Gg(a){if(a!==xg)return!1;if(!I)return Fg(a),I=!0,!1;var e;if((e=a.tag!==3)&&!(e=a.tag!==5)&&(e=a.type,e=e!=="head"&&e!=="body"&&!Ef(a.type,a.memoizedProps)),e&&(e=yg)){if(Dg(a))throw Hg(),Error(p$1(418));for(;e;)Ag(a,e),e=Lf(e.nextSibling)}if(Fg(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(p$1(317));e:{for(a=a.nextSibling,e=0;a;){if(a.nodeType===8){var s=a.data;if(s==="/$"){if(e===0){yg=Lf(a.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}a=a.nextSibling}yg=null}}else yg=xg?Lf(a.stateNode.nextSibling):null;return!0}function Hg(){for(var a=yg;a;)a=Lf(a.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(a){zg===null?zg=[a]:zg.push(a)}var Kg=ua.ReactCurrentBatchConfig;function Lg(a,e,s){if(a=s.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p$1(309));var o=s.stateNode}if(!o)throw Error(p$1(147,a));var c=o,d=""+a;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===d?e.ref:(e=function(g){var b=c.refs;g===null?delete b[d]:b[d]=g},e._stringRef=d,e)}if(typeof a!="string")throw Error(p$1(284));if(!s._owner)throw Error(p$1(290,a))}return a}function Mg(a,e){throw a=Object.prototype.toString.call(e),Error(p$1(31,a==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":a))}function Ng(a){var e=a._init;return e(a._payload)}function Og(a){function e(ir,sr){if(a){var ur=ir.deletions;ur===null?(ir.deletions=[sr],ir.flags|=16):ur.push(sr)}}function s(ir,sr){if(!a)return null;for(;sr!==null;)e(ir,sr),sr=sr.sibling;return null}function o(ir,sr){for(ir=new Map;sr!==null;)sr.key!==null?ir.set(sr.key,sr):ir.set(sr.index,sr),sr=sr.sibling;return ir}function c(ir,sr){return ir=Pg(ir,sr),ir.index=0,ir.sibling=null,ir}function d(ir,sr,ur){return ir.index=ur,a?(ur=ir.alternate,ur!==null?(ur=ur.index,ur<sr?(ir.flags|=2,sr):ur):(ir.flags|=2,sr)):(ir.flags|=1048576,sr)}function g(ir){return a&&ir.alternate===null&&(ir.flags|=2),ir}function b(ir,sr,ur,cr){return sr===null||sr.tag!==6?(sr=Qg(ur,ir.mode,cr),sr.return=ir,sr):(sr=c(sr,ur),sr.return=ir,sr)}function j(ir,sr,ur,cr){var fr=ur.type;return fr===ya?er(ir,sr,ur.props.children,cr,ur.key):sr!==null&&(sr.elementType===fr||typeof fr=="object"&&fr!==null&&fr.$$typeof===Ha&&Ng(fr)===sr.type)?(cr=c(sr,ur.props),cr.ref=Lg(ir,sr,ur),cr.return=ir,cr):(cr=Rg(ur.type,ur.key,ur.props,null,ir.mode,cr),cr.ref=Lg(ir,sr,ur),cr.return=ir,cr)}function _e(ir,sr,ur,cr){return sr===null||sr.tag!==4||sr.stateNode.containerInfo!==ur.containerInfo||sr.stateNode.implementation!==ur.implementation?(sr=Sg(ur,ir.mode,cr),sr.return=ir,sr):(sr=c(sr,ur.children||[]),sr.return=ir,sr)}function er(ir,sr,ur,cr,fr){return sr===null||sr.tag!==7?(sr=Tg(ur,ir.mode,cr,fr),sr.return=ir,sr):(sr=c(sr,ur),sr.return=ir,sr)}function rr(ir,sr,ur){if(typeof sr=="string"&&sr!==""||typeof sr=="number")return sr=Qg(""+sr,ir.mode,ur),sr.return=ir,sr;if(typeof sr=="object"&&sr!==null){switch(sr.$$typeof){case va:return ur=Rg(sr.type,sr.key,sr.props,null,ir.mode,ur),ur.ref=Lg(ir,null,sr),ur.return=ir,ur;case wa:return sr=Sg(sr,ir.mode,ur),sr.return=ir,sr;case Ha:var cr=sr._init;return rr(ir,cr(sr._payload),ur)}if(eb(sr)||Ka(sr))return sr=Tg(sr,ir.mode,ur,null),sr.return=ir,sr;Mg(ir,sr)}return null}function tr(ir,sr,ur,cr){var fr=sr!==null?sr.key:null;if(typeof ur=="string"&&ur!==""||typeof ur=="number")return fr!==null?null:b(ir,sr,""+ur,cr);if(typeof ur=="object"&&ur!==null){switch(ur.$$typeof){case va:return ur.key===fr?j(ir,sr,ur,cr):null;case wa:return ur.key===fr?_e(ir,sr,ur,cr):null;case Ha:return fr=ur._init,tr(ir,sr,fr(ur._payload),cr)}if(eb(ur)||Ka(ur))return fr!==null?null:er(ir,sr,ur,cr,null);Mg(ir,ur)}return null}function nr(ir,sr,ur,cr,fr){if(typeof cr=="string"&&cr!==""||typeof cr=="number")return ir=ir.get(ur)||null,b(sr,ir,""+cr,fr);if(typeof cr=="object"&&cr!==null){switch(cr.$$typeof){case va:return ir=ir.get(cr.key===null?ur:cr.key)||null,j(sr,ir,cr,fr);case wa:return ir=ir.get(cr.key===null?ur:cr.key)||null,_e(sr,ir,cr,fr);case Ha:var hr=cr._init;return nr(ir,sr,ur,hr(cr._payload),fr)}if(eb(cr)||Ka(cr))return ir=ir.get(ur)||null,er(sr,ir,cr,fr,null);Mg(sr,cr)}return null}function ar(ir,sr,ur,cr){for(var fr=null,hr=null,dr=sr,vr=sr=0,gr=null;dr!==null&&vr<ur.length;vr++){dr.index>vr?(gr=dr,dr=null):gr=dr.sibling;var pr=tr(ir,dr,ur[vr],cr);if(pr===null){dr===null&&(dr=gr);break}a&&dr&&pr.alternate===null&&e(ir,dr),sr=d(pr,sr,vr),hr===null?fr=pr:hr.sibling=pr,hr=pr,dr=gr}if(vr===ur.length)return s(ir,dr),I&&tg(ir,vr),fr;if(dr===null){for(;vr<ur.length;vr++)dr=rr(ir,ur[vr],cr),dr!==null&&(sr=d(dr,sr,vr),hr===null?fr=dr:hr.sibling=dr,hr=dr);return I&&tg(ir,vr),fr}for(dr=o(ir,dr);vr<ur.length;vr++)gr=nr(dr,ir,vr,ur[vr],cr),gr!==null&&(a&&gr.alternate!==null&&dr.delete(gr.key===null?vr:gr.key),sr=d(gr,sr,vr),hr===null?fr=gr:hr.sibling=gr,hr=gr);return a&&dr.forEach(function(mr){return e(ir,mr)}),I&&tg(ir,vr),fr}function lr(ir,sr,ur,cr){var fr=Ka(ur);if(typeof fr!="function")throw Error(p$1(150));if(ur=fr.call(ur),ur==null)throw Error(p$1(151));for(var hr=fr=null,dr=sr,vr=sr=0,gr=null,pr=ur.next();dr!==null&&!pr.done;vr++,pr=ur.next()){dr.index>vr?(gr=dr,dr=null):gr=dr.sibling;var mr=tr(ir,dr,pr.value,cr);if(mr===null){dr===null&&(dr=gr);break}a&&dr&&mr.alternate===null&&e(ir,dr),sr=d(mr,sr,vr),hr===null?fr=mr:hr.sibling=mr,hr=mr,dr=gr}if(pr.done)return s(ir,dr),I&&tg(ir,vr),fr;if(dr===null){for(;!pr.done;vr++,pr=ur.next())pr=rr(ir,pr.value,cr),pr!==null&&(sr=d(pr,sr,vr),hr===null?fr=pr:hr.sibling=pr,hr=pr);return I&&tg(ir,vr),fr}for(dr=o(ir,dr);!pr.done;vr++,pr=ur.next())pr=nr(dr,ir,vr,pr.value,cr),pr!==null&&(a&&pr.alternate!==null&&dr.delete(pr.key===null?vr:pr.key),sr=d(pr,sr,vr),hr===null?fr=pr:hr.sibling=pr,hr=pr);return a&&dr.forEach(function(yr){return e(ir,yr)}),I&&tg(ir,vr),fr}function or(ir,sr,ur,cr){if(typeof ur=="object"&&ur!==null&&ur.type===ya&&ur.key===null&&(ur=ur.props.children),typeof ur=="object"&&ur!==null){switch(ur.$$typeof){case va:e:{for(var fr=ur.key,hr=sr;hr!==null;){if(hr.key===fr){if(fr=ur.type,fr===ya){if(hr.tag===7){s(ir,hr.sibling),sr=c(hr,ur.props.children),sr.return=ir,ir=sr;break e}}else if(hr.elementType===fr||typeof fr=="object"&&fr!==null&&fr.$$typeof===Ha&&Ng(fr)===hr.type){s(ir,hr.sibling),sr=c(hr,ur.props),sr.ref=Lg(ir,hr,ur),sr.return=ir,ir=sr;break e}s(ir,hr);break}else e(ir,hr);hr=hr.sibling}ur.type===ya?(sr=Tg(ur.props.children,ir.mode,cr,ur.key),sr.return=ir,ir=sr):(cr=Rg(ur.type,ur.key,ur.props,null,ir.mode,cr),cr.ref=Lg(ir,sr,ur),cr.return=ir,ir=cr)}return g(ir);case wa:e:{for(hr=ur.key;sr!==null;){if(sr.key===hr)if(sr.tag===4&&sr.stateNode.containerInfo===ur.containerInfo&&sr.stateNode.implementation===ur.implementation){s(ir,sr.sibling),sr=c(sr,ur.children||[]),sr.return=ir,ir=sr;break e}else{s(ir,sr);break}else e(ir,sr);sr=sr.sibling}sr=Sg(ur,ir.mode,cr),sr.return=ir,ir=sr}return g(ir);case Ha:return hr=ur._init,or(ir,sr,hr(ur._payload),cr)}if(eb(ur))return ar(ir,sr,ur,cr);if(Ka(ur))return lr(ir,sr,ur,cr);Mg(ir,ur)}return typeof ur=="string"&&ur!==""||typeof ur=="number"?(ur=""+ur,sr!==null&&sr.tag===6?(s(ir,sr.sibling),sr=c(sr,ur),sr.return=ir,ir=sr):(s(ir,sr),sr=Qg(ur,ir.mode,cr),sr.return=ir,ir=sr),g(ir)):s(ir,sr)}return or}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(a){var e=Wg.current;E(Wg),a._currentValue=e}function bh(a,e,s){for(;a!==null;){var o=a.alternate;if((a.childLanes&e)!==e?(a.childLanes|=e,o!==null&&(o.childLanes|=e)):o!==null&&(o.childLanes&e)!==e&&(o.childLanes|=e),a===s)break;a=a.return}}function ch(a,e){Xg=a,Zg=Yg=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&e&&(dh=!0),a.firstContext=null)}function eh(a){var e=a._currentValue;if(Zg!==a)if(a={context:a,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p$1(308));Yg=a,Xg.dependencies={lanes:0,firstContext:a}}else Yg=Yg.next=a;return e}var fh=null;function gh(a){fh===null?fh=[a]:fh.push(a)}function hh(a,e,s,o){var c=e.interleaved;return c===null?(s.next=s,gh(e)):(s.next=c.next,c.next=s),e.interleaved=s,ih(a,o)}function ih(a,e){a.lanes|=e;var s=a.alternate;for(s!==null&&(s.lanes|=e),s=a,a=a.return;a!==null;)a.childLanes|=e,s=a.alternate,s!==null&&(s.childLanes|=e),s=a,a=a.return;return s.tag===3?s.stateNode:null}var jh=!1;function kh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(a,e){a=a.updateQueue,e.updateQueue===a&&(e.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function mh(a,e){return{eventTime:a,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(a,e,s){var o=a.updateQueue;if(o===null)return null;if(o=o.shared,K$1&2){var c=o.pending;return c===null?e.next=e:(e.next=c.next,c.next=e),o.pending=e,ih(a,s)}return c=o.interleaved,c===null?(e.next=e,gh(o)):(e.next=c.next,c.next=e),o.interleaved=e,ih(a,s)}function oh(a,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var o=e.lanes;o&=a.pendingLanes,s|=o,e.lanes=s,Cc(a,s)}}function ph(a,e){var s=a.updateQueue,o=a.alternate;if(o!==null&&(o=o.updateQueue,s===o)){var c=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var g={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};d===null?c=d=g:d=d.next=g,s=s.next}while(s!==null);d===null?c=d=e:d=d.next=e}else c=d=e;s={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:o.shared,effects:o.effects},a.updateQueue=s;return}a=s.lastBaseUpdate,a===null?s.firstBaseUpdate=e:a.next=e,s.lastBaseUpdate=e}function qh(a,e,s,o){var c=a.updateQueue;jh=!1;var d=c.firstBaseUpdate,g=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var j=b,_e=j.next;j.next=null,g===null?d=_e:g.next=_e,g=j;var er=a.alternate;er!==null&&(er=er.updateQueue,b=er.lastBaseUpdate,b!==g&&(b===null?er.firstBaseUpdate=_e:b.next=_e,er.lastBaseUpdate=j))}if(d!==null){var rr=c.baseState;g=0,er=_e=j=null,b=d;do{var tr=b.lane,nr=b.eventTime;if((o&tr)===tr){er!==null&&(er=er.next={eventTime:nr,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var ar=a,lr=b;switch(tr=e,nr=s,lr.tag){case 1:if(ar=lr.payload,typeof ar=="function"){rr=ar.call(nr,rr,tr);break e}rr=ar;break e;case 3:ar.flags=ar.flags&-65537|128;case 0:if(ar=lr.payload,tr=typeof ar=="function"?ar.call(nr,rr,tr):ar,tr==null)break e;rr=A({},rr,tr);break e;case 2:jh=!0}}b.callback!==null&&b.lane!==0&&(a.flags|=64,tr=c.effects,tr===null?c.effects=[b]:tr.push(b))}else nr={eventTime:nr,lane:tr,tag:b.tag,payload:b.payload,callback:b.callback,next:null},er===null?(_e=er=nr,j=rr):er=er.next=nr,g|=tr;if(b=b.next,b===null){if(b=c.shared.pending,b===null)break;tr=b,b=tr.next,tr.next=null,c.lastBaseUpdate=tr,c.shared.pending=null}}while(!0);if(er===null&&(j=rr),c.baseState=j,c.firstBaseUpdate=_e,c.lastBaseUpdate=er,e=c.shared.interleaved,e!==null){c=e;do g|=c.lane,c=c.next;while(c!==e)}else d===null&&(c.shared.lanes=0);rh|=g,a.lanes=g,a.memoizedState=rr}}function sh(a,e,s){if(a=e.effects,e.effects=null,a!==null)for(e=0;e<a.length;e++){var o=a[e],c=o.callback;if(c!==null){if(o.callback=null,o=s,typeof c!="function")throw Error(p$1(191,c));c.call(o)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(a){if(a===th)throw Error(p$1(174));return a}function yh(a,e){switch(G(wh,e),G(vh,a),G(uh,th),a=e.nodeType,a){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:a=a===8?e.parentNode:e,e=a.namespaceURI||null,a=a.tagName,e=lb(e,a)}E(uh),G(uh,e)}function zh(){E(uh),E(vh),E(wh)}function Ah(a){xh(wh.current);var e=xh(uh.current),s=lb(e,a.type);e!==s&&(G(vh,a),G(uh,s))}function Bh(a){vh.current===a&&(E(uh),E(vh))}var L=Uf(0);function Ch(a){for(var e=a;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break;for(;e.sibling===null;){if(e.return===null||e.return===a)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var a=0;a<Dh.length;a++)Dh[a]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p$1(321))}function Mh(a,e){if(e===null)return!1;for(var s=0;s<e.length&&s<a.length;s++)if(!He$1(a[s],e[s]))return!1;return!0}function Nh(a,e,s,o,c,d){if(Hh=d,M=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=a===null||a.memoizedState===null?Oh:Ph,a=s(o,c),Jh){d=0;do{if(Jh=!1,Kh=0,25<=d)throw Error(p$1(301));d+=1,O=N=null,e.updateQueue=null,Fh.current=Qh,a=s(o,c)}while(Jh)}if(Fh.current=Rh,e=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,e)throw Error(p$1(300));return a}function Sh(){var a=Kh!==0;return Kh=0,a}function Th(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=a:O=O.next=a,O}function Uh(){if(N===null){var a=M.alternate;a=a!==null?a.memoizedState:null}else a=N.next;var e=O===null?M.memoizedState:O.next;if(e!==null)O=e,N=a;else{if(a===null)throw Error(p$1(310));N=a,a={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=a:O=O.next=a}return O}function Vh(a,e){return typeof e=="function"?e(a):e}function Wh(a){var e=Uh(),s=e.queue;if(s===null)throw Error(p$1(311));s.lastRenderedReducer=a;var o=N,c=o.baseQueue,d=s.pending;if(d!==null){if(c!==null){var g=c.next;c.next=d.next,d.next=g}o.baseQueue=c=d,s.pending=null}if(c!==null){d=c.next,o=o.baseState;var b=g=null,j=null,_e=d;do{var er=_e.lane;if((Hh&er)===er)j!==null&&(j=j.next={lane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),o=_e.hasEagerState?_e.eagerState:a(o,_e.action);else{var rr={lane:er,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null};j===null?(b=j=rr,g=o):j=j.next=rr,M.lanes|=er,rh|=er}_e=_e.next}while(_e!==null&&_e!==d);j===null?g=o:j.next=b,He$1(o,e.memoizedState)||(dh=!0),e.memoizedState=o,e.baseState=g,e.baseQueue=j,s.lastRenderedState=o}if(a=s.interleaved,a!==null){c=a;do d=c.lane,M.lanes|=d,rh|=d,c=c.next;while(c!==a)}else c===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Xh(a){var e=Uh(),s=e.queue;if(s===null)throw Error(p$1(311));s.lastRenderedReducer=a;var o=s.dispatch,c=s.pending,d=e.memoizedState;if(c!==null){s.pending=null;var g=c=c.next;do d=a(d,g.action),g=g.next;while(g!==c);He$1(d,e.memoizedState)||(dh=!0),e.memoizedState=d,e.baseQueue===null&&(e.baseState=d),s.lastRenderedState=d}return[d,o]}function Yh(){}function Zh(a,e){var s=M,o=Uh(),c=e(),d=!He$1(o.memoizedState,c);if(d&&(o.memoizedState=c,dh=!0),o=o.queue,$h(ai.bind(null,s,o,a),[a]),o.getSnapshot!==e||d||O!==null&&O.memoizedState.tag&1){if(s.flags|=2048,bi(9,ci.bind(null,s,o,c,e),void 0,null),Q===null)throw Error(p$1(349));Hh&30||di(s,e,c)}return c}function di(a,e,s){a.flags|=16384,a={getSnapshot:e,value:s},e=M.updateQueue,e===null?(e={lastEffect:null,stores:null},M.updateQueue=e,e.stores=[a]):(s=e.stores,s===null?e.stores=[a]:s.push(a))}function ci(a,e,s,o){e.value=s,e.getSnapshot=o,ei(e)&&fi(a)}function ai(a,e,s){return s(function(){ei(e)&&fi(a)})}function ei(a){var e=a.getSnapshot;a=a.value;try{var s=e();return!He$1(a,s)}catch{return!0}}function fi(a){var e=ih(a,1);e!==null&&gi(e,a,1,-1)}function hi(a){var e=Th();return typeof a=="function"&&(a=a()),e.memoizedState=e.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:a},e.queue=a,a=a.dispatch=ii.bind(null,M,a),[e.memoizedState,a]}function bi(a,e,s,o){return a={tag:a,create:e,destroy:s,deps:o,next:null},e=M.updateQueue,e===null?(e={lastEffect:null,stores:null},M.updateQueue=e,e.lastEffect=a.next=a):(s=e.lastEffect,s===null?e.lastEffect=a.next=a:(o=s.next,s.next=a,a.next=o,e.lastEffect=a)),a}function ji(){return Uh().memoizedState}function ki(a,e,s,o){var c=Th();M.flags|=a,c.memoizedState=bi(1|e,s,void 0,o===void 0?null:o)}function li(a,e,s,o){var c=Uh();o=o===void 0?null:o;var d=void 0;if(N!==null){var g=N.memoizedState;if(d=g.destroy,o!==null&&Mh(o,g.deps)){c.memoizedState=bi(e,s,d,o);return}}M.flags|=a,c.memoizedState=bi(1|e,s,d,o)}function mi(a,e){return ki(8390656,8,a,e)}function $h(a,e){return li(2048,8,a,e)}function ni(a,e){return li(4,2,a,e)}function oi(a,e){return li(4,4,a,e)}function pi(a,e){if(typeof e=="function")return a=a(),e(a),function(){e(null)};if(e!=null)return a=a(),e.current=a,function(){e.current=null}}function qi(a,e,s){return s=s!=null?s.concat([a]):null,li(4,4,pi.bind(null,e,a),s)}function ri(){}function si(a,e){var s=Uh();e=e===void 0?null:e;var o=s.memoizedState;return o!==null&&e!==null&&Mh(e,o[1])?o[0]:(s.memoizedState=[a,e],a)}function ti(a,e){var s=Uh();e=e===void 0?null:e;var o=s.memoizedState;return o!==null&&e!==null&&Mh(e,o[1])?o[0]:(a=a(),s.memoizedState=[a,e],a)}function ui(a,e,s){return Hh&21?(He$1(s,e)||(s=yc(),M.lanes|=s,rh|=s,a.baseState=!0),e):(a.baseState&&(a.baseState=!1,dh=!0),a.memoizedState=s)}function vi(a,e){var s=C;C=s!==0&&4>s?s:4,a(!0);var o=Gh.transition;Gh.transition={};try{a(!1),e()}finally{C=s,Gh.transition=o}}function wi(){return Uh().memoizedState}function xi(a,e,s){var o=yi(a);if(s={lane:o,action:s,hasEagerState:!1,eagerState:null,next:null},zi(a))Ai(e,s);else if(s=hh(a,e,s,o),s!==null){var c=R();gi(s,a,o,c),Bi(s,e,o)}}function ii(a,e,s){var o=yi(a),c={lane:o,action:s,hasEagerState:!1,eagerState:null,next:null};if(zi(a))Ai(e,c);else{var d=a.alternate;if(a.lanes===0&&(d===null||d.lanes===0)&&(d=e.lastRenderedReducer,d!==null))try{var g=e.lastRenderedState,b=d(g,s);if(c.hasEagerState=!0,c.eagerState=b,He$1(b,g)){var j=e.interleaved;j===null?(c.next=c,gh(e)):(c.next=j.next,j.next=c),e.interleaved=c;return}}catch{}finally{}s=hh(a,e,c,o),s!==null&&(c=R(),gi(s,a,o,c),Bi(s,e,o))}}function zi(a){var e=a.alternate;return a===M||e!==null&&e===M}function Ai(a,e){Jh=Ih=!0;var s=a.pending;s===null?e.next=e:(e.next=s.next,s.next=e),a.pending=e}function Bi(a,e,s){if(s&4194240){var o=e.lanes;o&=a.pendingLanes,s|=o,e.lanes=s,Cc(a,s)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(a,e){return Th().memoizedState=[a,e===void 0?null:e],a},useContext:eh,useEffect:mi,useImperativeHandle:function(a,e,s){return s=s!=null?s.concat([a]):null,ki(4194308,4,pi.bind(null,e,a),s)},useLayoutEffect:function(a,e){return ki(4194308,4,a,e)},useInsertionEffect:function(a,e){return ki(4,2,a,e)},useMemo:function(a,e){var s=Th();return e=e===void 0?null:e,a=a(),s.memoizedState=[a,e],a},useReducer:function(a,e,s){var o=Th();return e=s!==void 0?s(e):e,o.memoizedState=o.baseState=e,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:e},o.queue=a,a=a.dispatch=xi.bind(null,M,a),[o.memoizedState,a]},useRef:function(a){var e=Th();return a={current:a},e.memoizedState=a},useState:hi,useDebugValue:ri,useDeferredValue:function(a){return Th().memoizedState=a},useTransition:function(){var a=hi(!1),e=a[0];return a=vi.bind(null,a[1]),Th().memoizedState=a,[e,a]},useMutableSource:function(){},useSyncExternalStore:function(a,e,s){var o=M,c=Th();if(I){if(s===void 0)throw Error(p$1(407));s=s()}else{if(s=e(),Q===null)throw Error(p$1(349));Hh&30||di(o,e,s)}c.memoizedState=s;var d={value:s,getSnapshot:e};return c.queue=d,mi(ai.bind(null,o,d,a),[a]),o.flags|=2048,bi(9,ci.bind(null,o,d,s,e),void 0,null),s},useId:function(){var a=Th(),e=Q.identifierPrefix;if(I){var s=sg,o=rg;s=(o&~(1<<32-oc(o)-1)).toString(32)+s,e=":"+e+"R"+s,s=Kh++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Lh++,e=":"+e+"r"+s.toString(32)+":";return a.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(a){var e=Uh();return ui(e,N.memoizedState,a)},useTransition:function(){var a=Wh(Vh)[0],e=Uh().memoizedState;return[a,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(a){var e=Uh();return N===null?e.memoizedState=a:ui(e,N.memoizedState,a)},useTransition:function(){var a=Xh(Vh)[0],e=Uh().memoizedState;return[a,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(a,e){if(a&&a.defaultProps){e=A({},e),a=a.defaultProps;for(var s in a)e[s]===void 0&&(e[s]=a[s]);return e}return e}function Di(a,e,s,o){e=a.memoizedState,s=s(o,e),s=s==null?e:A({},e,s),a.memoizedState=s,a.lanes===0&&(a.updateQueue.baseState=s)}var Ei={isMounted:function(a){return(a=a._reactInternals)?Vb(a)===a:!1},enqueueSetState:function(a,e,s){a=a._reactInternals;var o=R(),c=yi(a),d=mh(o,c);d.payload=e,s!=null&&(d.callback=s),e=nh(a,d,c),e!==null&&(gi(e,a,c,o),oh(e,a,c))},enqueueReplaceState:function(a,e,s){a=a._reactInternals;var o=R(),c=yi(a),d=mh(o,c);d.tag=1,d.payload=e,s!=null&&(d.callback=s),e=nh(a,d,c),e!==null&&(gi(e,a,c,o),oh(e,a,c))},enqueueForceUpdate:function(a,e){a=a._reactInternals;var s=R(),o=yi(a),c=mh(s,o);c.tag=2,e!=null&&(c.callback=e),e=nh(a,c,o),e!==null&&(gi(e,a,o,s),oh(e,a,o))}};function Fi(a,e,s,o,c,d,g){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(o,d,g):e.prototype&&e.prototype.isPureReactComponent?!Ie(s,o)||!Ie(c,d):!0}function Gi(a,e,s){var o=!1,c=Vf,d=e.contextType;return typeof d=="object"&&d!==null?d=eh(d):(c=Zf(e)?Xf:H$1.current,o=e.contextTypes,d=(o=o!=null)?Yf(a,c):Vf),e=new e(s,d),a.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,a.stateNode=e,e._reactInternals=a,o&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=d),e}function Hi(a,e,s,o){a=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,o),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,o),e.state!==a&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(a,e,s,o){var c=a.stateNode;c.props=s,c.state=a.memoizedState,c.refs={},kh(a);var d=e.contextType;typeof d=="object"&&d!==null?c.context=eh(d):(d=Zf(e)?Xf:H$1.current,c.context=Yf(a,d)),c.state=a.memoizedState,d=e.getDerivedStateFromProps,typeof d=="function"&&(Di(a,e,d,s),c.state=a.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(e=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),e!==c.state&&Ei.enqueueReplaceState(c,c.state,null),qh(a,s,c,o),c.state=a.memoizedState),typeof c.componentDidMount=="function"&&(a.flags|=4194308)}function Ji(a,e){try{var s="",o=e;do s+=Pa(o),o=o.return;while(o);var c=s}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:a,source:e,stack:c,digest:null}}function Ki(a,e,s){return{value:a,source:null,stack:s??null,digest:e??null}}function Li(a,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(a,e,s){s=mh(-1,s),s.tag=3,s.payload={element:null};var o=e.value;return s.callback=function(){Oi||(Oi=!0,Pi=o),Li(a,e)},s}function Qi(a,e,s){s=mh(-1,s),s.tag=3;var o=a.type.getDerivedStateFromError;if(typeof o=="function"){var c=e.value;s.payload=function(){return o(c)},s.callback=function(){Li(a,e)}}var d=a.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(s.callback=function(){Li(a,e),typeof o!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var g=e.stack;this.componentDidCatch(e.value,{componentStack:g!==null?g:""})}),s}function Si(a,e,s){var o=a.pingCache;if(o===null){o=a.pingCache=new Mi;var c=new Set;o.set(e,c)}else c=o.get(e),c===void 0&&(c=new Set,o.set(e,c));c.has(s)||(c.add(s),a=Ti.bind(null,a,e,s),e.then(a,a))}function Ui(a){do{var e;if((e=a.tag===13)&&(e=a.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return a;a=a.return}while(a!==null);return null}function Vi(a,e,s,o,c){return a.mode&1?(a.flags|=65536,a.lanes=c,a):(a===e?a.flags|=65536:(a.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=mh(-1,1),e.tag=2,nh(s,e,1))),s.lanes|=1),a)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(a,e,s,o){e.child=a===null?Vg(e,null,s,o):Ug(e,a.child,s,o)}function Yi(a,e,s,o,c){s=s.render;var d=e.ref;return ch(e,c),o=Nh(a,e,s,o,d,c),s=Sh(),a!==null&&!dh?(e.updateQueue=a.updateQueue,e.flags&=-2053,a.lanes&=~c,Zi(a,e,c)):(I&&s&&vg(e),e.flags|=1,Xi(a,e,o,c),e.child)}function $i(a,e,s,o,c){if(a===null){var d=s.type;return typeof d=="function"&&!aj(d)&&d.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=d,bj(a,e,d,o,c)):(a=Rg(s.type,null,o,e,e.mode,c),a.ref=e.ref,a.return=e,e.child=a)}if(d=a.child,!(a.lanes&c)){var g=d.memoizedProps;if(s=s.compare,s=s!==null?s:Ie,s(g,o)&&a.ref===e.ref)return Zi(a,e,c)}return e.flags|=1,a=Pg(d,o),a.ref=e.ref,a.return=e,e.child=a}function bj(a,e,s,o,c){if(a!==null){var d=a.memoizedProps;if(Ie(d,o)&&a.ref===e.ref)if(dh=!1,e.pendingProps=o=d,(a.lanes&c)!==0)a.flags&131072&&(dh=!0);else return e.lanes=a.lanes,Zi(a,e,c)}return cj(a,e,s,o,c)}function dj(a,e,s){var o=e.pendingProps,c=o.children,d=a!==null?a.memoizedState:null;if(o.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=s;else{if(!(s&1073741824))return a=d!==null?d.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:a,cachePool:null,transitions:null},e.updateQueue=null,G(ej,fj),fj|=a,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=d!==null?d.baseLanes:s,G(ej,fj),fj|=o}else d!==null?(o=d.baseLanes|s,e.memoizedState=null):o=s,G(ej,fj),fj|=o;return Xi(a,e,c,s),e.child}function gj(a,e){var s=e.ref;(a===null&&s!==null||a!==null&&a.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function cj(a,e,s,o,c){var d=Zf(s)?Xf:H$1.current;return d=Yf(e,d),ch(e,c),s=Nh(a,e,s,o,d,c),o=Sh(),a!==null&&!dh?(e.updateQueue=a.updateQueue,e.flags&=-2053,a.lanes&=~c,Zi(a,e,c)):(I&&o&&vg(e),e.flags|=1,Xi(a,e,s,c),e.child)}function hj(a,e,s,o,c){if(Zf(s)){var d=!0;cg(e)}else d=!1;if(ch(e,c),e.stateNode===null)ij(a,e),Gi(e,s,o),Ii(e,s,o,c),o=!0;else if(a===null){var g=e.stateNode,b=e.memoizedProps;g.props=b;var j=g.context,_e=s.contextType;typeof _e=="object"&&_e!==null?_e=eh(_e):(_e=Zf(s)?Xf:H$1.current,_e=Yf(e,_e));var er=s.getDerivedStateFromProps,rr=typeof er=="function"||typeof g.getSnapshotBeforeUpdate=="function";rr||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==o||j!==_e)&&Hi(e,g,o,_e),jh=!1;var tr=e.memoizedState;g.state=tr,qh(e,o,g,c),j=e.memoizedState,b!==o||tr!==j||Wf.current||jh?(typeof er=="function"&&(Di(e,s,er,o),j=e.memoizedState),(b=jh||Fi(e,s,b,o,tr,j,_e))?(rr||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(e.flags|=4194308)):(typeof g.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=o,e.memoizedState=j),g.props=o,g.state=j,g.context=_e,o=b):(typeof g.componentDidMount=="function"&&(e.flags|=4194308),o=!1)}else{g=e.stateNode,lh(a,e),b=e.memoizedProps,_e=e.type===e.elementType?b:Ci(e.type,b),g.props=_e,rr=e.pendingProps,tr=g.context,j=s.contextType,typeof j=="object"&&j!==null?j=eh(j):(j=Zf(s)?Xf:H$1.current,j=Yf(e,j));var nr=s.getDerivedStateFromProps;(er=typeof nr=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==rr||tr!==j)&&Hi(e,g,o,j),jh=!1,tr=e.memoizedState,g.state=tr,qh(e,o,g,c);var ar=e.memoizedState;b!==rr||tr!==ar||Wf.current||jh?(typeof nr=="function"&&(Di(e,s,nr,o),ar=e.memoizedState),(_e=jh||Fi(e,s,_e,o,tr,ar,j)||!1)?(er||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,ar,j),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,ar,j)),typeof g.componentDidUpdate=="function"&&(e.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===a.memoizedProps&&tr===a.memoizedState||(e.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===a.memoizedProps&&tr===a.memoizedState||(e.flags|=1024),e.memoizedProps=o,e.memoizedState=ar),g.props=o,g.state=ar,g.context=j,o=_e):(typeof g.componentDidUpdate!="function"||b===a.memoizedProps&&tr===a.memoizedState||(e.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===a.memoizedProps&&tr===a.memoizedState||(e.flags|=1024),o=!1)}return jj(a,e,s,o,d,c)}function jj(a,e,s,o,c,d){gj(a,e);var g=(e.flags&128)!==0;if(!o&&!g)return c&&dg(e,s,!1),Zi(a,e,d);o=e.stateNode,Wi.current=e;var b=g&&typeof s.getDerivedStateFromError!="function"?null:o.render();return e.flags|=1,a!==null&&g?(e.child=Ug(e,a.child,null,d),e.child=Ug(e,null,b,d)):Xi(a,e,b,d),e.memoizedState=o.state,c&&dg(e,s,!0),e.child}function kj(a){var e=a.stateNode;e.pendingContext?ag(a,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(a,e.context,!1),yh(a,e.containerInfo)}function lj(a,e,s,o,c){return Ig(),Jg(c),e.flags|=256,Xi(a,e,s,o),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(a){return{baseLanes:a,cachePool:null,transitions:null}}function oj(a,e,s){var o=e.pendingProps,c=L.current,d=!1,g=(e.flags&128)!==0,b;if((b=g)||(b=a!==null&&a.memoizedState===null?!1:(c&2)!==0),b?(d=!0,e.flags&=-129):(a===null||a.memoizedState!==null)&&(c|=1),G(L,c&1),a===null)return Eg(e),a=e.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(e.mode&1?a.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(g=o.children,a=o.fallback,d?(o=e.mode,d=e.child,g={mode:"hidden",children:g},!(o&1)&&d!==null?(d.childLanes=0,d.pendingProps=g):d=pj(g,o,0,null),a=Tg(a,o,s,null),d.return=e,a.return=e,d.sibling=a,e.child=d,e.child.memoizedState=nj(s),e.memoizedState=mj,a):qj(e,g));if(c=a.memoizedState,c!==null&&(b=c.dehydrated,b!==null))return rj(a,e,g,o,b,c,s);if(d){d=o.fallback,g=e.mode,c=a.child,b=c.sibling;var j={mode:"hidden",children:o.children};return!(g&1)&&e.child!==c?(o=e.child,o.childLanes=0,o.pendingProps=j,e.deletions=null):(o=Pg(c,j),o.subtreeFlags=c.subtreeFlags&14680064),b!==null?d=Pg(b,d):(d=Tg(d,g,s,null),d.flags|=2),d.return=e,o.return=e,o.sibling=d,e.child=o,o=d,d=e.child,g=a.child.memoizedState,g=g===null?nj(s):{baseLanes:g.baseLanes|s,cachePool:null,transitions:g.transitions},d.memoizedState=g,d.childLanes=a.childLanes&~s,e.memoizedState=mj,o}return d=a.child,a=d.sibling,o=Pg(d,{mode:"visible",children:o.children}),!(e.mode&1)&&(o.lanes=s),o.return=e,o.sibling=null,a!==null&&(s=e.deletions,s===null?(e.deletions=[a],e.flags|=16):s.push(a)),e.child=o,e.memoizedState=null,o}function qj(a,e){return e=pj({mode:"visible",children:e},a.mode,0,null),e.return=a,a.child=e}function sj(a,e,s,o){return o!==null&&Jg(o),Ug(e,a.child,null,s),a=qj(e,e.pendingProps.children),a.flags|=2,e.memoizedState=null,a}function rj(a,e,s,o,c,d,g){if(s)return e.flags&256?(e.flags&=-257,o=Ki(Error(p$1(422))),sj(a,e,g,o)):e.memoizedState!==null?(e.child=a.child,e.flags|=128,null):(d=o.fallback,c=e.mode,o=pj({mode:"visible",children:o.children},c,0,null),d=Tg(d,c,g,null),d.flags|=2,o.return=e,d.return=e,o.sibling=d,e.child=o,e.mode&1&&Ug(e,a.child,null,g),e.child.memoizedState=nj(g),e.memoizedState=mj,d);if(!(e.mode&1))return sj(a,e,g,null);if(c.data==="$!"){if(o=c.nextSibling&&c.nextSibling.dataset,o)var b=o.dgst;return o=b,d=Error(p$1(419)),o=Ki(d,o,void 0),sj(a,e,g,o)}if(b=(g&a.childLanes)!==0,dh||b){if(o=Q,o!==null){switch(g&-g){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(o.suspendedLanes|g)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,ih(a,c),gi(o,a,c,-1))}return tj(),o=Ki(Error(p$1(421))),sj(a,e,g,o)}return c.data==="$?"?(e.flags|=128,e.child=a.child,e=uj.bind(null,a),c._reactRetry=e,null):(a=d.treeContext,yg=Lf(c.nextSibling),xg=e,I=!0,zg=null,a!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=a.id,sg=a.overflow,qg=e),e=qj(e,o.children),e.flags|=4096,e)}function vj(a,e,s){a.lanes|=e;var o=a.alternate;o!==null&&(o.lanes|=e),bh(a.return,e,s)}function wj(a,e,s,o,c){var d=a.memoizedState;d===null?a.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:s,tailMode:c}:(d.isBackwards=e,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=s,d.tailMode=c)}function xj(a,e,s){var o=e.pendingProps,c=o.revealOrder,d=o.tail;if(Xi(a,e,o.children,s),o=L.current,o&2)o=o&1|2,e.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=e.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&vj(a,s,e);else if(a.tag===19)vj(a,s,e);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}o&=1}if(G(L,o),!(e.mode&1))e.memoizedState=null;else switch(c){case"forwards":for(s=e.child,c=null;s!==null;)a=s.alternate,a!==null&&Ch(a)===null&&(c=s),s=s.sibling;s=c,s===null?(c=e.child,e.child=null):(c=s.sibling,s.sibling=null),wj(e,!1,c,s,d);break;case"backwards":for(s=null,c=e.child,e.child=null;c!==null;){if(a=c.alternate,a!==null&&Ch(a)===null){e.child=c;break}a=c.sibling,c.sibling=s,s=c,c=a}wj(e,!0,s,null,d);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(a,e){!(e.mode&1)&&a!==null&&(a.alternate=null,e.alternate=null,e.flags|=2)}function Zi(a,e,s){if(a!==null&&(e.dependencies=a.dependencies),rh|=e.lanes,!(s&e.childLanes))return null;if(a!==null&&e.child!==a.child)throw Error(p$1(153));if(e.child!==null){for(a=e.child,s=Pg(a,a.pendingProps),e.child=s,s.return=e;a.sibling!==null;)a=a.sibling,s=s.sibling=Pg(a,a.pendingProps),s.return=e;s.sibling=null}return e.child}function yj(a,e,s){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var o=e.type._context,c=e.memoizedProps.value;G(Wg,o._currentValue),o._currentValue=c;break;case 13:if(o=e.memoizedState,o!==null)return o.dehydrated!==null?(G(L,L.current&1),e.flags|=128,null):s&e.child.childLanes?oj(a,e,s):(G(L,L.current&1),a=Zi(a,e,s),a!==null?a.sibling:null);G(L,L.current&1);break;case 19:if(o=(s&e.childLanes)!==0,a.flags&128){if(o)return xj(a,e,s);e.flags|=128}if(c=e.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),G(L,L.current),o)break;return null;case 22:case 23:return e.lanes=0,dj(a,e,s)}return Zi(a,e,s)}var zj,Aj,Bj,Cj;zj=function(a,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)a.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Aj=function(){};Bj=function(a,e,s,o){var c=a.memoizedProps;if(c!==o){a=e.stateNode,xh(uh.current);var d=null;switch(s){case"input":c=Ya(a,c),o=Ya(a,o),d=[];break;case"select":c=A({},c,{value:void 0}),o=A({},o,{value:void 0}),d=[];break;case"textarea":c=gb(a,c),o=gb(a,o),d=[];break;default:typeof c.onClick!="function"&&typeof o.onClick=="function"&&(a.onclick=Bf)}ub(s,o);var g;s=null;for(_e in c)if(!o.hasOwnProperty(_e)&&c.hasOwnProperty(_e)&&c[_e]!=null)if(_e==="style"){var b=c[_e];for(g in b)b.hasOwnProperty(g)&&(s||(s={}),s[g]="")}else _e!=="dangerouslySetInnerHTML"&&_e!=="children"&&_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&_e!=="autoFocus"&&(ea.hasOwnProperty(_e)?d||(d=[]):(d=d||[]).push(_e,null));for(_e in o){var j=o[_e];if(b=c!=null?c[_e]:void 0,o.hasOwnProperty(_e)&&j!==b&&(j!=null||b!=null))if(_e==="style")if(b){for(g in b)!b.hasOwnProperty(g)||j&&j.hasOwnProperty(g)||(s||(s={}),s[g]="");for(g in j)j.hasOwnProperty(g)&&b[g]!==j[g]&&(s||(s={}),s[g]=j[g])}else s||(d||(d=[]),d.push(_e,s)),s=j;else _e==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,b=b?b.__html:void 0,j!=null&&b!==j&&(d=d||[]).push(_e,j)):_e==="children"?typeof j!="string"&&typeof j!="number"||(d=d||[]).push(_e,""+j):_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&(ea.hasOwnProperty(_e)?(j!=null&&_e==="onScroll"&&D$1("scroll",a),d||b===j||(d=[])):(d=d||[]).push(_e,j))}s&&(d=d||[]).push("style",s);var _e=d;(e.updateQueue=_e)&&(e.flags|=4)}};Cj=function(a,e,s,o){s!==o&&(e.flags|=4)};function Dj(a,e){if(!I)switch(a.tailMode){case"hidden":e=a.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?a.tail=null:s.sibling=null;break;case"collapsed":s=a.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?e||a.tail===null?a.tail=null:a.tail.sibling=null:o.sibling=null}}function S(a){var e=a.alternate!==null&&a.alternate.child===a.child,s=0,o=0;if(e)for(var c=a.child;c!==null;)s|=c.lanes|c.childLanes,o|=c.subtreeFlags&14680064,o|=c.flags&14680064,c.return=a,c=c.sibling;else for(c=a.child;c!==null;)s|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=a,c=c.sibling;return a.subtreeFlags|=o,a.childLanes=s,e}function Ej(a,e,s){var o=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(e),null;case 1:return Zf(e.type)&&$f(),S(e),null;case 3:return o=e.stateNode,zh(),E(Wf),E(H$1),Eh(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(a===null||a.child===null)&&(Gg(e)?e.flags|=4:a===null||a.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(a,e),S(e),null;case 5:Bh(e);var c=xh(wh.current);if(s=e.type,a!==null&&e.stateNode!=null)Bj(a,e,s,o,c),a.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!o){if(e.stateNode===null)throw Error(p$1(166));return S(e),null}if(a=xh(uh.current),Gg(e)){o=e.stateNode,s=e.type;var d=e.memoizedProps;switch(o[Of]=e,o[Pf]=d,a=(e.mode&1)!==0,s){case"dialog":D$1("cancel",o),D$1("close",o);break;case"iframe":case"object":case"embed":D$1("load",o);break;case"video":case"audio":for(c=0;c<lf.length;c++)D$1(lf[c],o);break;case"source":D$1("error",o);break;case"img":case"image":case"link":D$1("error",o),D$1("load",o);break;case"details":D$1("toggle",o);break;case"input":Za(o,d),D$1("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!d.multiple},D$1("invalid",o);break;case"textarea":hb(o,d),D$1("invalid",o)}ub(s,d),c=null;for(var g in d)if(d.hasOwnProperty(g)){var b=d[g];g==="children"?typeof b=="string"?o.textContent!==b&&(d.suppressHydrationWarning!==!0&&Af(o.textContent,b,a),c=["children",b]):typeof b=="number"&&o.textContent!==""+b&&(d.suppressHydrationWarning!==!0&&Af(o.textContent,b,a),c=["children",""+b]):ea.hasOwnProperty(g)&&b!=null&&g==="onScroll"&&D$1("scroll",o)}switch(s){case"input":Va(o),db(o,d,!0);break;case"textarea":Va(o),jb(o);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(o.onclick=Bf)}o=c,e.updateQueue=o,o!==null&&(e.flags|=4)}else{g=c.nodeType===9?c:c.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=kb(s)),a==="http://www.w3.org/1999/xhtml"?s==="script"?(a=g.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof o.is=="string"?a=g.createElement(s,{is:o.is}):(a=g.createElement(s),s==="select"&&(g=a,o.multiple?g.multiple=!0:o.size&&(g.size=o.size))):a=g.createElementNS(a,s),a[Of]=e,a[Pf]=o,zj(a,e,!1,!1),e.stateNode=a;e:{switch(g=vb(s,o),s){case"dialog":D$1("cancel",a),D$1("close",a),c=o;break;case"iframe":case"object":case"embed":D$1("load",a),c=o;break;case"video":case"audio":for(c=0;c<lf.length;c++)D$1(lf[c],a);c=o;break;case"source":D$1("error",a),c=o;break;case"img":case"image":case"link":D$1("error",a),D$1("load",a),c=o;break;case"details":D$1("toggle",a),c=o;break;case"input":Za(a,o),c=Ya(a,o),D$1("invalid",a);break;case"option":c=o;break;case"select":a._wrapperState={wasMultiple:!!o.multiple},c=A({},o,{value:void 0}),D$1("invalid",a);break;case"textarea":hb(a,o),c=gb(a,o),D$1("invalid",a);break;default:c=o}ub(s,c),b=c;for(d in b)if(b.hasOwnProperty(d)){var j=b[d];d==="style"?sb(a,j):d==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&nb(a,j)):d==="children"?typeof j=="string"?(s!=="textarea"||j!=="")&&ob(a,j):typeof j=="number"&&ob(a,""+j):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ea.hasOwnProperty(d)?j!=null&&d==="onScroll"&&D$1("scroll",a):j!=null&&ta(a,d,j,g))}switch(s){case"input":Va(a),db(a,o,!1);break;case"textarea":Va(a),jb(a);break;case"option":o.value!=null&&a.setAttribute("value",""+Sa(o.value));break;case"select":a.multiple=!!o.multiple,d=o.value,d!=null?fb(a,!!o.multiple,d,!1):o.defaultValue!=null&&fb(a,!!o.multiple,o.defaultValue,!0);break;default:typeof c.onClick=="function"&&(a.onclick=Bf)}switch(s){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S(e),null;case 6:if(a&&e.stateNode!=null)Cj(a,e,a.memoizedProps,o);else{if(typeof o!="string"&&e.stateNode===null)throw Error(p$1(166));if(s=xh(wh.current),xh(uh.current),Gg(e)){if(o=e.stateNode,s=e.memoizedProps,o[Of]=e,(d=o.nodeValue!==s)&&(a=xg,a!==null))switch(a.tag){case 3:Af(o.nodeValue,s,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Af(o.nodeValue,s,(a.mode&1)!==0)}d&&(e.flags|=4)}else o=(s.nodeType===9?s:s.ownerDocument).createTextNode(o),o[Of]=e,e.stateNode=o}return S(e),null;case 13:if(E(L),o=e.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(I&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,d=!1;else if(d=Gg(e),o!==null&&o.dehydrated!==null){if(a===null){if(!d)throw Error(p$1(318));if(d=e.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(p$1(317));d[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S(e),d=!1}else zg!==null&&(Fj(zg),zg=null),d=!0;if(!d)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(o=o!==null,o!==(a!==null&&a.memoizedState!==null)&&o&&(e.child.flags|=8192,e.mode&1&&(a===null||L.current&1?T===0&&(T=3):tj())),e.updateQueue!==null&&(e.flags|=4),S(e),null);case 4:return zh(),Aj(a,e),a===null&&sf(e.stateNode.containerInfo),S(e),null;case 10:return ah(e.type._context),S(e),null;case 17:return Zf(e.type)&&$f(),S(e),null;case 19:if(E(L),d=e.memoizedState,d===null)return S(e),null;if(o=(e.flags&128)!==0,g=d.rendering,g===null)if(o)Dj(d,!1);else{if(T!==0||a!==null&&a.flags&128)for(a=e.child;a!==null;){if(g=Ch(a),g!==null){for(e.flags|=128,Dj(d,!1),o=g.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),e.subtreeFlags=0,o=s,s=e.child;s!==null;)d=s,a=o,d.flags&=14680066,g=d.alternate,g===null?(d.childLanes=0,d.lanes=a,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=g.childLanes,d.lanes=g.lanes,d.child=g.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=g.memoizedProps,d.memoizedState=g.memoizedState,d.updateQueue=g.updateQueue,d.type=g.type,a=g.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s=s.sibling;return G(L,L.current&1|2),e.child}a=a.sibling}d.tail!==null&&B()>Gj&&(e.flags|=128,o=!0,Dj(d,!1),e.lanes=4194304)}else{if(!o)if(a=Ch(g),a!==null){if(e.flags|=128,o=!0,s=a.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Dj(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!I)return S(e),null}else 2*B()-d.renderingStartTime>Gj&&s!==1073741824&&(e.flags|=128,o=!0,Dj(d,!1),e.lanes=4194304);d.isBackwards?(g.sibling=e.child,e.child=g):(s=d.last,s!==null?s.sibling=g:e.child=g,d.last=g)}return d.tail!==null?(e=d.tail,d.rendering=e,d.tail=e.sibling,d.renderingStartTime=B(),e.sibling=null,s=L.current,G(L,o?s&1|2:s&1),e):(S(e),null);case 22:case 23:return Hj(),o=e.memoizedState!==null,a!==null&&a.memoizedState!==null!==o&&(e.flags|=8192),o&&e.mode&1?fj&1073741824&&(S(e),e.subtreeFlags&6&&(e.flags|=8192)):S(e),null;case 24:return null;case 25:return null}throw Error(p$1(156,e.tag))}function Ij(a,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),a=e.flags,a&65536?(e.flags=a&-65537|128,e):null;case 3:return zh(),E(Wf),E(H$1),Eh(),a=e.flags,a&65536&&!(a&128)?(e.flags=a&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E(L),a=e.memoizedState,a!==null&&a.dehydrated!==null){if(e.alternate===null)throw Error(p$1(340));Ig()}return a=e.flags,a&65536?(e.flags=a&-65537|128,e):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(a,e){var s=a.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(o){W(a,e,o)}else s.current=null}function Mj(a,e,s){try{s()}catch(o){W(a,e,o)}}var Nj=!1;function Oj(a,e){if(Cf=dd,a=Me$1(),Ne(a)){if("selectionStart"in a)var s={start:a.selectionStart,end:a.selectionEnd};else e:{s=(s=a.ownerDocument)&&s.defaultView||window;var o=s.getSelection&&s.getSelection();if(o&&o.rangeCount!==0){s=o.anchorNode;var c=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var g=0,b=-1,j=-1,_e=0,er=0,rr=a,tr=null;r:for(;;){for(var nr;rr!==s||c!==0&&rr.nodeType!==3||(b=g+c),rr!==d||o!==0&&rr.nodeType!==3||(j=g+o),rr.nodeType===3&&(g+=rr.nodeValue.length),(nr=rr.firstChild)!==null;)tr=rr,rr=nr;for(;;){if(rr===a)break r;if(tr===s&&++_e===c&&(b=g),tr===d&&++er===o&&(j=g),(nr=rr.nextSibling)!==null)break;rr=tr,tr=rr.parentNode}rr=nr}s=b===-1||j===-1?null:{start:b,end:j}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df={focusedElem:a,selectionRange:s},dd=!1,V=e;V!==null;)if(e=V,a=e.child,(e.subtreeFlags&1028)!==0&&a!==null)a.return=e,V=a;else for(;V!==null;){e=V;try{var ar=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(ar!==null){var lr=ar.memoizedProps,or=ar.memoizedState,ir=e.stateNode,sr=ir.getSnapshotBeforeUpdate(e.elementType===e.type?lr:Ci(e.type,lr),or);ir.__reactInternalSnapshotBeforeUpdate=sr}break;case 3:var ur=e.stateNode.containerInfo;ur.nodeType===1?ur.textContent="":ur.nodeType===9&&ur.documentElement&&ur.removeChild(ur.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(cr){W(e,e.return,cr)}if(a=e.sibling,a!==null){a.return=e.return,V=a;break}V=e.return}return ar=Nj,Nj=!1,ar}function Pj(a,e,s){var o=e.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&a)===a){var d=c.destroy;c.destroy=void 0,d!==void 0&&Mj(e,s,d)}c=c.next}while(c!==o)}}function Qj(a,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&a)===a){var o=s.create;s.destroy=o()}s=s.next}while(s!==e)}}function Rj(a){var e=a.ref;if(e!==null){var s=a.stateNode;switch(a.tag){case 5:a=s;break;default:a=s}typeof e=="function"?e(a):e.current=a}}function Sj(a){var e=a.alternate;e!==null&&(a.alternate=null,Sj(e)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(e=a.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Tj(a){return a.tag===5||a.tag===3||a.tag===4}function Uj(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Tj(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Vj(a,e,s){var o=a.tag;if(o===5||o===6)a=a.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(a,e):s.insertBefore(a,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(a,s)):(e=s,e.appendChild(a)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Bf));else if(o!==4&&(a=a.child,a!==null))for(Vj(a,e,s),a=a.sibling;a!==null;)Vj(a,e,s),a=a.sibling}function Wj(a,e,s){var o=a.tag;if(o===5||o===6)a=a.stateNode,e?s.insertBefore(a,e):s.appendChild(a);else if(o!==4&&(a=a.child,a!==null))for(Wj(a,e,s),a=a.sibling;a!==null;)Wj(a,e,s),a=a.sibling}var X=null,Xj=!1;function Yj(a,e,s){for(s=s.child;s!==null;)Zj(a,e,s),s=s.sibling}function Zj(a,e,s){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,s)}catch{}switch(s.tag){case 5:U||Lj(s,e);case 6:var o=X,c=Xj;X=null,Yj(a,e,s),X=o,Xj=c,X!==null&&(Xj?(a=X,s=s.stateNode,a.nodeType===8?a.parentNode.removeChild(s):a.removeChild(s)):X.removeChild(s.stateNode));break;case 18:X!==null&&(Xj?(a=X,s=s.stateNode,a.nodeType===8?Kf(a.parentNode,s):a.nodeType===1&&Kf(a,s),bd(a)):Kf(X,s.stateNode));break;case 4:o=X,c=Xj,X=s.stateNode.containerInfo,Xj=!0,Yj(a,e,s),X=o,Xj=c;break;case 0:case 11:case 14:case 15:if(!U&&(o=s.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){c=o=o.next;do{var d=c,g=d.destroy;d=d.tag,g!==void 0&&(d&2||d&4)&&Mj(s,e,g),c=c.next}while(c!==o)}Yj(a,e,s);break;case 1:if(!U&&(Lj(s,e),o=s.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=s.memoizedProps,o.state=s.memoizedState,o.componentWillUnmount()}catch(b){W(s,e,b)}Yj(a,e,s);break;case 21:Yj(a,e,s);break;case 22:s.mode&1?(U=(o=U)||s.memoizedState!==null,Yj(a,e,s),U=o):Yj(a,e,s);break;default:Yj(a,e,s)}}function ak(a){var e=a.updateQueue;if(e!==null){a.updateQueue=null;var s=a.stateNode;s===null&&(s=a.stateNode=new Kj),e.forEach(function(o){var c=bk$1.bind(null,a,o);s.has(o)||(s.add(o),o.then(c,c))})}}function ck(a,e){var s=e.deletions;if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];try{var d=a,g=e,b=g;e:for(;b!==null;){switch(b.tag){case 5:X=b.stateNode,Xj=!1;break e;case 3:X=b.stateNode.containerInfo,Xj=!0;break e;case 4:X=b.stateNode.containerInfo,Xj=!0;break e}b=b.return}if(X===null)throw Error(p$1(160));Zj(d,g,c),X=null,Xj=!1;var j=c.alternate;j!==null&&(j.return=null),c.return=null}catch(_e){W(c,e,_e)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,a),e=e.sibling}function dk(a,e){var s=a.alternate,o=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(ck(e,a),ek(a),o&4){try{Pj(3,a,a.return),Qj(3,a)}catch(lr){W(a,a.return,lr)}try{Pj(5,a,a.return)}catch(lr){W(a,a.return,lr)}}break;case 1:ck(e,a),ek(a),o&512&&s!==null&&Lj(s,s.return);break;case 5:if(ck(e,a),ek(a),o&512&&s!==null&&Lj(s,s.return),a.flags&32){var c=a.stateNode;try{ob(c,"")}catch(lr){W(a,a.return,lr)}}if(o&4&&(c=a.stateNode,c!=null)){var d=a.memoizedProps,g=s!==null?s.memoizedProps:d,b=a.type,j=a.updateQueue;if(a.updateQueue=null,j!==null)try{b==="input"&&d.type==="radio"&&d.name!=null&&ab(c,d),vb(b,g);var _e=vb(b,d);for(g=0;g<j.length;g+=2){var er=j[g],rr=j[g+1];er==="style"?sb(c,rr):er==="dangerouslySetInnerHTML"?nb(c,rr):er==="children"?ob(c,rr):ta(c,er,rr,_e)}switch(b){case"input":bb(c,d);break;case"textarea":ib(c,d);break;case"select":var tr=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var nr=d.value;nr!=null?fb(c,!!d.multiple,nr,!1):tr!==!!d.multiple&&(d.defaultValue!=null?fb(c,!!d.multiple,d.defaultValue,!0):fb(c,!!d.multiple,d.multiple?[]:"",!1))}c[Pf]=d}catch(lr){W(a,a.return,lr)}}break;case 6:if(ck(e,a),ek(a),o&4){if(a.stateNode===null)throw Error(p$1(162));c=a.stateNode,d=a.memoizedProps;try{c.nodeValue=d}catch(lr){W(a,a.return,lr)}}break;case 3:if(ck(e,a),ek(a),o&4&&s!==null&&s.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(lr){W(a,a.return,lr)}break;case 4:ck(e,a),ek(a);break;case 13:ck(e,a),ek(a),c=a.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(fk=B())),o&4&&ak(a);break;case 22:if(er=s!==null&&s.memoizedState!==null,a.mode&1?(U=(_e=U)||er,ck(e,a),U=_e):ck(e,a),ek(a),o&8192){if(_e=a.memoizedState!==null,(a.stateNode.isHidden=_e)&&!er&&a.mode&1)for(V=a,er=a.child;er!==null;){for(rr=V=er;V!==null;){switch(tr=V,nr=tr.child,tr.tag){case 0:case 11:case 14:case 15:Pj(4,tr,tr.return);break;case 1:Lj(tr,tr.return);var ar=tr.stateNode;if(typeof ar.componentWillUnmount=="function"){o=tr,s=tr.return;try{e=o,ar.props=e.memoizedProps,ar.state=e.memoizedState,ar.componentWillUnmount()}catch(lr){W(o,s,lr)}}break;case 5:Lj(tr,tr.return);break;case 22:if(tr.memoizedState!==null){gk(rr);continue}}nr!==null?(nr.return=tr,V=nr):gk(rr)}er=er.sibling}e:for(er=null,rr=a;;){if(rr.tag===5){if(er===null){er=rr;try{c=rr.stateNode,_e?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(b=rr.stateNode,j=rr.memoizedProps.style,g=j!=null&&j.hasOwnProperty("display")?j.display:null,b.style.display=rb("display",g))}catch(lr){W(a,a.return,lr)}}}else if(rr.tag===6){if(er===null)try{rr.stateNode.nodeValue=_e?"":rr.memoizedProps}catch(lr){W(a,a.return,lr)}}else if((rr.tag!==22&&rr.tag!==23||rr.memoizedState===null||rr===a)&&rr.child!==null){rr.child.return=rr,rr=rr.child;continue}if(rr===a)break e;for(;rr.sibling===null;){if(rr.return===null||rr.return===a)break e;er===rr&&(er=null),rr=rr.return}er===rr&&(er=null),rr.sibling.return=rr.return,rr=rr.sibling}}break;case 19:ck(e,a),ek(a),o&4&&ak(a);break;case 21:break;default:ck(e,a),ek(a)}}function ek(a){var e=a.flags;if(e&2){try{e:{for(var s=a.return;s!==null;){if(Tj(s)){var o=s;break e}s=s.return}throw Error(p$1(160))}switch(o.tag){case 5:var c=o.stateNode;o.flags&32&&(ob(c,""),o.flags&=-33);var d=Uj(a);Wj(a,d,c);break;case 3:case 4:var g=o.stateNode.containerInfo,b=Uj(a);Vj(a,b,g);break;default:throw Error(p$1(161))}}catch(j){W(a,a.return,j)}a.flags&=-3}e&4096&&(a.flags&=-4097)}function hk(a,e,s){V=a,ik(a)}function ik(a,e,s){for(var o=(a.mode&1)!==0;V!==null;){var c=V,d=c.child;if(c.tag===22&&o){var g=c.memoizedState!==null||Jj;if(!g){var b=c.alternate,j=b!==null&&b.memoizedState!==null||U;b=Jj;var _e=U;if(Jj=g,(U=j)&&!_e)for(V=c;V!==null;)g=V,j=g.child,g.tag===22&&g.memoizedState!==null?jk(c):j!==null?(j.return=g,V=j):jk(c);for(;d!==null;)V=d,ik(d),d=d.sibling;V=c,Jj=b,U=_e}kk(a)}else c.subtreeFlags&8772&&d!==null?(d.return=c,V=d):kk(a)}}function kk(a){for(;V!==null;){var e=V;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U||Qj(5,e);break;case 1:var o=e.stateNode;if(e.flags&4&&!U)if(s===null)o.componentDidMount();else{var c=e.elementType===e.type?s.memoizedProps:Ci(e.type,s.memoizedProps);o.componentDidUpdate(c,s.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var d=e.updateQueue;d!==null&&sh(e,d,o);break;case 3:var g=e.updateQueue;if(g!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}sh(e,g,s)}break;case 5:var b=e.stateNode;if(s===null&&e.flags&4){s=b;var j=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&s.focus();break;case"img":j.src&&(s.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var _e=e.alternate;if(_e!==null){var er=_e.memoizedState;if(er!==null){var rr=er.dehydrated;rr!==null&&bd(rr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U||e.flags&512&&Rj(e)}catch(tr){W(e,e.return,tr)}}if(e===a){V=null;break}if(s=e.sibling,s!==null){s.return=e.return,V=s;break}V=e.return}}function gk(a){for(;V!==null;){var e=V;if(e===a){V=null;break}var s=e.sibling;if(s!==null){s.return=e.return,V=s;break}V=e.return}}function jk(a){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Qj(4,e)}catch(j){W(e,s,j)}break;case 1:var o=e.stateNode;if(typeof o.componentDidMount=="function"){var c=e.return;try{o.componentDidMount()}catch(j){W(e,c,j)}}var d=e.return;try{Rj(e)}catch(j){W(e,d,j)}break;case 5:var g=e.return;try{Rj(e)}catch(j){W(e,g,j)}}}catch(j){W(e,e.return,j)}if(e===a){V=null;break}var b=e.sibling;if(b!==null){b.return=e.return,V=b;break}V=e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K$1=0,Q=null,Y$1=null,Z$1=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K$1&6?B():Ak!==-1?Ak:Ak=B()}function yi(a){return a.mode&1?K$1&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(a=C,a!==0||(a=window.event,a=a===void 0?16:jd(a.type)),a):1}function gi(a,e,s,o){if(50<yk)throw yk=0,zk=null,Error(p$1(185));Ac(a,s,o),(!(K$1&2)||a!==Q)&&(a===Q&&(!(K$1&2)&&(qk|=s),T===4&&Ck(a,Z$1)),Dk(a,o),s===1&&K$1===0&&!(e.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(a,e){var s=a.callbackNode;wc(a,e);var o=uc(a,a===Q?Z$1:0);if(o===0)s!==null&&bc(s),a.callbackNode=null,a.callbackPriority=0;else if(e=o&-o,a.callbackPriority!==e){if(s!=null&&bc(s),e===1)a.tag===0?ig(Ek.bind(null,a)):hg(Ek.bind(null,a)),Jf(function(){!(K$1&6)&&jg()}),s=null;else{switch(Dc(o)){case 1:s=fc;break;case 4:s=gc;break;case 16:s=hc;break;case 536870912:s=jc;break;default:s=hc}s=Fk(s,Gk.bind(null,a))}a.callbackPriority=e,a.callbackNode=s}}function Gk(a,e){if(Ak=-1,Bk=0,K$1&6)throw Error(p$1(327));var s=a.callbackNode;if(Hk()&&a.callbackNode!==s)return null;var o=uc(a,a===Q?Z$1:0);if(o===0)return null;if(o&30||o&a.expiredLanes||e)e=Ik(a,o);else{e=o;var c=K$1;K$1|=2;var d=Jk();(Q!==a||Z$1!==e)&&(uk=null,Gj=B()+500,Kk(a,e));do try{Lk();break}catch(b){Mk(a,b)}while(!0);$g(),mk.current=d,K$1=c,Y$1!==null?e=0:(Q=null,Z$1=0,e=T)}if(e!==0){if(e===2&&(c=xc(a),c!==0&&(o=c,e=Nk(a,c))),e===1)throw s=pk,Kk(a,0),Ck(a,o),Dk(a,B()),s;if(e===6)Ck(a,o);else{if(c=a.current.alternate,!(o&30)&&!Ok(c)&&(e=Ik(a,o),e===2&&(d=xc(a),d!==0&&(o=d,e=Nk(a,d))),e===1))throw s=pk,Kk(a,0),Ck(a,o),Dk(a,B()),s;switch(a.finishedWork=c,a.finishedLanes=o,e){case 0:case 1:throw Error(p$1(345));case 2:Pk(a,tk,uk);break;case 3:if(Ck(a,o),(o&130023424)===o&&(e=fk+500-B(),10<e)){if(uc(a,0)!==0)break;if(c=a.suspendedLanes,(c&o)!==o){R(),a.pingedLanes|=a.suspendedLanes&c;break}a.timeoutHandle=Ff(Pk.bind(null,a,tk,uk),e);break}Pk(a,tk,uk);break;case 4:if(Ck(a,o),(o&4194240)===o)break;for(e=a.eventTimes,c=-1;0<o;){var g=31-oc(o);d=1<<g,g=e[g],g>c&&(c=g),o&=~d}if(o=c,o=B()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*lk(o/1960))-o,10<o){a.timeoutHandle=Ff(Pk.bind(null,a,tk,uk),o);break}Pk(a,tk,uk);break;case 5:Pk(a,tk,uk);break;default:throw Error(p$1(329))}}}return Dk(a,B()),a.callbackNode===s?Gk.bind(null,a):null}function Nk(a,e){var s=sk;return a.current.memoizedState.isDehydrated&&(Kk(a,e).flags|=256),a=Ik(a,e),a!==2&&(e=tk,tk=s,e!==null&&Fj(e)),a}function Fj(a){tk===null?tk=a:tk.push.apply(tk,a)}function Ok(a){for(var e=a;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var o=0;o<s.length;o++){var c=s[o],d=c.getSnapshot;c=c.value;try{if(!He$1(d(),c))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===a)break;for(;e.sibling===null;){if(e.return===null||e.return===a)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(a,e){for(e&=~rk,e&=~qk,a.suspendedLanes|=e,a.pingedLanes&=~e,a=a.expirationTimes;0<e;){var s=31-oc(e),o=1<<s;a[s]=-1,e&=~o}}function Ek(a){if(K$1&6)throw Error(p$1(327));Hk();var e=uc(a,0);if(!(e&1))return Dk(a,B()),null;var s=Ik(a,e);if(a.tag!==0&&s===2){var o=xc(a);o!==0&&(e=o,s=Nk(a,o))}if(s===1)throw s=pk,Kk(a,0),Ck(a,e),Dk(a,B()),s;if(s===6)throw Error(p$1(345));return a.finishedWork=a.current.alternate,a.finishedLanes=e,Pk(a,tk,uk),Dk(a,B()),null}function Qk(a,e){var s=K$1;K$1|=1;try{return a(e)}finally{K$1=s,K$1===0&&(Gj=B()+500,fg&&jg())}}function Rk(a){wk!==null&&wk.tag===0&&!(K$1&6)&&Hk();var e=K$1;K$1|=1;var s=ok.transition,o=C;try{if(ok.transition=null,C=1,a)return a()}finally{C=o,ok.transition=s,K$1=e,!(K$1&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(a,e){a.finishedWork=null,a.finishedLanes=0;var s=a.timeoutHandle;if(s!==-1&&(a.timeoutHandle=-1,Gf(s)),Y$1!==null)for(s=Y$1.return;s!==null;){var o=s;switch(wg(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&$f();break;case 3:zh(),E(Wf),E(H$1),Eh();break;case 5:Bh(o);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(o.type._context);break;case 22:case 23:Hj()}s=s.return}if(Q=a,Y$1=a=Pg(a.current,null),Z$1=fj=e,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(s=fh[e],o=s.interleaved,o!==null){s.interleaved=null;var c=o.next,d=s.pending;if(d!==null){var g=d.next;d.next=c,o.next=g}s.pending=o}fh=null}return a}function Mk(a,e){do{var s=Y$1;try{if($g(),Fh.current=Rh,Ih){for(var o=M.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,s===null||s.return===null){T=1,pk=e,Y$1=null;break}e:{var d=a,g=s.return,b=s,j=e;if(e=Z$1,b.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var _e=j,er=b,rr=er.tag;if(!(er.mode&1)&&(rr===0||rr===11||rr===15)){var tr=er.alternate;tr?(er.updateQueue=tr.updateQueue,er.memoizedState=tr.memoizedState,er.lanes=tr.lanes):(er.updateQueue=null,er.memoizedState=null)}var nr=Ui(g);if(nr!==null){nr.flags&=-257,Vi(nr,g,b,d,e),nr.mode&1&&Si(d,_e,e),e=nr,j=_e;var ar=e.updateQueue;if(ar===null){var lr=new Set;lr.add(j),e.updateQueue=lr}else ar.add(j);break e}else{if(!(e&1)){Si(d,_e,e),tj();break e}j=Error(p$1(426))}}else if(I&&b.mode&1){var or=Ui(g);if(or!==null){!(or.flags&65536)&&(or.flags|=256),Vi(or,g,b,d,e),Jg(Ji(j,b));break e}}d=j=Ji(j,b),T!==4&&(T=2),sk===null?sk=[d]:sk.push(d),d=g;do{switch(d.tag){case 3:d.flags|=65536,e&=-e,d.lanes|=e;var ir=Ni(d,j,e);ph(d,ir);break e;case 1:b=j;var sr=d.type,ur=d.stateNode;if(!(d.flags&128)&&(typeof sr.getDerivedStateFromError=="function"||ur!==null&&typeof ur.componentDidCatch=="function"&&(Ri===null||!Ri.has(ur)))){d.flags|=65536,e&=-e,d.lanes|=e;var cr=Qi(d,b,e);ph(d,cr);break e}}d=d.return}while(d!==null)}Sk(s)}catch(fr){e=fr,Y$1===s&&s!==null&&(Y$1=s=s.return);continue}break}while(!0)}function Jk(){var a=mk.current;return mk.current=Rh,a===null?Rh:a}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z$1)}function Ik(a,e){var s=K$1;K$1|=2;var o=Jk();(Q!==a||Z$1!==e)&&(uk=null,Kk(a,e));do try{Tk();break}catch(c){Mk(a,c)}while(!0);if($g(),K$1=s,mk.current=o,Y$1!==null)throw Error(p$1(261));return Q=null,Z$1=0,T}function Tk(){for(;Y$1!==null;)Uk(Y$1)}function Lk(){for(;Y$1!==null&&!cc();)Uk(Y$1)}function Uk(a){var e=Vk(a.alternate,a,fj);a.memoizedProps=a.pendingProps,e===null?Sk(a):Y$1=e,nk.current=null}function Sk(a){var e=a;do{var s=e.alternate;if(a=e.return,e.flags&32768){if(s=Ij(s,e),s!==null){s.flags&=32767,Y$1=s;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{T=6,Y$1=null;return}}else if(s=Ej(s,e,fj),s!==null){Y$1=s;return}if(e=e.sibling,e!==null){Y$1=e;return}Y$1=e=a}while(e!==null);T===0&&(T=5)}function Pk(a,e,s){var o=C,c=ok.transition;try{ok.transition=null,C=1,Wk(a,e,s,o)}finally{ok.transition=c,C=o}return null}function Wk(a,e,s,o){do Hk();while(wk!==null);if(K$1&6)throw Error(p$1(327));s=a.finishedWork;var c=a.finishedLanes;if(s===null)return null;if(a.finishedWork=null,a.finishedLanes=0,s===a.current)throw Error(p$1(177));a.callbackNode=null,a.callbackPriority=0;var d=s.lanes|s.childLanes;if(Bc(a,d),a===Q&&(Y$1=Q=null,Z$1=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),d=(s.flags&15990)!==0,s.subtreeFlags&15990||d){d=ok.transition,ok.transition=null;var g=C;C=1;var b=K$1;K$1|=4,nk.current=null,Oj(a,s),dk(s,a),Oe$1(Df),dd=!!Cf,Df=Cf=null,a.current=s,hk(s),dc(),K$1=b,C=g,ok.transition=d}else a.current=s;if(vk&&(vk=!1,wk=a,xk=c),d=a.pendingLanes,d===0&&(Ri=null),mc(s.stateNode),Dk(a,B()),e!==null)for(o=a.onRecoverableError,s=0;s<e.length;s++)c=e[s],o(c.value,{componentStack:c.stack,digest:c.digest});if(Oi)throw Oi=!1,a=Pi,Pi=null,a;return xk&1&&a.tag!==0&&Hk(),d=a.pendingLanes,d&1?a===zk?yk++:(yk=0,zk=a):yk=0,jg(),null}function Hk(){if(wk!==null){var a=Dc(xk),e=ok.transition,s=C;try{if(ok.transition=null,C=16>a?16:a,wk===null)var o=!1;else{if(a=wk,wk=null,xk=0,K$1&6)throw Error(p$1(331));var c=K$1;for(K$1|=4,V=a.current;V!==null;){var d=V,g=d.child;if(V.flags&16){var b=d.deletions;if(b!==null){for(var j=0;j<b.length;j++){var _e=b[j];for(V=_e;V!==null;){var er=V;switch(er.tag){case 0:case 11:case 15:Pj(8,er,d)}var rr=er.child;if(rr!==null)rr.return=er,V=rr;else for(;V!==null;){er=V;var tr=er.sibling,nr=er.return;if(Sj(er),er===_e){V=null;break}if(tr!==null){tr.return=nr,V=tr;break}V=nr}}}var ar=d.alternate;if(ar!==null){var lr=ar.child;if(lr!==null){ar.child=null;do{var or=lr.sibling;lr.sibling=null,lr=or}while(lr!==null)}}V=d}}if(d.subtreeFlags&2064&&g!==null)g.return=d,V=g;else e:for(;V!==null;){if(d=V,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Pj(9,d,d.return)}var ir=d.sibling;if(ir!==null){ir.return=d.return,V=ir;break e}V=d.return}}var sr=a.current;for(V=sr;V!==null;){g=V;var ur=g.child;if(g.subtreeFlags&2064&&ur!==null)ur.return=g,V=ur;else e:for(g=sr;V!==null;){if(b=V,b.flags&2048)try{switch(b.tag){case 0:case 11:case 15:Qj(9,b)}}catch(fr){W(b,b.return,fr)}if(b===g){V=null;break e}var cr=b.sibling;if(cr!==null){cr.return=b.return,V=cr;break e}V=b.return}}if(K$1=c,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,a)}catch{}o=!0}return o}finally{C=s,ok.transition=e}}return!1}function Xk(a,e,s){e=Ji(s,e),e=Ni(a,e,1),a=nh(a,e,1),e=R(),a!==null&&(Ac(a,1,e),Dk(a,e))}function W(a,e,s){if(a.tag===3)Xk(a,a,s);else for(;e!==null;){if(e.tag===3){Xk(e,a,s);break}else if(e.tag===1){var o=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ri===null||!Ri.has(o))){a=Ji(s,a),a=Qi(e,a,1),e=nh(e,a,1),a=R(),e!==null&&(Ac(e,1,a),Dk(e,a));break}}e=e.return}}function Ti(a,e,s){var o=a.pingCache;o!==null&&o.delete(e),e=R(),a.pingedLanes|=a.suspendedLanes&s,Q===a&&(Z$1&s)===s&&(T===4||T===3&&(Z$1&130023424)===Z$1&&500>B()-fk?Kk(a,0):rk|=s),Dk(a,e)}function Yk(a,e){e===0&&(a.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var s=R();a=ih(a,e),a!==null&&(Ac(a,e,s),Dk(a,s))}function uj(a){var e=a.memoizedState,s=0;e!==null&&(s=e.retryLane),Yk(a,s)}function bk$1(a,e){var s=0;switch(a.tag){case 13:var o=a.stateNode,c=a.memoizedState;c!==null&&(s=c.retryLane);break;case 19:o=a.stateNode;break;default:throw Error(p$1(314))}o!==null&&o.delete(e),Yk(a,s)}var Vk;Vk=function(a,e,s){if(a!==null)if(a.memoizedProps!==e.pendingProps||Wf.current)dh=!0;else{if(!(a.lanes&s)&&!(e.flags&128))return dh=!1,yj(a,e,s);dh=!!(a.flags&131072)}else dh=!1,I&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var o=e.type;ij(a,e),a=e.pendingProps;var c=Yf(e,H$1.current);ch(e,s),c=Nh(null,e,o,a,c,s);var d=Sh();return e.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(o)?(d=!0,cg(e)):d=!1,e.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,kh(e),c.updater=Ei,e.stateNode=c,c._reactInternals=e,Ii(e,o,a,s),e=jj(null,e,o,!0,d,s)):(e.tag=0,I&&d&&vg(e),Xi(null,e,c,s),e=e.child),e;case 16:o=e.elementType;e:{switch(ij(a,e),a=e.pendingProps,c=o._init,o=c(o._payload),e.type=o,c=e.tag=Zk(o),a=Ci(o,a),c){case 0:e=cj(null,e,o,a,s);break e;case 1:e=hj(null,e,o,a,s);break e;case 11:e=Yi(null,e,o,a,s);break e;case 14:e=$i(null,e,o,Ci(o.type,a),s);break e}throw Error(p$1(306,o,""))}return e;case 0:return o=e.type,c=e.pendingProps,c=e.elementType===o?c:Ci(o,c),cj(a,e,o,c,s);case 1:return o=e.type,c=e.pendingProps,c=e.elementType===o?c:Ci(o,c),hj(a,e,o,c,s);case 3:e:{if(kj(e),a===null)throw Error(p$1(387));o=e.pendingProps,d=e.memoizedState,c=d.element,lh(a,e),qh(e,o,null,s);var g=e.memoizedState;if(o=g.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},e.updateQueue.baseState=d,e.memoizedState=d,e.flags&256){c=Ji(Error(p$1(423)),e),e=lj(a,e,o,s,c);break e}else if(o!==c){c=Ji(Error(p$1(424)),e),e=lj(a,e,o,s,c);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I=!0,zg=null,s=Vg(e,null,o,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig(),o===c){e=Zi(a,e,s);break e}Xi(a,e,o,s)}e=e.child}return e;case 5:return Ah(e),a===null&&Eg(e),o=e.type,c=e.pendingProps,d=a!==null?a.memoizedProps:null,g=c.children,Ef(o,c)?g=null:d!==null&&Ef(o,d)&&(e.flags|=32),gj(a,e),Xi(a,e,g,s),e.child;case 6:return a===null&&Eg(e),null;case 13:return oj(a,e,s);case 4:return yh(e,e.stateNode.containerInfo),o=e.pendingProps,a===null?e.child=Ug(e,null,o,s):Xi(a,e,o,s),e.child;case 11:return o=e.type,c=e.pendingProps,c=e.elementType===o?c:Ci(o,c),Yi(a,e,o,c,s);case 7:return Xi(a,e,e.pendingProps,s),e.child;case 8:return Xi(a,e,e.pendingProps.children,s),e.child;case 12:return Xi(a,e,e.pendingProps.children,s),e.child;case 10:e:{if(o=e.type._context,c=e.pendingProps,d=e.memoizedProps,g=c.value,G(Wg,o._currentValue),o._currentValue=g,d!==null)if(He$1(d.value,g)){if(d.children===c.children&&!Wf.current){e=Zi(a,e,s);break e}}else for(d=e.child,d!==null&&(d.return=e);d!==null;){var b=d.dependencies;if(b!==null){g=d.child;for(var j=b.firstContext;j!==null;){if(j.context===o){if(d.tag===1){j=mh(-1,s&-s),j.tag=2;var _e=d.updateQueue;if(_e!==null){_e=_e.shared;var er=_e.pending;er===null?j.next=j:(j.next=er.next,er.next=j),_e.pending=j}}d.lanes|=s,j=d.alternate,j!==null&&(j.lanes|=s),bh(d.return,s,e),b.lanes|=s;break}j=j.next}}else if(d.tag===10)g=d.type===e.type?null:d.child;else if(d.tag===18){if(g=d.return,g===null)throw Error(p$1(341));g.lanes|=s,b=g.alternate,b!==null&&(b.lanes|=s),bh(g,s,e),g=d.sibling}else g=d.child;if(g!==null)g.return=d;else for(g=d;g!==null;){if(g===e){g=null;break}if(d=g.sibling,d!==null){d.return=g.return,g=d;break}g=g.return}d=g}Xi(a,e,c.children,s),e=e.child}return e;case 9:return c=e.type,o=e.pendingProps.children,ch(e,s),c=eh(c),o=o(c),e.flags|=1,Xi(a,e,o,s),e.child;case 14:return o=e.type,c=Ci(o,e.pendingProps),c=Ci(o.type,c),$i(a,e,o,c,s);case 15:return bj(a,e,e.type,e.pendingProps,s);case 17:return o=e.type,c=e.pendingProps,c=e.elementType===o?c:Ci(o,c),ij(a,e),e.tag=1,Zf(o)?(a=!0,cg(e)):a=!1,ch(e,s),Gi(e,o,c),Ii(e,o,c,s),jj(null,e,o,!0,a,s);case 19:return xj(a,e,s);case 22:return dj(a,e,s)}throw Error(p$1(156,e.tag))};function Fk(a,e){return ac(a,e)}function $k(a,e,s,o){this.tag=a,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(a,e,s,o){return new $k(a,e,s,o)}function aj(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Zk(a){if(typeof a=="function")return aj(a)?1:0;if(a!=null){if(a=a.$$typeof,a===Da)return 11;if(a===Ga)return 14}return 2}function Pg(a,e){var s=a.alternate;return s===null?(s=Bg(a.tag,e,a.key,a.mode),s.elementType=a.elementType,s.type=a.type,s.stateNode=a.stateNode,s.alternate=a,a.alternate=s):(s.pendingProps=e,s.type=a.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=a.flags&14680064,s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=a.sibling,s.index=a.index,s.ref=a.ref,s}function Rg(a,e,s,o,c,d){var g=2;if(o=a,typeof a=="function")aj(a)&&(g=1);else if(typeof a=="string")g=5;else e:switch(a){case ya:return Tg(s.children,c,d,e);case za:g=8,c|=8;break;case Aa:return a=Bg(12,s,e,c|2),a.elementType=Aa,a.lanes=d,a;case Ea:return a=Bg(13,s,e,c),a.elementType=Ea,a.lanes=d,a;case Fa:return a=Bg(19,s,e,c),a.elementType=Fa,a.lanes=d,a;case Ia:return pj(s,c,d,e);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case Ba:g=10;break e;case Ca:g=9;break e;case Da:g=11;break e;case Ga:g=14;break e;case Ha:g=16,o=null;break e}throw Error(p$1(130,a==null?a:typeof a,""))}return e=Bg(g,s,e,c),e.elementType=a,e.type=o,e.lanes=d,e}function Tg(a,e,s,o){return a=Bg(7,a,o,e),a.lanes=s,a}function pj(a,e,s,o){return a=Bg(22,a,o,e),a.elementType=Ia,a.lanes=s,a.stateNode={isHidden:!1},a}function Qg(a,e,s){return a=Bg(6,a,null,e),a.lanes=s,a}function Sg(a,e,s){return e=Bg(4,a.children!==null?a.children:[],a.key,e),e.lanes=s,e.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},e}function al(a,e,s,o,c){this.tag=e,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=o,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function bl(a,e,s,o,c,d,g,b,j){return a=new al(a,e,s,b,j),e===1?(e=1,d===!0&&(e|=8)):e=0,d=Bg(3,null,null,e),a.current=d,d.stateNode=a,d.memoizedState={element:o,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(d),a}function cl(a,e,s){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:o==null?null:""+o,children:a,containerInfo:e,implementation:s}}function dl(a){if(!a)return Vf;a=a._reactInternals;e:{if(Vb(a)!==a||a.tag!==1)throw Error(p$1(170));var e=a;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p$1(171))}if(a.tag===1){var s=a.type;if(Zf(s))return bg(a,s,e)}return e}function el(a,e,s,o,c,d,g,b,j){return a=bl(s,o,!0,a,c,d,g,b,j),a.context=dl(null),s=a.current,o=R(),c=yi(s),d=mh(o,c),d.callback=e??null,nh(s,d,c),a.current.lanes=c,Ac(a,c,o),Dk(a,o),a}function fl(a,e,s,o){var c=e.current,d=R(),g=yi(c);return s=dl(s),e.context===null?e.context=s:e.pendingContext=s,e=mh(d,g),e.payload={element:a},o=o===void 0?null:o,o!==null&&(e.callback=o),a=nh(c,e,g),a!==null&&(gi(a,c,g,d),oh(a,c,g)),g}function gl(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function hl(a,e){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var s=a.retryLane;a.retryLane=s!==0&&s<e?s:e}}function il(a,e){hl(a,e),(a=a.alternate)&&hl(a,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(a){console.error(a)};function ll(a){this._internalRoot=a}ml.prototype.render=ll.prototype.render=function(a){var e=this._internalRoot;if(e===null)throw Error(p$1(409));fl(a,e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var e=a.containerInfo;Rk(function(){fl(null,a,null,null)}),e[uf]=null}};function ml(a){this._internalRoot=a}ml.prototype.unstable_scheduleHydration=function(a){if(a){var e=Hc();a={blockedOn:null,target:a,priority:e};for(var s=0;s<Qc.length&&e!==0&&e<Qc[s].priority;s++);Qc.splice(s,0,a),s===0&&Vc(a)}};function nl(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function ol(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(a,e,s,o,c){if(c){if(typeof o=="function"){var d=o;o=function(){var _e=gl(g);d.call(_e)}}var g=el(e,o,a,0,null,!1,!1,"",pl);return a._reactRootContainer=g,a[uf]=g.current,sf(a.nodeType===8?a.parentNode:a),Rk(),g}for(;c=a.lastChild;)a.removeChild(c);if(typeof o=="function"){var b=o;o=function(){var _e=gl(j);b.call(_e)}}var j=bl(a,0,!1,null,null,!1,!1,"",pl);return a._reactRootContainer=j,a[uf]=j.current,sf(a.nodeType===8?a.parentNode:a),Rk(function(){fl(e,j,s,o)}),j}function rl(a,e,s,o,c){var d=s._reactRootContainer;if(d){var g=d;if(typeof c=="function"){var b=c;c=function(){var j=gl(g);b.call(j)}}fl(e,g,a,c)}else g=ql(s,e,a,c,o);return gl(g)}Ec=function(a){switch(a.tag){case 3:var e=a.stateNode;if(e.current.memoizedState.isDehydrated){var s=tc(e.pendingLanes);s!==0&&(Cc(e,s|1),Dk(e,B()),!(K$1&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var o=ih(a,1);if(o!==null){var c=R();gi(o,a,1,c)}}),il(a,1)}};Fc=function(a){if(a.tag===13){var e=ih(a,134217728);if(e!==null){var s=R();gi(e,a,134217728,s)}il(a,134217728)}};Gc=function(a){if(a.tag===13){var e=yi(a),s=ih(a,e);if(s!==null){var o=R();gi(s,a,e,o)}il(a,e)}};Hc=function(){return C};Ic=function(a,e){var s=C;try{return C=a,e()}finally{C=s}};yb=function(a,e,s){switch(e){case"input":if(bb(a,s),e=s.name,s.type==="radio"&&e!=null){for(s=a;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var o=s[e];if(o!==a&&o.form===a.form){var c=Db(o);if(!c)throw Error(p$1(90));Wa(o),bb(o,c)}}}break;case"textarea":ib(a,s);break;case"select":e=s.value,e!=null&&fb(a,!!s.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Zb(a),a===null?null:a.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(a,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p$1(200));return cl(a,e,null,s)};reactDom_production_min.createRoot=function(a,e){if(!nl(a))throw Error(p$1(299));var s=!1,o="",c=kl;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(o=e.identifierPrefix),e.onRecoverableError!==void 0&&(c=e.onRecoverableError)),e=bl(a,1,!1,null,null,s,!1,o,c),a[uf]=e.current,sf(a.nodeType===8?a.parentNode:a),new ll(e)};reactDom_production_min.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var e=a._reactInternals;if(e===void 0)throw typeof a.render=="function"?Error(p$1(188)):(a=Object.keys(a).join(","),Error(p$1(268,a)));return a=Zb(e),a=a===null?null:a.stateNode,a};reactDom_production_min.flushSync=function(a){return Rk(a)};reactDom_production_min.hydrate=function(a,e,s){if(!ol(e))throw Error(p$1(200));return rl(null,a,e,!0,s)};reactDom_production_min.hydrateRoot=function(a,e,s){if(!nl(a))throw Error(p$1(405));var o=s!=null&&s.hydratedSources||null,c=!1,d="",g=kl;if(s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),e=el(e,null,a,1,s??null,c,!1,d,g),a[uf]=e.current,sf(a),o)for(a=0;a<o.length;a++)s=o[a],c=s._getVersion,c=c(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,c]:e.mutableSourceEagerHydrationData.push(s,c);return new ml(e)};reactDom_production_min.render=function(a,e,s){if(!ol(e))throw Error(p$1(200));return rl(null,a,e,!1,s)};reactDom_production_min.unmountComponentAtNode=function(a){if(!ol(a))throw Error(p$1(40));return a._reactRootContainer?(Rk(function(){rl(null,null,a,!1,function(){a._reactRootContainer=null,a[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(a,e,s,o){if(!ol(s))throw Error(p$1(200));if(a==null||a._reactInternals===void 0)throw Error(p$1(38));return rl(a,e,s,!1,o)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(a){console.error(a)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;var StateNode=class{constructor(a,e,s,o,c=!1,d=!1){this._children=[],this._initial=null,this._regionChildren=[],this._onTransitions=new Map,this._alwaysTransitions=[],this._activities=[],this._onEntry=[],this._onExit=[],this.id=a,this.key=e,this.kind=s,this.parent=o,this.final=c,this.history=d}addChild(a){this._children.push(a)}setInitial(a){if(this.kind!=="compound")throw new Error(`Cannot set initial child on ${this.kind} state ${this.id}`);this._initial=a}addRegion(a){if(this.kind!=="parallel")throw new Error(`Cannot add region to ${this.kind} state ${this.id}`);this._regionChildren.push(a)}addOnTransitions(a,e){this._onTransitions.set(a,e)}addAlwaysTransitions(a){this._alwaysTransitions.push(...a)}setActivities(a){this._activities=a}setOnEntry(a){this._onEntry=a}setOnExit(a){this._onExit=a}get children(){return this._children}get initial(){return this._initial}get regions(){return this._regionChildren}getTransitions(a){return this._onTransitions.get(a)||[]}get alwaysTransitions(){return this._alwaysTransitions}get activities(){return this._activities}get onEntry(){return this._onEntry}get onExit(){return this._onExit}getAncestors(){const a=[this];let e=this.parent;for(;e;)a.push(e),e=e.parent;return a}getDepth(){let a=0,e=this.parent;for(;e;)a++,e=e.parent;return a}isDescendantOf(a){let e=this.parent;for(;e;){if(e===a)return!0;e=e.parent}return!1}isAtomic(){return this.kind==="atomic"}isCompound(){return this.kind==="compound"}isParallel(){return this.kind==="parallel"}},StateMachine=class{constructor(a){if(this.configuration=new Set,this.debugEnabled=!1,this.started=!1,this.loaded=!1,this.halted=!1,this.stateEntryCounters=new Map,this.stateHistory=new Map,this.timeTravelEnabled=!1,this.history=[],this.historyIndex=-1,this.guards=new Map,this.reducers=new Map,this.nodesById=new Map,this.context=a.initialContext,this.debugEnabled=a.debug??!1,this.timeTravelEnabled=a.timeTravel??!1,a.guards)for(const[e,s]of Object.entries(a.guards))this.guards.set(e,s);if(a.reducers)for(const[e,s]of Object.entries(a.reducers))this.reducers.set(e,s);this.root=this.compileTree(a),this.resolveAllTargets()}start(){if(this.started)throw new Error("State machine already started");if(this.log(" Starting state machine"),this.loaded){const a={type:"__load__"};this.evaluateAlwaysTransitions(a),this.checkFinalStates()}else this.initialize();return this.started=!0,this.captureHistory(),this}load(a){if(this.started)throw new Error("Cannot load snapshot on already started machine");this.log(" Loading snapshot");for(const s of a.configuration)if(!this.nodesById.get(s))throw new Error(`Invalid snapshot: state "${s}" not found in schema`);const e=new Set(a.configuration);if(e.size===0)throw new Error("Invalid snapshot: configuration is empty");if(this.context=a.context,a.stateCounters)for(const[s,o]of Object.entries(a.stateCounters)){if(!this.nodesById.has(s))throw new Error(`Invalid snapshot: state "${s}" in stateCounters not found in schema`);this.stateEntryCounters.set(s,o)}if(a.stateHistory)for(const[s,o]of Object.entries(a.stateHistory)){if(!this.nodesById.has(s))throw new Error(`Invalid snapshot: state "${s}" in stateHistory not found in schema`);if(!this.nodesById.has(o))throw new Error(`Invalid snapshot: state "${o}" in stateHistory not found in schema`);this.stateHistory.set(s,o)}return this.configuration=e,this.loaded=!0,this.log(" Snapshot loaded:",{configuration:Array.from(this.configuration),context:this.context}),this}dump(){if(this.configuration.size===0)throw new Error("Cannot dump: machine not started");return JSON.stringify(this.getSnapshot())}getRoot(){return this.root}getNode(a){return this.nodesById.get(a)}getNodeIds(){return Array.from(this.nodesById.keys())}getGuard(a){return this.guards.get(a)}getReducer(a){return this.reducers.get(a)}getContext(){return this.context}getActiveStateNodes(){return this.configuration}getStateValue(){return this.buildStateValue(this.root,!1)}buildStateValue(a,e){if(a===this.root){const s=a.children.find(o=>this.configuration.has(o.id));if(!s)throw new Error("No active state found");return this.buildStateValue(s,!1)}if(a.isAtomic())return e?{}:a.key;if(a.isCompound()){const s=a.children.find(c=>this.configuration.has(c.id));if(!s)return a.key;const o=this.buildStateValue(s,!1);return e?o:{[a.key]:o}}if(a.isParallel()){const s={};for(const o of a.regions)this.configuration.has(o.id)&&(s[o.key]=this.buildStateValue(o,!0));return e?s:{[a.key]:s}}return a.key}isHalted(){return this.halted}checkFinalStates(){for(const a of this.configuration){const e=this.nodesById.get(a);if(e&&e.kind==="atomic"&&e.final){this.halted=!0,this.log(`  Machine halted: reached final state "${a}"`);return}}}captureHistory(){if(!this.timeTravelEnabled)return;const a=this.getSnapshot();this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1),this.log(" History branched - truncated future history")),this.history.push(a),this.historyIndex=this.history.length-1,this.log(` History captured (index: ${this.historyIndex}, total: ${this.history.length})`)}restoreFromSnapshot(a){this.context=a.context,this.configuration=new Set(a.configuration),this.stateEntryCounters.clear();for(const[e,s]of Object.entries(a.stateCounters))this.stateEntryCounters.set(e,s);if(this.stateHistory.clear(),a.stateHistory)for(const[e,s]of Object.entries(a.stateHistory))this.stateHistory.set(e,s);this.halted=!1,this.checkFinalStates()}rewind(a=1){if(!this.timeTravelEnabled)throw new Error("Time travel not enabled. Set timeTravel: true in config.");if(!this.started)throw new Error("Cannot rewind: machine not started.");if(this.history.length===0)throw new Error("Cannot rewind: no history available.");const e=Math.max(0,this.historyIndex-a),s=this.historyIndex-e;if(s===0)return this.log(" Already at the beginning of history"),this;this.log(` Rewinding ${s} step(s) (from ${this.historyIndex} to ${e})`),this.historyIndex=e;const o=this.history[this.historyIndex];if(!o)throw new Error(`Invalid history state at index ${this.historyIndex}`);return this.restoreFromSnapshot(o),this.log(` Rewound to history index ${this.historyIndex}`),this}ff(a=1){if(!this.timeTravelEnabled)throw new Error("Time travel not enabled. Set timeTravel: true in config.");if(!this.started)throw new Error("Cannot fast-forward: machine not started.");if(this.history.length===0)throw new Error("Cannot fast-forward: no history available.");const e=Math.min(this.history.length-1,this.historyIndex+a),s=e-this.historyIndex;if(s===0)return this.log(" Already at the end of history"),this;this.log(` Fast-forwarding ${s} step(s) (from ${this.historyIndex} to ${e})`),this.historyIndex=e;const o=this.history[this.historyIndex];if(!o)throw new Error(`Invalid history state at index ${this.historyIndex}`);return this.restoreFromSnapshot(o),this.log(` Fast-forwarded to history index ${this.historyIndex}`),this}getHistoryIndex(){return this.historyIndex}getHistoryLength(){return this.history.length}getStateCounters(){const a={};for(const[e,s]of this.stateEntryCounters.entries())a[e]=s;return a}getSnapshot(){return{context:this.context,configuration:Array.from(this.configuration),stateCounters:this.getStateCounters(),stateHistory:this.getStateHistory()}}getStateHistory(){const a={};for(const[e,s]of this.stateHistory.entries())a[e]=s;return a}isActivityRelevant(a){return this.configuration.has(a.stateId)?(this.stateEntryCounters.get(a.stateId)??0)===a.instanceId:!1}getActiveActivities(){const a=[];for(const e of this.configuration){const s=this.nodesById.get(e);if(!s)continue;const o=this.stateEntryCounters.get(e)??0;for(const c of s.activities)a.push({type:c,stateId:e,instanceId:o})}return a}getActivityInstance(a){return`${a.stateId}_${a.instanceId}`}log(a,...e){this.debugEnabled&&console.log(a,...e)}executeReducer(a,e,s,o){const c=this.getReducer(a);if(!c)throw new Error(`Reducer "${String(a)}" not found`);this.log(`     Executing reducer: ${String(a)}`);const d=c({context:e,event:s,state:o}),g={...e,...d};return this.debugEnabled&&Object.keys(d).length>0&&this.log("      Context updates:",d),g}executeReducers(a,e,s,o){let c=e;for(const d of a)c=this.executeReducer(d,c,s,o);return c}initialize(){this.log(" Initializing state machine");const a={type:"__init__"},e=this.root.initial;if(!e)throw new Error("Root node must have an initial state");const s=new Set;this.context=this.activateState(e,a,this.context,s),this.configuration=s,this.log(" Initial configuration:",Array.from(this.configuration)),this.evaluateAlwaysTransitions(a),this.checkFinalStates()}resolveAllTargets(){for(const a of this.nodesById.values()){for(const[e,s]of a._onTransitions.entries())for(const o of s)o.targetIds&&(o.targetIds=o.targetIds.map(c=>c.includes(".")||this.nodesById.has(c)?c:this.resolveTargetId(c,a)));for(const e of a.alwaysTransitions)e.targetIds&&(e.targetIds=e.targetIds.map(s=>s.includes(".")||this.nodesById.has(s)?s:this.resolveTargetId(s,a)))}}activateState(a,e,s,o,c=!0){const d=this.stateEntryCounters.get(a.id)??0;this.stateEntryCounters.set(a.id,d+1),this.log(`  Entering state: ${a.id} (entry #${d+1})`);let g=this.executeReducers(a.onEntry,s,e,a.id);if(c&&!a.isAtomic()){if(a.isCompound()){let b=a.initial;if(a.history){const j=this.stateHistory.get(a.id);if(j){const _e=this.nodesById.get(j);_e&&a.children.includes(_e)&&(b=_e,this.log(`    Using history for ${a.id}: ${_e.id}`))}}b&&(g=this.activateState(b,e,g,o,!0))}else if(a.isParallel())for(const b of a.regions)g=this.activateState(b,e,g,o,!0)}return o.add(a.id),g}deactivateState(a,e,s){if(this.log(`  Exiting state: ${a.id}`),a.isCompound()&&a.history&&a.initial){const o=a.children.find(c=>this.configuration.has(c.id));o&&(this.stateHistory.set(a.id,o.id),this.log(`    Recording history for ${a.id}: ${o.id}`))}return this.executeReducers(a.onExit,s,e,a.id)}findLCA(a,e){const s=a.getAncestors(),o=e.getAncestors(),c=new Set(s);for(const d of o)if(c.has(d))return d;return this.root}getActiveAtomicNodes(a){const e=[];for(const s of a){const o=this.nodesById.get(s);o&&o.isAtomic()&&e.push(o)}return e}evaluateGuard(a,e,s,o){if(typeof a=="string"||typeof a=="symbol"){const c=this.getGuard(a);if(!c)throw new Error(`Guard "${String(a)}" not found`);const d=c({context:e,event:s,state:o});return this.log(`     Guard "${String(a)}": ${d?"PASS":"FAIL"}`),d}if(typeof a=="object"&&"type"in a){if(a.type==="ref"){const c=this.getGuard(a.id);if(!c)throw new Error(`Guard "${String(a.id)}" not found`);const d=c({context:e,event:s,state:o});return this.log(`     Guard "${String(a.id)}": ${d?"PASS":"FAIL"}`),d}if(a.type==="and")return this.log("     Evaluating AND guard"),a.items.every(c=>this.evaluateGuard(c,e,s,o));if(a.type==="or")return this.log("     Evaluating OR guard"),a.items.some(c=>this.evaluateGuard(c,e,s,o));if(a.type==="not")return this.log("     Evaluating NOT guard"),!this.evaluateGuard(a.item,e,s,o)}return!0}selectTransitions(a,e,s){const o=this.getActiveAtomicNodes(e);this.log(" Checking transitions for active atomic states:",o.map(j=>j.id));const c=[],d=new Set;for(const j of o){this.log(`   Checking state: ${j.id}`);const _e=j.getAncestors();for(const er of _e){const rr=er.getTransitions(a.type);rr.length>0&&this.log(`   Found ${rr.length} transition(s) on event "${a.type}" in ${er.id}`);for(let tr=0;tr<rr.length;tr++){const nr=rr[tr],ar=`${er.id}:${a.type}:${tr}`;if(d.has(ar)){this.log(`    Skipping duplicate transition from ${er.id} (already selected)`);continue}if(nr.guard&&!this.evaluateGuard(nr.guard,s,a,er.id))continue;const lr=nr.targetIds?nr.targetIds.join(", "):"internal";this.log(`    Selected transition: ${er.id}  ${lr}`),c.push({source:er,transition:nr}),d.add(ar);break}if(c.some(tr=>tr.source===er||er.isDescendantOf(tr.source)))break}}const g=new Set;for(const{source:j}of c){let _e=j.parent;for(;_e;)_e.isParallel()&&(g.add(_e.id),this.log(`    Marking parallel state ${_e.id} as child-handled`)),_e=_e.parent}return c.filter(({source:j})=>j.isParallel()&&g.has(j.id)?(this.log(`    Shadowing parent transition from ${j.id} (children handled event)`),!1):!0)}selectAlwaysTransitions(a,e){const s=this.getActiveAtomicNodes(a),o=[];for(const c of s){const d=c.getAncestors();for(const g of d){const b=g.alwaysTransitions;b.length>0&&this.log(`   Found ${b.length} always transition(s) in ${g.id}`);for(const j of b){if(j.guard){const er={type:"__always__"};if(!this.evaluateGuard(j.guard,e,er,g.id))continue}const _e=j.targetIds?j.targetIds.join(", "):"internal";this.log(`    Selected always transition: ${g.id}  ${_e}`),o.push({source:c,transition:j});break}if(o.some(j=>j.source===c))break}}return o}processTransitions(a,e,s,o){let c=s;for(const{source:d,transition:g}of a){if(!g.targetIds||g.targetIds.length===0){if(this.log(`
 Internal transition in: ${d.id}`),g.assign){const ar=d.id;c=this.executeReducer(g.assign,c,e,ar)}continue}const b=g.targetIds[0];if(!b)throw new Error("Transition has empty targetIds array");const j=this.nodesById.get(b);if(!j)throw new Error(`Target state "${b}" not found`);if(d===j){this.log(`
 Self-transition: ${d.id}`),c=this.deactivateState(d,e,c),o.delete(d.id),g.assign&&(c=this.executeReducer(g.assign,c,e,d.id)),c=this.activateState(d,e,c,o);continue}const _e=this.findLCA(d,j),er=j===_e,rr=[];let tr=d;for(;tr&&tr!==_e;)rr.push(tr),tr=tr.parent;er&&_e!==this.root&&rr.push(_e);const nr=[];if(er&&_e!==this.root)nr.push(_e);else for(tr=j;tr&&tr!==_e;)nr.unshift(tr),tr=tr.parent;this.log(`
 Transition: ${d.id}  ${j.id}`),this.log(`   LCA: ${_e.id}`),this.log("   Exit set:",rr.map(ar=>ar.id)),this.log("   Entry set:",nr.map(ar=>ar.id));for(const ar of rr){c=this.deactivateState(ar,e,c),o.delete(ar.id);for(const lr of Array.from(o)){const or=this.nodesById.get(lr);if(or&&or.isDescendantOf(ar)){if(or.isCompound()&&or.history&&or.initial){const ir=or.children.find(sr=>o.has(sr.id));ir&&(this.stateHistory.set(or.id,ir.id),this.log(`    Recording history for ${or.id}: ${ir.id}`))}o.delete(lr)}}}if(g.assign){const ar=d.id;this.log("     Executing transition assign"),c=this.executeReducer(g.assign,c,e,ar)}for(let ar=0;ar<nr.length;ar++){const lr=nr[ar],or=ar===nr.length-1;c=this.activateState(lr,e,c,o,or)}}return c}send(a){if(!this.started)throw new Error("Cannot send events: machine not started. Call start() first.");if(this.halted){this.log(`  Machine halted, ignoring event: ${a.type}`);return}this.log(`
 Event received: ${a.type}`),this.log("   Current configuration:",Array.from(this.configuration));const e=this.selectTransitions(a,this.configuration,this.context);if(e.length===0){this.log("   No enabled transitions found");const c=new Set(this.configuration),d=this.context;this.evaluateAlwaysTransitions(a),this.checkFinalStates();const g=this.configuration.size!==c.size||![...this.configuration].every(j=>c.has(j)),b=this.context!==d;(g||b)&&this.captureHistory();return}this.log(`
 Processing ${e.length} transition(s)`);let s=this.context;const o=new Set(this.configuration);s=this.processTransitions(e,a,s,o),this.context=s,this.configuration=o,this.log(`
 New configuration:`,Array.from(this.configuration)),this.evaluateAlwaysTransitions(a),this.checkFinalStates(),this.captureHistory()}evaluateAlwaysTransitions(a){let s=0;for(;s<100;){s++;const o=this.selectAlwaysTransitions(this.configuration,this.context);if(o.length===0)break;const c=o.every(({transition:b})=>!b.targetIds||b.targetIds.length===0);this.log(`
 Processing ${o.length} always transition(s) (iteration ${s})`);let d=this.context;const g=new Set(this.configuration);if(d=this.processTransitions(o,a,d,g),this.context=d,this.configuration=g,this.log(`
 Configuration after always:`,Array.from(this.configuration)),c)break}if(s>=100)throw new Error("Maximum always transition iterations reached - possible infinite loop")}compileTree(a){const e=new StateNode("__root__","__root__","compound",null);this.nodesById.set(e.id,e);for(const[o,c]of Object.entries(a.states)){const d=this.compileNode(o,c,e);e.addChild(d)}const s=this.nodesById.get(a.initial);if(!s)throw new Error(`Initial state "${a.initial}" not found`);return e.setInitial(s),a.on&&this.compileTransitions(e,a.on),e}compileNode(a,e,s){const o=s.id==="__root__"?a:`${s.id}.${a}`,c=e.type==="final",d=e.history??!1;let g="atomic";e.states&&(e.type==="parallel"?g="parallel":g=e.initial?"compound":"parallel");const b=new StateNode(o,a,g,s,c,d);if(this.nodesById.set(o,b),e.states){for(const[j,_e]of Object.entries(e.states)){const er=this.compileNode(j,_e,b);b.addChild(er),g==="parallel"&&b.addRegion(er)}if(g==="compound"&&e.initial){const j=b.children.find(_e=>_e.key===e.initial);if(!j)throw new Error(`Initial state "${e.initial}" not found in ${o}`);b.setInitial(j)}}if(e.on&&this.compileTransitions(b,e.on),e.always){const _e=(Array.isArray(e.always)?e.always:[e.always]).map(er=>this.compileTransition(er,b));b.addAlwaysTransitions(_e)}return e.activities&&b.setActivities(e.activities),e.onEntry&&b.setOnEntry(e.onEntry),e.onExit&&b.setOnExit(e.onExit),b}compileTransitions(a,e){for(const[s,o]of Object.entries(e)){const c=Array.isArray(o)?o.map(d=>this.compileTransition(d,a)):[this.compileTransition(o,a)];a.addOnTransitions(s,c)}}compileTransition(a,e){if(typeof a=="string")return{targetIds:[a]};const s={};return a.target&&(s.targetIds=[a.target]),a.guard&&(s.guard=a.guard),a.assign&&(s.assign=a.assign),s}resolveTargetId(a,e){if(a.includes(".")||this.nodesById.has(a))return a;if(e.parent){for(const s of e.parent.children)if(s.key===a)return s.id}return a}};function _arrayLikeToArray$1(a,e){(e==null||e>a.length)&&(e=a.length);for(var s=0,o=Array(e);s<e;s++)o[s]=a[s];return o}function _arrayWithHoles$1(a){if(Array.isArray(a))return a}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray$1(a)}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,e){for(var s=0;s<e.length;s++){var o=e[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,_toPropertyKey$1(o.key),o)}}function _createClass(a,e,s){return e&&_defineProperties(a.prototype,e),Object.defineProperty(a,"prototype",{writable:!1}),a}function _createForOfIteratorHelper(a,e){var s=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!s){if(Array.isArray(a)||(s=_unsupportedIterableToArray$1(a))||e){s&&(a=s);var o=0,c=function(){};return{s:c,n:function(){return o>=a.length?{done:!0}:{done:!1,value:a[o++]}},e:function(j){throw j},f:c}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d,g=!0,b=!1;return{s:function(){s=s.call(a)},n:function(){var j=s.next();return g=j.done,j},e:function(j){b=!0,d=j},f:function(){try{g||s.return==null||s.return()}finally{if(b)throw d}}}}function _defineProperty$1$1(a,e,s){return(e=_toPropertyKey$1(e))in a?Object.defineProperty(a,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[e]=s,a}function _iterableToArray(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function _iterableToArrayLimit$1(a,e){var s=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(s!=null){var o,c,d,g,b=[],j=!0,_e=!1;try{if(d=(s=s.call(a)).next,e===0){if(Object(s)!==s)return;j=!1}else for(;!(j=(o=d.call(s)).done)&&(b.push(o.value),b.length!==e);j=!0);}catch(er){_e=!0,c=er}finally{try{if(!j&&s.return!=null&&(g=s.return(),Object(g)!==g))return}finally{if(_e)throw c}}return b}}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray$1(a,e){return _arrayWithHoles$1(a)||_iterableToArrayLimit$1(a,e)||_unsupportedIterableToArray$1(a,e)||_nonIterableRest$1()}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray$1(a)||_nonIterableSpread()}function _toPrimitive$1(a,e){if(typeof a!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var o=s.call(a,e);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}function _toPropertyKey$1(a){var e=_toPrimitive$1(a,"string");return typeof e=="symbol"?e:e+""}function _typeof(a){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(a)}function _unsupportedIterableToArray$1(a,e){if(a){if(typeof a=="string")return _arrayLikeToArray$1(a,e);var s={}.toString.call(a).slice(8,-1);return s==="Object"&&a.constructor&&(s=a.constructor.name),s==="Map"||s==="Set"?Array.from(a):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray$1(a,e):void 0}}var _window=typeof window>"u"?null:window,navigator$1=_window?_window.navigator:null;_window&&_window.document;var typeofstr=_typeof(""),typeofobj=_typeof({}),typeoffn=_typeof(function(){}),typeofhtmlele=typeof HTMLElement>"u"?"undefined":_typeof(HTMLElement),instanceStr=function(e){return e&&e.instanceString&&fn$6(e.instanceString)?e.instanceString():null},string=function(e){return e!=null&&_typeof(e)==typeofstr},fn$6=function(e){return e!=null&&_typeof(e)===typeoffn},array=function(e){return!elementOrCollection(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},plainObject=function(e){return e!=null&&_typeof(e)===typeofobj&&!array(e)&&e.constructor===Object},object=function(e){return e!=null&&_typeof(e)===typeofobj},number$1=function(e){return e!=null&&_typeof(e)===_typeof(1)&&!isNaN(e)},integer=function(e){return number$1(e)&&Math.floor(e)===e},htmlElement=function(e){if(typeofhtmlele!=="undefined")return e!=null&&e instanceof HTMLElement},elementOrCollection=function(e){return element(e)||collection(e)},element=function(e){return instanceStr(e)==="collection"&&e._private.single},collection=function(e){return instanceStr(e)==="collection"&&!e._private.single},core=function(e){return instanceStr(e)==="core"},stylesheet=function(e){return instanceStr(e)==="stylesheet"},event=function(e){return instanceStr(e)==="event"},emptyString=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},domElement=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},boundingBox=function(e){return plainObject(e)&&number$1(e.x1)&&number$1(e.x2)&&number$1(e.y1)&&number$1(e.y2)},promise=function(e){return object(e)&&fn$6(e.then)},ms=function(){return navigator$1&&navigator$1.userAgent.match(/msie|trident|edge/i)},memoize=function(e,s){s||(s=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var d=[],g=0;g<arguments.length;g++)d.push(arguments[g]);return d.join("$")});var o=function(){var d=this,g=arguments,b,j=s.apply(d,g),_e=o.cache;return(b=_e[j])||(b=_e[j]=e.apply(d,g)),b};return o.cache={},o},camel2dash=memoize(function(a){return a.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),dash2camel=memoize(function(a){return a.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),prependCamel=memoize(function(a,e){return a+e[0].toUpperCase()+e.substring(1)},function(a,e){return a+"$"+e}),capitalize=function(e){return emptyString(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},endsWith=function(e,s){return e.slice(-1*s.length)===s},number="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",rgba="rgb[a]?\\(("+number+"[%]?)\\s*,\\s*("+number+"[%]?)\\s*,\\s*("+number+"[%]?)(?:\\s*,\\s*("+number+"))?\\)",rgbaNoBackRefs="rgb[a]?\\((?:"+number+"[%]?)\\s*,\\s*(?:"+number+"[%]?)\\s*,\\s*(?:"+number+"[%]?)(?:\\s*,\\s*(?:"+number+"))?\\)",hsla="hsl[a]?\\(("+number+")\\s*,\\s*("+number+"[%])\\s*,\\s*("+number+"[%])(?:\\s*,\\s*("+number+"))?\\)",hslaNoBackRefs="hsl[a]?\\((?:"+number+")\\s*,\\s*(?:"+number+"[%])\\s*,\\s*(?:"+number+"[%])(?:\\s*,\\s*(?:"+number+"))?\\)",hex3="\\#[0-9a-fA-F]{3}",hex6="\\#[0-9a-fA-F]{6}",ascending=function(e,s){return e<s?-1:e>s?1:0},descending=function(e,s){return-1*ascending(e,s)},extend=Object.assign!=null?Object.assign.bind(Object):function(a){for(var e=arguments,s=1;s<e.length;s++){var o=e[s];if(o!=null)for(var c=Object.keys(o),d=0;d<c.length;d++){var g=c[d];a[g]=o[g]}}return a},hex2tuple=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var s=e.length===4,o,c,d,g=16;return s?(o=parseInt(e[1]+e[1],g),c=parseInt(e[2]+e[2],g),d=parseInt(e[3]+e[3],g)):(o=parseInt(e[1]+e[2],g),c=parseInt(e[3]+e[4],g),d=parseInt(e[5]+e[6],g)),[o,c,d]}},hsl2tuple=function(e){var s,o,c,d,g,b,j,_e;function er(ar,lr,or){return or<0&&(or+=1),or>1&&(or-=1),or<1/6?ar+(lr-ar)*6*or:or<1/2?lr:or<2/3?ar+(lr-ar)*(2/3-or)*6:ar}var rr=new RegExp("^"+hsla+"$").exec(e);if(rr){if(o=parseInt(rr[1]),o<0?o=(360- -1*o%360)%360:o>360&&(o=o%360),o/=360,c=parseFloat(rr[2]),c<0||c>100||(c=c/100,d=parseFloat(rr[3]),d<0||d>100)||(d=d/100,g=rr[4],g!==void 0&&(g=parseFloat(g),g<0||g>1)))return;if(c===0)b=j=_e=Math.round(d*255);else{var tr=d<.5?d*(1+c):d+c-d*c,nr=2*d-tr;b=Math.round(255*er(nr,tr,o+1/3)),j=Math.round(255*er(nr,tr,o)),_e=Math.round(255*er(nr,tr,o-1/3))}s=[b,j,_e,g]}return s},rgb2tuple=function(e){var s,o=new RegExp("^"+rgba+"$").exec(e);if(o){s=[];for(var c=[],d=1;d<=3;d++){var g=o[d];if(g[g.length-1]==="%"&&(c[d]=!0),g=parseFloat(g),c[d]&&(g=g/100*255),g<0||g>255)return;s.push(Math.floor(g))}var b=c[1]||c[2]||c[3],j=c[1]&&c[2]&&c[3];if(b&&!j)return;var _e=o[4];if(_e!==void 0){if(_e=parseFloat(_e),_e<0||_e>1)return;s.push(_e)}}return s},colorname2tuple=function(e){return colors[e.toLowerCase()]},color2tuple=function(e){return(array(e)?e:null)||colorname2tuple(e)||hex2tuple(e)||rgb2tuple(e)||hsl2tuple(e)},colors={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},setMap=function(e){for(var s=e.map,o=e.keys,c=o.length,d=0;d<c;d++){var g=o[d];if(plainObject(g))throw Error("Tried to set map with object key");d<o.length-1?(s[g]==null&&(s[g]={}),s=s[g]):s[g]=e.value}},getMap=function(e){for(var s=e.map,o=e.keys,c=o.length,d=0;d<c;d++){var g=o[d];if(plainObject(g))throw Error("Tried to get map with object key");if(s=s[g],s==null)return s}return s},commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var isObject_1$1,hasRequiredIsObject$1;function requireIsObject$1(){if(hasRequiredIsObject$1)return isObject_1$1;hasRequiredIsObject$1=1;function a(e){var s=typeof e;return e!=null&&(s=="object"||s=="function")}return isObject_1$1=a,isObject_1$1}var _freeGlobal$1,hasRequired_freeGlobal$1;function require_freeGlobal$1(){if(hasRequired_freeGlobal$1)return _freeGlobal$1;hasRequired_freeGlobal$1=1;var a=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal;return _freeGlobal$1=a,_freeGlobal$1}var _root$1,hasRequired_root$1;function require_root$1(){if(hasRequired_root$1)return _root$1;hasRequired_root$1=1;var a=require_freeGlobal$1(),e=typeof self=="object"&&self&&self.Object===Object&&self,s=a||e||Function("return this")();return _root$1=s,_root$1}var now_1$1,hasRequiredNow$1;function requireNow$1(){if(hasRequiredNow$1)return now_1$1;hasRequiredNow$1=1;var a=require_root$1(),e=function(){return a.Date.now()};return now_1$1=e,now_1$1}var _trimmedEndIndex$1,hasRequired_trimmedEndIndex$1;function require_trimmedEndIndex$1(){if(hasRequired_trimmedEndIndex$1)return _trimmedEndIndex$1;hasRequired_trimmedEndIndex$1=1;var a=/\s/;function e(s){for(var o=s.length;o--&&a.test(s.charAt(o)););return o}return _trimmedEndIndex$1=e,_trimmedEndIndex$1}var _baseTrim$1,hasRequired_baseTrim$1;function require_baseTrim$1(){if(hasRequired_baseTrim$1)return _baseTrim$1;hasRequired_baseTrim$1=1;var a=require_trimmedEndIndex$1(),e=/^\s+/;function s(o){return o&&o.slice(0,a(o)+1).replace(e,"")}return _baseTrim$1=s,_baseTrim$1}var _Symbol$1,hasRequired_Symbol$1;function require_Symbol$1(){if(hasRequired_Symbol$1)return _Symbol$1;hasRequired_Symbol$1=1;var a=require_root$1(),e=a.Symbol;return _Symbol$1=e,_Symbol$1}var _getRawTag$1,hasRequired_getRawTag$1;function require_getRawTag$1(){if(hasRequired_getRawTag$1)return _getRawTag$1;hasRequired_getRawTag$1=1;var a=require_Symbol$1(),e=Object.prototype,s=e.hasOwnProperty,o=e.toString,c=a?a.toStringTag:void 0;function d(g){var b=s.call(g,c),j=g[c];try{g[c]=void 0;var _e=!0}catch{}var er=o.call(g);return _e&&(b?g[c]=j:delete g[c]),er}return _getRawTag$1=d,_getRawTag$1}var _objectToString$1,hasRequired_objectToString$1;function require_objectToString$1(){if(hasRequired_objectToString$1)return _objectToString$1;hasRequired_objectToString$1=1;var a=Object.prototype,e=a.toString;function s(o){return e.call(o)}return _objectToString$1=s,_objectToString$1}var _baseGetTag$1,hasRequired_baseGetTag$1;function require_baseGetTag$1(){if(hasRequired_baseGetTag$1)return _baseGetTag$1;hasRequired_baseGetTag$1=1;var a=require_Symbol$1(),e=require_getRawTag$1(),s=require_objectToString$1(),o="[object Null]",c="[object Undefined]",d=a?a.toStringTag:void 0;function g(b){return b==null?b===void 0?c:o:d&&d in Object(b)?e(b):s(b)}return _baseGetTag$1=g,_baseGetTag$1}var isObjectLike_1$1,hasRequiredIsObjectLike$1;function requireIsObjectLike$1(){if(hasRequiredIsObjectLike$1)return isObjectLike_1$1;hasRequiredIsObjectLike$1=1;function a(e){return e!=null&&typeof e=="object"}return isObjectLike_1$1=a,isObjectLike_1$1}var isSymbol_1$1,hasRequiredIsSymbol$1;function requireIsSymbol$1(){if(hasRequiredIsSymbol$1)return isSymbol_1$1;hasRequiredIsSymbol$1=1;var a=require_baseGetTag$1(),e=requireIsObjectLike$1(),s="[object Symbol]";function o(c){return typeof c=="symbol"||e(c)&&a(c)==s}return isSymbol_1$1=o,isSymbol_1$1}var toNumber_1$1,hasRequiredToNumber$1;function requireToNumber$1(){if(hasRequiredToNumber$1)return toNumber_1$1;hasRequiredToNumber$1=1;var a=require_baseTrim$1(),e=requireIsObject$1(),s=requireIsSymbol$1(),o=NaN,c=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,g=/^0o[0-7]+$/i,b=parseInt;function j(_e){if(typeof _e=="number")return _e;if(s(_e))return o;if(e(_e)){var er=typeof _e.valueOf=="function"?_e.valueOf():_e;_e=e(er)?er+"":er}if(typeof _e!="string")return _e===0?_e:+_e;_e=a(_e);var rr=d.test(_e);return rr||g.test(_e)?b(_e.slice(2),rr?2:8):c.test(_e)?o:+_e}return toNumber_1$1=j,toNumber_1$1}var debounce_1,hasRequiredDebounce;function requireDebounce(){if(hasRequiredDebounce)return debounce_1;hasRequiredDebounce=1;var a=requireIsObject$1(),e=requireNow$1(),s=requireToNumber$1(),o="Expected a function",c=Math.max,d=Math.min;function g(b,j,_e){var er,rr,tr,nr,ar,lr,or=0,ir=!1,sr=!1,ur=!0;if(typeof b!="function")throw new TypeError(o);j=s(j)||0,a(_e)&&(ir=!!_e.leading,sr="maxWait"in _e,tr=sr?c(s(_e.maxWait)||0,j):tr,ur="trailing"in _e?!!_e.trailing:ur);function cr(br){var Er=er,_r=rr;return er=rr=void 0,or=br,nr=b.apply(_r,Er),nr}function fr(br){return or=br,ar=setTimeout(vr,j),ir?cr(br):nr}function hr(br){var Er=br-lr,_r=br-or,Rr=j-Er;return sr?d(Rr,tr-_r):Rr}function dr(br){var Er=br-lr,_r=br-or;return lr===void 0||Er>=j||Er<0||sr&&_r>=tr}function vr(){var br=e();if(dr(br))return gr(br);ar=setTimeout(vr,hr(br))}function gr(br){return ar=void 0,ur&&er?cr(br):(er=rr=void 0,nr)}function pr(){ar!==void 0&&clearTimeout(ar),or=0,er=lr=rr=ar=void 0}function mr(){return ar===void 0?nr:gr(e())}function yr(){var br=e(),Er=dr(br);if(er=arguments,rr=this,lr=br,Er){if(ar===void 0)return fr(lr);if(sr)return clearTimeout(ar),ar=setTimeout(vr,j),cr(lr)}return ar===void 0&&(ar=setTimeout(vr,j)),nr}return yr.cancel=pr,yr.flush=mr,yr}return debounce_1=g,debounce_1}var debounceExports=requireDebounce(),debounce=getDefaultExportFromCjs(debounceExports),performance$1=_window?_window.performance:null,pnow=performance$1&&performance$1.now?function(){return performance$1.now()}:function(){return Date.now()},raf=function(){if(_window){if(_window.requestAnimationFrame)return function(a){_window.requestAnimationFrame(a)};if(_window.mozRequestAnimationFrame)return function(a){_window.mozRequestAnimationFrame(a)};if(_window.webkitRequestAnimationFrame)return function(a){_window.webkitRequestAnimationFrame(a)};if(_window.msRequestAnimationFrame)return function(a){_window.msRequestAnimationFrame(a)}}return function(a){a&&setTimeout(function(){a(pnow())},1e3/60)}}(),requestAnimationFrame=function(e){return raf(e)},performanceNow=pnow,DEFAULT_HASH_SEED=9261,K=65599,DEFAULT_HASH_SEED_ALT=5381,hashIterableInts=function(e){for(var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:DEFAULT_HASH_SEED,o=s,c;c=e.next(),!c.done;)o=o*K+c.value|0;return o},hashInt=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:DEFAULT_HASH_SEED;return s*K+e|0},hashIntAlt=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:DEFAULT_HASH_SEED_ALT;return(s<<5)+s+e|0},combineHashes=function(e,s){return e*2097152+s},combineHashesArray=function(e){return e[0]*2097152+e[1]},hashArrays=function(e,s){return[hashInt(e[0],s[0]),hashIntAlt(e[1],s[1])]},hashIntsArray=function(e,s){var o={value:0,done:!1},c=0,d=e.length,g={next:function(){return c<d?o.value=e[c++]:o.done=!0,o}};return hashIterableInts(g,s)},hashString=function(e,s){var o={value:0,done:!1},c=0,d=e.length,g={next:function(){return c<d?o.value=e.charCodeAt(c++):o.done=!0,o}};return hashIterableInts(g,s)},hashStrings=function(){return hashStringsArray(arguments)},hashStringsArray=function(e){for(var s,o=0;o<e.length;o++){var c=e[o];o===0?s=hashString(c):s=hashString(c,s)}return s};function rotatePoint(a,e,s,o,c){var d=c*Math.PI/180,g=Math.cos(d)*(a-s)-Math.sin(d)*(e-o)+s,b=Math.sin(d)*(a-s)+Math.cos(d)*(e-o)+o;return{x:g,y:b}}var movePointByBoxAspect=function(e,s,o,c,d,g){return{x:(e-o)*d+o,y:(s-c)*g+c}};function rotatePosAndSkewByBox(a,e,s){if(s===0)return a;var o=(e.x1+e.x2)/2,c=(e.y1+e.y2)/2,d=e.w/e.h,g=1/d,b=rotatePoint(a.x,a.y,o,c,s),j=movePointByBoxAspect(b.x,b.y,o,c,d,g);return{x:j.x,y:j.y}}var warningsEnabled=!0,warnSupported=console.warn!=null,traceSupported=console.trace!=null,MAX_INT$1=Number.MAX_SAFE_INTEGER||9007199254740991,trueify=function(){return!0},falsify=function(){return!1},zeroify=function(){return 0},noop$1=function(){},error=function(e){throw new Error(e)},warnings=function(e){if(e!==void 0)warningsEnabled=!!e;else return warningsEnabled},warn=function(e){warnings()&&(warnSupported?console.warn(e):(console.log(e),traceSupported&&console.trace()))},clone=function(e){return extend({},e)},copy=function(e){return e==null?e:array(e)?e.slice():plainObject(e)?clone(e):e},copyArray=function(e){return e.slice()},uuid=function(e,s){for(s=e="";e++<36;s+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return s},_staticEmptyObject={},staticEmptyObject=function(){return _staticEmptyObject},defaults$g=function(e){var s=Object.keys(e);return function(o){for(var c={},d=0;d<s.length;d++){var g=s[d],b=o==null?void 0:o[g];c[g]=b===void 0?e[g]:b}return c}},removeFromArray=function(e,s,o){for(var c=e.length-1;c>=0;c--)e[c]===s&&e.splice(c,1)},clearArray=function(e){e.splice(0,e.length)},push=function(e,s){for(var o=0;o<s.length;o++){var c=s[o];e.push(c)}},getPrefixedProperty=function(e,s,o){return o&&(s=prependCamel(o,s)),e[s]},setPrefixedProperty=function(e,s,o,c){o&&(s=prependCamel(o,s)),e[s]=c},ObjectMap=function(){function a(){_classCallCheck(this,a),this._obj={}}return _createClass(a,[{key:"set",value:function(s,o){return this._obj[s]=o,this}},{key:"delete",value:function(s){return this._obj[s]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(s){return this._obj[s]!==void 0}},{key:"get",value:function(s){return this._obj[s]}}])}(),Map$1=typeof Map<"u"?Map:ObjectMap,undef="undefined",ObjectSet=function(){function a(e){if(_classCallCheck(this,a),this._obj=Object.create(null),this.size=0,e!=null){var s;e.instanceString!=null&&e.instanceString()===this.instanceString()?s=e.toArray():s=e;for(var o=0;o<s.length;o++)this.add(s[o])}}return _createClass(a,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(s){var o=this._obj;o[s]!==1&&(o[s]=1,this.size++)}},{key:"delete",value:function(s){var o=this._obj;o[s]===1&&(o[s]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(s){return this._obj[s]===1}},{key:"toArray",value:function(){var s=this;return Object.keys(this._obj).filter(function(o){return s.has(o)})}},{key:"forEach",value:function(s,o){return this.toArray().forEach(s,o)}}])}(),Set$1=(typeof Set>"u"?"undefined":_typeof(Set))!==undef?Set:ObjectSet,Element=function(e,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||s===void 0||!core(e)){error("An element must have a core reference and parameters set");return}var c=s.group;if(c==null&&(s.data&&s.data.source!=null&&s.data.target!=null?c="edges":c="nodes"),c!=="nodes"&&c!=="edges"){error("An element must be of type `nodes` or `edges`; you specified `"+c+"`");return}this.length=1,this[0]=this;var d=this._private={cy:e,single:!0,data:s.data||{},position:s.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:c,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!s.selected,selectable:s.selectable===void 0?!0:!!s.selectable,locked:!!s.locked,grabbed:!1,grabbable:s.grabbable===void 0?!0:!!s.grabbable,pannable:s.pannable===void 0?c==="edges":!!s.pannable,active:!1,classes:new Set$1,animation:{current:[],queue:[]},rscratch:{},scratch:s.scratch||{},edges:[],children:[],parent:s.parent&&s.parent.isNode()?s.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(d.position.x==null&&(d.position.x=0),d.position.y==null&&(d.position.y=0),s.renderedPosition){var g=s.renderedPosition,b=e.pan(),j=e.zoom();d.position={x:(g.x-b.x)/j,y:(g.y-b.y)/j}}var _e=[];array(s.classes)?_e=s.classes:string(s.classes)&&(_e=s.classes.split(/\s+/));for(var er=0,rr=_e.length;er<rr;er++){var tr=_e[er];!tr||tr===""||d.classes.add(tr)}this.createEmitter(),(o===void 0||o)&&this.restore();var nr=s.style||s.css;nr&&(warn("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(nr))},defineSearch=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(o,c,d){var g;plainObject(o)&&!elementOrCollection(o)&&(g=o,o=g.roots||g.root,c=g.visit,d=g.directed),d=arguments.length===2&&!fn$6(c)?c:d,c=fn$6(c)?c:function(){};for(var b=this._private.cy,j=o=string(o)?this.filter(o):o,_e=[],er=[],rr={},tr={},nr={},ar=0,lr,or=this.byGroup(),ir=or.nodes,sr=or.edges,ur=0;ur<j.length;ur++){var cr=j[ur],fr=cr.id();cr.isNode()&&(_e.unshift(cr),e.bfs&&(nr[fr]=!0,er.push(cr)),tr[fr]=0)}for(var hr=function(){var br=e.bfs?_e.shift():_e.pop(),Er=br.id();if(e.dfs){if(nr[Er])return 0;nr[Er]=!0,er.push(br)}var _r=tr[Er],Rr=rr[Er],Cr=Rr!=null?Rr.source():null,wr=Rr!=null?Rr.target():null,$r=Rr==null?void 0:br.same(Cr)?wr[0]:Cr[0],Ar;if(Ar=c(br,Rr,$r,ar++,_r),Ar===!0)return lr=br,1;if(Ar===!1)return 1;for(var Sr=br.connectedEdges().filter(function(Pr){return(!d||Pr.source().same(br))&&sr.has(Pr)}),kr=0;kr<Sr.length;kr++){var Mr=Sr[kr],qr=Mr.connectedNodes().filter(function(Pr){return!Pr.same(br)&&ir.has(Pr)}),Tr=qr.id();qr.length!==0&&!nr[Tr]&&(qr=qr[0],_e.push(qr),e.bfs&&(nr[Tr]=!0,er.push(qr)),rr[Tr]=Mr,tr[Tr]=tr[Er]+1)}},dr;_e.length!==0&&(dr=hr(),!(dr!==0&&dr===1)););for(var vr=b.collection(),gr=0;gr<er.length;gr++){var pr=er[gr],mr=rr[pr.id()];mr!=null&&vr.push(mr),vr.push(pr)}return{path:b.collection(vr),found:b.collection(lr)}}},elesfn$v={breadthFirstSearch:defineSearch({bfs:!0}),depthFirstSearch:defineSearch({dfs:!0})};elesfn$v.bfs=elesfn$v.breadthFirstSearch;elesfn$v.dfs=elesfn$v.depthFirstSearch;var heap$2={exports:{}},heap$1=heap$2.exports,hasRequiredHeap$1;function requireHeap$1(){return hasRequiredHeap$1||(hasRequiredHeap$1=1,function(a,e){(function(){var s,o,c,d,g,b,j,_e,er,rr,tr,nr,ar,lr,or;c=Math.floor,rr=Math.min,o=function(ir,sr){return ir<sr?-1:ir>sr?1:0},er=function(ir,sr,ur,cr,fr){var hr;if(ur==null&&(ur=0),fr==null&&(fr=o),ur<0)throw new Error("lo must be non-negative");for(cr==null&&(cr=ir.length);ur<cr;)hr=c((ur+cr)/2),fr(sr,ir[hr])<0?cr=hr:ur=hr+1;return[].splice.apply(ir,[ur,ur-ur].concat(sr)),sr},b=function(ir,sr,ur){return ur==null&&(ur=o),ir.push(sr),lr(ir,0,ir.length-1,ur)},g=function(ir,sr){var ur,cr;return sr==null&&(sr=o),ur=ir.pop(),ir.length?(cr=ir[0],ir[0]=ur,or(ir,0,sr)):cr=ur,cr},_e=function(ir,sr,ur){var cr;return ur==null&&(ur=o),cr=ir[0],ir[0]=sr,or(ir,0,ur),cr},j=function(ir,sr,ur){var cr;return ur==null&&(ur=o),ir.length&&ur(ir[0],sr)<0&&(cr=[ir[0],sr],sr=cr[0],ir[0]=cr[1],or(ir,0,ur)),sr},d=function(ir,sr){var ur,cr,fr,hr,dr,vr;for(sr==null&&(sr=o),hr=(function(){vr=[];for(var gr=0,pr=c(ir.length/2);0<=pr?gr<pr:gr>pr;0<=pr?gr++:gr--)vr.push(gr);return vr}).apply(this).reverse(),dr=[],cr=0,fr=hr.length;cr<fr;cr++)ur=hr[cr],dr.push(or(ir,ur,sr));return dr},ar=function(ir,sr,ur){var cr;if(ur==null&&(ur=o),cr=ir.indexOf(sr),cr!==-1)return lr(ir,0,cr,ur),or(ir,cr,ur)},tr=function(ir,sr,ur){var cr,fr,hr,dr,vr;if(ur==null&&(ur=o),fr=ir.slice(0,sr),!fr.length)return fr;for(d(fr,ur),vr=ir.slice(sr),hr=0,dr=vr.length;hr<dr;hr++)cr=vr[hr],j(fr,cr,ur);return fr.sort(ur).reverse()},nr=function(ir,sr,ur){var cr,fr,hr,dr,vr,gr,pr,mr,yr;if(ur==null&&(ur=o),sr*10<=ir.length){if(hr=ir.slice(0,sr).sort(ur),!hr.length)return hr;for(fr=hr[hr.length-1],pr=ir.slice(sr),dr=0,gr=pr.length;dr<gr;dr++)cr=pr[dr],ur(cr,fr)<0&&(er(hr,cr,0,null,ur),hr.pop(),fr=hr[hr.length-1]);return hr}for(d(ir,ur),yr=[],vr=0,mr=rr(sr,ir.length);0<=mr?vr<mr:vr>mr;0<=mr?++vr:--vr)yr.push(g(ir,ur));return yr},lr=function(ir,sr,ur,cr){var fr,hr,dr;for(cr==null&&(cr=o),fr=ir[ur];ur>sr;){if(dr=ur-1>>1,hr=ir[dr],cr(fr,hr)<0){ir[ur]=hr,ur=dr;continue}break}return ir[ur]=fr},or=function(ir,sr,ur){var cr,fr,hr,dr,vr;for(ur==null&&(ur=o),fr=ir.length,vr=sr,hr=ir[sr],cr=2*sr+1;cr<fr;)dr=cr+1,dr<fr&&!(ur(ir[cr],ir[dr])<0)&&(cr=dr),ir[sr]=ir[cr],sr=cr,cr=2*sr+1;return ir[sr]=hr,lr(ir,vr,sr,ur)},s=function(){ir.push=b,ir.pop=g,ir.replace=_e,ir.pushpop=j,ir.heapify=d,ir.updateItem=ar,ir.nlargest=tr,ir.nsmallest=nr;function ir(sr){this.cmp=sr??o,this.nodes=[]}return ir.prototype.push=function(sr){return b(this.nodes,sr,this.cmp)},ir.prototype.pop=function(){return g(this.nodes,this.cmp)},ir.prototype.peek=function(){return this.nodes[0]},ir.prototype.contains=function(sr){return this.nodes.indexOf(sr)!==-1},ir.prototype.replace=function(sr){return _e(this.nodes,sr,this.cmp)},ir.prototype.pushpop=function(sr){return j(this.nodes,sr,this.cmp)},ir.prototype.heapify=function(){return d(this.nodes,this.cmp)},ir.prototype.updateItem=function(sr){return ar(this.nodes,sr,this.cmp)},ir.prototype.clear=function(){return this.nodes=[]},ir.prototype.empty=function(){return this.nodes.length===0},ir.prototype.size=function(){return this.nodes.length},ir.prototype.clone=function(){var sr;return sr=new ir,sr.nodes=this.nodes.slice(0),sr},ir.prototype.toArray=function(){return this.nodes.slice(0)},ir.prototype.insert=ir.prototype.push,ir.prototype.top=ir.prototype.peek,ir.prototype.front=ir.prototype.peek,ir.prototype.has=ir.prototype.contains,ir.prototype.copy=ir.prototype.clone,ir}(),function(ir,sr){return a.exports=sr()}(this,function(){return s})}).call(heap$1)}(heap$2)),heap$2.exports}var heap,hasRequiredHeap;function requireHeap(){return hasRequiredHeap||(hasRequiredHeap=1,heap=requireHeap$1()),heap}var heapExports=requireHeap(),Heap=getDefaultExportFromCjs(heapExports),dijkstraDefaults=defaults$g({root:null,weight:function(e){return 1},directed:!1}),elesfn$u={dijkstra:function(e){if(!plainObject(e)){var s=arguments;e={root:s[0],weight:s[1],directed:s[2]}}var o=dijkstraDefaults(e),c=o.root,d=o.weight,g=o.directed,b=this,j=d,_e=string(c)?this.filter(c)[0]:c[0],er={},rr={},tr={},nr=this.byGroup(),ar=nr.nodes,lr=nr.edges;lr.unmergeBy(function(_r){return _r.isLoop()});for(var or=function(Rr){return er[Rr.id()]},ir=function(Rr,Cr){er[Rr.id()]=Cr,sr.updateItem(Rr)},sr=new Heap(function(_r,Rr){return or(_r)-or(Rr)}),ur=0;ur<ar.length;ur++){var cr=ar[ur];er[cr.id()]=cr.same(_e)?0:1/0,sr.push(cr)}for(var fr=function(Rr,Cr){for(var wr=(g?Rr.edgesTo(Cr):Rr.edgesWith(Cr)).intersect(lr),$r=1/0,Ar,Sr=0;Sr<wr.length;Sr++){var kr=wr[Sr],Mr=j(kr);(Mr<$r||!Ar)&&($r=Mr,Ar=kr)}return{edge:Ar,dist:$r}};sr.size()>0;){var hr=sr.pop(),dr=or(hr),vr=hr.id();if(tr[vr]=dr,dr!==1/0)for(var gr=hr.neighborhood().intersect(ar),pr=0;pr<gr.length;pr++){var mr=gr[pr],yr=mr.id(),br=fr(hr,mr),Er=dr+br.dist;Er<or(mr)&&(ir(mr,Er),rr[yr]={node:hr,edge:br.edge})}}return{distanceTo:function(Rr){var Cr=string(Rr)?ar.filter(Rr)[0]:Rr[0];return tr[Cr.id()]},pathTo:function(Rr){var Cr=string(Rr)?ar.filter(Rr)[0]:Rr[0],wr=[],$r=Cr,Ar=$r.id();if(Cr.length>0)for(wr.unshift(Cr);rr[Ar];){var Sr=rr[Ar];wr.unshift(Sr.edge),wr.unshift(Sr.node),$r=Sr.node,Ar=$r.id()}return b.spawn(wr)}}}},elesfn$t={kruskal:function(e){e=e||function(ur){return 1};for(var s=this.byGroup(),o=s.nodes,c=s.edges,d=o.length,g=new Array(d),b=o,j=function(cr){for(var fr=0;fr<g.length;fr++){var hr=g[fr];if(hr.has(cr))return fr}},_e=0;_e<d;_e++)g[_e]=this.spawn(o[_e]);for(var er=c.sort(function(ur,cr){return e(ur)-e(cr)}),rr=0;rr<er.length;rr++){var tr=er[rr],nr=tr.source()[0],ar=tr.target()[0],lr=j(nr),or=j(ar),ir=g[lr],sr=g[or];lr!==or&&(b.merge(tr),ir.merge(sr),g.splice(or,1))}return b}},aStarDefaults=defaults$g({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),elesfn$s={aStar:function(e){var s=this.cy(),o=aStarDefaults(e),c=o.root,d=o.goal,g=o.heuristic,b=o.directed,j=o.weight;c=s.collection(c)[0],d=s.collection(d)[0];var _e=c.id(),er=d.id(),rr={},tr={},nr={},ar=new Heap(function(Ar,Sr){return tr[Ar.id()]-tr[Sr.id()]}),lr=new Set$1,or={},ir={},sr=function(Sr,kr){ar.push(Sr),lr.add(kr)},ur,cr,fr=function(){ur=ar.pop(),cr=ur.id(),lr.delete(cr)},hr=function(Sr){return lr.has(Sr)};sr(c,_e),rr[_e]=0,tr[_e]=g(c);for(var dr=0;ar.size()>0;){if(fr(),dr++,cr===er){for(var vr=[],gr=d,pr=er,mr=ir[pr];vr.unshift(gr),mr!=null&&vr.unshift(mr),gr=or[pr],gr!=null;)pr=gr.id(),mr=ir[pr];return{found:!0,distance:rr[cr],path:this.spawn(vr),steps:dr}}nr[cr]=!0;for(var yr=ur._private.edges,br=0;br<yr.length;br++){var Er=yr[br];if(this.hasElementWithId(Er.id())&&!(b&&Er.data("source")!==cr)){var _r=Er.source(),Rr=Er.target(),Cr=_r.id()!==cr?_r:Rr,wr=Cr.id();if(this.hasElementWithId(wr)&&!nr[wr]){var $r=rr[cr]+j(Er);if(!hr(wr)){rr[wr]=$r,tr[wr]=$r+g(Cr),sr(Cr,wr),or[wr]=ur,ir[wr]=Er;continue}$r<rr[wr]&&(rr[wr]=$r,tr[wr]=$r+g(Cr),or[wr]=ur,ir[wr]=Er)}}}}return{found:!1,distance:void 0,path:void 0,steps:dr}}},floydWarshallDefaults=defaults$g({weight:function(e){return 1},directed:!1}),elesfn$r={floydWarshall:function(e){for(var s=this.cy(),o=floydWarshallDefaults(e),c=o.weight,d=o.directed,g=c,b=this.byGroup(),j=b.nodes,_e=b.edges,er=j.length,rr=er*er,tr=function(Mr){return j.indexOf(Mr)},nr=function(Mr){return j[Mr]},ar=new Array(rr),lr=0;lr<rr;lr++){var or=lr%er,ir=(lr-or)/er;ir===or?ar[lr]=0:ar[lr]=1/0}for(var sr=new Array(rr),ur=new Array(rr),cr=0;cr<_e.length;cr++){var fr=_e[cr],hr=fr.source()[0],dr=fr.target()[0];if(hr!==dr){var vr=tr(hr),gr=tr(dr),pr=vr*er+gr,mr=g(fr);if(ar[pr]>mr&&(ar[pr]=mr,sr[pr]=gr,ur[pr]=fr),!d){var yr=gr*er+vr;!d&&ar[yr]>mr&&(ar[yr]=mr,sr[yr]=vr,ur[yr]=fr)}}}for(var br=0;br<er;br++)for(var Er=0;Er<er;Er++)for(var _r=Er*er+br,Rr=0;Rr<er;Rr++){var Cr=Er*er+Rr,wr=br*er+Rr;ar[_r]+ar[wr]<ar[Cr]&&(ar[Cr]=ar[_r]+ar[wr],sr[Cr]=sr[_r])}var $r=function(Mr){return(string(Mr)?s.filter(Mr):Mr)[0]},Ar=function(Mr){return tr($r(Mr))},Sr={distance:function(Mr,qr){var Tr=Ar(Mr),Pr=Ar(qr);return ar[Tr*er+Pr]},path:function(Mr,qr){var Tr=Ar(Mr),Pr=Ar(qr),Br=nr(Tr);if(Tr===Pr)return Br.collection();if(sr[Tr*er+Pr]==null)return s.collection();var Ur=s.collection(),Nr=Tr,Ir;for(Ur.merge(Br);Tr!==Pr;)Nr=Tr,Tr=sr[Tr*er+Pr],Ir=ur[Nr*er+Tr],Ur.merge(Ir),Ur.merge(nr(Tr));return Ur}};return Sr}},bellmanFordDefaults=defaults$g({weight:function(e){return 1},directed:!1,root:null}),elesfn$q={bellmanFord:function(e){var s=this,o=bellmanFordDefaults(e),c=o.weight,d=o.directed,g=o.root,b=c,j=this,_e=this.cy(),er=this.byGroup(),rr=er.edges,tr=er.nodes,nr=tr.length,ar=new Map$1,lr=!1,or=[];g=_e.collection(g)[0],rr.unmergeBy(function(Vr){return Vr.isLoop()});for(var ir=rr.length,sr=function(Zr){var et=ar.get(Zr.id());return et||(et={},ar.set(Zr.id(),et)),et},ur=function(Zr){return(string(Zr)?_e.$(Zr):Zr)[0]},cr=function(Zr){return sr(ur(Zr)).dist},fr=function(Zr){for(var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g,Yr=ur(Zr),Qr=[],Jr=Yr;;){if(Jr==null)return s.spawn();var rt=sr(Jr),tt=rt.edge,lt=rt.pred;if(Qr.unshift(Jr[0]),Jr.same(et)&&Qr.length>0)break;tt!=null&&Qr.unshift(tt),Jr=lt}return j.spawn(Qr)},hr=0;hr<nr;hr++){var dr=tr[hr],vr=sr(dr);dr.same(g)?vr.dist=0:vr.dist=1/0,vr.pred=null,vr.edge=null}for(var gr=!1,pr=function(Zr,et,Yr,Qr,Jr,rt){var tt=Qr.dist+rt;tt<Jr.dist&&!Yr.same(Qr.edge)&&(Jr.dist=tt,Jr.pred=Zr,Jr.edge=Yr,gr=!0)},mr=1;mr<nr;mr++){gr=!1;for(var yr=0;yr<ir;yr++){var br=rr[yr],Er=br.source(),_r=br.target(),Rr=b(br),Cr=sr(Er),wr=sr(_r);pr(Er,_r,br,Cr,wr,Rr),d||pr(_r,Er,br,wr,Cr,Rr)}if(!gr)break}if(gr)for(var $r=[],Ar=0;Ar<ir;Ar++){var Sr=rr[Ar],kr=Sr.source(),Mr=Sr.target(),qr=b(Sr),Tr=sr(kr).dist,Pr=sr(Mr).dist;if(Tr+qr<Pr||!d&&Pr+qr<Tr)if(lr||(warn("Graph contains a negative weight cycle for Bellman-Ford"),lr=!0),e.findNegativeWeightCycles!==!1){var Br=[];Tr+qr<Pr&&Br.push(kr),!d&&Pr+qr<Tr&&Br.push(Mr);for(var Ur=Br.length,Nr=0;Nr<Ur;Nr++){var Ir=Br[Nr],Dr=[Ir];Dr.push(sr(Ir).edge);for(var Or=sr(Ir).pred;Dr.indexOf(Or)===-1;)Dr.push(Or),Dr.push(sr(Or).edge),Or=sr(Or).pred;Dr=Dr.slice(Dr.indexOf(Or));for(var jr=Dr[0].id(),Wr=0,Xr=2;Xr<Dr.length;Xr+=2)Dr[Xr].id()<jr&&(jr=Dr[Xr].id(),Wr=Xr);Dr=Dr.slice(Wr).concat(Dr.slice(0,Wr)),Dr.push(Dr[0]);var dt=Dr.map(function(Vr){return Vr.id()}).join(",");$r.indexOf(dt)===-1&&(or.push(j.spawn(Dr)),$r.push(dt))}}else break}return{distanceTo:cr,pathTo:fr,hasNegativeWeightCycle:lr,negativeWeightCycles:or}}},sqrt2=Math.sqrt(2),collapse=function(e,s,o){o.length===0&&error("Karger-Stein must be run on a connected (sub)graph");for(var c=o[e],d=c[1],g=c[2],b=s[d],j=s[g],_e=o,er=_e.length-1;er>=0;er--){var rr=_e[er],tr=rr[1],nr=rr[2];(s[tr]===b&&s[nr]===j||s[tr]===j&&s[nr]===b)&&_e.splice(er,1)}for(var ar=0;ar<_e.length;ar++){var lr=_e[ar];lr[1]===j?(_e[ar]=lr.slice(),_e[ar][1]=b):lr[2]===j&&(_e[ar]=lr.slice(),_e[ar][2]=b)}for(var or=0;or<s.length;or++)s[or]===j&&(s[or]=b);return _e},contractUntil=function(e,s,o,c){for(;o>c;){var d=Math.floor(Math.random()*s.length);s=collapse(d,e,s),o--}return s},elesfn$p={kargerStein:function(){var e=this,s=this.byGroup(),o=s.nodes,c=s.edges;c.unmergeBy(function(wr){return wr.isLoop()});var d=o.length,g=c.length,b=Math.ceil(Math.pow(Math.log(d)/Math.LN2,2)),j=Math.floor(d/sqrt2);if(d<2){error("At least 2 nodes are required for Karger-Stein algorithm");return}for(var _e=[],er=0;er<g;er++){var rr=c[er];_e.push([er,o.indexOf(rr.source()),o.indexOf(rr.target())])}for(var tr=1/0,nr=[],ar=new Array(d),lr=new Array(d),or=new Array(d),ir=function($r,Ar){for(var Sr=0;Sr<d;Sr++)Ar[Sr]=$r[Sr]},sr=0;sr<=b;sr++){for(var ur=0;ur<d;ur++)lr[ur]=ur;var cr=contractUntil(lr,_e.slice(),d,j),fr=cr.slice();ir(lr,or);var hr=contractUntil(lr,cr,j,2),dr=contractUntil(or,fr,j,2);hr.length<=dr.length&&hr.length<tr?(tr=hr.length,nr=hr,ir(lr,ar)):dr.length<=hr.length&&dr.length<tr&&(tr=dr.length,nr=dr,ir(or,ar))}for(var vr=this.spawn(nr.map(function(wr){return c[wr[0]]})),gr=this.spawn(),pr=this.spawn(),mr=ar[0],yr=0;yr<ar.length;yr++){var br=ar[yr],Er=o[yr];br===mr?gr.merge(Er):pr.merge(Er)}var _r=function($r){var Ar=e.spawn();return $r.forEach(function(Sr){Ar.merge(Sr),Sr.connectedEdges().forEach(function(kr){e.contains(kr)&&!vr.contains(kr)&&Ar.merge(kr)})}),Ar},Rr=[_r(gr),_r(pr)],Cr={cut:vr,components:Rr,partition1:gr,partition2:pr};return Cr}},_Math$hypot,copyPosition=function(e){return{x:e.x,y:e.y}},modelToRenderedPosition$1=function(e,s,o){return{x:e.x*s+o.x,y:e.y*s+o.y}},renderedToModelPosition=function(e,s,o){return{x:(e.x-o.x)/s,y:(e.y-o.y)/s}},array2point=function(e){return{x:e[0],y:e[1]}},min=function(e){for(var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,c=1/0,d=s;d<o;d++){var g=e[d];isFinite(g)&&(c=Math.min(g,c))}return c},max=function(e){for(var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,c=-1/0,d=s;d<o;d++){var g=e[d];isFinite(g)&&(c=Math.max(g,c))}return c},mean=function(e){for(var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,c=0,d=0,g=s;g<o;g++){var b=e[g];isFinite(b)&&(c+=b,d++)}return c/d},median=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,g=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;c?e=e.slice(s,o):(o<e.length&&e.splice(o,e.length-o),s>0&&e.splice(0,s));for(var b=0,j=e.length-1;j>=0;j--){var _e=e[j];g?isFinite(_e)||(e[j]=-1/0,b++):e.splice(j,1)}d&&e.sort(function(tr,nr){return tr-nr});var er=e.length,rr=Math.floor(er/2);return er%2!==0?e[rr+1+b]:(e[rr-1+b]+e[rr+b])/2},deg2rad=function(e){return Math.PI*e/180},getAngleFromDisp=function(e,s){return Math.atan2(s,e)-Math.PI/2},log2=Math.log2||function(a){return Math.log(a)/Math.log(2)},signum=function(e){return e>0?1:e<0?-1:0},dist=function(e,s){return Math.sqrt(sqdist(e,s))},sqdist=function(e,s){var o=s.x-e.x,c=s.y-e.y;return o*o+c*c},inPlaceSumNormalize=function(e){for(var s=e.length,o=0,c=0;c<s;c++)o+=e[c];for(var d=0;d<s;d++)e[d]=e[d]/o;return e},qbezierAt=function(e,s,o,c){return(1-c)*(1-c)*e+2*(1-c)*c*s+c*c*o},qbezierPtAt=function(e,s,o,c){return{x:qbezierAt(e.x,s.x,o.x,c),y:qbezierAt(e.y,s.y,o.y,c)}},lineAt=function(e,s,o,c){var d={x:s.x-e.x,y:s.y-e.y},g=dist(e,s),b={x:d.x/g,y:d.y/g};return o=o??0,c=c??o*g,{x:e.x+b.x*c,y:e.y+b.y*c}},bound=function(e,s,o){return Math.max(e,Math.min(o,s))},makeBoundingBox=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},copyBoundingBox=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},clearBoundingBox=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},updateBoundingBox=function(e,s){e.x1=Math.min(e.x1,s.x1),e.x2=Math.max(e.x2,s.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,s.y1),e.y2=Math.max(e.y2,s.y2),e.h=e.y2-e.y1},expandBoundingBoxByPoint=function(e,s,o){e.x1=Math.min(e.x1,s),e.x2=Math.max(e.x2,s),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,o),e.y2=Math.max(e.y2,o),e.h=e.y2-e.y1},expandBoundingBox=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=s,e.x2+=s,e.y1-=s,e.y2+=s,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},expandBoundingBoxSides=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],o,c,d,g;if(s.length===1)o=c=d=g=s[0];else if(s.length===2)o=d=s[0],g=c=s[1];else if(s.length===4){var b=_slicedToArray$1(s,4);o=b[0],c=b[1],d=b[2],g=b[3]}return e.x1-=g,e.x2+=c,e.y1-=o,e.y2+=d,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},assignBoundingBox=function(e,s){e.x1=s.x1,e.y1=s.y1,e.x2=s.x2,e.y2=s.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},boundingBoxesIntersect=function(e,s){return!(e.x1>s.x2||s.x1>e.x2||e.x2<s.x1||s.x2<e.x1||e.y2<s.y1||s.y2<e.y1||e.y1>s.y2||s.y1>e.y2)},inBoundingBox=function(e,s,o){return e.x1<=s&&s<=e.x2&&e.y1<=o&&o<=e.y2},pointInBoundingBox=function(e,s){return inBoundingBox(e,s.x,s.y)},boundingBoxInBoundingBox=function(e,s){return inBoundingBox(e,s.x1,s.y1)&&inBoundingBox(e,s.x2,s.y2)},hypot=(_Math$hypot=Math.hypot)!==null&&_Math$hypot!==void 0?_Math$hypot:function(a,e){return Math.sqrt(a*a+e*e)};function inflatePolygon(a,e){if(a.length<3)throw new Error("Need at least 3 vertices");var s=function(vr,gr){return{x:vr.x+gr.x,y:vr.y+gr.y}},o=function(vr,gr){return{x:vr.x-gr.x,y:vr.y-gr.y}},c=function(vr,gr){return{x:vr.x*gr,y:vr.y*gr}},d=function(vr,gr){return vr.x*gr.y-vr.y*gr.x},g=function(vr){var gr=hypot(vr.x,vr.y);return gr===0?{x:0,y:0}:{x:vr.x/gr,y:vr.y/gr}},b=function(vr){for(var gr=0,pr=0;pr<vr.length;pr++){var mr=vr[pr],yr=vr[(pr+1)%vr.length];gr+=mr.x*yr.y-yr.x*mr.y}return gr/2},j=function(vr,gr,pr,mr){var yr=o(gr,vr),br=o(mr,pr),Er=d(yr,br);if(Math.abs(Er)<1e-9)return s(vr,c(yr,.5));var _r=d(o(pr,vr),br)/Er;return s(vr,c(yr,_r))},_e=a.map(function(dr){return{x:dr.x,y:dr.y}});b(_e)<0&&_e.reverse();for(var er=_e.length,rr=[],tr=0;tr<er;tr++){var nr=_e[tr],ar=_e[(tr+1)%er],lr=o(ar,nr),or=g({x:lr.y,y:-lr.x});rr.push(or)}for(var ir=rr.map(function(dr,vr){var gr=s(_e[vr],c(dr,e)),pr=s(_e[(vr+1)%er],c(dr,e));return{p1:gr,p2:pr}}),sr=[],ur=0;ur<er;ur++){var cr=ir[(ur-1+er)%er],fr=ir[ur],hr=j(cr.p1,cr.p2,fr.p1,fr.p2);sr.push(hr)}return sr}function miterBox(a,e,s,o,c,d){var g=transformPoints(a,e,s,o,c),b=inflatePolygon(g,d),j=makeBoundingBox();return b.forEach(function(_e){return expandBoundingBoxByPoint(j,_e.x,_e.y)}),j}var roundRectangleIntersectLine=function(e,s,o,c,d,g,b){var j=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",_e=j==="auto"?getRoundRectangleRadius(d,g):j,er=d/2,rr=g/2;_e=Math.min(_e,er,rr);var tr=_e!==er,nr=_e!==rr,ar;if(tr){var lr=o-er+_e-b,or=c-rr-b,ir=o+er-_e+b,sr=or;if(ar=finiteLinesIntersect(e,s,o,c,lr,or,ir,sr,!1),ar.length>0)return ar}if(nr){var ur=o+er+b,cr=c-rr+_e-b,fr=ur,hr=c+rr-_e+b;if(ar=finiteLinesIntersect(e,s,o,c,ur,cr,fr,hr,!1),ar.length>0)return ar}if(tr){var dr=o-er+_e-b,vr=c+rr+b,gr=o+er-_e+b,pr=vr;if(ar=finiteLinesIntersect(e,s,o,c,dr,vr,gr,pr,!1),ar.length>0)return ar}if(nr){var mr=o-er-b,yr=c-rr+_e-b,br=mr,Er=c+rr-_e+b;if(ar=finiteLinesIntersect(e,s,o,c,mr,yr,br,Er,!1),ar.length>0)return ar}var _r;{var Rr=o-er+_e,Cr=c-rr+_e;if(_r=intersectLineCircle(e,s,o,c,Rr,Cr,_e+b),_r.length>0&&_r[0]<=Rr&&_r[1]<=Cr)return[_r[0],_r[1]]}{var wr=o+er-_e,$r=c-rr+_e;if(_r=intersectLineCircle(e,s,o,c,wr,$r,_e+b),_r.length>0&&_r[0]>=wr&&_r[1]<=$r)return[_r[0],_r[1]]}{var Ar=o+er-_e,Sr=c+rr-_e;if(_r=intersectLineCircle(e,s,o,c,Ar,Sr,_e+b),_r.length>0&&_r[0]>=Ar&&_r[1]>=Sr)return[_r[0],_r[1]]}{var kr=o-er+_e,Mr=c+rr-_e;if(_r=intersectLineCircle(e,s,o,c,kr,Mr,_e+b),_r.length>0&&_r[0]<=kr&&_r[1]>=Mr)return[_r[0],_r[1]]}return[]},inLineVicinity=function(e,s,o,c,d,g,b){var j=b,_e=Math.min(o,d),er=Math.max(o,d),rr=Math.min(c,g),tr=Math.max(c,g);return _e-j<=e&&e<=er+j&&rr-j<=s&&s<=tr+j},inBezierVicinity=function(e,s,o,c,d,g,b,j,_e){var er={x1:Math.min(o,b,d)-_e,x2:Math.max(o,b,d)+_e,y1:Math.min(c,j,g)-_e,y2:Math.max(c,j,g)+_e};return!(e<er.x1||e>er.x2||s<er.y1||s>er.y2)},solveQuadratic=function(e,s,o,c){o-=c;var d=s*s-4*e*o;if(d<0)return[];var g=Math.sqrt(d),b=2*e,j=(-s+g)/b,_e=(-s-g)/b;return[j,_e]},solveCubic=function(e,s,o,c,d){var g=1e-5;e===0&&(e=g),s/=e,o/=e,c/=e;var b,j,_e,er,rr,tr,nr,ar;if(j=(3*o-s*s)/9,_e=-(27*c)+s*(9*o-2*(s*s)),_e/=54,b=j*j*j+_e*_e,d[1]=0,nr=s/3,b>0){rr=_e+Math.sqrt(b),rr=rr<0?-Math.pow(-rr,1/3):Math.pow(rr,1/3),tr=_e-Math.sqrt(b),tr=tr<0?-Math.pow(-tr,1/3):Math.pow(tr,1/3),d[0]=-nr+rr+tr,nr+=(rr+tr)/2,d[4]=d[2]=-nr,nr=Math.sqrt(3)*(-tr+rr)/2,d[3]=nr,d[5]=-nr;return}if(d[5]=d[3]=0,b===0){ar=_e<0?-Math.pow(-_e,1/3):Math.pow(_e,1/3),d[0]=-nr+2*ar,d[4]=d[2]=-(ar+nr);return}j=-j,er=j*j*j,er=Math.acos(_e/Math.sqrt(er)),ar=2*Math.sqrt(j),d[0]=-nr+ar*Math.cos(er/3),d[2]=-nr+ar*Math.cos((er+2*Math.PI)/3),d[4]=-nr+ar*Math.cos((er+4*Math.PI)/3)},sqdistToQuadraticBezier=function(e,s,o,c,d,g,b,j){var _e=1*o*o-4*o*d+2*o*b+4*d*d-4*d*b+b*b+c*c-4*c*g+2*c*j+4*g*g-4*g*j+j*j,er=1*9*o*d-3*o*o-3*o*b-6*d*d+3*d*b+9*c*g-3*c*c-3*c*j-6*g*g+3*g*j,rr=1*3*o*o-6*o*d+o*b-o*e+2*d*d+2*d*e-b*e+3*c*c-6*c*g+c*j-c*s+2*g*g+2*g*s-j*s,tr=1*o*d-o*o+o*e-d*e+c*g-c*c+c*s-g*s,nr=[];solveCubic(_e,er,rr,tr,nr);for(var ar=1e-7,lr=[],or=0;or<6;or+=2)Math.abs(nr[or+1])<ar&&nr[or]>=0&&nr[or]<=1&&lr.push(nr[or]);lr.push(1),lr.push(0);for(var ir=-1,sr,ur,cr,fr=0;fr<lr.length;fr++)sr=Math.pow(1-lr[fr],2)*o+2*(1-lr[fr])*lr[fr]*d+lr[fr]*lr[fr]*b,ur=Math.pow(1-lr[fr],2)*c+2*(1-lr[fr])*lr[fr]*g+lr[fr]*lr[fr]*j,cr=Math.pow(sr-e,2)+Math.pow(ur-s,2),ir>=0?cr<ir&&(ir=cr):ir=cr;return ir},sqdistToFiniteLine=function(e,s,o,c,d,g){var b=[e-o,s-c],j=[d-o,g-c],_e=j[0]*j[0]+j[1]*j[1],er=b[0]*b[0]+b[1]*b[1],rr=b[0]*j[0]+b[1]*j[1],tr=rr*rr/_e;return rr<0?er:tr>_e?(e-d)*(e-d)+(s-g)*(s-g):er-tr},pointInsidePolygonPoints=function(e,s,o){for(var c,d,g,b,j,_e=0,er=0;er<o.length/2;er++)if(c=o[er*2],d=o[er*2+1],er+1<o.length/2?(g=o[(er+1)*2],b=o[(er+1)*2+1]):(g=o[(er+1-o.length/2)*2],b=o[(er+1-o.length/2)*2+1]),!(c==e&&g==e))if(c>=e&&e>=g||c<=e&&e<=g)j=(e-c)/(g-c)*(b-d)+d,j>s&&_e++;else continue;return _e%2!==0},pointInsidePolygon=function(e,s,o,c,d,g,b,j,_e){var er=new Array(o.length),rr;j[0]!=null?(rr=Math.atan(j[1]/j[0]),j[0]<0?rr=rr+Math.PI/2:rr=-rr-Math.PI/2):rr=j;for(var tr=Math.cos(-rr),nr=Math.sin(-rr),ar=0;ar<er.length/2;ar++)er[ar*2]=g/2*(o[ar*2]*tr-o[ar*2+1]*nr),er[ar*2+1]=b/2*(o[ar*2+1]*tr+o[ar*2]*nr),er[ar*2]+=c,er[ar*2+1]+=d;var lr;if(_e>0){var or=expandPolygon(er,-_e);lr=joinLines(or)}else lr=er;return pointInsidePolygonPoints(e,s,lr)},pointInsideRoundPolygon=function(e,s,o,c,d,g,b,j){for(var _e=new Array(o.length*2),er=0;er<j.length;er++){var rr=j[er];_e[er*4+0]=rr.startX,_e[er*4+1]=rr.startY,_e[er*4+2]=rr.stopX,_e[er*4+3]=rr.stopY;var tr=Math.pow(rr.cx-e,2)+Math.pow(rr.cy-s,2);if(tr<=Math.pow(rr.radius,2))return!0}return pointInsidePolygonPoints(e,s,_e)},joinLines=function(e){for(var s=new Array(e.length/2),o,c,d,g,b,j,_e,er,rr=0;rr<e.length/4;rr++){o=e[rr*4],c=e[rr*4+1],d=e[rr*4+2],g=e[rr*4+3],rr<e.length/4-1?(b=e[(rr+1)*4],j=e[(rr+1)*4+1],_e=e[(rr+1)*4+2],er=e[(rr+1)*4+3]):(b=e[0],j=e[1],_e=e[2],er=e[3]);var tr=finiteLinesIntersect(o,c,d,g,b,j,_e,er,!0);s[rr*2]=tr[0],s[rr*2+1]=tr[1]}return s},expandPolygon=function(e,s){for(var o=new Array(e.length*2),c,d,g,b,j=0;j<e.length/2;j++){c=e[j*2],d=e[j*2+1],j<e.length/2-1?(g=e[(j+1)*2],b=e[(j+1)*2+1]):(g=e[0],b=e[1]);var _e=b-d,er=-(g-c),rr=Math.sqrt(_e*_e+er*er),tr=_e/rr,nr=er/rr;o[j*4]=c+tr*s,o[j*4+1]=d+nr*s,o[j*4+2]=g+tr*s,o[j*4+3]=b+nr*s}return o},intersectLineEllipse=function(e,s,o,c,d,g){var b=o-e,j=c-s;b/=d,j/=g;var _e=Math.sqrt(b*b+j*j),er=_e-1;if(er<0)return[];var rr=er/_e;return[(o-e)*rr+e,(c-s)*rr+s]},checkInEllipse=function(e,s,o,c,d,g,b){return e-=d,s-=g,e/=o/2+b,s/=c/2+b,e*e+s*s<=1},intersectLineCircle=function(e,s,o,c,d,g,b){var j=[o-e,c-s],_e=[e-d,s-g],er=j[0]*j[0]+j[1]*j[1],rr=2*(_e[0]*j[0]+_e[1]*j[1]),tr=_e[0]*_e[0]+_e[1]*_e[1]-b*b,nr=rr*rr-4*er*tr;if(nr<0)return[];var ar=(-rr+Math.sqrt(nr))/(2*er),lr=(-rr-Math.sqrt(nr))/(2*er),or=Math.min(ar,lr),ir=Math.max(ar,lr),sr=[];if(or>=0&&or<=1&&sr.push(or),ir>=0&&ir<=1&&sr.push(ir),sr.length===0)return[];var ur=sr[0]*j[0]+e,cr=sr[0]*j[1]+s;if(sr.length>1){if(sr[0]==sr[1])return[ur,cr];var fr=sr[1]*j[0]+e,hr=sr[1]*j[1]+s;return[ur,cr,fr,hr]}else return[ur,cr]},midOfThree=function(e,s,o){return s<=e&&e<=o||o<=e&&e<=s?e:e<=s&&s<=o||o<=s&&s<=e?s:o},finiteLinesIntersect=function(e,s,o,c,d,g,b,j,_e){var er=e-d,rr=o-e,tr=b-d,nr=s-g,ar=c-s,lr=j-g,or=tr*nr-lr*er,ir=rr*nr-ar*er,sr=lr*rr-tr*ar;if(sr!==0){var ur=or/sr,cr=ir/sr,fr=.001,hr=0-fr,dr=1+fr;return hr<=ur&&ur<=dr&&hr<=cr&&cr<=dr?[e+ur*rr,s+ur*ar]:_e?[e+ur*rr,s+ur*ar]:[]}else return or===0||ir===0?midOfThree(e,o,b)===b?[b,j]:midOfThree(e,o,d)===d?[d,g]:midOfThree(d,b,o)===o?[o,c]:[]:[]},transformPoints=function(e,s,o,c,d){var g=[],b=c/2,j=d/2,_e=s,er=o;g.push({x:_e+b*e[0],y:er+j*e[1]});for(var rr=1;rr<e.length/2;rr++)g.push({x:_e+b*e[rr*2],y:er+j*e[rr*2+1]});return g},polygonIntersectLine=function(e,s,o,c,d,g,b,j){var _e=[],er,rr=new Array(o.length),tr=!0;g==null&&(tr=!1);var nr;if(tr){for(var ar=0;ar<rr.length/2;ar++)rr[ar*2]=o[ar*2]*g+c,rr[ar*2+1]=o[ar*2+1]*b+d;if(j>0){var lr=expandPolygon(rr,-j);nr=joinLines(lr)}else nr=rr}else nr=o;for(var or,ir,sr,ur,cr=0;cr<nr.length/2;cr++)or=nr[cr*2],ir=nr[cr*2+1],cr<nr.length/2-1?(sr=nr[(cr+1)*2],ur=nr[(cr+1)*2+1]):(sr=nr[0],ur=nr[1]),er=finiteLinesIntersect(e,s,c,d,or,ir,sr,ur),er.length!==0&&_e.push(er[0],er[1]);return _e},roundPolygonIntersectLine=function(e,s,o,c,d,g,b,j,_e){var er=[],rr,tr=new Array(o.length*2);_e.forEach(function(sr,ur){ur===0?(tr[tr.length-2]=sr.startX,tr[tr.length-1]=sr.startY):(tr[ur*4-2]=sr.startX,tr[ur*4-1]=sr.startY),tr[ur*4]=sr.stopX,tr[ur*4+1]=sr.stopY,rr=intersectLineCircle(e,s,c,d,sr.cx,sr.cy,sr.radius),rr.length!==0&&er.push(rr[0],rr[1])});for(var nr=0;nr<tr.length/4;nr++)rr=finiteLinesIntersect(e,s,c,d,tr[nr*4],tr[nr*4+1],tr[nr*4+2],tr[nr*4+3],!1),rr.length!==0&&er.push(rr[0],rr[1]);if(er.length>2){for(var ar=[er[0],er[1]],lr=Math.pow(ar[0]-e,2)+Math.pow(ar[1]-s,2),or=1;or<er.length/2;or++){var ir=Math.pow(er[or*2]-e,2)+Math.pow(er[or*2+1]-s,2);ir<=lr&&(ar[0]=er[or*2],ar[1]=er[or*2+1],lr=ir)}return ar}return er},shortenIntersection=function(e,s,o){var c=[e[0]-s[0],e[1]-s[1]],d=Math.sqrt(c[0]*c[0]+c[1]*c[1]),g=(d-o)/d;return g<0&&(g=1e-5),[s[0]+g*c[0],s[1]+g*c[1]]},generateUnitNgonPointsFitToSquare=function(e,s){var o=generateUnitNgonPoints(e,s);return o=fitPolygonToSquare(o),o},fitPolygonToSquare=function(e){for(var s,o,c=e.length/2,d=1/0,g=1/0,b=-1/0,j=-1/0,_e=0;_e<c;_e++)s=e[2*_e],o=e[2*_e+1],d=Math.min(d,s),b=Math.max(b,s),g=Math.min(g,o),j=Math.max(j,o);for(var er=2/(b-d),rr=2/(j-g),tr=0;tr<c;tr++)s=e[2*tr]=e[2*tr]*er,o=e[2*tr+1]=e[2*tr+1]*rr,d=Math.min(d,s),b=Math.max(b,s),g=Math.min(g,o),j=Math.max(j,o);if(g<-1)for(var nr=0;nr<c;nr++)o=e[2*nr+1]=e[2*nr+1]+(-1-g);return e},generateUnitNgonPoints=function(e,s){var o=1/e*2*Math.PI,c=e%2===0?Math.PI/2+o/2:Math.PI/2;c+=s;for(var d=new Array(e*2),g,b=0;b<e;b++)g=b*o+c,d[2*b]=Math.cos(g),d[2*b+1]=Math.sin(-g);return d},getRoundRectangleRadius=function(e,s){return Math.min(e/4,s/4,8)},getRoundPolygonRadius=function(e,s){return Math.min(e/10,s/10,8)},getCutRectangleCornerLength=function(){return 8},bezierPtsToQuadCoeff=function(e,s,o){return[e-2*s+o,2*(s-e),e]},getBarrelCurveConstants=function(e,s){return{heightOffset:Math.min(15,.05*s),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function satPolygonIntersection(a,e){function s(rr){for(var tr=[],nr=0;nr<rr.length;nr++){var ar=rr[nr],lr=rr[(nr+1)%rr.length],or={x:lr.x-ar.x,y:lr.y-ar.y},ir={x:-or.y,y:or.x},sr=Math.sqrt(ir.x*ir.x+ir.y*ir.y);tr.push({x:ir.x/sr,y:ir.y/sr})}return tr}function o(rr,tr){var nr=1/0,ar=-1/0,lr=_createForOfIteratorHelper(rr),or;try{for(lr.s();!(or=lr.n()).done;){var ir=or.value,sr=ir.x*tr.x+ir.y*tr.y;nr=Math.min(nr,sr),ar=Math.max(ar,sr)}}catch(ur){lr.e(ur)}finally{lr.f()}return{min:nr,max:ar}}function c(rr,tr){return!(rr.max<tr.min||tr.max<rr.min)}var d=[].concat(_toConsumableArray(s(a)),_toConsumableArray(s(e))),g=_createForOfIteratorHelper(d),b;try{for(g.s();!(b=g.n()).done;){var j=b.value,_e=o(a,j),er=o(e,j);if(!c(_e,er))return!1}}catch(rr){g.e(rr)}finally{g.f()}return!0}var pageRankDefaults=defaults$g({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),elesfn$o={pageRank:function(e){for(var s=pageRankDefaults(e),o=s.dampingFactor,c=s.precision,d=s.iterations,g=s.weight,b=this._private.cy,j=this.byGroup(),_e=j.nodes,er=j.edges,rr=_e.length,tr=rr*rr,nr=er.length,ar=new Array(tr),lr=new Array(rr),or=(1-o)/rr,ir=0;ir<rr;ir++){for(var sr=0;sr<rr;sr++){var ur=ir*rr+sr;ar[ur]=0}lr[ir]=0}for(var cr=0;cr<nr;cr++){var fr=er[cr],hr=fr.data("source"),dr=fr.data("target");if(hr!==dr){var vr=_e.indexOfId(hr),gr=_e.indexOfId(dr),pr=g(fr),mr=gr*rr+vr;ar[mr]+=pr,lr[vr]+=pr}}for(var yr=1/rr+or,br=0;br<rr;br++)if(lr[br]===0)for(var Er=0;Er<rr;Er++){var _r=Er*rr+br;ar[_r]=yr}else for(var Rr=0;Rr<rr;Rr++){var Cr=Rr*rr+br;ar[Cr]=ar[Cr]/lr[br]+or}for(var wr=new Array(rr),$r=new Array(rr),Ar,Sr=0;Sr<rr;Sr++)wr[Sr]=1;for(var kr=0;kr<d;kr++){for(var Mr=0;Mr<rr;Mr++)$r[Mr]=0;for(var qr=0;qr<rr;qr++)for(var Tr=0;Tr<rr;Tr++){var Pr=qr*rr+Tr;$r[qr]+=ar[Pr]*wr[Tr]}inPlaceSumNormalize($r),Ar=wr,wr=$r,$r=Ar;for(var Br=0,Ur=0;Ur<rr;Ur++){var Nr=Ar[Ur]-wr[Ur];Br+=Nr*Nr}if(Br<c)break}var Ir={rank:function(Or){return Or=b.collection(Or)[0],wr[_e.indexOf(Or)]}};return Ir}},defaults$f=defaults$g({root:null,weight:function(e){return 1},directed:!1,alpha:0}),elesfn$n={degreeCentralityNormalized:function(e){e=defaults$f(e);var s=this.cy(),o=this.nodes(),c=o.length;if(e.directed){for(var er={},rr={},tr=0,nr=0,ar=0;ar<c;ar++){var lr=o[ar],or=lr.id();e.root=lr;var ir=this.degreeCentrality(e);tr<ir.indegree&&(tr=ir.indegree),nr<ir.outdegree&&(nr=ir.outdegree),er[or]=ir.indegree,rr[or]=ir.outdegree}return{indegree:function(ur){return tr==0?0:(string(ur)&&(ur=s.filter(ur)),er[ur.id()]/tr)},outdegree:function(ur){return nr===0?0:(string(ur)&&(ur=s.filter(ur)),rr[ur.id()]/nr)}}}else{for(var d={},g=0,b=0;b<c;b++){var j=o[b];e.root=j;var _e=this.degreeCentrality(e);g<_e.degree&&(g=_e.degree),d[j.id()]=_e.degree}return{degree:function(ur){return g===0?0:(string(ur)&&(ur=s.filter(ur)),d[ur.id()]/g)}}}},degreeCentrality:function(e){e=defaults$f(e);var s=this.cy(),o=this,c=e,d=c.root,g=c.weight,b=c.directed,j=c.alpha;if(d=s.collection(d)[0],b){for(var nr=d.connectedEdges(),ar=nr.filter(function(hr){return hr.target().same(d)&&o.has(hr)}),lr=nr.filter(function(hr){return hr.source().same(d)&&o.has(hr)}),or=ar.length,ir=lr.length,sr=0,ur=0,cr=0;cr<ar.length;cr++)sr+=g(ar[cr]);for(var fr=0;fr<lr.length;fr++)ur+=g(lr[fr]);return{indegree:Math.pow(or,1-j)*Math.pow(sr,j),outdegree:Math.pow(ir,1-j)*Math.pow(ur,j)}}else{for(var _e=d.connectedEdges().intersection(o),er=_e.length,rr=0,tr=0;tr<_e.length;tr++)rr+=g(_e[tr]);return{degree:Math.pow(er,1-j)*Math.pow(rr,j)}}}};elesfn$n.dc=elesfn$n.degreeCentrality;elesfn$n.dcn=elesfn$n.degreeCentralityNormalised=elesfn$n.degreeCentralityNormalized;var defaults$e=defaults$g({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),elesfn$m={closenessCentralityNormalized:function(e){for(var s=defaults$e(e),o=s.harmonic,c=s.weight,d=s.directed,g=this.cy(),b={},j=0,_e=this.nodes(),er=this.floydWarshall({weight:c,directed:d}),rr=0;rr<_e.length;rr++){for(var tr=0,nr=_e[rr],ar=0;ar<_e.length;ar++)if(rr!==ar){var lr=er.distance(nr,_e[ar]);o?tr+=1/lr:tr+=lr}o||(tr=1/tr),j<tr&&(j=tr),b[nr.id()]=tr}return{closeness:function(ir){return j==0?0:(string(ir)?ir=g.filter(ir)[0].id():ir=ir.id(),b[ir]/j)}}},closenessCentrality:function(e){var s=defaults$e(e),o=s.root,c=s.weight,d=s.directed,g=s.harmonic;o=this.filter(o)[0];for(var b=this.dijkstra({root:o,weight:c,directed:d}),j=0,_e=this.nodes(),er=0;er<_e.length;er++){var rr=_e[er];if(!rr.same(o)){var tr=b.distanceTo(rr);g?j+=1/tr:j+=tr}}return g?j:1/j}};elesfn$m.cc=elesfn$m.closenessCentrality;elesfn$m.ccn=elesfn$m.closenessCentralityNormalised=elesfn$m.closenessCentralityNormalized;var defaults$d=defaults$g({weight:null,directed:!1}),elesfn$l={betweennessCentrality:function(e){for(var s=defaults$d(e),o=s.directed,c=s.weight,d=c!=null,g=this.cy(),b=this.nodes(),j={},_e={},er=0,rr={set:function(ur,cr){_e[ur]=cr,cr>er&&(er=cr)},get:function(ur){return _e[ur]}},tr=0;tr<b.length;tr++){var nr=b[tr],ar=nr.id();o?j[ar]=nr.outgoers().nodes():j[ar]=nr.openNeighborhood().nodes(),rr.set(ar,0)}for(var lr=function(){for(var ur=b[or].id(),cr=[],fr={},hr={},dr={},vr=new Heap(function(qr,Tr){return dr[qr]-dr[Tr]}),gr=0;gr<b.length;gr++){var pr=b[gr].id();fr[pr]=[],hr[pr]=0,dr[pr]=1/0}for(hr[ur]=1,dr[ur]=0,vr.push(ur);!vr.empty();){var mr=vr.pop();if(cr.push(mr),d)for(var yr=0;yr<j[mr].length;yr++){var br=j[mr][yr],Er=g.getElementById(mr),_r=void 0;Er.edgesTo(br).length>0?_r=Er.edgesTo(br)[0]:_r=br.edgesTo(Er)[0];var Rr=c(_r);br=br.id(),dr[br]>dr[mr]+Rr&&(dr[br]=dr[mr]+Rr,vr.nodes.indexOf(br)<0?vr.push(br):vr.updateItem(br),hr[br]=0,fr[br]=[]),dr[br]==dr[mr]+Rr&&(hr[br]=hr[br]+hr[mr],fr[br].push(mr))}else for(var Cr=0;Cr<j[mr].length;Cr++){var wr=j[mr][Cr].id();dr[wr]==1/0&&(vr.push(wr),dr[wr]=dr[mr]+1),dr[wr]==dr[mr]+1&&(hr[wr]=hr[wr]+hr[mr],fr[wr].push(mr))}}for(var $r={},Ar=0;Ar<b.length;Ar++)$r[b[Ar].id()]=0;for(;cr.length>0;){for(var Sr=cr.pop(),kr=0;kr<fr[Sr].length;kr++){var Mr=fr[Sr][kr];$r[Mr]=$r[Mr]+hr[Mr]/hr[Sr]*(1+$r[Sr])}Sr!=b[or].id()&&rr.set(Sr,rr.get(Sr)+$r[Sr])}},or=0;or<b.length;or++)lr();var ir={betweenness:function(ur){var cr=g.collection(ur).id();return rr.get(cr)},betweennessNormalized:function(ur){if(er==0)return 0;var cr=g.collection(ur).id();return rr.get(cr)/er}};return ir.betweennessNormalised=ir.betweennessNormalized,ir}};elesfn$l.bc=elesfn$l.betweennessCentrality;var defaults$c=defaults$g({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(a){return 1}]}),setOptions$3=function(e){return defaults$c(e)},getSimilarity$1=function(e,s){for(var o=0,c=0;c<s.length;c++)o+=s[c](e);return o},addLoops=function(e,s,o){for(var c=0;c<s;c++)e[c*s+c]=o},normalize$1=function(e,s){for(var o,c=0;c<s;c++){o=0;for(var d=0;d<s;d++)o+=e[d*s+c];for(var g=0;g<s;g++)e[g*s+c]=e[g*s+c]/o}},mmult=function(e,s,o){for(var c=new Array(o*o),d=0;d<o;d++){for(var g=0;g<o;g++)c[d*o+g]=0;for(var b=0;b<o;b++)for(var j=0;j<o;j++)c[d*o+j]+=e[d*o+b]*s[b*o+j]}return c},expand=function(e,s,o){for(var c=e.slice(0),d=1;d<o;d++)e=mmult(e,c,s);return e},inflate=function(e,s,o){for(var c=new Array(s*s),d=0;d<s*s;d++)c[d]=Math.pow(e[d],o);return normalize$1(c,s),c},hasConverged=function(e,s,o,c){for(var d=0;d<o;d++){var g=Math.round(e[d]*Math.pow(10,c))/Math.pow(10,c),b=Math.round(s[d]*Math.pow(10,c))/Math.pow(10,c);if(g!==b)return!1}return!0},assign$2=function(e,s,o,c){for(var d=[],g=0;g<s;g++){for(var b=[],j=0;j<s;j++)Math.round(e[g*s+j]*1e3)/1e3>0&&b.push(o[j]);b.length!==0&&d.push(c.collection(b))}return d},isDuplicate=function(e,s){for(var o=0;o<e.length;o++)if(!s[o]||e[o].id()!==s[o].id())return!1;return!0},removeDuplicates=function(e){for(var s=0;s<e.length;s++)for(var o=0;o<e.length;o++)s!=o&&isDuplicate(e[s],e[o])&&e.splice(o,1);return e},markovClustering=function(e){for(var s=this.nodes(),o=this.edges(),c=this.cy(),d=setOptions$3(e),g={},b=0;b<s.length;b++)g[s[b].id()]=b;for(var j=s.length,_e=j*j,er=new Array(_e),rr,tr=0;tr<_e;tr++)er[tr]=0;for(var nr=0;nr<o.length;nr++){var ar=o[nr],lr=g[ar.source().id()],or=g[ar.target().id()],ir=getSimilarity$1(ar,d.attributes);er[lr*j+or]+=ir,er[or*j+lr]+=ir}addLoops(er,j,d.multFactor),normalize$1(er,j);for(var sr=!0,ur=0;sr&&ur<d.maxIterations;)sr=!1,rr=expand(er,j,d.expandFactor),er=inflate(rr,j,d.inflateFactor),hasConverged(er,rr,_e,4)||(sr=!0),ur++;var cr=assign$2(er,j,s,c);return cr=removeDuplicates(cr),cr},markovClustering$1={markovClustering,mcl:markovClustering},identity$1=function(e){return e},absDiff=function(e,s){return Math.abs(s-e)},addAbsDiff=function(e,s,o){return e+absDiff(s,o)},addSquaredDiff=function(e,s,o){return e+Math.pow(o-s,2)},sqrt=function(e){return Math.sqrt(e)},maxAbsDiff=function(e,s,o){return Math.max(e,absDiff(s,o))},getDistance=function(e,s,o,c,d){for(var g=arguments.length>5&&arguments[5]!==void 0?arguments[5]:identity$1,b=c,j,_e,er=0;er<e;er++)j=s(er),_e=o(er),b=d(b,j,_e);return g(b)},distances={euclidean:function(e,s,o){return e>=2?getDistance(e,s,o,0,addSquaredDiff,sqrt):getDistance(e,s,o,0,addAbsDiff)},squaredEuclidean:function(e,s,o){return getDistance(e,s,o,0,addSquaredDiff)},manhattan:function(e,s,o){return getDistance(e,s,o,0,addAbsDiff)},max:function(e,s,o){return getDistance(e,s,o,-1/0,maxAbsDiff)}};distances["squared-euclidean"]=distances.squaredEuclidean;distances.squaredeuclidean=distances.squaredEuclidean;function clusteringDistance(a,e,s,o,c,d){var g;return fn$6(a)?g=a:g=distances[a]||distances.euclidean,e===0&&fn$6(a)?g(c,d):g(e,s,o,c,d)}var defaults$b=defaults$g({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),setOptions$2=function(e){return defaults$b(e)},getDist=function(e,s,o,c,d){var g=d!=="kMedoids",b=g?function(rr){return o[rr]}:function(rr){return c[rr](o)},j=function(tr){return c[tr](s)},_e=o,er=s;return clusteringDistance(e,c.length,b,j,_e,er)},randomCentroids=function(e,s,o){for(var c=o.length,d=new Array(c),g=new Array(c),b=new Array(s),j=null,_e=0;_e<c;_e++)d[_e]=e.min(o[_e]).value,g[_e]=e.max(o[_e]).value;for(var er=0;er<s;er++){j=[];for(var rr=0;rr<c;rr++)j[rr]=Math.random()*(g[rr]-d[rr])+d[rr];b[er]=j}return b},classify=function(e,s,o,c,d){for(var g=1/0,b=0,j=0;j<s.length;j++){var _e=getDist(o,e,s[j],c,d);_e<g&&(g=_e,b=j)}return b},buildCluster=function(e,s,o){for(var c=[],d=null,g=0;g<s.length;g++)d=s[g],o[d.id()]===e&&c.push(d);return c},haveValuesConverged=function(e,s,o){return Math.abs(s-e)<=o},haveMatricesConverged=function(e,s,o){for(var c=0;c<e.length;c++)for(var d=0;d<e[c].length;d++){var g=Math.abs(e[c][d]-s[c][d]);if(g>o)return!1}return!0},seenBefore=function(e,s,o){for(var c=0;c<o;c++)if(e===s[c])return!0;return!1},randomMedoids=function(e,s){var o=new Array(s);if(e.length<50)for(var c=0;c<s;c++){for(var d=e[Math.floor(Math.random()*e.length)];seenBefore(d,o,c);)d=e[Math.floor(Math.random()*e.length)];o[c]=d}else for(var g=0;g<s;g++)o[g]=e[Math.floor(Math.random()*e.length)];return o},findCost=function(e,s,o){for(var c=0,d=0;d<s.length;d++)c+=getDist("manhattan",s[d],e,o,"kMedoids");return c},kMeans=function(e){var s=this.cy(),o=this.nodes(),c=null,d=setOptions$2(e),g=new Array(d.k),b={},j;d.testMode?typeof d.testCentroids=="number"?(d.testCentroids,j=randomCentroids(o,d.k,d.attributes)):_typeof(d.testCentroids)==="object"?j=d.testCentroids:j=randomCentroids(o,d.k,d.attributes):j=randomCentroids(o,d.k,d.attributes);for(var _e=!0,er=0;_e&&er<d.maxIterations;){for(var rr=0;rr<o.length;rr++)c=o[rr],b[c.id()]=classify(c,j,d.distance,d.attributes,"kMeans");_e=!1;for(var tr=0;tr<d.k;tr++){var nr=buildCluster(tr,o,b);if(nr.length!==0){for(var ar=d.attributes.length,lr=j[tr],or=new Array(ar),ir=new Array(ar),sr=0;sr<ar;sr++){ir[sr]=0;for(var ur=0;ur<nr.length;ur++)c=nr[ur],ir[sr]+=d.attributes[sr](c);or[sr]=ir[sr]/nr.length,haveValuesConverged(or[sr],lr[sr],d.sensitivityThreshold)||(_e=!0)}j[tr]=or,g[tr]=s.collection(nr)}}er++}return g},kMedoids=function(e){var s=this.cy(),o=this.nodes(),c=null,d=setOptions$2(e),g=new Array(d.k),b,j={},_e,er=new Array(d.k);d.testMode?typeof d.testCentroids=="number"||(_typeof(d.testCentroids)==="object"?b=d.testCentroids:b=randomMedoids(o,d.k)):b=randomMedoids(o,d.k);for(var rr=!0,tr=0;rr&&tr<d.maxIterations;){for(var nr=0;nr<o.length;nr++)c=o[nr],j[c.id()]=classify(c,b,d.distance,d.attributes,"kMedoids");rr=!1;for(var ar=0;ar<b.length;ar++){var lr=buildCluster(ar,o,j);if(lr.length!==0){er[ar]=findCost(b[ar],lr,d.attributes);for(var or=0;or<lr.length;or++)_e=findCost(lr[or],lr,d.attributes),_e<er[ar]&&(er[ar]=_e,b[ar]=lr[or],rr=!0);g[ar]=s.collection(lr)}}tr++}return g},updateCentroids=function(e,s,o,c,d){for(var g,b,j=0;j<s.length;j++)for(var _e=0;_e<e.length;_e++)c[j][_e]=Math.pow(o[j][_e],d.m);for(var er=0;er<e.length;er++)for(var rr=0;rr<d.attributes.length;rr++){g=0,b=0;for(var tr=0;tr<s.length;tr++)g+=c[tr][er]*d.attributes[rr](s[tr]),b+=c[tr][er];e[er][rr]=g/b}},updateMembership=function(e,s,o,c,d){for(var g=0;g<e.length;g++)s[g]=e[g].slice();for(var b,j,_e,er=2/(d.m-1),rr=0;rr<o.length;rr++)for(var tr=0;tr<c.length;tr++){b=0;for(var nr=0;nr<o.length;nr++)j=getDist(d.distance,c[tr],o[rr],d.attributes,"cmeans"),_e=getDist(d.distance,c[tr],o[nr],d.attributes,"cmeans"),b+=Math.pow(j/_e,er);e[tr][rr]=1/b}},assign$1=function(e,s,o,c){for(var d=new Array(o.k),g=0;g<d.length;g++)d[g]=[];for(var b,j,_e=0;_e<s.length;_e++){b=-1/0,j=-1;for(var er=0;er<s[0].length;er++)s[_e][er]>b&&(b=s[_e][er],j=er);d[j].push(e[_e])}for(var rr=0;rr<d.length;rr++)d[rr]=c.collection(d[rr]);return d},fuzzyCMeans=function(e){var s=this.cy(),o=this.nodes(),c=setOptions$2(e),d,g,b,j,_e;j=new Array(o.length);for(var er=0;er<o.length;er++)j[er]=new Array(c.k);b=new Array(o.length);for(var rr=0;rr<o.length;rr++)b[rr]=new Array(c.k);for(var tr=0;tr<o.length;tr++){for(var nr=0,ar=0;ar<c.k;ar++)b[tr][ar]=Math.random(),nr+=b[tr][ar];for(var lr=0;lr<c.k;lr++)b[tr][lr]=b[tr][lr]/nr}g=new Array(c.k);for(var or=0;or<c.k;or++)g[or]=new Array(c.attributes.length);_e=new Array(o.length);for(var ir=0;ir<o.length;ir++)_e[ir]=new Array(c.k);for(var sr=!0,ur=0;sr&&ur<c.maxIterations;)sr=!1,updateCentroids(g,o,b,_e,c),updateMembership(b,j,g,o,c),haveMatricesConverged(b,j,c.sensitivityThreshold)||(sr=!0),ur++;return d=assign$1(o,b,c,s),{clusters:d,degreeOfMembership:b}},kClustering={kMeans,kMedoids,fuzzyCMeans,fcm:fuzzyCMeans},defaults$a=defaults$g({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),linkageAliases={single:"min",complete:"max"},setOptions$1=function(e){var s=defaults$a(e),o=linkageAliases[s.linkage];return o!=null&&(s.linkage=o),s},mergeClosest=function(e,s,o,c,d){for(var g=0,b=1/0,j,_e=d.attributes,er=function(gr,pr){return clusteringDistance(d.distance,_e.length,function(mr){return _e[mr](gr)},function(mr){return _e[mr](pr)},gr,pr)},rr=0;rr<e.length;rr++){var tr=e[rr].key,nr=o[tr][c[tr]];nr<b&&(g=tr,b=nr)}if(d.mode==="threshold"&&b>=d.threshold||d.mode==="dendrogram"&&e.length===1)return!1;var ar=s[g],lr=s[c[g]],or;d.mode==="dendrogram"?or={left:ar,right:lr,key:ar.key}:or={value:ar.value.concat(lr.value),key:ar.key},e[ar.index]=or,e.splice(lr.index,1),s[ar.key]=or;for(var ir=0;ir<e.length;ir++){var sr=e[ir];ar.key===sr.key?j=1/0:d.linkage==="min"?(j=o[ar.key][sr.key],o[ar.key][sr.key]>o[lr.key][sr.key]&&(j=o[lr.key][sr.key])):d.linkage==="max"?(j=o[ar.key][sr.key],o[ar.key][sr.key]<o[lr.key][sr.key]&&(j=o[lr.key][sr.key])):d.linkage==="mean"?j=(o[ar.key][sr.key]*ar.size+o[lr.key][sr.key]*lr.size)/(ar.size+lr.size):d.mode==="dendrogram"?j=er(sr.value,ar.value):j=er(sr.value[0],ar.value[0]),o[ar.key][sr.key]=o[sr.key][ar.key]=j}for(var ur=0;ur<e.length;ur++){var cr=e[ur].key;if(c[cr]===ar.key||c[cr]===lr.key){for(var fr=cr,hr=0;hr<e.length;hr++){var dr=e[hr].key;o[cr][dr]<o[cr][fr]&&(fr=dr)}c[cr]=fr}e[ur].index=ur}return ar.key=lr.key=ar.index=lr.index=null,!0},_getAllChildren=function(e,s,o){e&&(e.value?s.push(e.value):(e.left&&_getAllChildren(e.left,s),e.right&&_getAllChildren(e.right,s)))},_buildDendrogram=function(e,s){if(!e)return"";if(e.left&&e.right){var o=_buildDendrogram(e.left,s),c=_buildDendrogram(e.right,s),d=s.add({group:"nodes",data:{id:o+","+c}});return s.add({group:"edges",data:{source:o,target:d.id()}}),s.add({group:"edges",data:{source:c,target:d.id()}}),d.id()}else if(e.value)return e.value.id()},_buildClustersFromTree=function(e,s,o){if(!e)return[];var c=[],d=[],g=[];return s===0?(e.left&&_getAllChildren(e.left,c),e.right&&_getAllChildren(e.right,d),g=c.concat(d),[o.collection(g)]):s===1?e.value?[o.collection(e.value)]:(e.left&&_getAllChildren(e.left,c),e.right&&_getAllChildren(e.right,d),[o.collection(c),o.collection(d)]):e.value?[o.collection(e.value)]:(e.left&&(c=_buildClustersFromTree(e.left,s-1,o)),e.right&&(d=_buildClustersFromTree(e.right,s-1,o)),c.concat(d))},hierarchicalClustering=function(e){for(var s=this.cy(),o=this.nodes(),c=setOptions$1(e),d=c.attributes,g=function(ur,cr){return clusteringDistance(c.distance,d.length,function(fr){return d[fr](ur)},function(fr){return d[fr](cr)},ur,cr)},b=[],j=[],_e=[],er=[],rr=0;rr<o.length;rr++){var tr={value:c.mode==="dendrogram"?o[rr]:[o[rr]],key:rr,index:rr};b[rr]=tr,er[rr]=tr,j[rr]=[],_e[rr]=0}for(var nr=0;nr<b.length;nr++)for(var ar=0;ar<=nr;ar++){var lr=void 0;c.mode==="dendrogram"?lr=nr===ar?1/0:g(b[nr].value,b[ar].value):lr=nr===ar?1/0:g(b[nr].value[0],b[ar].value[0]),j[nr][ar]=lr,j[ar][nr]=lr,lr<j[nr][_e[nr]]&&(_e[nr]=ar)}for(var or=mergeClosest(b,er,j,_e,c);or;)or=mergeClosest(b,er,j,_e,c);var ir;return c.mode==="dendrogram"?(ir=_buildClustersFromTree(b[0],c.dendrogramDepth,s),c.addDendrogram&&_buildDendrogram(b[0],s)):(ir=new Array(b.length),b.forEach(function(sr,ur){sr.key=sr.index=null,ir[ur]=s.collection(sr.value)})),ir},hierarchicalClustering$1={hierarchicalClustering,hca:hierarchicalClustering},defaults$9=defaults$g({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),setOptions=function(e){var s=e.damping,o=e.preference;.5<=s&&s<1||error("Damping must range on [0.5, 1).  Got: ".concat(s));var c=["median","mean","min","max"];return c.some(function(d){return d===o})||number$1(o)||error("Preference must be one of [".concat(c.map(function(d){return"'".concat(d,"'")}).join(", "),"] or a number.  Got: ").concat(o)),defaults$9(e)},getSimilarity=function(e,s,o,c){var d=function(b,j){return c[j](b)};return-clusteringDistance(e,c.length,function(g){return d(s,g)},function(g){return d(o,g)},s,o)},getPreference=function(e,s){var o=null;return s==="median"?o=median(e):s==="mean"?o=mean(e):s==="min"?o=min(e):s==="max"?o=max(e):o=s,o},findExemplars=function(e,s,o){for(var c=[],d=0;d<e;d++)s[d*e+d]+o[d*e+d]>0&&c.push(d);return c},assignClusters=function(e,s,o){for(var c=[],d=0;d<e;d++){for(var g=-1,b=-1/0,j=0;j<o.length;j++){var _e=o[j];s[d*e+_e]>b&&(g=_e,b=s[d*e+_e])}g>0&&c.push(g)}for(var er=0;er<o.length;er++)c[o[er]]=o[er];return c},assign=function(e,s,o){for(var c=assignClusters(e,s,o),d=0;d<o.length;d++){for(var g=[],b=0;b<c.length;b++)c[b]===o[d]&&g.push(b);for(var j=-1,_e=-1/0,er=0;er<g.length;er++){for(var rr=0,tr=0;tr<g.length;tr++)rr+=s[g[tr]*e+g[er]];rr>_e&&(j=er,_e=rr)}o[d]=g[j]}return c=assignClusters(e,s,o),c},affinityPropagation=function(e){for(var s=this.cy(),o=this.nodes(),c=setOptions(e),d={},g=0;g<o.length;g++)d[o[g].id()]=g;var b,j,_e,er,rr,tr;b=o.length,j=b*b,_e=new Array(j);for(var nr=0;nr<j;nr++)_e[nr]=-1/0;for(var ar=0;ar<b;ar++)for(var lr=0;lr<b;lr++)ar!==lr&&(_e[ar*b+lr]=getSimilarity(c.distance,o[ar],o[lr],c.attributes));er=getPreference(_e,c.preference);for(var or=0;or<b;or++)_e[or*b+or]=er;rr=new Array(j);for(var ir=0;ir<j;ir++)rr[ir]=0;tr=new Array(j);for(var sr=0;sr<j;sr++)tr[sr]=0;for(var ur=new Array(b),cr=new Array(b),fr=new Array(b),hr=0;hr<b;hr++)ur[hr]=0,cr[hr]=0,fr[hr]=0;for(var dr=new Array(b*c.minIterations),vr=0;vr<dr.length;vr++)dr[vr]=0;var gr;for(gr=0;gr<c.maxIterations;gr++){for(var pr=0;pr<b;pr++){for(var mr=-1/0,yr=-1/0,br=-1,Er=0,_r=0;_r<b;_r++)ur[_r]=rr[pr*b+_r],Er=tr[pr*b+_r]+_e[pr*b+_r],Er>=mr?(yr=mr,mr=Er,br=_r):Er>yr&&(yr=Er);for(var Rr=0;Rr<b;Rr++)rr[pr*b+Rr]=(1-c.damping)*(_e[pr*b+Rr]-mr)+c.damping*ur[Rr];rr[pr*b+br]=(1-c.damping)*(_e[pr*b+br]-yr)+c.damping*ur[br]}for(var Cr=0;Cr<b;Cr++){for(var wr=0,$r=0;$r<b;$r++)ur[$r]=tr[$r*b+Cr],cr[$r]=Math.max(0,rr[$r*b+Cr]),wr+=cr[$r];wr-=cr[Cr],cr[Cr]=rr[Cr*b+Cr],wr+=cr[Cr];for(var Ar=0;Ar<b;Ar++)tr[Ar*b+Cr]=(1-c.damping)*Math.min(0,wr-cr[Ar])+c.damping*ur[Ar];tr[Cr*b+Cr]=(1-c.damping)*(wr-cr[Cr])+c.damping*ur[Cr]}for(var Sr=0,kr=0;kr<b;kr++){var Mr=tr[kr*b+kr]+rr[kr*b+kr]>0?1:0;dr[gr%c.minIterations*b+kr]=Mr,Sr+=Mr}if(Sr>0&&(gr>=c.minIterations-1||gr==c.maxIterations-1)){for(var qr=0,Tr=0;Tr<b;Tr++){fr[Tr]=0;for(var Pr=0;Pr<c.minIterations;Pr++)fr[Tr]+=dr[Pr*b+Tr];(fr[Tr]===0||fr[Tr]===c.minIterations)&&qr++}if(qr===b)break}}for(var Br=findExemplars(b,rr,tr),Ur=assign(b,_e,Br),Nr={},Ir=0;Ir<Br.length;Ir++)Nr[Br[Ir]]=[];for(var Dr=0;Dr<o.length;Dr++){var Or=d[o[Dr].id()],jr=Ur[Or];jr!=null&&Nr[jr].push(o[Dr])}for(var Wr=new Array(Br.length),Xr=0;Xr<Br.length;Xr++)Wr[Xr]=s.collection(Nr[Br[Xr]]);return Wr},affinityPropagation$1={affinityPropagation,ap:affinityPropagation},hierholzerDefaults=defaults$g({root:void 0,directed:!1}),elesfn$k={hierholzer:function(e){if(!plainObject(e)){var s=arguments;e={root:s[0],directed:s[1]}}var o=hierholzerDefaults(e),c=o.root,d=o.directed,g=this,b=!1,j,_e,er;c&&(er=string(c)?this.filter(c)[0].id():c[0].id());var rr={},tr={};d?g.forEach(function(sr){var ur=sr.id();if(sr.isNode()){var cr=sr.indegree(!0),fr=sr.outdegree(!0),hr=cr-fr,dr=fr-cr;hr==1?j?b=!0:j=ur:dr==1?_e?b=!0:_e=ur:(dr>1||hr>1)&&(b=!0),rr[ur]=[],sr.outgoers().forEach(function(vr){vr.isEdge()&&rr[ur].push(vr.id())})}else tr[ur]=[void 0,sr.target().id()]}):g.forEach(function(sr){var ur=sr.id();if(sr.isNode()){var cr=sr.degree(!0);cr%2&&(j?_e?b=!0:_e=ur:j=ur),rr[ur]=[],sr.connectedEdges().forEach(function(fr){return rr[ur].push(fr.id())})}else tr[ur]=[sr.source().id(),sr.target().id()]});var nr={found:!1,trail:void 0};if(b)return nr;if(_e&&j)if(d){if(er&&_e!=er)return nr;er=_e}else{if(er&&_e!=er&&j!=er)return nr;er||(er=_e)}else er||(er=g[0].id());var ar=function(ur){for(var cr=ur,fr=[ur],hr,dr,vr;rr[cr].length;)hr=rr[cr].shift(),dr=tr[hr][0],vr=tr[hr][1],cr!=vr?(rr[vr]=rr[vr].filter(function(gr){return gr!=hr}),cr=vr):!d&&cr!=dr&&(rr[dr]=rr[dr].filter(function(gr){return gr!=hr}),cr=dr),fr.unshift(hr),fr.unshift(cr);return fr},lr=[],or=[];for(or=ar(er);or.length!=1;)rr[or[0]].length==0?(lr.unshift(g.getElementById(or.shift())),lr.unshift(g.getElementById(or.shift()))):or=ar(or.shift()).concat(or);lr.unshift(g.getElementById(or.shift()));for(var ir in rr)if(rr[ir].length)return nr;return nr.found=!0,nr.trail=this.spawn(lr,!0),nr}},hopcroftTarjanBiconnected=function(){var e=this,s={},o=0,c=0,d=[],g=[],b={},j=function(tr,nr){for(var ar=g.length-1,lr=[],or=e.spawn();g[ar].x!=tr||g[ar].y!=nr;)lr.push(g.pop().edge),ar--;lr.push(g.pop().edge),lr.forEach(function(ir){var sr=ir.connectedNodes().intersection(e);or.merge(ir),sr.forEach(function(ur){var cr=ur.id(),fr=ur.connectedEdges().intersection(e);or.merge(ur),s[cr].cutVertex?or.merge(fr.filter(function(hr){return hr.isLoop()})):or.merge(fr)})}),d.push(or)},_e=function(tr,nr,ar){tr===ar&&(c+=1),s[nr]={id:o,low:o++,cutVertex:!1};var lr=e.getElementById(nr).connectedEdges().intersection(e);if(lr.size()===0)d.push(e.spawn(e.getElementById(nr)));else{var or,ir,sr,ur;lr.forEach(function(cr){or=cr.source().id(),ir=cr.target().id(),sr=or===nr?ir:or,sr!==ar&&(ur=cr.id(),b[ur]||(b[ur]=!0,g.push({x:nr,y:sr,edge:cr})),sr in s?s[nr].low=Math.min(s[nr].low,s[sr].id):(_e(tr,sr,nr),s[nr].low=Math.min(s[nr].low,s[sr].low),s[nr].id<=s[sr].low&&(s[nr].cutVertex=!0,j(nr,sr))))})}};e.forEach(function(rr){if(rr.isNode()){var tr=rr.id();tr in s||(c=0,_e(tr,tr),s[tr].cutVertex=c>1)}});var er=Object.keys(s).filter(function(rr){return s[rr].cutVertex}).map(function(rr){return e.getElementById(rr)});return{cut:e.spawn(er),components:d}},hopcroftTarjanBiconnected$1={hopcroftTarjanBiconnected,htbc:hopcroftTarjanBiconnected,htb:hopcroftTarjanBiconnected,hopcroftTarjanBiconnectedComponents:hopcroftTarjanBiconnected},tarjanStronglyConnected=function(){var e=this,s={},o=0,c=[],d=[],g=e.spawn(e),b=function(_e){d.push(_e),s[_e]={index:o,low:o++,explored:!1};var er=e.getElementById(_e).connectedEdges().intersection(e);if(er.forEach(function(lr){var or=lr.target().id();or!==_e&&(or in s||b(or),s[or].explored||(s[_e].low=Math.min(s[_e].low,s[or].low)))}),s[_e].index===s[_e].low){for(var rr=e.spawn();;){var tr=d.pop();if(rr.merge(e.getElementById(tr)),s[tr].low=s[_e].index,s[tr].explored=!0,tr===_e)break}var nr=rr.edgesWith(rr),ar=rr.merge(nr);c.push(ar),g=g.difference(ar)}};return e.forEach(function(j){if(j.isNode()){var _e=j.id();_e in s||b(_e)}}),{cut:g,components:c}},tarjanStronglyConnected$1={tarjanStronglyConnected,tsc:tarjanStronglyConnected,tscc:tarjanStronglyConnected,tarjanStronglyConnectedComponents:tarjanStronglyConnected},elesfn$j={};[elesfn$v,elesfn$u,elesfn$t,elesfn$s,elesfn$r,elesfn$q,elesfn$p,elesfn$o,elesfn$n,elesfn$m,elesfn$l,markovClustering$1,kClustering,hierarchicalClustering$1,affinityPropagation$1,elesfn$k,hopcroftTarjanBiconnected$1,tarjanStronglyConnected$1].forEach(function(a){extend(elesfn$j,a)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var STATE_PENDING=0,STATE_FULFILLED=1,STATE_REJECTED=2,_api=function(e){if(!(this instanceof _api))return new _api(e);this.id="Thenable/1.0.7",this.state=STATE_PENDING,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};_api.prototype={fulfill:function(e){return deliver(this,STATE_FULFILLED,"fulfillValue",e)},reject:function(e){return deliver(this,STATE_REJECTED,"rejectReason",e)},then:function(e,s){var o=this,c=new _api;return o.onFulfilled.push(resolver(e,c,"fulfill")),o.onRejected.push(resolver(s,c,"reject")),execute(o),c.proxy}};var deliver=function(e,s,o,c){return e.state===STATE_PENDING&&(e.state=s,e[o]=c,execute(e)),e},execute=function(e){e.state===STATE_FULFILLED?execute_handlers(e,"onFulfilled",e.fulfillValue):e.state===STATE_REJECTED&&execute_handlers(e,"onRejected",e.rejectReason)},execute_handlers=function(e,s,o){if(e[s].length!==0){var c=e[s];e[s]=[];var d=function(){for(var b=0;b<c.length;b++)c[b](o)};typeof setImmediate=="function"?setImmediate(d):setTimeout(d,0)}},resolver=function(e,s,o){return function(c){if(typeof e!="function")s[o].call(s,c);else{var d;try{d=e(c)}catch(g){s.reject(g);return}_resolve(s,d)}}},_resolve=function(e,s){if(e===s||e.proxy===s){e.reject(new TypeError("cannot resolve promise with itself"));return}var o;if(_typeof(s)==="object"&&s!==null||typeof s=="function")try{o=s.then}catch(d){e.reject(d);return}if(typeof o=="function"){var c=!1;try{o.call(s,function(d){c||(c=!0,d===s?e.reject(new TypeError("circular thenable chain")):_resolve(e,d))},function(d){c||(c=!0,e.reject(d))})}catch(d){c||e.reject(d)}return}e.fulfill(s)};_api.all=function(a){return new _api(function(e,s){for(var o=new Array(a.length),c=0,d=function(j,_e){o[j]=_e,c++,c===a.length&&e(o)},g=0;g<a.length;g++)(function(b){var j=a[b],_e=j!=null&&j.then!=null;if(_e)j.then(function(rr){d(b,rr)},function(rr){s(rr)});else{var er=j;d(b,er)}})(g)})};_api.resolve=function(a){return new _api(function(e,s){e(a)})};_api.reject=function(a){return new _api(function(e,s){s(a)})};var Promise$1=typeof Promise<"u"?Promise:_api,Animation=function(e,s,o){var c=core(e),d=!c,g=this._private=extend({duration:1e3},s,o);if(g.target=e,g.style=g.style||g.css,g.started=!1,g.playing=!1,g.hooked=!1,g.applying=!1,g.progress=0,g.completes=[],g.frames=[],g.complete&&fn$6(g.complete)&&g.completes.push(g.complete),d){var b=e.position();g.startPosition=g.startPosition||{x:b.x,y:b.y},g.startStyle=g.startStyle||e.cy().style().getAnimationStartStyle(e,g.style)}if(c){var j=e.pan();g.startPan={x:j.x,y:j.y},g.startZoom=e.zoom()}this.length=1,this[0]=this},anifn=Animation.prototype;extend(anifn,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var s,o=e.target._private.animation;e.queue?s=o.queue:s=o.current,s.push(this),elementOrCollection(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var s=this._private;return e===void 0?s.progress*s.duration:this.progress(e/s.duration)},progress:function(e){var s=this._private,o=s.playing;return e===void 0?s.progress:(o&&this.pause(),s.progress=e,s.started=!1,o&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,s=e.playing;s&&this.pause(),e.progress=1-e.progress,e.started=!1;var o=function(_e,er){var rr=e[_e];rr!=null&&(e[_e]=e[er],e[er]=rr)};if(o("zoom","startZoom"),o("pan","startPan"),o("position","startPosition"),e.style)for(var c=0;c<e.style.length;c++){var d=e.style[c],g=d.name,b=e.startStyle[g];e.startStyle[g]=d,e.style[c]=b}return s&&this.play(),this},promise:function(e){var s=this._private,o;switch(e){case"frame":o=s.frames;break;default:case"complete":case"completed":o=s.completes}return new Promise$1(function(c,d){o.push(function(){c()})})}});anifn.complete=anifn.completed;anifn.run=anifn.play;anifn.running=anifn.playing;var define$3={animated:function(){return function(){var s=this,o=s.length!==void 0,c=o?s:[s],d=this._private.cy||this;if(!d.styleEnabled())return!1;var g=c[0];if(g)return g._private.animation.current.length>0}},clearQueue:function(){return function(){var s=this,o=s.length!==void 0,c=o?s:[s],d=this._private.cy||this;if(!d.styleEnabled())return this;for(var g=0;g<c.length;g++){var b=c[g];b._private.animation.queue=[]}return this}},delay:function(){return function(s,o){var c=this._private.cy||this;return c.styleEnabled()?this.animate({delay:s,duration:s,complete:o}):this}},delayAnimation:function(){return function(s,o){var c=this._private.cy||this;return c.styleEnabled()?this.animation({delay:s,duration:s,complete:o}):this}},animation:function(){return function(s,o){var c=this,d=c.length!==void 0,g=d?c:[c],b=this._private.cy||this,j=!d,_e=!j;if(!b.styleEnabled())return this;var er=b.style();s=extend({},s,o);var rr=Object.keys(s).length===0;if(rr)return new Animation(g[0],s);switch(s.duration===void 0&&(s.duration=400),s.duration){case"slow":s.duration=600;break;case"fast":s.duration=200;break}if(_e&&(s.style=er.getPropsList(s.style||s.css),s.css=void 0),_e&&s.renderedPosition!=null){var tr=s.renderedPosition,nr=b.pan(),ar=b.zoom();s.position=renderedToModelPosition(tr,ar,nr)}if(j&&s.panBy!=null){var lr=s.panBy,or=b.pan();s.pan={x:or.x+lr.x,y:or.y+lr.y}}var ir=s.center||s.centre;if(j&&ir!=null){var sr=b.getCenterPan(ir.eles,s.zoom);sr!=null&&(s.pan=sr)}if(j&&s.fit!=null){var ur=s.fit,cr=b.getFitViewport(ur.eles||ur.boundingBox,ur.padding);cr!=null&&(s.pan=cr.pan,s.zoom=cr.zoom)}if(j&&plainObject(s.zoom)){var fr=b.getZoomedViewport(s.zoom);fr!=null?(fr.zoomed&&(s.zoom=fr.zoom),fr.panned&&(s.pan=fr.pan)):s.zoom=null}return new Animation(g[0],s)}},animate:function(){return function(s,o){var c=this,d=c.length!==void 0,g=d?c:[c],b=this._private.cy||this;if(!b.styleEnabled())return this;o&&(s=extend({},s,o));for(var j=0;j<g.length;j++){var _e=g[j],er=_e.animated()&&(s.queue===void 0||s.queue),rr=_e.animation(s,er?{queue:!0}:void 0);rr.play()}return this}},stop:function(){return function(s,o){var c=this,d=c.length!==void 0,g=d?c:[c],b=this._private.cy||this;if(!b.styleEnabled())return this;for(var j=0;j<g.length;j++){for(var _e=g[j],er=_e._private,rr=er.animation.current,tr=0;tr<rr.length;tr++){var nr=rr[tr],ar=nr._private;o&&(ar.duration=0)}s&&(er.animation.queue=[]),o||(er.animation.current=[])}return b.notify("draw"),this}}},isArray_1$1,hasRequiredIsArray$1;function requireIsArray$1(){if(hasRequiredIsArray$1)return isArray_1$1;hasRequiredIsArray$1=1;var a=Array.isArray;return isArray_1$1=a,isArray_1$1}var _isKey$1,hasRequired_isKey$1;function require_isKey$1(){if(hasRequired_isKey$1)return _isKey$1;hasRequired_isKey$1=1;var a=requireIsArray$1(),e=requireIsSymbol$1(),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;function c(d,g){if(a(d))return!1;var b=typeof d;return b=="number"||b=="symbol"||b=="boolean"||d==null||e(d)?!0:o.test(d)||!s.test(d)||g!=null&&d in Object(g)}return _isKey$1=c,_isKey$1}var isFunction_1$1,hasRequiredIsFunction$1;function requireIsFunction$1(){if(hasRequiredIsFunction$1)return isFunction_1$1;hasRequiredIsFunction$1=1;var a=require_baseGetTag$1(),e=requireIsObject$1(),s="[object AsyncFunction]",o="[object Function]",c="[object GeneratorFunction]",d="[object Proxy]";function g(b){if(!e(b))return!1;var j=a(b);return j==o||j==c||j==s||j==d}return isFunction_1$1=g,isFunction_1$1}var _coreJsData$1,hasRequired_coreJsData$1;function require_coreJsData$1(){if(hasRequired_coreJsData$1)return _coreJsData$1;hasRequired_coreJsData$1=1;var a=require_root$1(),e=a["__core-js_shared__"];return _coreJsData$1=e,_coreJsData$1}var _isMasked$1,hasRequired_isMasked$1;function require_isMasked$1(){if(hasRequired_isMasked$1)return _isMasked$1;hasRequired_isMasked$1=1;var a=require_coreJsData$1(),e=function(){var o=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}();function s(o){return!!e&&e in o}return _isMasked$1=s,_isMasked$1}var _toSource$1,hasRequired_toSource$1;function require_toSource$1(){if(hasRequired_toSource$1)return _toSource$1;hasRequired_toSource$1=1;var a=Function.prototype,e=a.toString;function s(o){if(o!=null){try{return e.call(o)}catch{}try{return o+""}catch{}}return""}return _toSource$1=s,_toSource$1}var _baseIsNative$1,hasRequired_baseIsNative$1;function require_baseIsNative$1(){if(hasRequired_baseIsNative$1)return _baseIsNative$1;hasRequired_baseIsNative$1=1;var a=requireIsFunction$1(),e=require_isMasked$1(),s=requireIsObject$1(),o=require_toSource$1(),c=/[\\^$.*+?()[\]{}|]/g,d=/^\[object .+?Constructor\]$/,g=Function.prototype,b=Object.prototype,j=g.toString,_e=b.hasOwnProperty,er=RegExp("^"+j.call(_e).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function rr(tr){if(!s(tr)||e(tr))return!1;var nr=a(tr)?er:d;return nr.test(o(tr))}return _baseIsNative$1=rr,_baseIsNative$1}var _getValue$1,hasRequired_getValue$1;function require_getValue$1(){if(hasRequired_getValue$1)return _getValue$1;hasRequired_getValue$1=1;function a(e,s){return e==null?void 0:e[s]}return _getValue$1=a,_getValue$1}var _getNative$1,hasRequired_getNative$1;function require_getNative$1(){if(hasRequired_getNative$1)return _getNative$1;hasRequired_getNative$1=1;var a=require_baseIsNative$1(),e=require_getValue$1();function s(o,c){var d=e(o,c);return a(d)?d:void 0}return _getNative$1=s,_getNative$1}var _nativeCreate$1,hasRequired_nativeCreate$1;function require_nativeCreate$1(){if(hasRequired_nativeCreate$1)return _nativeCreate$1;hasRequired_nativeCreate$1=1;var a=require_getNative$1(),e=a(Object,"create");return _nativeCreate$1=e,_nativeCreate$1}var _hashClear$1,hasRequired_hashClear$1;function require_hashClear$1(){if(hasRequired_hashClear$1)return _hashClear$1;hasRequired_hashClear$1=1;var a=require_nativeCreate$1();function e(){this.__data__=a?a(null):{},this.size=0}return _hashClear$1=e,_hashClear$1}var _hashDelete$1,hasRequired_hashDelete$1;function require_hashDelete$1(){if(hasRequired_hashDelete$1)return _hashDelete$1;hasRequired_hashDelete$1=1;function a(e){var s=this.has(e)&&delete this.__data__[e];return this.size-=s?1:0,s}return _hashDelete$1=a,_hashDelete$1}var _hashGet$1,hasRequired_hashGet$1;function require_hashGet$1(){if(hasRequired_hashGet$1)return _hashGet$1;hasRequired_hashGet$1=1;var a=require_nativeCreate$1(),e="__lodash_hash_undefined__",s=Object.prototype,o=s.hasOwnProperty;function c(d){var g=this.__data__;if(a){var b=g[d];return b===e?void 0:b}return o.call(g,d)?g[d]:void 0}return _hashGet$1=c,_hashGet$1}var _hashHas$1,hasRequired_hashHas$1;function require_hashHas$1(){if(hasRequired_hashHas$1)return _hashHas$1;hasRequired_hashHas$1=1;var a=require_nativeCreate$1(),e=Object.prototype,s=e.hasOwnProperty;function o(c){var d=this.__data__;return a?d[c]!==void 0:s.call(d,c)}return _hashHas$1=o,_hashHas$1}var _hashSet$1,hasRequired_hashSet$1;function require_hashSet$1(){if(hasRequired_hashSet$1)return _hashSet$1;hasRequired_hashSet$1=1;var a=require_nativeCreate$1(),e="__lodash_hash_undefined__";function s(o,c){var d=this.__data__;return this.size+=this.has(o)?0:1,d[o]=a&&c===void 0?e:c,this}return _hashSet$1=s,_hashSet$1}var _Hash$1,hasRequired_Hash$1;function require_Hash$1(){if(hasRequired_Hash$1)return _Hash$1;hasRequired_Hash$1=1;var a=require_hashClear$1(),e=require_hashDelete$1(),s=require_hashGet$1(),o=require_hashHas$1(),c=require_hashSet$1();function d(g){var b=-1,j=g==null?0:g.length;for(this.clear();++b<j;){var _e=g[b];this.set(_e[0],_e[1])}}return d.prototype.clear=a,d.prototype.delete=e,d.prototype.get=s,d.prototype.has=o,d.prototype.set=c,_Hash$1=d,_Hash$1}var _listCacheClear$1,hasRequired_listCacheClear$1;function require_listCacheClear$1(){if(hasRequired_listCacheClear$1)return _listCacheClear$1;hasRequired_listCacheClear$1=1;function a(){this.__data__=[],this.size=0}return _listCacheClear$1=a,_listCacheClear$1}var eq_1$1,hasRequiredEq$1;function requireEq$1(){if(hasRequiredEq$1)return eq_1$1;hasRequiredEq$1=1;function a(e,s){return e===s||e!==e&&s!==s}return eq_1$1=a,eq_1$1}var _assocIndexOf$1,hasRequired_assocIndexOf$1;function require_assocIndexOf$1(){if(hasRequired_assocIndexOf$1)return _assocIndexOf$1;hasRequired_assocIndexOf$1=1;var a=requireEq$1();function e(s,o){for(var c=s.length;c--;)if(a(s[c][0],o))return c;return-1}return _assocIndexOf$1=e,_assocIndexOf$1}var _listCacheDelete$1,hasRequired_listCacheDelete$1;function require_listCacheDelete$1(){if(hasRequired_listCacheDelete$1)return _listCacheDelete$1;hasRequired_listCacheDelete$1=1;var a=require_assocIndexOf$1(),e=Array.prototype,s=e.splice;function o(c){var d=this.__data__,g=a(d,c);if(g<0)return!1;var b=d.length-1;return g==b?d.pop():s.call(d,g,1),--this.size,!0}return _listCacheDelete$1=o,_listCacheDelete$1}var _listCacheGet$1,hasRequired_listCacheGet$1;function require_listCacheGet$1(){if(hasRequired_listCacheGet$1)return _listCacheGet$1;hasRequired_listCacheGet$1=1;var a=require_assocIndexOf$1();function e(s){var o=this.__data__,c=a(o,s);return c<0?void 0:o[c][1]}return _listCacheGet$1=e,_listCacheGet$1}var _listCacheHas$1,hasRequired_listCacheHas$1;function require_listCacheHas$1(){if(hasRequired_listCacheHas$1)return _listCacheHas$1;hasRequired_listCacheHas$1=1;var a=require_assocIndexOf$1();function e(s){return a(this.__data__,s)>-1}return _listCacheHas$1=e,_listCacheHas$1}var _listCacheSet$1,hasRequired_listCacheSet$1;function require_listCacheSet$1(){if(hasRequired_listCacheSet$1)return _listCacheSet$1;hasRequired_listCacheSet$1=1;var a=require_assocIndexOf$1();function e(s,o){var c=this.__data__,d=a(c,s);return d<0?(++this.size,c.push([s,o])):c[d][1]=o,this}return _listCacheSet$1=e,_listCacheSet$1}var _ListCache$1,hasRequired_ListCache$1;function require_ListCache$1(){if(hasRequired_ListCache$1)return _ListCache$1;hasRequired_ListCache$1=1;var a=require_listCacheClear$1(),e=require_listCacheDelete$1(),s=require_listCacheGet$1(),o=require_listCacheHas$1(),c=require_listCacheSet$1();function d(g){var b=-1,j=g==null?0:g.length;for(this.clear();++b<j;){var _e=g[b];this.set(_e[0],_e[1])}}return d.prototype.clear=a,d.prototype.delete=e,d.prototype.get=s,d.prototype.has=o,d.prototype.set=c,_ListCache$1=d,_ListCache$1}var _Map$1,hasRequired_Map$1;function require_Map$1(){if(hasRequired_Map$1)return _Map$1;hasRequired_Map$1=1;var a=require_getNative$1(),e=require_root$1(),s=a(e,"Map");return _Map$1=s,_Map$1}var _mapCacheClear$1,hasRequired_mapCacheClear$1;function require_mapCacheClear$1(){if(hasRequired_mapCacheClear$1)return _mapCacheClear$1;hasRequired_mapCacheClear$1=1;var a=require_Hash$1(),e=require_ListCache$1(),s=require_Map$1();function o(){this.size=0,this.__data__={hash:new a,map:new(s||e),string:new a}}return _mapCacheClear$1=o,_mapCacheClear$1}var _isKeyable$1,hasRequired_isKeyable$1;function require_isKeyable$1(){if(hasRequired_isKeyable$1)return _isKeyable$1;hasRequired_isKeyable$1=1;function a(e){var s=typeof e;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?e!=="__proto__":e===null}return _isKeyable$1=a,_isKeyable$1}var _getMapData$1,hasRequired_getMapData$1;function require_getMapData$1(){if(hasRequired_getMapData$1)return _getMapData$1;hasRequired_getMapData$1=1;var a=require_isKeyable$1();function e(s,o){var c=s.__data__;return a(o)?c[typeof o=="string"?"string":"hash"]:c.map}return _getMapData$1=e,_getMapData$1}var _mapCacheDelete$1,hasRequired_mapCacheDelete$1;function require_mapCacheDelete$1(){if(hasRequired_mapCacheDelete$1)return _mapCacheDelete$1;hasRequired_mapCacheDelete$1=1;var a=require_getMapData$1();function e(s){var o=a(this,s).delete(s);return this.size-=o?1:0,o}return _mapCacheDelete$1=e,_mapCacheDelete$1}var _mapCacheGet$1,hasRequired_mapCacheGet$1;function require_mapCacheGet$1(){if(hasRequired_mapCacheGet$1)return _mapCacheGet$1;hasRequired_mapCacheGet$1=1;var a=require_getMapData$1();function e(s){return a(this,s).get(s)}return _mapCacheGet$1=e,_mapCacheGet$1}var _mapCacheHas$1,hasRequired_mapCacheHas$1;function require_mapCacheHas$1(){if(hasRequired_mapCacheHas$1)return _mapCacheHas$1;hasRequired_mapCacheHas$1=1;var a=require_getMapData$1();function e(s){return a(this,s).has(s)}return _mapCacheHas$1=e,_mapCacheHas$1}var _mapCacheSet$1,hasRequired_mapCacheSet$1;function require_mapCacheSet$1(){if(hasRequired_mapCacheSet$1)return _mapCacheSet$1;hasRequired_mapCacheSet$1=1;var a=require_getMapData$1();function e(s,o){var c=a(this,s),d=c.size;return c.set(s,o),this.size+=c.size==d?0:1,this}return _mapCacheSet$1=e,_mapCacheSet$1}var _MapCache$1,hasRequired_MapCache$1;function require_MapCache$1(){if(hasRequired_MapCache$1)return _MapCache$1;hasRequired_MapCache$1=1;var a=require_mapCacheClear$1(),e=require_mapCacheDelete$1(),s=require_mapCacheGet$1(),o=require_mapCacheHas$1(),c=require_mapCacheSet$1();function d(g){var b=-1,j=g==null?0:g.length;for(this.clear();++b<j;){var _e=g[b];this.set(_e[0],_e[1])}}return d.prototype.clear=a,d.prototype.delete=e,d.prototype.get=s,d.prototype.has=o,d.prototype.set=c,_MapCache$1=d,_MapCache$1}var memoize_1$1,hasRequiredMemoize$1;function requireMemoize$1(){if(hasRequiredMemoize$1)return memoize_1$1;hasRequiredMemoize$1=1;var a=require_MapCache$1(),e="Expected a function";function s(o,c){if(typeof o!="function"||c!=null&&typeof c!="function")throw new TypeError(e);var d=function(){var g=arguments,b=c?c.apply(this,g):g[0],j=d.cache;if(j.has(b))return j.get(b);var _e=o.apply(this,g);return d.cache=j.set(b,_e)||j,_e};return d.cache=new(s.Cache||a),d}return s.Cache=a,memoize_1$1=s,memoize_1$1}var _memoizeCapped$1,hasRequired_memoizeCapped$1;function require_memoizeCapped$1(){if(hasRequired_memoizeCapped$1)return _memoizeCapped$1;hasRequired_memoizeCapped$1=1;var a=requireMemoize$1(),e=500;function s(o){var c=a(o,function(g){return d.size===e&&d.clear(),g}),d=c.cache;return c}return _memoizeCapped$1=s,_memoizeCapped$1}var _stringToPath$1,hasRequired_stringToPath$1;function require_stringToPath$1(){if(hasRequired_stringToPath$1)return _stringToPath$1;hasRequired_stringToPath$1=1;var a=require_memoizeCapped$1(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,o=a(function(c){var d=[];return c.charCodeAt(0)===46&&d.push(""),c.replace(e,function(g,b,j,_e){d.push(j?_e.replace(s,"$1"):b||g)}),d});return _stringToPath$1=o,_stringToPath$1}var _arrayMap$1,hasRequired_arrayMap$1;function require_arrayMap$1(){if(hasRequired_arrayMap$1)return _arrayMap$1;hasRequired_arrayMap$1=1;function a(e,s){for(var o=-1,c=e==null?0:e.length,d=Array(c);++o<c;)d[o]=s(e[o],o,e);return d}return _arrayMap$1=a,_arrayMap$1}var _baseToString$1,hasRequired_baseToString$1;function require_baseToString$1(){if(hasRequired_baseToString$1)return _baseToString$1;hasRequired_baseToString$1=1;var a=require_Symbol$1(),e=require_arrayMap$1(),s=requireIsArray$1(),o=requireIsSymbol$1(),c=a?a.prototype:void 0,d=c?c.toString:void 0;function g(b){if(typeof b=="string")return b;if(s(b))return e(b,g)+"";if(o(b))return d?d.call(b):"";var j=b+"";return j=="0"&&1/b==-1/0?"-0":j}return _baseToString$1=g,_baseToString$1}var toString_1$1,hasRequiredToString$1;function requireToString$1(){if(hasRequiredToString$1)return toString_1$1;hasRequiredToString$1=1;var a=require_baseToString$1();function e(s){return s==null?"":a(s)}return toString_1$1=e,toString_1$1}var _castPath$1,hasRequired_castPath$1;function require_castPath$1(){if(hasRequired_castPath$1)return _castPath$1;hasRequired_castPath$1=1;var a=requireIsArray$1(),e=require_isKey$1(),s=require_stringToPath$1(),o=requireToString$1();function c(d,g){return a(d)?d:e(d,g)?[d]:s(o(d))}return _castPath$1=c,_castPath$1}var _toKey$1,hasRequired_toKey$1;function require_toKey$1(){if(hasRequired_toKey$1)return _toKey$1;hasRequired_toKey$1=1;var a=requireIsSymbol$1();function e(s){if(typeof s=="string"||a(s))return s;var o=s+"";return o=="0"&&1/s==-1/0?"-0":o}return _toKey$1=e,_toKey$1}var _baseGet$1,hasRequired_baseGet$1;function require_baseGet$1(){if(hasRequired_baseGet$1)return _baseGet$1;hasRequired_baseGet$1=1;var a=require_castPath$1(),e=require_toKey$1();function s(o,c){c=a(c,o);for(var d=0,g=c.length;o!=null&&d<g;)o=o[e(c[d++])];return d&&d==g?o:void 0}return _baseGet$1=s,_baseGet$1}var get_1$1,hasRequiredGet$1;function requireGet$1(){if(hasRequiredGet$1)return get_1$1;hasRequiredGet$1=1;var a=require_baseGet$1();function e(s,o,c){var d=s==null?void 0:a(s,o);return d===void 0?c:d}return get_1$1=e,get_1$1}var getExports=requireGet$1(),get=getDefaultExportFromCjs(getExports),_defineProperty$3,hasRequired_defineProperty$1;function require_defineProperty$1(){if(hasRequired_defineProperty$1)return _defineProperty$3;hasRequired_defineProperty$1=1;var a=require_getNative$1(),e=function(){try{var s=a(Object,"defineProperty");return s({},"",{}),s}catch{}}();return _defineProperty$3=e,_defineProperty$3}var _baseAssignValue$1,hasRequired_baseAssignValue$1;function require_baseAssignValue$1(){if(hasRequired_baseAssignValue$1)return _baseAssignValue$1;hasRequired_baseAssignValue$1=1;var a=require_defineProperty$1();function e(s,o,c){o=="__proto__"&&a?a(s,o,{configurable:!0,enumerable:!0,value:c,writable:!0}):s[o]=c}return _baseAssignValue$1=e,_baseAssignValue$1}var _assignValue$1,hasRequired_assignValue$1;function require_assignValue$1(){if(hasRequired_assignValue$1)return _assignValue$1;hasRequired_assignValue$1=1;var a=require_baseAssignValue$1(),e=requireEq$1(),s=Object.prototype,o=s.hasOwnProperty;function c(d,g,b){var j=d[g];(!(o.call(d,g)&&e(j,b))||b===void 0&&!(g in d))&&a(d,g,b)}return _assignValue$1=c,_assignValue$1}var _isIndex$1,hasRequired_isIndex$1;function require_isIndex$1(){if(hasRequired_isIndex$1)return _isIndex$1;hasRequired_isIndex$1=1;var a=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function s(o,c){var d=typeof o;return c=c??a,!!c&&(d=="number"||d!="symbol"&&e.test(o))&&o>-1&&o%1==0&&o<c}return _isIndex$1=s,_isIndex$1}var _baseSet$1,hasRequired_baseSet$1;function require_baseSet$1(){if(hasRequired_baseSet$1)return _baseSet$1;hasRequired_baseSet$1=1;var a=require_assignValue$1(),e=require_castPath$1(),s=require_isIndex$1(),o=requireIsObject$1(),c=require_toKey$1();function d(g,b,j,_e){if(!o(g))return g;b=e(b,g);for(var er=-1,rr=b.length,tr=rr-1,nr=g;nr!=null&&++er<rr;){var ar=c(b[er]),lr=j;if(ar==="__proto__"||ar==="constructor"||ar==="prototype")return g;if(er!=tr){var or=nr[ar];lr=_e?_e(or,ar,nr):void 0,lr===void 0&&(lr=o(or)?or:s(b[er+1])?[]:{})}a(nr,ar,lr),nr=nr[ar]}return g}return _baseSet$1=d,_baseSet$1}var set_1,hasRequiredSet;function requireSet(){if(hasRequiredSet)return set_1;hasRequiredSet=1;var a=require_baseSet$1();function e(s,o,c){return s==null?s:a(s,o,c)}return set_1=e,set_1}var setExports=requireSet(),set=getDefaultExportFromCjs(setExports),_copyArray$1,hasRequired_copyArray$1;function require_copyArray$1(){if(hasRequired_copyArray$1)return _copyArray$1;hasRequired_copyArray$1=1;function a(e,s){var o=-1,c=e.length;for(s||(s=Array(c));++o<c;)s[o]=e[o];return s}return _copyArray$1=a,_copyArray$1}var toPath_1,hasRequiredToPath;function requireToPath(){if(hasRequiredToPath)return toPath_1;hasRequiredToPath=1;var a=require_arrayMap$1(),e=require_copyArray$1(),s=requireIsArray$1(),o=requireIsSymbol$1(),c=require_stringToPath$1(),d=require_toKey$1(),g=requireToString$1();function b(j){return s(j)?a(j,d):o(j)?[j]:e(c(g(j)))}return toPath_1=b,toPath_1}var toPathExports=requireToPath(),toPath=getDefaultExportFromCjs(toPathExports),define$2={data:function(e){var s={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(c){},beforeSet:function(c,d){},onSet:function(c){},canSet:function(c){return!0}};return e=extend({},s,e),function(c,d){var g=e,b=this,j=b.length!==void 0,_e=j?b:[b],er=j?b[0]:b;if(string(c)){var rr=c.indexOf(".")!==-1,tr=rr&&toPath(c);if(g.allowGetting&&d===void 0){var nr;return er&&(g.beforeGet(er),tr&&er._private[g.field][c]===void 0?nr=get(er._private[g.field],tr):nr=er._private[g.field][c]),nr}else if(g.allowSetting&&d!==void 0){var ar=!g.immutableKeys[c];if(ar){var lr=_defineProperty$1$1({},c,d);g.beforeSet(b,lr);for(var or=0,ir=_e.length;or<ir;or++){var sr=_e[or];g.canSet(sr)&&(tr&&er._private[g.field][c]===void 0?set(sr._private[g.field],tr,d):sr._private[g.field][c]=d)}g.updateStyle&&b.updateStyle(),g.onSet(b),g.settingTriggersEvent&&b[g.triggerFnName](g.settingEvent)}}}else if(g.allowSetting&&plainObject(c)){var ur=c,cr,fr,hr=Object.keys(ur);g.beforeSet(b,ur);for(var dr=0;dr<hr.length;dr++){cr=hr[dr],fr=ur[cr];var vr=!g.immutableKeys[cr];if(vr)for(var gr=0;gr<_e.length;gr++){var pr=_e[gr];g.canSet(pr)&&(pr._private[g.field][cr]=fr)}}g.updateStyle&&b.updateStyle(),g.onSet(b),g.settingTriggersEvent&&b[g.triggerFnName](g.settingEvent)}else if(g.allowBinding&&fn$6(c)){var mr=c;b.on(g.bindingEvent,mr)}else if(g.allowGetting&&c===void 0){var yr;return er&&(g.beforeGet(er),yr=er._private[g.field]),yr}return b}},removeData:function(e){var s={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=extend({},s,e),function(c){var d=e,g=this,b=g.length!==void 0,j=b?g:[g];if(string(c)){for(var _e=c.split(/\s+/),er=_e.length,rr=0;rr<er;rr++){var tr=_e[rr];if(!emptyString(tr)){var nr=!d.immutableKeys[tr];if(nr)for(var ar=0,lr=j.length;ar<lr;ar++)j[ar]._private[d.field][tr]=void 0}}d.triggerEvent&&g[d.triggerFnName](d.event)}else if(c===void 0){for(var or=0,ir=j.length;or<ir;or++)for(var sr=j[or]._private[d.field],ur=Object.keys(sr),cr=0;cr<ur.length;cr++){var fr=ur[cr],hr=!d.immutableKeys[fr];hr&&(sr[fr]=void 0)}d.triggerEvent&&g[d.triggerFnName](d.event)}return g}}},define$1={eventAliasesOn:function(e){var s=e;s.addListener=s.listen=s.bind=s.on,s.unlisten=s.unbind=s.off=s.removeListener,s.trigger=s.emit,s.pon=s.promiseOn=function(o,c){var d=this,g=Array.prototype.slice.call(arguments,0);return new Promise$1(function(b,j){var _e=function(nr){d.off.apply(d,rr),b(nr)},er=g.concat([_e]),rr=er.concat([]);d.on.apply(d,er)})}}},define={};[define$3,define$2,define$1].forEach(function(a){extend(define,a)});var elesfn$i={animate:define.animate(),animation:define.animation(),animated:define.animated(),clearQueue:define.clearQueue(),delay:define.delay(),delayAnimation:define.delayAnimation(),stop:define.stop()},elesfn$h={classes:function(e){var s=this;if(e===void 0){var o=[];return s[0]._private.classes.forEach(function(ar){return o.push(ar)}),o}else array(e)||(e=(e||"").match(/\S+/g)||[]);for(var c=[],d=new Set$1(e),g=0;g<s.length;g++){for(var b=s[g],j=b._private,_e=j.classes,er=!1,rr=0;rr<e.length;rr++){var tr=e[rr],nr=_e.has(tr);if(!nr){er=!0;break}}er||(er=_e.size!==e.length),er&&(j.classes=d,c.push(b))}return c.length>0&&this.spawn(c).updateStyle().emit("class"),s},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var s=this[0];return s!=null&&s._private.classes.has(e)},toggleClass:function(e,s){array(e)||(e=e.match(/\S+/g)||[]);for(var o=this,c=s===void 0,d=[],g=0,b=o.length;g<b;g++)for(var j=o[g],_e=j._private.classes,er=!1,rr=0;rr<e.length;rr++){var tr=e[rr],nr=_e.has(tr),ar=!1;s||c&&!nr?(_e.add(tr),ar=!0):(!s||c&&nr)&&(_e.delete(tr),ar=!0),!er&&ar&&(d.push(j),er=!0)}return d.length>0&&this.spawn(d).updateStyle().emit("class"),o},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,s){var o=this;if(s==null)s=250;else if(s===0)return o;return o.addClass(e),setTimeout(function(){o.removeClass(e)},s),o}};elesfn$h.className=elesfn$h.classNames=elesfn$h.classes;var tokens={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};tokens.variable="(?:[\\w-.]|(?:\\\\"+tokens.metaChar+"))+";tokens.className="(?:[\\w-]|(?:\\\\"+tokens.metaChar+"))+";tokens.value=tokens.string+"|"+tokens.number;tokens.id=tokens.variable;(function(){var a,e,s;for(a=tokens.comparatorOp.split("|"),s=0;s<a.length;s++)e=a[s],tokens.comparatorOp+="|@"+e;for(a=tokens.comparatorOp.split("|"),s=0;s<a.length;s++)e=a[s],!(e.indexOf("!")>=0)&&e!=="="&&(tokens.comparatorOp+="|\\!"+e)})();var newQuery=function(){return{checks:[]}},Type={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},stateSelectors=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(a,e){return descending(a.selector,e.selector)}),lookup=function(){for(var a={},e,s=0;s<stateSelectors.length;s++)e=stateSelectors[s],a[e.selector]=e.matches;return a}(),stateSelectorMatches=function(e,s){return lookup[e](s)},stateSelectorRegex="("+stateSelectors.map(function(a){return a.selector}).join("|")+")",cleanMetaChars=function(e){return e.replace(new RegExp("\\\\("+tokens.metaChar+")","g"),function(s,o){return o})},replaceLastQuery=function(e,s,o){e[e.length-1]=o},exprs=[{name:"group",query:!0,regex:"("+tokens.group+")",populate:function(e,s,o){var c=_slicedToArray$1(o,1),d=c[0];s.checks.push({type:Type.GROUP,value:d==="*"?d:d+"s"})}},{name:"state",query:!0,regex:stateSelectorRegex,populate:function(e,s,o){var c=_slicedToArray$1(o,1),d=c[0];s.checks.push({type:Type.STATE,value:d})}},{name:"id",query:!0,regex:"\\#("+tokens.id+")",populate:function(e,s,o){var c=_slicedToArray$1(o,1),d=c[0];s.checks.push({type:Type.ID,value:cleanMetaChars(d)})}},{name:"className",query:!0,regex:"\\.("+tokens.className+")",populate:function(e,s,o){var c=_slicedToArray$1(o,1),d=c[0];s.checks.push({type:Type.CLASS,value:cleanMetaChars(d)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+tokens.variable+")\\s*\\]",populate:function(e,s,o){var c=_slicedToArray$1(o,1),d=c[0];s.checks.push({type:Type.DATA_EXIST,field:cleanMetaChars(d)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+tokens.variable+")\\s*("+tokens.comparatorOp+")\\s*("+tokens.value+")\\s*\\]",populate:function(e,s,o){var c=_slicedToArray$1(o,3),d=c[0],g=c[1],b=c[2],j=new RegExp("^"+tokens.string+"$").exec(b)!=null;j?b=b.substring(1,b.length-1):b=parseFloat(b),s.checks.push({type:Type.DATA_COMPARE,field:cleanMetaChars(d),operator:g,value:b})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+tokens.boolOp+")\\s*("+tokens.variable+")\\s*\\]",populate:function(e,s,o){var c=_slicedToArray$1(o,2),d=c[0],g=c[1];s.checks.push({type:Type.DATA_BOOL,field:cleanMetaChars(g),operator:d})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+tokens.meta+")\\s*("+tokens.comparatorOp+")\\s*("+tokens.number+")\\s*\\]\\]",populate:function(e,s,o){var c=_slicedToArray$1(o,3),d=c[0],g=c[1],b=c[2];s.checks.push({type:Type.META_COMPARE,field:cleanMetaChars(d),operator:g,value:parseFloat(b)})}},{name:"nextQuery",separator:!0,regex:tokens.separator,populate:function(e,s){var o=e.currentSubject,c=e.edgeCount,d=e.compoundCount,g=e[e.length-1];o!=null&&(g.subject=o,e.currentSubject=null),g.edgeCount=c,g.compoundCount=d,e.edgeCount=0,e.compoundCount=0;var b=e[e.length++]=newQuery();return b}},{name:"directedEdge",separator:!0,regex:tokens.directedEdge,populate:function(e,s){if(e.currentSubject==null){var o=newQuery(),c=s,d=newQuery();return o.checks.push({type:Type.DIRECTED_EDGE,source:c,target:d}),replaceLastQuery(e,s,o),e.edgeCount++,d}else{var g=newQuery(),b=s,j=newQuery();return g.checks.push({type:Type.NODE_SOURCE,source:b,target:j}),replaceLastQuery(e,s,g),e.edgeCount++,j}}},{name:"undirectedEdge",separator:!0,regex:tokens.undirectedEdge,populate:function(e,s){if(e.currentSubject==null){var o=newQuery(),c=s,d=newQuery();return o.checks.push({type:Type.UNDIRECTED_EDGE,nodes:[c,d]}),replaceLastQuery(e,s,o),e.edgeCount++,d}else{var g=newQuery(),b=s,j=newQuery();return g.checks.push({type:Type.NODE_NEIGHBOR,node:b,neighbor:j}),replaceLastQuery(e,s,g),j}}},{name:"child",separator:!0,regex:tokens.child,populate:function(e,s){if(e.currentSubject==null){var o=newQuery(),c=newQuery(),d=e[e.length-1];return o.checks.push({type:Type.CHILD,parent:d,child:c}),replaceLastQuery(e,s,o),e.compoundCount++,c}else if(e.currentSubject===s){var g=newQuery(),b=e[e.length-1],j=newQuery(),_e=newQuery(),er=newQuery(),rr=newQuery();return g.checks.push({type:Type.COMPOUND_SPLIT,left:b,right:j,subject:_e}),_e.checks=s.checks,s.checks=[{type:Type.TRUE}],rr.checks.push({type:Type.TRUE}),j.checks.push({type:Type.PARENT,parent:rr,child:er}),replaceLastQuery(e,b,g),e.currentSubject=_e,e.compoundCount++,er}else{var tr=newQuery(),nr=newQuery(),ar=[{type:Type.PARENT,parent:tr,child:nr}];return tr.checks=s.checks,s.checks=ar,e.compoundCount++,nr}}},{name:"descendant",separator:!0,regex:tokens.descendant,populate:function(e,s){if(e.currentSubject==null){var o=newQuery(),c=newQuery(),d=e[e.length-1];return o.checks.push({type:Type.DESCENDANT,ancestor:d,descendant:c}),replaceLastQuery(e,s,o),e.compoundCount++,c}else if(e.currentSubject===s){var g=newQuery(),b=e[e.length-1],j=newQuery(),_e=newQuery(),er=newQuery(),rr=newQuery();return g.checks.push({type:Type.COMPOUND_SPLIT,left:b,right:j,subject:_e}),_e.checks=s.checks,s.checks=[{type:Type.TRUE}],rr.checks.push({type:Type.TRUE}),j.checks.push({type:Type.ANCESTOR,ancestor:rr,descendant:er}),replaceLastQuery(e,b,g),e.currentSubject=_e,e.compoundCount++,er}else{var tr=newQuery(),nr=newQuery(),ar=[{type:Type.ANCESTOR,ancestor:tr,descendant:nr}];return tr.checks=s.checks,s.checks=ar,e.compoundCount++,nr}}},{name:"subject",modifier:!0,regex:tokens.subject,populate:function(e,s){if(e.currentSubject!=null&&e.currentSubject!==s)return warn("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=s;var o=e[e.length-1],c=o.checks[0],d=c==null?null:c.type;d===Type.DIRECTED_EDGE?c.type=Type.NODE_TARGET:d===Type.UNDIRECTED_EDGE&&(c.type=Type.NODE_NEIGHBOR,c.node=c.nodes[1],c.neighbor=c.nodes[0],c.nodes=null)}}];exprs.forEach(function(a){return a.regexObj=new RegExp("^"+a.regex)});var consumeExpr=function(e){for(var s,o,c,d=0;d<exprs.length;d++){var g=exprs[d],b=g.name,j=e.match(g.regexObj);if(j!=null){o=j,s=g,c=b;var _e=j[0];e=e.substring(_e.length);break}}return{expr:s,match:o,name:c,remaining:e}},consumeWhitespace=function(e){var s=e.match(/^\s+/);if(s){var o=s[0];e=e.substring(o.length)}return e},parse=function(e){var s=this,o=s.inputText=e,c=s[0]=newQuery();for(s.length=1,o=consumeWhitespace(o);;){var d=consumeExpr(o);if(d.expr==null)return warn("The selector `"+e+"`is invalid"),!1;var g=d.match.slice(1),b=d.expr.populate(s,c,g);if(b===!1)return!1;if(b!=null&&(c=b),o=d.remaining,o.match(/^\s*$/))break}var j=s[s.length-1];s.currentSubject!=null&&(j.subject=s.currentSubject),j.edgeCount=s.edgeCount,j.compoundCount=s.compoundCount;for(var _e=0;_e<s.length;_e++){var er=s[_e];if(er.compoundCount>0&&er.edgeCount>0)return warn("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(er.edgeCount>1)return warn("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;er.edgeCount===1&&warn("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(er){return er??""},s=function(er){return string(er)?'"'+er+'"':e(er)},o=function(er){return" "+er+" "},c=function(er,rr){var tr=er.type,nr=er.value;switch(tr){case Type.GROUP:{var ar=e(nr);return ar.substring(0,ar.length-1)}case Type.DATA_COMPARE:{var lr=er.field,or=er.operator;return"["+lr+o(e(or))+s(nr)+"]"}case Type.DATA_BOOL:{var ir=er.operator,sr=er.field;return"["+e(ir)+sr+"]"}case Type.DATA_EXIST:{var ur=er.field;return"["+ur+"]"}case Type.META_COMPARE:{var cr=er.operator,fr=er.field;return"[["+fr+o(e(cr))+s(nr)+"]]"}case Type.STATE:return nr;case Type.ID:return"#"+nr;case Type.CLASS:return"."+nr;case Type.PARENT:case Type.CHILD:return d(er.parent,rr)+o(">")+d(er.child,rr);case Type.ANCESTOR:case Type.DESCENDANT:return d(er.ancestor,rr)+" "+d(er.descendant,rr);case Type.COMPOUND_SPLIT:{var hr=d(er.left,rr),dr=d(er.subject,rr),vr=d(er.right,rr);return hr+(hr.length>0?" ":"")+dr+vr}case Type.TRUE:return""}},d=function(er,rr){return er.checks.reduce(function(tr,nr,ar){return tr+(rr===er&&ar===0?"$":"")+c(nr,rr)},"")},g="",b=0;b<this.length;b++){var j=this[b];g+=d(j,j.subject),this.length>1&&b<this.length-1&&(g+=", ")}return this.toStringCache=g,g},parse$1={parse,toString},valCmp=function(e,s,o){var c,d=string(e),g=number$1(e),b=string(o),j,_e,er=!1,rr=!1,tr=!1;switch(s.indexOf("!")>=0&&(s=s.replace("!",""),rr=!0),s.indexOf("@")>=0&&(s=s.replace("@",""),er=!0),(d||b||er)&&(j=!d&&!g?"":""+e,_e=""+o),er&&(e=j=j.toLowerCase(),o=_e=_e.toLowerCase()),s){case"*=":c=j.indexOf(_e)>=0;break;case"$=":c=j.indexOf(_e,j.length-_e.length)>=0;break;case"^=":c=j.indexOf(_e)===0;break;case"=":c=e===o;break;case">":tr=!0,c=e>o;break;case">=":tr=!0,c=e>=o;break;case"<":tr=!0,c=e<o;break;case"<=":tr=!0,c=e<=o;break;default:c=!1;break}return rr&&(e!=null||!tr)&&(c=!c),c},boolCmp=function(e,s){switch(s){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},existCmp=function(e){return e!==void 0},data$1=function(e,s){return e.data(s)},meta=function(e,s){return e[s]()},match=[],matches$1=function(e,s){return e.checks.every(function(o){return match[o.type](o,s)})};match[Type.GROUP]=function(a,e){var s=a.value;return s==="*"||s===e.group()};match[Type.STATE]=function(a,e){var s=a.value;return stateSelectorMatches(s,e)};match[Type.ID]=function(a,e){var s=a.value;return e.id()===s};match[Type.CLASS]=function(a,e){var s=a.value;return e.hasClass(s)};match[Type.META_COMPARE]=function(a,e){var s=a.field,o=a.operator,c=a.value;return valCmp(meta(e,s),o,c)};match[Type.DATA_COMPARE]=function(a,e){var s=a.field,o=a.operator,c=a.value;return valCmp(data$1(e,s),o,c)};match[Type.DATA_BOOL]=function(a,e){var s=a.field,o=a.operator;return boolCmp(data$1(e,s),o)};match[Type.DATA_EXIST]=function(a,e){var s=a.field;return a.operator,existCmp(data$1(e,s))};match[Type.UNDIRECTED_EDGE]=function(a,e){var s=a.nodes[0],o=a.nodes[1],c=e.source(),d=e.target();return matches$1(s,c)&&matches$1(o,d)||matches$1(o,c)&&matches$1(s,d)};match[Type.NODE_NEIGHBOR]=function(a,e){return matches$1(a.node,e)&&e.neighborhood().some(function(s){return s.isNode()&&matches$1(a.neighbor,s)})};match[Type.DIRECTED_EDGE]=function(a,e){return matches$1(a.source,e.source())&&matches$1(a.target,e.target())};match[Type.NODE_SOURCE]=function(a,e){return matches$1(a.source,e)&&e.outgoers().some(function(s){return s.isNode()&&matches$1(a.target,s)})};match[Type.NODE_TARGET]=function(a,e){return matches$1(a.target,e)&&e.incomers().some(function(s){return s.isNode()&&matches$1(a.source,s)})};match[Type.CHILD]=function(a,e){return matches$1(a.child,e)&&matches$1(a.parent,e.parent())};match[Type.PARENT]=function(a,e){return matches$1(a.parent,e)&&e.children().some(function(s){return matches$1(a.child,s)})};match[Type.DESCENDANT]=function(a,e){return matches$1(a.descendant,e)&&e.ancestors().some(function(s){return matches$1(a.ancestor,s)})};match[Type.ANCESTOR]=function(a,e){return matches$1(a.ancestor,e)&&e.descendants().some(function(s){return matches$1(a.descendant,s)})};match[Type.COMPOUND_SPLIT]=function(a,e){return matches$1(a.subject,e)&&matches$1(a.left,e)&&matches$1(a.right,e)};match[Type.TRUE]=function(){return!0};match[Type.COLLECTION]=function(a,e){var s=a.value;return s.has(e)};match[Type.FILTER]=function(a,e){var s=a.value;return s(e)};var filter=function(e){var s=this;if(s.length===1&&s[0].checks.length===1&&s[0].checks[0].type===Type.ID)return e.getElementById(s[0].checks[0].value).collection();var o=function(d){for(var g=0;g<s.length;g++){var b=s[g];if(matches$1(b,d))return!0}return!1};return s.text()==null&&(o=function(){return!0}),e.filter(o)},matches=function(e){for(var s=this,o=0;o<s.length;o++){var c=s[o];if(matches$1(c,e))return!0}return!1},matching={matches,filter},Selector=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||string(e)&&e.match(/^\s*$/)||(elementOrCollection(e)?this.addQuery({checks:[{type:Type.COLLECTION,value:e.collection()}]}):fn$6(e)?this.addQuery({checks:[{type:Type.FILTER,value:e}]}):string(e)?this.parse(e)||(this.invalid=!0):error("A selector must be created from a string; found "))},selfn=Selector.prototype;[parse$1,matching].forEach(function(a){return extend(selfn,a)});selfn.text=function(){return this.inputText};selfn.size=function(){return this.length};selfn.eq=function(a){return this[a]};selfn.sameText=function(a){return!this.invalid&&!a.invalid&&this.text()===a.text()};selfn.addQuery=function(a){this[this.length++]=a};selfn.selector=selfn.toString;var elesfn$g={allAre:function(e){var s=new Selector(e);return this.every(function(o){return s.matches(o)})},is:function(e){var s=new Selector(e);return this.some(function(o){return s.matches(o)})},some:function(e,s){for(var o=0;o<this.length;o++){var c=s?e.apply(s,[this[o],o,this]):e(this[o],o,this);if(c)return!0}return!1},every:function(e,s){for(var o=0;o<this.length;o++){var c=s?e.apply(s,[this[o],o,this]):e(this[o],o,this);if(!c)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var s=this.length,o=e.length;return s!==o?!1:s===1?this[0]===e[0]:this.every(function(c){return e.hasElementWithId(c.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(s){return e.hasElementWithId(s.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var s=this.neighborhood();return e.every(function(o){return s.hasElementWithId(o.id())})},contains:function(e){e=this.cy().collection(e);var s=this;return e.every(function(o){return s.hasElementWithId(o.id())})}};elesfn$g.allAreNeighbours=elesfn$g.allAreNeighbors;elesfn$g.has=elesfn$g.contains;elesfn$g.equal=elesfn$g.equals=elesfn$g.same;var cache=function(e,s){return function(c,d,g,b){var j=c,_e=this,er;if(j==null?er="":elementOrCollection(j)&&j.length===1&&(er=j.id()),_e.length===1&&er){var rr=_e[0]._private,tr=rr.traversalCache=rr.traversalCache||{},nr=tr[s]=tr[s]||[],ar=hashString(er),lr=nr[ar];return lr||(nr[ar]=e.call(_e,c,d,g,b))}else return e.call(_e,c,d,g,b)}},elesfn$f={parent:function(e){var s=[];if(this.length===1){var o=this[0]._private.parent;if(o)return o}for(var c=0;c<this.length;c++){var d=this[c],g=d._private.parent;g&&s.push(g)}return this.spawn(s,!0).filter(e)},parents:function(e){for(var s=[],o=this.parent();o.nonempty();){for(var c=0;c<o.length;c++){var d=o[c];s.push(d)}o=o.parent()}return this.spawn(s,!0).filter(e)},commonAncestors:function(e){for(var s,o=0;o<this.length;o++){var c=this[o],d=c.parents();s=s||d,s=s.intersect(d)}return s.filter(e)},orphans:function(e){return this.stdFilter(function(s){return s.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(s){return s.isChild()}).filter(e)},children:cache(function(a){for(var e=[],s=0;s<this.length;s++)for(var o=this[s],c=o._private.children,d=0;d<c.length;d++)e.push(c[d]);return this.spawn(e,!0).filter(a)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var s=[];function o(c){for(var d=0;d<c.length;d++){var g=c[d];s.push(g),g.children().nonempty()&&o(g.children())}}return o(this.children()),this.spawn(s,!0).filter(e)}};function forEachCompound(a,e,s,o){for(var c=[],d=new Set$1,g=a.cy(),b=g.hasCompoundNodes(),j=0;j<a.length;j++){var _e=a[j];s?c.push(_e):b&&o(c,d,_e)}for(;c.length>0;){var er=c.shift();e(er),d.add(er.id()),b&&o(c,d,er)}return a}function addChildren(a,e,s){if(s.isParent())for(var o=s._private.children,c=0;c<o.length;c++){var d=o[c];e.has(d.id())||a.push(d)}}elesfn$f.forEachDown=function(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return forEachCompound(this,a,e,addChildren)};function addParent(a,e,s){if(s.isChild()){var o=s._private.parent;e.has(o.id())||a.push(o)}}elesfn$f.forEachUp=function(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return forEachCompound(this,a,e,addParent)};function addParentAndChildren(a,e,s){addParent(a,e,s),addChildren(a,e,s)}elesfn$f.forEachUpAndDown=function(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return forEachCompound(this,a,e,addParentAndChildren)};elesfn$f.ancestors=elesfn$f.parents;var fn$5,elesfn$e;fn$5=elesfn$e={data:define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:define.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:define.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:define.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:define.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};fn$5.attr=fn$5.data;fn$5.removeAttr=fn$5.removeData;var data=elesfn$e,elesfn$d={};function defineDegreeFunction(a){return function(e){var s=this;if(e===void 0&&(e=!0),s.length!==0)if(s.isNode()&&!s.removed()){for(var o=0,c=s[0],d=c._private.edges,g=0;g<d.length;g++){var b=d[g];!e&&b.isLoop()||(o+=a(c,b))}return o}else return}}extend(elesfn$d,{degree:defineDegreeFunction(function(a,e){return e.source().same(e.target())?2:1}),indegree:defineDegreeFunction(function(a,e){return e.target().same(a)?1:0}),outdegree:defineDegreeFunction(function(a,e){return e.source().same(a)?1:0})});function defineDegreeBoundsFunction(a,e){return function(s){for(var o,c=this.nodes(),d=0;d<c.length;d++){var g=c[d],b=g[a](s);b!==void 0&&(o===void 0||e(b,o))&&(o=b)}return o}}extend(elesfn$d,{minDegree:defineDegreeBoundsFunction("degree",function(a,e){return a<e}),maxDegree:defineDegreeBoundsFunction("degree",function(a,e){return a>e}),minIndegree:defineDegreeBoundsFunction("indegree",function(a,e){return a<e}),maxIndegree:defineDegreeBoundsFunction("indegree",function(a,e){return a>e}),minOutdegree:defineDegreeBoundsFunction("outdegree",function(a,e){return a<e}),maxOutdegree:defineDegreeBoundsFunction("outdegree",function(a,e){return a>e})});extend(elesfn$d,{totalDegree:function(e){for(var s=0,o=this.nodes(),c=0;c<o.length;c++)s+=o[c].degree(e);return s}});var fn$4,elesfn$c,beforePositionSet=function(e,s,o){for(var c=0;c<e.length;c++){var d=e[c];if(!d.locked()){var g=d._private.position,b={x:s.x!=null?s.x-g.x:0,y:s.y!=null?s.y-g.y:0};d.isParent()&&!(b.x===0&&b.y===0)&&d.children().shift(b,o),d.dirtyBoundingBoxCache()}}},positionDef={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,s){beforePositionSet(e,s,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};fn$4=elesfn$c={position:define.data(positionDef),silentPosition:define.data(extend({},positionDef,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,s){beforePositionSet(e,s,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,s){if(plainObject(e))s?this.silentPosition(e):this.position(e);else if(fn$6(e)){var o=e,c=this.cy();c.startBatch();for(var d=0;d<this.length;d++){var g=this[d],b=void 0;(b=o(g,d))&&(s?g.silentPosition(b):g.position(b))}c.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,s,o){var c;if(plainObject(e)?(c={x:number$1(e.x)?e.x:0,y:number$1(e.y)?e.y:0},o=s):string(e)&&number$1(s)&&(c={x:0,y:0},c[e]=s),c!=null){var d=this.cy();d.startBatch();for(var g=0;g<this.length;g++){var b=this[g];if(!(d.hasCompoundNodes()&&b.isChild()&&b.ancestors().anySame(this))){var j=b.position(),_e={x:j.x+c.x,y:j.y+c.y};o?b.silentPosition(_e):b.position(_e)}}d.endBatch()}return this},silentShift:function(e,s){return plainObject(e)?this.shift(e,!0):string(e)&&number$1(s)&&this.shift(e,s,!0),this},renderedPosition:function(e,s){var o=this[0],c=this.cy(),d=c.zoom(),g=c.pan(),b=plainObject(e)?e:void 0,j=b!==void 0||s!==void 0&&string(e);if(o&&o.isNode())if(j)for(var _e=0;_e<this.length;_e++){var er=this[_e];s!==void 0?er.position(e,(s-g[e])/d):b!==void 0&&er.position(renderedToModelPosition(b,d,g))}else{var rr=o.position();return b=modelToRenderedPosition$1(rr,d,g),e===void 0?b:b[e]}else if(!j)return;return this},relativePosition:function(e,s){var o=this[0],c=this.cy(),d=plainObject(e)?e:void 0,g=d!==void 0||s!==void 0&&string(e),b=c.hasCompoundNodes();if(o&&o.isNode())if(g)for(var j=0;j<this.length;j++){var _e=this[j],er=b?_e.parent():null,rr=er&&er.length>0,tr=rr;rr&&(er=er[0]);var nr=tr?er.position():{x:0,y:0};s!==void 0?_e.position(e,s+nr[e]):d!==void 0&&_e.position({x:d.x+nr.x,y:d.y+nr.y})}else{var ar=o.position(),lr=b?o.parent():null,or=lr&&lr.length>0,ir=or;or&&(lr=lr[0]);var sr=ir?lr.position():{x:0,y:0};return d={x:ar.x-sr.x,y:ar.y-sr.y},e===void 0?d:d[e]}else if(!g)return;return this}};fn$4.modelPosition=fn$4.point=fn$4.position;fn$4.modelPositions=fn$4.points=fn$4.positions;fn$4.renderedPoint=fn$4.renderedPosition;fn$4.relativePoint=fn$4.relativePosition;var position=elesfn$c,fn$3,elesfn$b;fn$3=elesfn$b={};elesfn$b.renderedBoundingBox=function(a){var e=this.boundingBox(a),s=this.cy(),o=s.zoom(),c=s.pan(),d=e.x1*o+c.x,g=e.x2*o+c.x,b=e.y1*o+c.y,j=e.y2*o+c.y;return{x1:d,x2:g,y1:b,y2:j,w:g-d,h:j-b}};elesfn$b.dirtyCompoundBoundsCache=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(s){if(s.isParent()){var o=s._private;o.compoundBoundsClean=!1,o.bbCache=null,a||s.emitAndNotify("bounds")}}),this)};elesfn$b.updateCompoundBounds=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!a&&e.batching())return this;function s(g){if(!g.isParent())return;var b=g._private,j=g.children(),_e=g.pstyle("compound-sizing-wrt-labels").value==="include",er={width:{val:g.pstyle("min-width").pfValue,left:g.pstyle("min-width-bias-left"),right:g.pstyle("min-width-bias-right")},height:{val:g.pstyle("min-height").pfValue,top:g.pstyle("min-height-bias-top"),bottom:g.pstyle("min-height-bias-bottom")}},rr=j.boundingBox({includeLabels:_e,includeOverlays:!1,useCache:!1}),tr=b.position;(rr.w===0||rr.h===0)&&(rr={w:g.pstyle("width").pfValue,h:g.pstyle("height").pfValue},rr.x1=tr.x-rr.w/2,rr.x2=tr.x+rr.w/2,rr.y1=tr.y-rr.h/2,rr.y2=tr.y+rr.h/2);function nr(gr,pr,mr){var yr=0,br=0,Er=pr+mr;return gr>0&&Er>0&&(yr=pr/Er*gr,br=mr/Er*gr),{biasDiff:yr,biasComplementDiff:br}}function ar(gr,pr,mr,yr){if(mr.units==="%")switch(yr){case"width":return gr>0?mr.pfValue*gr:0;case"height":return pr>0?mr.pfValue*pr:0;case"average":return gr>0&&pr>0?mr.pfValue*(gr+pr)/2:0;case"min":return gr>0&&pr>0?gr>pr?mr.pfValue*pr:mr.pfValue*gr:0;case"max":return gr>0&&pr>0?gr>pr?mr.pfValue*gr:mr.pfValue*pr:0;default:return 0}else return mr.units==="px"?mr.pfValue:0}var lr=er.width.left.value;er.width.left.units==="px"&&er.width.val>0&&(lr=lr*100/er.width.val);var or=er.width.right.value;er.width.right.units==="px"&&er.width.val>0&&(or=or*100/er.width.val);var ir=er.height.top.value;er.height.top.units==="px"&&er.height.val>0&&(ir=ir*100/er.height.val);var sr=er.height.bottom.value;er.height.bottom.units==="px"&&er.height.val>0&&(sr=sr*100/er.height.val);var ur=nr(er.width.val-rr.w,lr,or),cr=ur.biasDiff,fr=ur.biasComplementDiff,hr=nr(er.height.val-rr.h,ir,sr),dr=hr.biasDiff,vr=hr.biasComplementDiff;b.autoPadding=ar(rr.w,rr.h,g.pstyle("padding"),g.pstyle("padding-relative-to").value),b.autoWidth=Math.max(rr.w,er.width.val),tr.x=(-cr+rr.x1+rr.x2+fr)/2,b.autoHeight=Math.max(rr.h,er.height.val),tr.y=(-dr+rr.y1+rr.y2+vr)/2}for(var o=0;o<this.length;o++){var c=this[o],d=c._private;(!d.compoundBoundsClean||a)&&(s(c),e.batching()||(d.compoundBoundsClean=!0))}return this};var noninf=function(e){return e===1/0||e===-1/0?0:e},updateBounds=function(e,s,o,c,d){c-s===0||d-o===0||s==null||o==null||c==null||d==null||(e.x1=s<e.x1?s:e.x1,e.x2=c>e.x2?c:e.x2,e.y1=o<e.y1?o:e.y1,e.y2=d>e.y2?d:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},updateBoundsFromBox=function(e,s){return s==null?e:updateBounds(e,s.x1,s.y1,s.x2,s.y2)},prefixedProperty=function(e,s,o){return getPrefixedProperty(e,s,o)},updateBoundsFromArrow=function(e,s,o){if(!s.cy().headless()){var c=s._private,d=c.rstyle,g=d.arrowWidth/2,b=s.pstyle(o+"-arrow-shape").value,j,_e;if(b!=="none"){o==="source"?(j=d.srcX,_e=d.srcY):o==="target"?(j=d.tgtX,_e=d.tgtY):(j=d.midX,_e=d.midY);var er=c.arrowBounds=c.arrowBounds||{},rr=er[o]=er[o]||{};rr.x1=j-g,rr.y1=_e-g,rr.x2=j+g,rr.y2=_e+g,rr.w=rr.x2-rr.x1,rr.h=rr.y2-rr.y1,expandBoundingBox(rr,1),updateBounds(e,rr.x1,rr.y1,rr.x2,rr.y2)}}},updateBoundsFromLabel=function(e,s,o){if(!s.cy().headless()){var c;o?c=o+"-":c="";var d=s._private,g=d.rstyle,b=s.pstyle(c+"label").strValue;if(b){var j=s.pstyle("text-halign"),_e=s.pstyle("text-valign"),er=prefixedProperty(g,"labelWidth",o),rr=prefixedProperty(g,"labelHeight",o),tr=prefixedProperty(g,"labelX",o),nr=prefixedProperty(g,"labelY",o),ar=s.pstyle(c+"text-margin-x").pfValue,lr=s.pstyle(c+"text-margin-y").pfValue,or=s.isEdge(),ir=s.pstyle(c+"text-rotation"),sr=s.pstyle("text-outline-width").pfValue,ur=s.pstyle("text-border-width").pfValue,cr=ur/2,fr=s.pstyle("text-background-padding").pfValue,hr=2,dr=rr,vr=er,gr=vr/2,pr=dr/2,mr,yr,br,Er;if(or)mr=tr-gr,yr=tr+gr,br=nr-pr,Er=nr+pr;else{switch(j.value){case"left":mr=tr-vr,yr=tr;break;case"center":mr=tr-gr,yr=tr+gr;break;case"right":mr=tr,yr=tr+vr;break}switch(_e.value){case"top":br=nr-dr,Er=nr;break;case"center":br=nr-pr,Er=nr+pr;break;case"bottom":br=nr,Er=nr+dr;break}}var _r=ar-Math.max(sr,cr)-fr-hr,Rr=ar+Math.max(sr,cr)+fr+hr,Cr=lr-Math.max(sr,cr)-fr-hr,wr=lr+Math.max(sr,cr)+fr+hr;mr+=_r,yr+=Rr,br+=Cr,Er+=wr;var $r=o||"main",Ar=d.labelBounds,Sr=Ar[$r]=Ar[$r]||{};Sr.x1=mr,Sr.y1=br,Sr.x2=yr,Sr.y2=Er,Sr.w=yr-mr,Sr.h=Er-br,Sr.leftPad=_r,Sr.rightPad=Rr,Sr.topPad=Cr,Sr.botPad=wr;var kr=or&&ir.strValue==="autorotate",Mr=ir.pfValue!=null&&ir.pfValue!==0;if(kr||Mr){var qr=kr?prefixedProperty(d.rstyle,"labelAngle",o):ir.pfValue,Tr=Math.cos(qr),Pr=Math.sin(qr),Br=(mr+yr)/2,Ur=(br+Er)/2;if(!or){switch(j.value){case"left":Br=yr;break;case"right":Br=mr;break}switch(_e.value){case"top":Ur=Er;break;case"bottom":Ur=br;break}}var Nr=function(Vr,Zr){return Vr=Vr-Br,Zr=Zr-Ur,{x:Vr*Tr-Zr*Pr+Br,y:Vr*Pr+Zr*Tr+Ur}},Ir=Nr(mr,br),Dr=Nr(mr,Er),Or=Nr(yr,br),jr=Nr(yr,Er);mr=Math.min(Ir.x,Dr.x,Or.x,jr.x),yr=Math.max(Ir.x,Dr.x,Or.x,jr.x),br=Math.min(Ir.y,Dr.y,Or.y,jr.y),Er=Math.max(Ir.y,Dr.y,Or.y,jr.y)}var Wr=$r+"Rot",Xr=Ar[Wr]=Ar[Wr]||{};Xr.x1=mr,Xr.y1=br,Xr.x2=yr,Xr.y2=Er,Xr.w=yr-mr,Xr.h=Er-br,updateBounds(e,mr,br,yr,Er),updateBounds(d.labelBounds.all,mr,br,yr,Er)}return e}},updateBoundsFromOutline=function(e,s){if(!s.cy().headless()){var o=s.pstyle("outline-opacity").value,c=s.pstyle("outline-width").value,d=s.pstyle("outline-offset").value,g=c+d;updateBoundsFromMiter(e,s,o,g,"outside",g/2)}},updateBoundsFromMiter=function(e,s,o,c,d,g){if(!(o===0||c<=0||d==="inside")){var b=s.cy(),j=s.pstyle("shape").value,_e=b.renderer().nodeShapes[j],er=s.position(),rr=er.x,tr=er.y,nr=s.width(),ar=s.height();if(_e.hasMiterBounds){d==="center"&&(c/=2);var lr=_e.miterBounds(rr,tr,nr,ar,c);updateBoundsFromBox(e,lr)}else g!=null&&g>0&&expandBoundingBoxSides(e,[g,g,g,g])}},updateBoundsFromMiterBorder=function(e,s){if(!s.cy().headless()){var o=s.pstyle("border-opacity").value,c=s.pstyle("border-width").pfValue,d=s.pstyle("border-position").value;updateBoundsFromMiter(e,s,o,c,d)}},boundingBoxImpl=function(e,s){var o=e._private.cy,c=o.styleEnabled(),d=o.headless(),g=makeBoundingBox(),b=e._private,j=e.isNode(),_e=e.isEdge(),er,rr,tr,nr,ar,lr,or=b.rstyle,ir=j&&c?e.pstyle("bounds-expansion").pfValue:[0],sr=function(dt){return dt.pstyle("display").value!=="none"},ur=!c||sr(e)&&(!_e||sr(e.source())&&sr(e.target()));if(ur){var cr=0,fr=0;c&&s.includeOverlays&&(cr=e.pstyle("overlay-opacity").value,cr!==0&&(fr=e.pstyle("overlay-padding").value));var hr=0,dr=0;c&&s.includeUnderlays&&(hr=e.pstyle("underlay-opacity").value,hr!==0&&(dr=e.pstyle("underlay-padding").value));var vr=Math.max(fr,dr),gr=0,pr=0;if(c&&(gr=e.pstyle("width").pfValue,pr=gr/2),j&&s.includeNodes){var mr=e.position();ar=mr.x,lr=mr.y;var yr=e.outerWidth(),br=yr/2,Er=e.outerHeight(),_r=Er/2;er=ar-br,rr=ar+br,tr=lr-_r,nr=lr+_r,updateBounds(g,er,tr,rr,nr),c&&updateBoundsFromOutline(g,e),c&&s.includeOutlines&&!d&&updateBoundsFromOutline(g,e),c&&updateBoundsFromMiterBorder(g,e)}else if(_e&&s.includeEdges)if(c&&!d){var Rr=e.pstyle("curve-style").strValue;if(er=Math.min(or.srcX,or.midX,or.tgtX),rr=Math.max(or.srcX,or.midX,or.tgtX),tr=Math.min(or.srcY,or.midY,or.tgtY),nr=Math.max(or.srcY,or.midY,or.tgtY),er-=pr,rr+=pr,tr-=pr,nr+=pr,updateBounds(g,er,tr,rr,nr),Rr==="haystack"){var Cr=or.haystackPts;if(Cr&&Cr.length===2){if(er=Cr[0].x,tr=Cr[0].y,rr=Cr[1].x,nr=Cr[1].y,er>rr){var wr=er;er=rr,rr=wr}if(tr>nr){var $r=tr;tr=nr,nr=$r}updateBounds(g,er-pr,tr-pr,rr+pr,nr+pr)}}else if(Rr==="bezier"||Rr==="unbundled-bezier"||endsWith(Rr,"segments")||endsWith(Rr,"taxi")){var Ar;switch(Rr){case"bezier":case"unbundled-bezier":Ar=or.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":Ar=or.linePts;break}if(Ar!=null)for(var Sr=0;Sr<Ar.length;Sr++){var kr=Ar[Sr];er=kr.x-pr,rr=kr.x+pr,tr=kr.y-pr,nr=kr.y+pr,updateBounds(g,er,tr,rr,nr)}}}else{var Mr=e.source(),qr=Mr.position(),Tr=e.target(),Pr=Tr.position();if(er=qr.x,rr=Pr.x,tr=qr.y,nr=Pr.y,er>rr){var Br=er;er=rr,rr=Br}if(tr>nr){var Ur=tr;tr=nr,nr=Ur}er-=pr,rr+=pr,tr-=pr,nr+=pr,updateBounds(g,er,tr,rr,nr)}if(c&&s.includeEdges&&_e&&(updateBoundsFromArrow(g,e,"mid-source"),updateBoundsFromArrow(g,e,"mid-target"),updateBoundsFromArrow(g,e,"source"),updateBoundsFromArrow(g,e,"target")),c){var Nr=e.pstyle("ghost").value==="yes";if(Nr){var Ir=e.pstyle("ghost-offset-x").pfValue,Dr=e.pstyle("ghost-offset-y").pfValue;updateBounds(g,g.x1+Ir,g.y1+Dr,g.x2+Ir,g.y2+Dr)}}var Or=b.bodyBounds=b.bodyBounds||{};assignBoundingBox(Or,g),expandBoundingBoxSides(Or,ir),expandBoundingBox(Or,1),c&&(er=g.x1,rr=g.x2,tr=g.y1,nr=g.y2,updateBounds(g,er-vr,tr-vr,rr+vr,nr+vr));var jr=b.overlayBounds=b.overlayBounds||{};assignBoundingBox(jr,g),expandBoundingBoxSides(jr,ir),expandBoundingBox(jr,1);var Wr=b.labelBounds=b.labelBounds||{};Wr.all!=null?clearBoundingBox(Wr.all):Wr.all=makeBoundingBox(),c&&s.includeLabels&&(s.includeMainLabels&&updateBoundsFromLabel(g,e,null),_e&&(s.includeSourceLabels&&updateBoundsFromLabel(g,e,"source"),s.includeTargetLabels&&updateBoundsFromLabel(g,e,"target")))}return g.x1=noninf(g.x1),g.y1=noninf(g.y1),g.x2=noninf(g.x2),g.y2=noninf(g.y2),g.w=noninf(g.x2-g.x1),g.h=noninf(g.y2-g.y1),g.w>0&&g.h>0&&ur&&(expandBoundingBoxSides(g,ir),expandBoundingBox(g,1)),g},getKey=function(e){var s=0,o=function(g){return(g?1:0)<<s++},c=0;return c+=o(e.incudeNodes),c+=o(e.includeEdges),c+=o(e.includeLabels),c+=o(e.includeMainLabels),c+=o(e.includeSourceLabels),c+=o(e.includeTargetLabels),c+=o(e.includeOverlays),c+=o(e.includeOutlines),c},getBoundingBoxPosKey=function(e){var s=function(b){return Math.round(b)};if(e.isEdge()){var o=e.source().position(),c=e.target().position();return hashIntsArray([s(o.x),s(o.y),s(c.x),s(c.y)])}else{var d=e.position();return hashIntsArray([s(d.x),s(d.y)])}},cachedBoundingBoxImpl=function(e,s){var o=e._private,c,d=e.isEdge(),g=s==null?defBbOptsKey:getKey(s),b=g===defBbOptsKey;if(o.bbCache==null?(c=boundingBoxImpl(e,defBbOpts),o.bbCache=c,o.bbCachePosKey=getBoundingBoxPosKey(e)):c=o.bbCache,!b){var j=e.isNode();c=makeBoundingBox(),(s.includeNodes&&j||s.includeEdges&&!j)&&(s.includeOverlays?updateBoundsFromBox(c,o.overlayBounds):updateBoundsFromBox(c,o.bodyBounds)),s.includeLabels&&(s.includeMainLabels&&(!d||s.includeSourceLabels&&s.includeTargetLabels)?updateBoundsFromBox(c,o.labelBounds.all):(s.includeMainLabels&&updateBoundsFromBox(c,o.labelBounds.mainRot),s.includeSourceLabels&&updateBoundsFromBox(c,o.labelBounds.sourceRot),s.includeTargetLabels&&updateBoundsFromBox(c,o.labelBounds.targetRot))),c.w=c.x2-c.x1,c.h=c.y2-c.y1}return c},defBbOpts={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},defBbOptsKey=getKey(defBbOpts),filledBbOpts=defaults$g(defBbOpts);elesfn$b.boundingBox=function(a){var e,s=a===void 0||a.useCache===void 0||a.useCache===!0,o=memoize(function(er){var rr=er._private;return rr.bbCache==null||rr.styleDirty||rr.bbCachePosKey!==getBoundingBoxPosKey(er)},function(er){return er.id()});if(s&&this.length===1&&!o(this[0]))a===void 0?a=defBbOpts:a=filledBbOpts(a),e=cachedBoundingBoxImpl(this[0],a);else{e=makeBoundingBox(),a=a||defBbOpts;var c=filledBbOpts(a),d=this,g=d.cy(),b=g.styleEnabled();this.edges().forEach(o),this.nodes().forEach(o),b&&this.recalculateRenderedStyle(s),this.updateCompoundBounds(!s);for(var j=0;j<d.length;j++){var _e=d[j];o(_e)&&_e.dirtyBoundingBoxCache(),updateBoundsFromBox(e,cachedBoundingBoxImpl(_e,c))}}return e.x1=noninf(e.x1),e.y1=noninf(e.y1),e.x2=noninf(e.x2),e.y2=noninf(e.y2),e.w=noninf(e.x2-e.x1),e.h=noninf(e.y2-e.y1),e};elesfn$b.dirtyBoundingBoxCache=function(){for(var a=0;a<this.length;a++){var e=this[a]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};elesfn$b.boundingBoxAt=function(a){var e=this.nodes(),s=this.cy(),o=s.hasCompoundNodes(),c=s.collection();if(o&&(c=e.filter(function(_e){return _e.isParent()}),e=e.not(c)),plainObject(a)){var d=a;a=function(){return d}}var g=function(er,rr){return er._private.bbAtOldPos=a(er,rr)},b=function(er){return er._private.bbAtOldPos};s.startBatch(),e.forEach(g).silentPositions(a),o&&(c.dirtyCompoundBoundsCache(),c.dirtyBoundingBoxCache(),c.updateCompoundBounds(!0));var j=copyBoundingBox(this.boundingBox({useCache:!1}));return e.silentPositions(b),o&&(c.dirtyCompoundBoundsCache(),c.dirtyBoundingBoxCache(),c.updateCompoundBounds(!0)),s.endBatch(),j};fn$3.boundingbox=fn$3.bb=fn$3.boundingBox;fn$3.renderedBoundingbox=fn$3.renderedBoundingBox;var bounds=elesfn$b,fn$2,elesfn$a;fn$2=elesfn$a={};var defineDimFns=function(e){e.uppercaseName=capitalize(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=capitalize(e.outerName),fn$2[e.name]=function(){var o=this[0],c=o._private,d=c.cy,g=d._private.styleEnabled;if(o)if(g){if(o.isParent())return o.updateCompoundBounds(),c[e.autoName]||0;var b=o.pstyle(e.name);switch(b.strValue){case"label":return o.recalculateRenderedStyle(),c.rstyle[e.labelName]||0;default:return b.pfValue}}else return 1},fn$2["outer"+e.uppercaseName]=function(){var o=this[0],c=o._private,d=c.cy,g=d._private.styleEnabled;if(o)if(g){var b=o[e.name](),j=o.pstyle("border-position").value,_e;j==="center"?_e=o.pstyle("border-width").pfValue:j==="outside"?_e=2*o.pstyle("border-width").pfValue:_e=0;var er=2*o.padding();return b+_e+er}else return 1},fn$2["rendered"+e.uppercaseName]=function(){var o=this[0];if(o){var c=o[e.name]();return c*this.cy().zoom()}},fn$2["rendered"+e.uppercaseOuterName]=function(){var o=this[0];if(o){var c=o[e.outerName]();return c*this.cy().zoom()}}};defineDimFns({name:"width"});defineDimFns({name:"height"});elesfn$a.padding=function(){var a=this[0],e=a._private;return a.isParent()?(a.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:a.pstyle("padding").pfValue):a.pstyle("padding").pfValue};elesfn$a.paddedHeight=function(){var a=this[0];return a.height()+2*a.padding()};elesfn$a.paddedWidth=function(){var a=this[0];return a.width()+2*a.padding()};var widthHeight=elesfn$a,ifEdge=function(e,s){if(e.isEdge()&&e.takesUpSpace())return s(e)},ifEdgeRenderedPosition=function(e,s){if(e.isEdge()&&e.takesUpSpace()){var o=e.cy();return modelToRenderedPosition$1(s(e),o.zoom(),o.pan())}},ifEdgeRenderedPositions=function(e,s){if(e.isEdge()&&e.takesUpSpace()){var o=e.cy(),c=o.pan(),d=o.zoom();return s(e).map(function(g){return modelToRenderedPosition$1(g,d,c)})}},controlPoints=function(e){return e.renderer().getControlPoints(e)},segmentPoints=function(e){return e.renderer().getSegmentPoints(e)},sourceEndpoint=function(e){return e.renderer().getSourceEndpoint(e)},targetEndpoint=function(e){return e.renderer().getTargetEndpoint(e)},midpoint=function(e){return e.renderer().getEdgeMidpoint(e)},pts={controlPoints:{get:controlPoints,mult:!0},segmentPoints:{get:segmentPoints,mult:!0},sourceEndpoint:{get:sourceEndpoint},targetEndpoint:{get:targetEndpoint},midpoint:{get:midpoint}},renderedName=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},edgePoints=Object.keys(pts).reduce(function(a,e){var s=pts[e],o=renderedName(e);return a[e]=function(){return ifEdge(this,s.get)},s.mult?a[o]=function(){return ifEdgeRenderedPositions(this,s.get)}:a[o]=function(){return ifEdgeRenderedPosition(this,s.get)},a},{}),dimensions=extend({},position,bounds,widthHeight,edgePoints);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var Event=function(e,s){this.recycle(e,s)};function returnFalse(){return!1}function returnTrue(){return!0}Event.prototype={instanceString:function(){return"event"},recycle:function(e,s){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=returnFalse,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?returnTrue:returnFalse):e!=null&&e.type?s=e:this.type=e,s!=null&&(this.originalEvent=s.originalEvent,this.type=s.type!=null?s.type:this.type,this.cy=s.cy,this.target=s.target,this.position=s.position,this.renderedPosition=s.renderedPosition,this.namespace=s.namespace,this.layout=s.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var o=this.position,c=this.cy.zoom(),d=this.cy.pan();this.renderedPosition={x:o.x*c+d.x,y:o.y*c+d.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};var eventRegex=/^([^.]+)(\.(?:[^.]+))?$/,universalNamespace=".*",defaults$8={qualifierCompare:function(e,s){return e===s},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},defaultsKeys=Object.keys(defaults$8),emptyOpts={};function Emitter(){for(var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:emptyOpts,e=arguments.length>1?arguments[1]:void 0,s=0;s<defaultsKeys.length;s++){var o=defaultsKeys[s];this[o]=a[o]||defaults$8[o]}this.context=e||this.context,this.listeners=[],this.emitting=0}var p=Emitter.prototype,forEachEvent=function(e,s,o,c,d,g,b){fn$6(c)&&(d=c,c=null),b&&(g==null?g=b:g=extend({},g,b));for(var j=array(o)?o:o.split(/\s+/),_e=0;_e<j.length;_e++){var er=j[_e];if(!emptyString(er)){var rr=er.match(eventRegex);if(rr){var tr=rr[1],nr=rr[2]?rr[2]:null,ar=s(e,er,tr,nr,c,d,g);if(ar===!1)break}}}},makeEventObj=function(e,s){return e.addEventFields(e.context,s),new Event(s.type,s)},forEachEventObj=function(e,s,o){if(event(o)){s(e,o);return}else if(plainObject(o)){s(e,makeEventObj(e,o));return}for(var c=array(o)?o:o.split(/\s+/),d=0;d<c.length;d++){var g=c[d];if(!emptyString(g)){var b=g.match(eventRegex);if(b){var j=b[1],_e=b[2]?b[2]:null,er=makeEventObj(e,{type:j,namespace:_e,target:e.context});s(e,er)}}}};p.on=p.addListener=function(a,e,s,o,c){return forEachEvent(this,function(d,g,b,j,_e,er,rr){fn$6(er)&&d.listeners.push({event:g,callback:er,type:b,namespace:j,qualifier:_e,conf:rr})},a,e,s,o,c),this};p.one=function(a,e,s,o){return this.on(a,e,s,o,{one:!0})};p.removeListener=p.off=function(a,e,s,o){var c=this;this.emitting!==0&&(this.listeners=copyArray(this.listeners));for(var d=this.listeners,g=function(_e){var er=d[_e];forEachEvent(c,function(rr,tr,nr,ar,lr,or){if((er.type===nr||a==="*")&&(!ar&&er.namespace!==".*"||er.namespace===ar)&&(!lr||rr.qualifierCompare(er.qualifier,lr))&&(!or||er.callback===or))return d.splice(_e,1),!1},a,e,s,o)},b=d.length-1;b>=0;b--)g(b);return this};p.removeAllListeners=function(){return this.removeListener("*")};p.emit=p.trigger=function(a,e,s){var o=this.listeners,c=o.length;return this.emitting++,array(e)||(e=[e]),forEachEventObj(this,function(d,g){s!=null&&(o=[{event:g.event,type:g.type,namespace:g.namespace,callback:s}],c=o.length);for(var b=function(){var er=o[j];if(er.type===g.type&&(!er.namespace||er.namespace===g.namespace||er.namespace===universalNamespace)&&d.eventMatches(d.context,er,g)){var rr=[g];e!=null&&push(rr,e),d.beforeEmit(d.context,er,g),er.conf&&er.conf.one&&(d.listeners=d.listeners.filter(function(ar){return ar!==er}));var tr=d.callbackContext(d.context,er,g),nr=er.callback.apply(tr,rr);d.afterEmit(d.context,er,g),nr===!1&&(g.stopPropagation(),g.preventDefault())}},j=0;j<c;j++)b();d.bubble(d.context)&&!g.isPropagationStopped()&&d.parent(d.context).emit(g,e)},a),this.emitting--,this};var emitterOptions$1={qualifierCompare:function(e,s){return e==null||s==null?e==null&&s==null:e.sameText(s)},eventMatches:function(e,s,o){var c=s.qualifier;return c!=null?e!==o.target&&element(o.target)&&c.matches(o.target):!0},addEventFields:function(e,s){s.cy=e.cy(),s.target=e},callbackContext:function(e,s,o){return s.qualifier!=null?o.target:e},beforeEmit:function(e,s){s.conf&&s.conf.once&&s.conf.onceCollection.removeListener(s.event,s.qualifier,s.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},argSelector$1=function(e){return string(e)?new Selector(e):e},elesfn$9={createEmitter:function(){for(var e=0;e<this.length;e++){var s=this[e],o=s._private;o.emitter||(o.emitter=new Emitter(emitterOptions$1,s))}return this},emitter:function(){return this._private.emitter},on:function(e,s,o){for(var c=argSelector$1(s),d=0;d<this.length;d++){var g=this[d];g.emitter().on(e,c,o)}return this},removeListener:function(e,s,o){for(var c=argSelector$1(s),d=0;d<this.length;d++){var g=this[d];g.emitter().removeListener(e,c,o)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var s=this[e];s.emitter().removeAllListeners()}return this},one:function(e,s,o){for(var c=argSelector$1(s),d=0;d<this.length;d++){var g=this[d];g.emitter().one(e,c,o)}return this},once:function(e,s,o){for(var c=argSelector$1(s),d=0;d<this.length;d++){var g=this[d];g.emitter().on(e,c,o,{once:!0,onceCollection:this})}},emit:function(e,s){for(var o=0;o<this.length;o++){var c=this[o];c.emitter().emit(e,s)}return this},emitAndNotify:function(e,s){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,s),this}};define.eventAliasesOn(elesfn$9);var elesfn$8={nodes:function(e){return this.filter(function(s){return s.isNode()}).filter(e)},edges:function(e){return this.filter(function(s){return s.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),s=this.spawn(),o=0;o<this.length;o++){var c=this[o];c.isNode()?e.push(c):s.push(c)}return{nodes:e,edges:s}},filter:function(e,s){if(e===void 0)return this;if(string(e)||elementOrCollection(e))return new Selector(e).filter(this);if(fn$6(e)){for(var o=this.spawn(),c=this,d=0;d<c.length;d++){var g=c[d],b=s?e.apply(s,[g,d,c]):e(g,d,c);b&&o.push(g)}return o}return this.spawn()},not:function(e){if(e){string(e)&&(e=this.filter(e));for(var s=this.spawn(),o=0;o<this.length;o++){var c=this[o],d=e.has(c);d||s.push(c)}return s}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(string(e)){var s=e;return this.filter(s)}for(var o=this.spawn(),c=this,d=e,g=this.length<e.length,b=g?c:d,j=g?d:c,_e=0;_e<b.length;_e++){var er=b[_e];j.has(er)&&o.push(er)}return o},xor:function(e){var s=this._private.cy;string(e)&&(e=s.$(e));var o=this.spawn(),c=this,d=e,g=function(j,_e){for(var er=0;er<j.length;er++){var rr=j[er],tr=rr._private.data.id,nr=_e.hasElementWithId(tr);nr||o.push(rr)}};return g(c,d),g(d,c),o},diff:function(e){var s=this._private.cy;string(e)&&(e=s.$(e));var o=this.spawn(),c=this.spawn(),d=this.spawn(),g=this,b=e,j=function(er,rr,tr){for(var nr=0;nr<er.length;nr++){var ar=er[nr],lr=ar._private.data.id,or=rr.hasElementWithId(lr);or?d.merge(ar):tr.push(ar)}};return j(g,b,o),j(b,g,c),{left:o,right:c,both:d}},add:function(e){var s=this._private.cy;if(!e)return this;if(string(e)){var o=e;e=s.mutableElements().filter(o)}for(var c=this.spawnSelf(),d=0;d<e.length;d++){var g=e[d],b=!this.has(g);b&&c.push(g)}return c},merge:function(e){var s=this._private,o=s.cy;if(!e)return this;if(e&&string(e)){var c=e;e=o.mutableElements().filter(c)}for(var d=s.map,g=0;g<e.length;g++){var b=e[g],j=b._private.data.id,_e=!d.has(j);if(_e){var er=this.length++;this[er]=b,d.set(j,{ele:b,index:er})}}return this},unmergeAt:function(e){var s=this[e],o=s.id(),c=this._private,d=c.map;this[e]=void 0,d.delete(o);var g=e===this.length-1;if(this.length>1&&!g){var b=this.length-1,j=this[b],_e=j._private.data.id;this[b]=void 0,this[e]=j,d.set(_e,{ele:j,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var s=this._private,o=e._private.data.id,c=s.map,d=c.get(o);if(!d)return this;var g=d.index;return this.unmergeAt(g),this},unmerge:function(e){var s=this._private.cy;if(!e)return this;if(e&&string(e)){var o=e;e=s.mutableElements().filter(o)}for(var c=0;c<e.length;c++)this.unmergeOne(e[c]);return this},unmergeBy:function(e){for(var s=this.length-1;s>=0;s--){var o=this[s];e(o)&&this.unmergeAt(s)}return this},map:function(e,s){for(var o=[],c=this,d=0;d<c.length;d++){var g=c[d],b=s?e.apply(s,[g,d,c]):e(g,d,c);o.push(b)}return o},reduce:function(e,s){for(var o=s,c=this,d=0;d<c.length;d++)o=e(o,c[d],d,c);return o},max:function(e,s){for(var o=-1/0,c,d=this,g=0;g<d.length;g++){var b=d[g],j=s?e.apply(s,[b,g,d]):e(b,g,d);j>o&&(o=j,c=b)}return{value:o,ele:c}},min:function(e,s){for(var o=1/0,c,d=this,g=0;g<d.length;g++){var b=d[g],j=s?e.apply(s,[b,g,d]):e(b,g,d);j<o&&(o=j,c=b)}return{value:o,ele:c}}},fn$1=elesfn$8;fn$1.u=fn$1["|"]=fn$1["+"]=fn$1.union=fn$1.or=fn$1.add;fn$1["\\"]=fn$1["!"]=fn$1["-"]=fn$1.difference=fn$1.relativeComplement=fn$1.subtract=fn$1.not;fn$1.n=fn$1["&"]=fn$1["."]=fn$1.and=fn$1.intersection=fn$1.intersect;fn$1["^"]=fn$1["(+)"]=fn$1["(-)"]=fn$1.symmetricDifference=fn$1.symdiff=fn$1.xor;fn$1.fnFilter=fn$1.filterFn=fn$1.stdFilter=fn$1.filter;fn$1.complement=fn$1.abscomp=fn$1.absoluteComplement;var elesfn$7={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},zIndexSort=function(e,s){var o=e.cy(),c=o.hasCompoundNodes();function d(er){var rr=er.pstyle("z-compound-depth");return rr.value==="auto"?c?er.zDepth():0:rr.value==="bottom"?-1:rr.value==="top"?MAX_INT$1:0}var g=d(e)-d(s);if(g!==0)return g;function b(er){var rr=er.pstyle("z-index-compare");return rr.value==="auto"&&er.isNode()?1:0}var j=b(e)-b(s);if(j!==0)return j;var _e=e.pstyle("z-index").value-s.pstyle("z-index").value;return _e!==0?_e:e.poolIndex()-s.poolIndex()},elesfn$6={forEach:function(e,s){if(fn$6(e))for(var o=this.length,c=0;c<o;c++){var d=this[c],g=s?e.apply(s,[d,c,this]):e(d,c,this);if(g===!1)break}return this},toArray:function(){for(var e=[],s=0;s<this.length;s++)e.push(this[s]);return e},slice:function(e,s){var o=[],c=this.length;s==null&&(s=c),e==null&&(e=0),e<0&&(e=c+e),s<0&&(s=c+s);for(var d=e;d>=0&&d<s&&d<c;d++)o.push(this[d]);return this.spawn(o)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!fn$6(e))return this;var s=this.toArray().sort(e);return this.spawn(s)},sortByZIndex:function(){return this.sort(zIndexSort)},zDepth:function(){var e=this[0];if(e){var s=e._private,o=s.group;if(o==="nodes"){var c=s.data.parent?e.parents().size():0;return e.isParent()?c:MAX_INT$1-1}else{var d=s.source,g=s.target,b=d.zDepth(),j=g.zDepth();return Math.max(b,j,0)}}}};elesfn$6.each=elesfn$6.forEach;var defineSymbolIterator=function(){var e="undefined",s=(typeof Symbol>"u"?"undefined":_typeof(Symbol))!=e&&_typeof(Symbol.iterator)!=e;s&&(elesfn$6[Symbol.iterator]=function(){var o=this,c={value:void 0,done:!1},d=0,g=this.length;return _defineProperty$1$1({next:function(){return d<g?c.value=o[d++]:(c.value=void 0,c.done=!0),c}},Symbol.iterator,function(){return this})})};defineSymbolIterator();var getLayoutDimensionOptions=defaults$g({nodeDimensionsIncludeLabels:!1}),elesfn$5={layoutDimensions:function(e){e=getLayoutDimensionOptions(e);var s;if(!this.takesUpSpace())s={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var o=this.boundingBox();s={w:o.w,h:o.h}}else s={w:this.outerWidth(),h:this.outerHeight()};return(s.w===0||s.h===0)&&(s.w=s.h=1),s},layoutPositions:function(e,s,o){var c=this.nodes().filter(function(fr){return!fr.isParent()}),d=this.cy(),g=s.eles,b=function(hr){return hr.id()},j=memoize(o,b);e.emit({type:"layoutstart",layout:e}),e.animations=[];var _e=function(hr,dr,vr){var gr={x:dr.x1+dr.w/2,y:dr.y1+dr.h/2},pr={x:(vr.x-gr.x)*hr,y:(vr.y-gr.y)*hr};return{x:gr.x+pr.x,y:gr.y+pr.y}},er=s.spacingFactor&&s.spacingFactor!==1,rr=function(){if(!er)return null;for(var hr=makeBoundingBox(),dr=0;dr<c.length;dr++){var vr=c[dr],gr=j(vr,dr);expandBoundingBoxByPoint(hr,gr.x,gr.y)}return hr},tr=rr(),nr=memoize(function(fr,hr){var dr=j(fr,hr);if(er){var vr=Math.abs(s.spacingFactor);dr=_e(vr,tr,dr)}return s.transform!=null&&(dr=s.transform(fr,dr)),dr},b);if(s.animate){for(var ar=0;ar<c.length;ar++){var lr=c[ar],or=nr(lr,ar),ir=s.animateFilter==null||s.animateFilter(lr,ar);if(ir){var sr=lr.animation({position:or,duration:s.animationDuration,easing:s.animationEasing});e.animations.push(sr)}else lr.position(or)}if(s.fit){var ur=d.animation({fit:{boundingBox:g.boundingBoxAt(nr),padding:s.padding},duration:s.animationDuration,easing:s.animationEasing});e.animations.push(ur)}else if(s.zoom!==void 0&&s.pan!==void 0){var cr=d.animation({zoom:s.zoom,pan:s.pan,duration:s.animationDuration,easing:s.animationEasing});e.animations.push(cr)}e.animations.forEach(function(fr){return fr.play()}),e.one("layoutready",s.ready),e.emit({type:"layoutready",layout:e}),Promise$1.all(e.animations.map(function(fr){return fr.promise()})).then(function(){e.one("layoutstop",s.stop),e.emit({type:"layoutstop",layout:e})})}else c.positions(nr),s.fit&&d.fit(s.eles,s.padding),s.zoom!=null&&d.zoom(s.zoom),s.pan&&d.pan(s.pan),e.one("layoutready",s.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",s.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var s=this.cy();return s.makeLayout(extend({},e,{eles:this}))}};elesfn$5.createLayout=elesfn$5.makeLayout=elesfn$5.layout;function styleCache(a,e,s){var o=s._private,c=o.styleCache=o.styleCache||[],d;return(d=c[a])!=null||(d=c[a]=e(s)),d}function cacheStyleFunction(a,e){return a=hashString(a),function(o){return styleCache(a,e,o)}}function cachePrototypeStyleFunction(a,e){a=hashString(a);var s=function(c){return e.call(c)};return function(){var c=this[0];if(c)return styleCache(a,s,c)}}var elesfn$4={recalculateRenderedStyle:function(e){var s=this.cy(),o=s.renderer(),c=s.styleEnabled();return o&&c&&o.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),s=function(d){return d._private.styleCache=null};if(e.hasCompoundNodes()){var o;o=this.spawnSelf().merge(this.descendants()).merge(this.parents()),o.merge(o.connectedEdges()),o.forEach(s)}else this.forEach(function(c){s(c),c.connectedEdges().forEach(s)});return this},updateStyle:function(e){var s=this._private.cy;if(!s.styleEnabled())return this;if(s.batching()){var o=s._private.batchStyleEles;return o.merge(this),this}var c=s.hasCompoundNodes(),d=this;e=!!(e||e===void 0),c&&(d=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var g=d;return e?g.emitAndNotify("style"):g.emit("style"),d.forEach(function(b){return b._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var s=0;s<this.length;s++){var o=this[s];o._private.styleDirty&&(o._private.styleDirty=!1,e.style().apply(o))}},parsedStyle:function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=this[0],c=o.cy();if(c.styleEnabled()&&o){o._private.styleDirty&&(o._private.styleDirty=!1,c.style().apply(o));var d=o._private.style[e];return d??(s?c.style().getDefaultProperty(e):null)}},numericStyle:function(e){var s=this[0];if(s.cy().styleEnabled()&&s){var o=s.pstyle(e);return o.pfValue!==void 0?o.pfValue:o.value}},numericStyleUnits:function(e){var s=this[0];if(s.cy().styleEnabled()&&s)return s.pstyle(e).units},renderedStyle:function(e){var s=this.cy();if(!s.styleEnabled())return this;var o=this[0];if(o)return s.style().getRenderedStyle(o,e)},style:function(e,s){var o=this.cy();if(!o.styleEnabled())return this;var c=!1,d=o.style();if(plainObject(e)){var g=e;d.applyBypass(this,g,c),this.emitAndNotify("style")}else if(string(e))if(s===void 0){var b=this[0];return b?d.getStylePropertyValue(b,e):void 0}else d.applyBypass(this,e,s,c),this.emitAndNotify("style");else if(e===void 0){var j=this[0];return j?d.getRawStyle(j):void 0}return this},removeStyle:function(e){var s=this.cy();if(!s.styleEnabled())return this;var o=!1,c=s.style(),d=this;if(e===void 0)for(var g=0;g<d.length;g++){var b=d[g];c.removeAllBypasses(b,o)}else{e=e.split(/\s+/);for(var j=0;j<d.length;j++){var _e=d[j];c.removeBypasses(_e,e,o)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var s=e.hasCompoundNodes(),o=this[0];if(o){var c=o._private,d=o.pstyle("opacity").value;if(!s)return d;var g=c.data.parent?o.parents():null;if(g)for(var b=0;b<g.length;b++){var j=g[b],_e=j.pstyle("opacity").value;d=_e*d}return d}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var s=this[0],o=s.cy().hasCompoundNodes();if(s)return o?s.effectiveOpacity()===0:s.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var s=this[0];return!!s._private.backgrounding}};function checkCompound(a,e){var s=a._private,o=s.data.parent?a.parents():null;if(o)for(var c=0;c<o.length;c++){var d=o[c];if(!e(d))return!1}return!0}function defineDerivedStateFunction(a){var e=a.ok,s=a.edgeOkViaNode||a.ok,o=a.parentOk||a.ok;return function(){var c=this.cy();if(!c.styleEnabled())return!0;var d=this[0],g=c.hasCompoundNodes();if(d){var b=d._private;if(!e(d))return!1;if(d.isNode())return!g||checkCompound(d,o);var j=b.source,_e=b.target;return s(j)&&(!g||checkCompound(j,s))&&(j===_e||s(_e)&&(!g||checkCompound(_e,s)))}}}var eleTakesUpSpace=cacheStyleFunction("eleTakesUpSpace",function(a){return a.pstyle("display").value==="element"&&a.width()!==0&&(a.isNode()?a.height()!==0:!0)});elesfn$4.takesUpSpace=cachePrototypeStyleFunction("takesUpSpace",defineDerivedStateFunction({ok:eleTakesUpSpace}));var eleInteractive=cacheStyleFunction("eleInteractive",function(a){return a.pstyle("events").value==="yes"&&a.pstyle("visibility").value==="visible"&&eleTakesUpSpace(a)}),parentInteractive=cacheStyleFunction("parentInteractive",function(a){return a.pstyle("visibility").value==="visible"&&eleTakesUpSpace(a)});elesfn$4.interactive=cachePrototypeStyleFunction("interactive",defineDerivedStateFunction({ok:eleInteractive,parentOk:parentInteractive,edgeOkViaNode:eleTakesUpSpace}));elesfn$4.noninteractive=function(){var a=this[0];if(a)return!a.interactive()};var eleVisible=cacheStyleFunction("eleVisible",function(a){return a.pstyle("visibility").value==="visible"&&a.pstyle("opacity").pfValue!==0&&eleTakesUpSpace(a)}),edgeVisibleViaNode=eleTakesUpSpace;elesfn$4.visible=cachePrototypeStyleFunction("visible",defineDerivedStateFunction({ok:eleVisible,edgeOkViaNode:edgeVisibleViaNode}));elesfn$4.hidden=function(){var a=this[0];if(a)return!a.visible()};elesfn$4.isBundledBezier=cachePrototypeStyleFunction("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});elesfn$4.bypass=elesfn$4.css=elesfn$4.style;elesfn$4.renderedCss=elesfn$4.renderedStyle;elesfn$4.removeBypass=elesfn$4.removeCss=elesfn$4.removeStyle;elesfn$4.pstyle=elesfn$4.parsedStyle;var elesfn$3={};function defineSwitchFunction(a){return function(){var e=arguments,s=[];if(e.length===2){var o=e[0],c=e[1];this.on(a.event,o,c)}else if(e.length===1&&fn$6(e[0])){var d=e[0];this.on(a.event,d)}else if(e.length===0||e.length===1&&array(e[0])){for(var g=e.length===1?e[0]:null,b=0;b<this.length;b++){var j=this[b],_e=!a.ableField||j._private[a.ableField],er=j._private[a.field]!=a.value;if(a.overrideAble){var rr=a.overrideAble(j);if(rr!==void 0&&(_e=rr,!rr))return this}_e&&(j._private[a.field]=a.value,er&&s.push(j))}var tr=this.spawn(s);tr.updateStyle(),tr.emit(a.event),g&&tr.emit(g)}return this}}function defineSwitchSet(a){elesfn$3[a.field]=function(){var e=this[0];if(e){if(a.overrideField){var s=a.overrideField(e);if(s!==void 0)return s}return e._private[a.field]}},elesfn$3[a.on]=defineSwitchFunction({event:a.on,field:a.field,ableField:a.ableField,overrideAble:a.overrideAble,value:!0}),elesfn$3[a.off]=defineSwitchFunction({event:a.off,field:a.field,ableField:a.ableField,overrideAble:a.overrideAble,value:!1})}defineSwitchSet({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});defineSwitchSet({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});defineSwitchSet({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});defineSwitchSet({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});elesfn$3.deselect=elesfn$3.unselect;elesfn$3.grabbed=function(){var a=this[0];if(a)return a._private.grabbed};defineSwitchSet({field:"active",on:"activate",off:"unactivate"});defineSwitchSet({field:"pannable",on:"panify",off:"unpanify"});elesfn$3.inactive=function(){var a=this[0];if(a)return!a._private.active};var elesfn$2={},defineDagExtremity=function(e){return function(o){for(var c=this,d=[],g=0;g<c.length;g++){var b=c[g];if(b.isNode()){for(var j=!1,_e=b.connectedEdges(),er=0;er<_e.length;er++){var rr=_e[er],tr=rr.source(),nr=rr.target();if(e.noIncomingEdges&&nr===b&&tr!==b||e.noOutgoingEdges&&tr===b&&nr!==b){j=!0;break}}j||d.push(b)}}return this.spawn(d,!0).filter(o)}},defineDagOneHop=function(e){return function(s){for(var o=this,c=[],d=0;d<o.length;d++){var g=o[d];if(g.isNode())for(var b=g.connectedEdges(),j=0;j<b.length;j++){var _e=b[j],er=_e.source(),rr=_e.target();e.outgoing&&er===g?(c.push(_e),c.push(rr)):e.incoming&&rr===g&&(c.push(_e),c.push(er))}}return this.spawn(c,!0).filter(s)}},defineDagAllHops=function(e){return function(s){for(var o=this,c=[],d={};;){var g=e.outgoing?o.outgoers():o.incomers();if(g.length===0)break;for(var b=!1,j=0;j<g.length;j++){var _e=g[j],er=_e.id();d[er]||(d[er]=!0,c.push(_e),b=!0)}if(!b)break;o=g}return this.spawn(c,!0).filter(s)}};elesfn$2.clearTraversalCache=function(){for(var a=0;a<this.length;a++)this[a]._private.traversalCache=null};extend(elesfn$2,{roots:defineDagExtremity({noIncomingEdges:!0}),leaves:defineDagExtremity({noOutgoingEdges:!0}),outgoers:cache(defineDagOneHop({outgoing:!0}),"outgoers"),successors:defineDagAllHops({outgoing:!0}),incomers:cache(defineDagOneHop({incoming:!0}),"incomers"),predecessors:defineDagAllHops({})});extend(elesfn$2,{neighborhood:cache(function(a){for(var e=[],s=this.nodes(),o=0;o<s.length;o++)for(var c=s[o],d=c.connectedEdges(),g=0;g<d.length;g++){var b=d[g],j=b.source(),_e=b.target(),er=c===j?_e:j;er.length>0&&e.push(er[0]),e.push(b[0])}return this.spawn(e,!0).filter(a)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});elesfn$2.neighbourhood=elesfn$2.neighborhood;elesfn$2.closedNeighbourhood=elesfn$2.closedNeighborhood;elesfn$2.openNeighbourhood=elesfn$2.openNeighborhood;extend(elesfn$2,{source:cache(function(e){var s=this[0],o;return s&&(o=s._private.source||s.cy().collection()),o&&e?o.filter(e):o},"source"),target:cache(function(e){var s=this[0],o;return s&&(o=s._private.target||s.cy().collection()),o&&e?o.filter(e):o},"target"),sources:defineSourceFunction({attr:"source"}),targets:defineSourceFunction({attr:"target"})});function defineSourceFunction(a){return function(s){for(var o=[],c=0;c<this.length;c++){var d=this[c],g=d._private[a.attr];g&&o.push(g)}return this.spawn(o,!0).filter(s)}}extend(elesfn$2,{edgesWith:cache(defineEdgesWithFunction(),"edgesWith"),edgesTo:cache(defineEdgesWithFunction({thisIsSrc:!0}),"edgesTo")});function defineEdgesWithFunction(a){return function(s){var o=[],c=this._private.cy,d=a||{};string(s)&&(s=c.$(s));for(var g=0;g<s.length;g++)for(var b=s[g]._private.edges,j=0;j<b.length;j++){var _e=b[j],er=_e._private.data,rr=this.hasElementWithId(er.source)&&s.hasElementWithId(er.target),tr=s.hasElementWithId(er.source)&&this.hasElementWithId(er.target),nr=rr||tr;nr&&((d.thisIsSrc||d.thisIsTgt)&&(d.thisIsSrc&&!rr||d.thisIsTgt&&!tr)||o.push(_e))}return this.spawn(o,!0)}}extend(elesfn$2,{connectedEdges:cache(function(a){for(var e=[],s=this,o=0;o<s.length;o++){var c=s[o];if(c.isNode())for(var d=c._private.edges,g=0;g<d.length;g++){var b=d[g];e.push(b)}}return this.spawn(e,!0).filter(a)},"connectedEdges"),connectedNodes:cache(function(a){for(var e=[],s=this,o=0;o<s.length;o++){var c=s[o];c.isEdge()&&(e.push(c.source()[0]),e.push(c.target()[0]))}return this.spawn(e,!0).filter(a)},"connectedNodes"),parallelEdges:cache(defineParallelEdgesFunction(),"parallelEdges"),codirectedEdges:cache(defineParallelEdgesFunction({codirected:!0}),"codirectedEdges")});function defineParallelEdgesFunction(a){var e={codirected:!1};return a=extend({},e,a),function(o){for(var c=[],d=this.edges(),g=a,b=0;b<d.length;b++)for(var j=d[b],_e=j._private,er=_e.source,rr=er._private.data.id,tr=_e.data.target,nr=er._private.edges,ar=0;ar<nr.length;ar++){var lr=nr[ar],or=lr._private.data,ir=or.target,sr=or.source,ur=ir===tr&&sr===rr,cr=rr===ir&&tr===sr;(g.codirected&&ur||!g.codirected&&(ur||cr))&&c.push(lr)}return this.spawn(c,!0).filter(o)}}extend(elesfn$2,{components:function(e){var s=this,o=s.cy(),c=o.collection(),d=e==null?s.nodes():e.nodes(),g=[];e!=null&&d.empty()&&(d=e.sources());var b=function(er,rr){c.merge(er),d.unmerge(er),rr.merge(er)};if(d.empty())return s.spawn();var j=function(){var er=o.collection();g.push(er);var rr=d[0];b(rr,er),s.bfs({directed:!1,roots:rr,visit:function(nr){return b(nr,er)}}),er.forEach(function(tr){tr.connectedEdges().forEach(function(nr){s.has(nr)&&er.has(nr.source())&&er.has(nr.target())&&er.merge(nr)})})};do j();while(d.length>0);return g},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});elesfn$2.componentsOf=elesfn$2.components;var Collection=function(e,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){error("A collection must have a reference to the core");return}var d=new Map$1,g=!1;if(!s)s=[];else if(s.length>0&&plainObject(s[0])&&!element(s[0])){g=!0;for(var b=[],j=new Set$1,_e=0,er=s.length;_e<er;_e++){var rr=s[_e];rr.data==null&&(rr.data={});var tr=rr.data;if(tr.id==null)tr.id=uuid();else if(e.hasElementWithId(tr.id)||j.has(tr.id))continue;var nr=new Element(e,rr,!1);b.push(nr),j.add(tr.id)}s=b}this.length=0;for(var ar=0,lr=s.length;ar<lr;ar++){var or=s[ar][0];if(or!=null){var ir=or._private.data.id;(!o||!d.has(ir))&&(o&&d.set(ir,{index:this.length,ele:or}),this[this.length]=or,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(sr){this.lazyMap=sr},rebuildMap:function(){for(var ur=this.lazyMap=new Map$1,cr=this.eles,fr=0;fr<cr.length;fr++){var hr=cr[fr];ur.set(hr.id(),{index:fr,ele:hr})}}},o&&(this._private.map=d),g&&!c&&this.restore()},elesfn$1=Element.prototype=Collection.prototype=Object.create(Array.prototype);elesfn$1.instanceString=function(){return"collection"};elesfn$1.spawn=function(a,e){return new Collection(this.cy(),a,e)};elesfn$1.spawnSelf=function(){return this.spawn(this)};elesfn$1.cy=function(){return this._private.cy};elesfn$1.renderer=function(){return this._private.cy.renderer()};elesfn$1.element=function(){return this[0]};elesfn$1.collection=function(){return collection(this)?this:new Collection(this._private.cy,[this])};elesfn$1.unique=function(){return new Collection(this._private.cy,this,!0)};elesfn$1.hasElementWithId=function(a){return a=""+a,this._private.map.has(a)};elesfn$1.getElementById=function(a){a=""+a;var e=this._private.cy,s=this._private.map.get(a);return s?s.ele:new Collection(e)};elesfn$1.$id=elesfn$1.getElementById;elesfn$1.poolIndex=function(){var a=this._private.cy,e=a._private.elements,s=this[0]._private.data.id;return e._private.map.get(s).index};elesfn$1.indexOf=function(a){var e=a[0]._private.data.id;return this._private.map.get(e).index};elesfn$1.indexOfId=function(a){return a=""+a,this._private.map.get(a).index};elesfn$1.json=function(a){var e=this.element(),s=this.cy();if(e==null&&a)return this;if(e!=null){var o=e._private;if(plainObject(a)){if(s.startBatch(),a.data){e.data(a.data);var c=o.data;if(e.isEdge()){var d=!1,g={},b=a.data.source,j=a.data.target;b!=null&&b!=c.source&&(g.source=""+b,d=!0),j!=null&&j!=c.target&&(g.target=""+j,d=!0),d&&(e=e.move(g))}else{var _e="parent"in a.data,er=a.data.parent;_e&&(er!=null||c.parent!=null)&&er!=c.parent&&(er===void 0&&(er=null),er!=null&&(er=""+er),e=e.move({parent:er}))}}a.position&&e.position(a.position);var rr=function(lr,or,ir){var sr=a[lr];sr!=null&&sr!==o[lr]&&(sr?e[or]():e[ir]())};return rr("removed","remove","restore"),rr("selected","select","unselect"),rr("selectable","selectify","unselectify"),rr("locked","lock","unlock"),rr("grabbable","grabify","ungrabify"),rr("pannable","panify","unpanify"),a.classes!=null&&e.classes(a.classes),s.endBatch(),this}else if(a===void 0){var tr={data:copy(o.data),position:copy(o.position),group:o.group,removed:o.removed,selected:o.selected,selectable:o.selectable,locked:o.locked,grabbable:o.grabbable,pannable:o.pannable,classes:null};tr.classes="";var nr=0;return o.classes.forEach(function(ar){return tr.classes+=nr++===0?ar:" "+ar}),tr}}};elesfn$1.jsons=function(){for(var a=[],e=0;e<this.length;e++){var s=this[e],o=s.json();a.push(o)}return a};elesfn$1.clone=function(){for(var a=this.cy(),e=[],s=0;s<this.length;s++){var o=this[s],c=o.json(),d=new Element(a,c,!1);e.push(d)}return new Collection(a,e)};elesfn$1.copy=elesfn$1.clone;elesfn$1.restore=function(){for(var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,s=this,o=s.cy(),c=o._private,d=[],g=[],b,j=0,_e=s.length;j<_e;j++){var er=s[j];e&&!er.removed()||(er.isNode()?d.push(er):g.push(er))}b=d.concat(g);var rr,tr=function(){b.splice(rr,1),rr--};for(rr=0;rr<b.length;rr++){var nr=b[rr],ar=nr._private,lr=ar.data;if(nr.clearTraversalCache(),!(!e&&!ar.removed)){if(lr.id===void 0)lr.id=uuid();else if(number$1(lr.id))lr.id=""+lr.id;else if(emptyString(lr.id)||!string(lr.id)){error("Can not create element with invalid string ID `"+lr.id+"`"),tr();continue}else if(o.hasElementWithId(lr.id)){error("Can not create second element with ID `"+lr.id+"`"),tr();continue}}var or=lr.id;if(nr.isNode()){var ir=ar.position;ir.x==null&&(ir.x=0),ir.y==null&&(ir.y=0)}if(nr.isEdge()){for(var sr=nr,ur=["source","target"],cr=ur.length,fr=!1,hr=0;hr<cr;hr++){var dr=ur[hr],vr=lr[dr];number$1(vr)&&(vr=lr[dr]=""+lr[dr]),vr==null||vr===""?(error("Can not create edge `"+or+"` with unspecified "+dr),fr=!0):o.hasElementWithId(vr)||(error("Can not create edge `"+or+"` with nonexistant "+dr+" `"+vr+"`"),fr=!0)}if(fr){tr();continue}var gr=o.getElementById(lr.source),pr=o.getElementById(lr.target);gr.same(pr)?gr._private.edges.push(sr):(gr._private.edges.push(sr),pr._private.edges.push(sr)),sr._private.source=gr,sr._private.target=pr}ar.map=new Map$1,ar.map.set(or,{ele:nr,index:0}),ar.removed=!1,e&&o.addToPool(nr)}for(var mr=0;mr<d.length;mr++){var yr=d[mr],br=yr._private.data;number$1(br.parent)&&(br.parent=""+br.parent);var Er=br.parent,_r=Er!=null;if(_r||yr._private.parent){var Rr=yr._private.parent?o.collection().merge(yr._private.parent):o.getElementById(Er);if(Rr.empty())br.parent=void 0;else if(Rr[0].removed())warn("Node added with missing parent, reference to parent removed"),br.parent=void 0,yr._private.parent=null;else{for(var Cr=!1,wr=Rr;!wr.empty();){if(yr.same(wr)){Cr=!0,br.parent=void 0;break}wr=wr.parent()}Cr||(Rr[0]._private.children.push(yr),yr._private.parent=Rr[0],c.hasCompoundNodes=!0)}}}if(b.length>0){for(var $r=b.length===s.length?s:new Collection(o,b),Ar=0;Ar<$r.length;Ar++){var Sr=$r[Ar];Sr.isNode()||(Sr.parallelEdges().clearTraversalCache(),Sr.source().clearTraversalCache(),Sr.target().clearTraversalCache())}var kr;c.hasCompoundNodes?kr=o.collection().merge($r).merge($r.connectedNodes()).merge($r.parent()):kr=$r,kr.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(a),a?$r.emitAndNotify("add"):e&&$r.emit("add")}return s};elesfn$1.removed=function(){var a=this[0];return a&&a._private.removed};elesfn$1.inside=function(){var a=this[0];return a&&!a._private.removed};elesfn$1.remove=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,s=this,o=[],c={},d=s._private.cy;function g(Er){for(var _r=Er._private.edges,Rr=0;Rr<_r.length;Rr++)j(_r[Rr])}function b(Er){for(var _r=Er._private.children,Rr=0;Rr<_r.length;Rr++)j(_r[Rr])}function j(Er){var _r=c[Er.id()];e&&Er.removed()||_r||(c[Er.id()]=!0,Er.isNode()?(o.push(Er),g(Er),b(Er)):o.unshift(Er))}for(var _e=0,er=s.length;_e<er;_e++){var rr=s[_e];j(rr)}function tr(Er,_r){var Rr=Er._private.edges;removeFromArray(Rr,_r),Er.clearTraversalCache()}function nr(Er){Er.clearTraversalCache()}var ar=[];ar.ids={};function lr(Er,_r){_r=_r[0],Er=Er[0];var Rr=Er._private.children,Cr=Er.id();removeFromArray(Rr,_r),_r._private.parent=null,ar.ids[Cr]||(ar.ids[Cr]=!0,ar.push(Er))}s.dirtyCompoundBoundsCache(),e&&d.removeFromPool(o);for(var or=0;or<o.length;or++){var ir=o[or];if(ir.isEdge()){var sr=ir.source()[0],ur=ir.target()[0];tr(sr,ir),tr(ur,ir);for(var cr=ir.parallelEdges(),fr=0;fr<cr.length;fr++){var hr=cr[fr];nr(hr),hr.isBundledBezier()&&hr.dirtyBoundingBoxCache()}}else{var dr=ir.parent();dr.length!==0&&lr(dr,ir)}e&&(ir._private.removed=!0)}var vr=d._private.elements;d._private.hasCompoundNodes=!1;for(var gr=0;gr<vr.length;gr++){var pr=vr[gr];if(pr.isParent()){d._private.hasCompoundNodes=!0;break}}var mr=new Collection(this.cy(),o);mr.size()>0&&(a?mr.emitAndNotify("remove"):e&&mr.emit("remove"));for(var yr=0;yr<ar.length;yr++){var br=ar[yr];(!e||!br.removed())&&br.updateStyle()}return mr};elesfn$1.move=function(a){var e=this._private.cy,s=this,o=!1,c=!1,d=function(ar){return ar==null?ar:""+ar};if(a.source!==void 0||a.target!==void 0){var g=d(a.source),b=d(a.target),j=g!=null&&e.hasElementWithId(g),_e=b!=null&&e.hasElementWithId(b);(j||_e)&&(e.batch(function(){s.remove(o,c),s.emitAndNotify("moveout");for(var nr=0;nr<s.length;nr++){var ar=s[nr],lr=ar._private.data;ar.isEdge()&&(j&&(lr.source=g),_e&&(lr.target=b))}s.restore(o,c)}),s.emitAndNotify("move"))}else if(a.parent!==void 0){var er=d(a.parent),rr=er===null||e.hasElementWithId(er);if(rr){var tr=er===null?void 0:er;e.batch(function(){var nr=s.remove(o,c);nr.emitAndNotify("moveout");for(var ar=0;ar<s.length;ar++){var lr=s[ar],or=lr._private.data;lr.isNode()&&(or.parent=tr)}nr.restore(o,c)}),s.emitAndNotify("move")}}return this};[elesfn$j,elesfn$i,elesfn$h,elesfn$g,elesfn$f,data,elesfn$d,dimensions,elesfn$9,elesfn$8,elesfn$7,elesfn$6,elesfn$5,elesfn$4,elesfn$3,elesfn$2].forEach(function(a){extend(elesfn$1,a)});var corefn$9={add:function(e){var s,o=this;if(elementOrCollection(e)){var c=e;if(c._private.cy===o)s=c.restore();else{for(var d=[],g=0;g<c.length;g++){var b=c[g];d.push(b.json())}s=new Collection(o,d)}}else if(array(e)){var j=e;s=new Collection(o,j)}else if(plainObject(e)&&(array(e.nodes)||array(e.edges))){for(var _e=e,er=[],rr=["nodes","edges"],tr=0,nr=rr.length;tr<nr;tr++){var ar=rr[tr],lr=_e[ar];if(array(lr))for(var or=0,ir=lr.length;or<ir;or++){var sr=extend({group:ar},lr[or]);er.push(sr)}}s=new Collection(o,er)}else{var ur=e;s=new Element(o,ur).collection()}return s},remove:function(e){if(!elementOrCollection(e)){if(string(e)){var s=e;e=this.$(s)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function generateCubicBezier(a,e,s,o){var c=4,d=.001,g=1e-7,b=10,j=11,_e=1/(j-1),er=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var rr=0;rr<4;++rr)if(typeof arguments[rr]!="number"||isNaN(arguments[rr])||!isFinite(arguments[rr]))return!1;a=Math.min(a,1),s=Math.min(s,1),a=Math.max(a,0),s=Math.max(s,0);var tr=er?new Float32Array(j):new Array(j);function nr(pr,mr){return 1-3*mr+3*pr}function ar(pr,mr){return 3*mr-6*pr}function lr(pr){return 3*pr}function or(pr,mr,yr){return((nr(mr,yr)*pr+ar(mr,yr))*pr+lr(mr))*pr}function ir(pr,mr,yr){return 3*nr(mr,yr)*pr*pr+2*ar(mr,yr)*pr+lr(mr)}function sr(pr,mr){for(var yr=0;yr<c;++yr){var br=ir(mr,a,s);if(br===0)return mr;var Er=or(mr,a,s)-pr;mr-=Er/br}return mr}function ur(){for(var pr=0;pr<j;++pr)tr[pr]=or(pr*_e,a,s)}function cr(pr,mr,yr){var br,Er,_r=0;do Er=mr+(yr-mr)/2,br=or(Er,a,s)-pr,br>0?yr=Er:mr=Er;while(Math.abs(br)>g&&++_r<b);return Er}function fr(pr){for(var mr=0,yr=1,br=j-1;yr!==br&&tr[yr]<=pr;++yr)mr+=_e;--yr;var Er=(pr-tr[yr])/(tr[yr+1]-tr[yr]),_r=mr+Er*_e,Rr=ir(_r,a,s);return Rr>=d?sr(pr,_r):Rr===0?_r:cr(pr,mr,mr+_e)}var hr=!1;function dr(){hr=!0,(a!==e||s!==o)&&ur()}var vr=function(mr){return hr||dr(),a===e&&s===o?mr:mr===0?0:mr===1?1:or(fr(mr),e,o)};vr.getControlPoints=function(){return[{x:a,y:e},{x:s,y:o}]};var gr="generateBezier("+[a,e,s,o]+")";return vr.toString=function(){return gr},vr}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var generateSpringRK4=function(){function a(o){return-o.tension*o.x-o.friction*o.v}function e(o,c,d){var g={x:o.x+d.dx*c,v:o.v+d.dv*c,tension:o.tension,friction:o.friction};return{dx:g.v,dv:a(g)}}function s(o,c){var d={dx:o.v,dv:a(o)},g=e(o,c*.5,d),b=e(o,c*.5,g),j=e(o,c,b),_e=1/6*(d.dx+2*(g.dx+b.dx)+j.dx),er=1/6*(d.dv+2*(g.dv+b.dv)+j.dv);return o.x=o.x+_e*c,o.v=o.v+er*c,o}return function o(c,d,g){var b={x:-1,v:0,tension:null,friction:null},j=[0],_e=0,er=1/1e4,rr=16/1e3,tr,nr,ar;for(c=parseFloat(c)||500,d=parseFloat(d)||20,g=g||null,b.tension=c,b.friction=d,tr=g!==null,tr?(_e=o(c,d),nr=_e/g*rr):nr=rr;ar=s(ar||b,nr),j.push(1+ar.x),_e+=16,Math.abs(ar.x)>er&&Math.abs(ar.v)>er;);return tr?function(lr){return j[lr*(j.length-1)|0]}:_e}}(),cubicBezier=function(e,s,o,c){var d=generateCubicBezier(e,s,o,c);return function(g,b,j){return g+(b-g)*d(j)}},easings={linear:function(e,s,o){return e+(s-e)*o},ease:cubicBezier(.25,.1,.25,1),"ease-in":cubicBezier(.42,0,1,1),"ease-out":cubicBezier(0,0,.58,1),"ease-in-out":cubicBezier(.42,0,.58,1),"ease-in-sine":cubicBezier(.47,0,.745,.715),"ease-out-sine":cubicBezier(.39,.575,.565,1),"ease-in-out-sine":cubicBezier(.445,.05,.55,.95),"ease-in-quad":cubicBezier(.55,.085,.68,.53),"ease-out-quad":cubicBezier(.25,.46,.45,.94),"ease-in-out-quad":cubicBezier(.455,.03,.515,.955),"ease-in-cubic":cubicBezier(.55,.055,.675,.19),"ease-out-cubic":cubicBezier(.215,.61,.355,1),"ease-in-out-cubic":cubicBezier(.645,.045,.355,1),"ease-in-quart":cubicBezier(.895,.03,.685,.22),"ease-out-quart":cubicBezier(.165,.84,.44,1),"ease-in-out-quart":cubicBezier(.77,0,.175,1),"ease-in-quint":cubicBezier(.755,.05,.855,.06),"ease-out-quint":cubicBezier(.23,1,.32,1),"ease-in-out-quint":cubicBezier(.86,0,.07,1),"ease-in-expo":cubicBezier(.95,.05,.795,.035),"ease-out-expo":cubicBezier(.19,1,.22,1),"ease-in-out-expo":cubicBezier(1,0,0,1),"ease-in-circ":cubicBezier(.6,.04,.98,.335),"ease-out-circ":cubicBezier(.075,.82,.165,1),"ease-in-out-circ":cubicBezier(.785,.135,.15,.86),spring:function(e,s,o){if(o===0)return easings.linear;var c=generateSpringRK4(e,s,o);return function(d,g,b){return d+(g-d)*c(b)}},"cubic-bezier":cubicBezier};function getEasedValue(a,e,s,o,c){if(o===1||e===s)return s;var d=c(e,s,o);return a==null||((a.roundValue||a.color)&&(d=Math.round(d)),a.min!==void 0&&(d=Math.max(d,a.min)),a.max!==void 0&&(d=Math.min(d,a.max))),d}function getValue(a,e){return a.pfValue!=null||a.value!=null?a.pfValue!=null&&(e==null||e.type.units!=="%")?a.pfValue:a.value:a}function ease(a,e,s,o,c){var d=c!=null?c.type:null;s<0?s=0:s>1&&(s=1);var g=getValue(a,c),b=getValue(e,c);if(number$1(g)&&number$1(b))return getEasedValue(d,g,b,s,o);if(array(g)&&array(b)){for(var j=[],_e=0;_e<b.length;_e++){var er=g[_e],rr=b[_e];if(er!=null&&rr!=null){var tr=getEasedValue(d,er,rr,s,o);j.push(tr)}else j.push(rr)}return j}}function step$1(a,e,s,o){var c=!o,d=a._private,g=e._private,b=g.easing,j=g.startTime,_e=o?a:a.cy(),er=_e.style();if(!g.easingImpl)if(b==null)g.easingImpl=easings.linear;else{var rr;if(string(b)){var tr=er.parse("transition-timing-function",b);rr=tr.value}else rr=b;var nr,ar;string(rr)?(nr=rr,ar=[]):(nr=rr[1],ar=rr.slice(2).map(function($r){return+$r})),ar.length>0?(nr==="spring"&&ar.push(g.duration),g.easingImpl=easings[nr].apply(null,ar)):g.easingImpl=easings[nr]}var lr=g.easingImpl,or;if(g.duration===0?or=1:or=(s-j)/g.duration,g.applying&&(or=g.progress),or<0?or=0:or>1&&(or=1),g.delay==null){var ir=g.startPosition,sr=g.position;if(sr&&c&&!a.locked()){var ur={};valid(ir.x,sr.x)&&(ur.x=ease(ir.x,sr.x,or,lr)),valid(ir.y,sr.y)&&(ur.y=ease(ir.y,sr.y,or,lr)),a.position(ur)}var cr=g.startPan,fr=g.pan,hr=d.pan,dr=fr!=null&&o;dr&&(valid(cr.x,fr.x)&&(hr.x=ease(cr.x,fr.x,or,lr)),valid(cr.y,fr.y)&&(hr.y=ease(cr.y,fr.y,or,lr)),a.emit("pan"));var vr=g.startZoom,gr=g.zoom,pr=gr!=null&&o;pr&&(valid(vr,gr)&&(d.zoom=bound(d.minZoom,ease(vr,gr,or,lr),d.maxZoom)),a.emit("zoom")),(dr||pr)&&a.emit("viewport");var mr=g.style;if(mr&&mr.length>0&&c){for(var yr=0;yr<mr.length;yr++){var br=mr[yr],Er=br.name,_r=br,Rr=g.startStyle[Er],Cr=er.properties[Rr.name],wr=ease(Rr,_r,or,lr,Cr);er.overrideBypass(a,Er,wr)}a.emit("style")}}return g.progress=or,or}function valid(a,e){return a==null||e==null?!1:number$1(a)&&number$1(e)?!0:!!(a&&e)}function startAnimation(a,e,s,o){var c=e._private;c.started=!0,c.startTime=s-c.progress*c.duration}function stepAll(a,e){var s=e._private.aniEles,o=[];function c(er,rr){var tr=er._private,nr=tr.animation.current,ar=tr.animation.queue,lr=!1;if(nr.length===0){var or=ar.shift();or&&nr.push(or)}for(var ir=function(hr){for(var dr=hr.length-1;dr>=0;dr--){var vr=hr[dr];vr()}hr.splice(0,hr.length)},sr=nr.length-1;sr>=0;sr--){var ur=nr[sr],cr=ur._private;if(cr.stopped){nr.splice(sr,1),cr.hooked=!1,cr.playing=!1,cr.started=!1,ir(cr.frames);continue}!cr.playing&&!cr.applying||(cr.playing&&cr.applying&&(cr.applying=!1),cr.started||startAnimation(er,ur,a),step$1(er,ur,a,rr),cr.applying&&(cr.applying=!1),ir(cr.frames),cr.step!=null&&cr.step(a),ur.completed()&&(nr.splice(sr,1),cr.hooked=!1,cr.playing=!1,cr.started=!1,ir(cr.completes)),lr=!0)}return!rr&&nr.length===0&&ar.length===0&&o.push(er),lr}for(var d=!1,g=0;g<s.length;g++){var b=s[g],j=c(b);d=d||j}var _e=c(e,!0);(d||_e)&&(s.length>0?e.notify("draw",s):e.notify("draw")),s.unmerge(o),e.emit("step")}var corefn$8={animate:define.animate(),animation:define.animation(),animated:define.animated(),clearQueue:define.clearQueue(),delay:define.delay(),delayAnimation:define.delayAnimation(),stop:define.stop(),addToAnimationPool:function(e){var s=this;s.styleEnabled()&&s._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function s(){e._private.animationsRunning&&requestAnimationFrame(function(d){stepAll(d,e),s()})}var o=e.renderer();o&&o.beforeRender?o.beforeRender(function(d,g){stepAll(g,e)},o.beforeRenderPriorities.animations):s()}},emitterOptions={qualifierCompare:function(e,s){return e==null||s==null?e==null&&s==null:e.sameText(s)},eventMatches:function(e,s,o){var c=s.qualifier;return c!=null?e!==o.target&&element(o.target)&&c.matches(o.target):!0},addEventFields:function(e,s){s.cy=e,s.target=e},callbackContext:function(e,s,o){return s.qualifier!=null?o.target:e}},argSelector=function(e){return string(e)?new Selector(e):e},elesfn={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Emitter(emitterOptions,this)),this},emitter:function(){return this._private.emitter},on:function(e,s,o){return this.emitter().on(e,argSelector(s),o),this},removeListener:function(e,s,o){return this.emitter().removeListener(e,argSelector(s),o),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,s,o){return this.emitter().one(e,argSelector(s),o),this},once:function(e,s,o){return this.emitter().one(e,argSelector(s),o),this},emit:function(e,s){return this.emitter().emit(e,s),this},emitAndNotify:function(e,s){return this.emit(e),this.notify(e,s),this}};define.eventAliasesOn(elesfn);var corefn$7={png:function(e){var s=this._private.renderer;return e=e||{},s.png(e)},jpg:function(e){var s=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",s.jpg(e)}};corefn$7.jpeg=corefn$7.jpg;var corefn$6={layout:function(e){var s=this;if(e==null){error("Layout options must be specified to make a layout");return}if(e.name==null){error("A `name` must be specified to make a layout");return}var o=e.name,c=s.extension("layout",o);if(c==null){error("No such layout `"+o+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var d;string(e.eles)?d=s.$(e.eles):d=e.eles!=null?e.eles:s.$();var g=new c(extend({},e,{cy:s,eles:d}));return g}};corefn$6.createLayout=corefn$6.makeLayout=corefn$6.layout;var corefn$5={notify:function(e,s){var o=this._private;if(this.batching()){o.batchNotifications=o.batchNotifications||{};var c=o.batchNotifications[e]=o.batchNotifications[e]||this.collection();s!=null&&c.merge(s);return}if(o.notificationsEnabled){var d=this.renderer();this.destroyed()||!d||d.notify(e,s)}},notifications:function(e){var s=this._private;return e===void 0?s.notificationsEnabled:(s.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var s=this.renderer();Object.keys(e.batchNotifications).forEach(function(o){var c=e.batchNotifications[o];c.empty()?s.notify(o):s.notify(o,c)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var s=this;return this.batch(function(){for(var o=Object.keys(e),c=0;c<o.length;c++){var d=o[c],g=e[d],b=s.getElementById(d);b.data(g)}})}},rendererDefaults=defaults$g({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),corefn$4={renderTo:function(e,s,o,c){var d=this._private.renderer;return d.renderTo(e,s,o,c),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var s=this,o=s.extension("renderer",e.name);if(o==null){error("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&warn("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var c=rendererDefaults(e);c.cy=s,s._private.renderer=new o(c),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var s=e.container();if(s)for(s._cyreg=null;s.childNodes.length>0;)s.removeChild(s.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(o){var c=o._private;c.rscratch={},c.rstyle={},c.animation.current=[],c.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};corefn$4.invalidateDimensions=corefn$4.resize;var corefn$3={collection:function(e,s){return string(e)?this.$(e):elementOrCollection(e)?e.collection():array(e)?(s||(s={}),new Collection(this,e,s.unique,s.removed)):new Collection(this)},nodes:function(e){var s=this.$(function(o){return o.isNode()});return e?s.filter(e):s},edges:function(e){var s=this.$(function(o){return o.isEdge()});return e?s.filter(e):s},$:function(e){var s=this._private.elements;return e?s.filter(e):s.spawnSelf()},mutableElements:function(){return this._private.elements}};corefn$3.elements=corefn$3.filter=corefn$3.$;var styfn$8={},TRUE="t",FALSE="f";styfn$8.apply=function(a){for(var e=this,s=e._private,o=s.cy,c=o.collection(),d=0;d<a.length;d++){var g=a[d],b=e.getContextMeta(g);if(!b.empty){var j=e.getContextStyle(b),_e=e.applyContextStyle(b,j,g);g._private.appliedInitStyle?e.updateTransitions(g,_e.diffProps):g._private.appliedInitStyle=!0;var er=e.updateStyleHints(g);er&&c.push(g)}}return c};styfn$8.getPropertiesDiff=function(a,e){var s=this,o=s._private.propDiffs=s._private.propDiffs||{},c=a+"-"+e,d=o[c];if(d)return d;for(var g=[],b={},j=0;j<s.length;j++){var _e=s[j],er=a[j]===TRUE,rr=e[j]===TRUE,tr=er!==rr,nr=_e.mappedProperties.length>0;if(tr||rr&&nr){var ar=void 0;tr&&nr||tr?ar=_e.properties:nr&&(ar=_e.mappedProperties);for(var lr=0;lr<ar.length;lr++){for(var or=ar[lr],ir=or.name,sr=!1,ur=j+1;ur<s.length;ur++){var cr=s[ur],fr=e[ur]===TRUE;if(fr&&(sr=cr.properties[or.name]!=null,sr))break}!b[ir]&&!sr&&(b[ir]=!0,g.push(ir))}}}return o[c]=g,g};styfn$8.getContextMeta=function(a){for(var e=this,s="",o,c=a._private.styleCxtKey||"",d=0;d<e.length;d++){var g=e[d],b=g.selector&&g.selector.matches(a);b?s+=TRUE:s+=FALSE}return o=e.getPropertiesDiff(c,s),a._private.styleCxtKey=s,{key:s,diffPropNames:o,empty:o.length===0}};styfn$8.getContextStyle=function(a){var e=a.key,s=this,o=this._private.contextStyles=this._private.contextStyles||{};if(o[e])return o[e];for(var c={_private:{key:e}},d=0;d<s.length;d++){var g=s[d],b=e[d]===TRUE;if(b)for(var j=0;j<g.properties.length;j++){var _e=g.properties[j];c[_e.name]=_e}}return o[e]=c,c};styfn$8.applyContextStyle=function(a,e,s){for(var o=this,c=a.diffPropNames,d={},g=o.types,b=0;b<c.length;b++){var j=c[b],_e=e[j],er=s.pstyle(j);if(!_e)if(er)er.bypass?_e={name:j,deleteBypassed:!0}:_e={name:j,delete:!0};else continue;if(er!==_e){if(_e.mapped===g.fn&&er!=null&&er.mapping!=null&&er.mapping.value===_e.value){var rr=er.mapping,tr=rr.fnValue=_e.value(s);if(tr===rr.prevFnValue)continue}var nr=d[j]={prev:er};o.applyParsedProperty(s,_e),nr.next=s.pstyle(j),nr.next&&nr.next.bypass&&(nr.next=nr.next.bypassed)}}return{diffProps:d}};styfn$8.updateStyleHints=function(a){var e=a._private,s=this,o=s.propertyGroupNames,c=s.propertyGroupKeys,d=function(Or,jr,Wr){return s.getPropertiesHash(Or,jr,Wr)},g=e.styleKey;if(a.removed())return!1;var b=e.group==="nodes",j=a._private.style;o=Object.keys(j);for(var _e=0;_e<c.length;_e++){var er=c[_e];e.styleKeys[er]=[DEFAULT_HASH_SEED,DEFAULT_HASH_SEED_ALT]}for(var rr=function(Or,jr){return e.styleKeys[jr][0]=hashInt(Or,e.styleKeys[jr][0])},tr=function(Or,jr){return e.styleKeys[jr][1]=hashIntAlt(Or,e.styleKeys[jr][1])},nr=function(Or,jr){rr(Or,jr),tr(Or,jr)},ar=function(Or,jr){for(var Wr=0;Wr<Or.length;Wr++){var Xr=Or.charCodeAt(Wr);rr(Xr,jr),tr(Xr,jr)}},lr=2e9,or=function(Or){return-128<Or&&Or<128&&Math.floor(Or)!==Or?lr-(Or*1024|0):Or},ir=0;ir<o.length;ir++){var sr=o[ir],ur=j[sr];if(ur!=null){var cr=this.properties[sr],fr=cr.type,hr=cr.groupKey,dr=void 0;cr.hashOverride!=null?dr=cr.hashOverride(a,ur):ur.pfValue!=null&&(dr=ur.pfValue);var vr=cr.enums==null?ur.value:null,gr=dr!=null,pr=vr!=null,mr=gr||pr,yr=ur.units;if(fr.number&&mr&&!fr.multiple){var br=gr?dr:vr;nr(or(br),hr),!gr&&yr!=null&&ar(yr,hr)}else ar(ur.strValue,hr)}}for(var Er=[DEFAULT_HASH_SEED,DEFAULT_HASH_SEED_ALT],_r=0;_r<c.length;_r++){var Rr=c[_r],Cr=e.styleKeys[Rr];Er[0]=hashInt(Cr[0],Er[0]),Er[1]=hashIntAlt(Cr[1],Er[1])}e.styleKey=combineHashes(Er[0],Er[1]);var wr=e.styleKeys;e.labelDimsKey=combineHashesArray(wr.labelDimensions);var $r=d(a,["label"],wr.labelDimensions);if(e.labelKey=combineHashesArray($r),e.labelStyleKey=combineHashesArray(hashArrays(wr.commonLabel,$r)),!b){var Ar=d(a,["source-label"],wr.labelDimensions);e.sourceLabelKey=combineHashesArray(Ar),e.sourceLabelStyleKey=combineHashesArray(hashArrays(wr.commonLabel,Ar));var Sr=d(a,["target-label"],wr.labelDimensions);e.targetLabelKey=combineHashesArray(Sr),e.targetLabelStyleKey=combineHashesArray(hashArrays(wr.commonLabel,Sr))}if(b){var kr=e.styleKeys,Mr=kr.nodeBody,qr=kr.nodeBorder,Tr=kr.nodeOutline,Pr=kr.backgroundImage,Br=kr.compound,Ur=kr.pie,Nr=kr.stripe,Ir=[Mr,qr,Tr,Pr,Br,Ur,Nr].filter(function(Dr){return Dr!=null}).reduce(hashArrays,[DEFAULT_HASH_SEED,DEFAULT_HASH_SEED_ALT]);e.nodeKey=combineHashesArray(Ir),e.hasPie=Ur!=null&&Ur[0]!==DEFAULT_HASH_SEED&&Ur[1]!==DEFAULT_HASH_SEED_ALT,e.hasStripe=Nr!=null&&Nr[0]!==DEFAULT_HASH_SEED&&Nr[1]!==DEFAULT_HASH_SEED_ALT}return g!==e.styleKey};styfn$8.clearStyleHints=function(a){var e=a._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};styfn$8.applyParsedProperty=function(a,e){var s=this,o=e,c=a._private.style,d,g=s.types,b=s.properties[o.name].type,j=o.bypass,_e=c[o.name],er=_e&&_e.bypass,rr=a._private,tr="mapping",nr=function(Mr){return Mr==null?null:Mr.pfValue!=null?Mr.pfValue:Mr.value},ar=function(){var Mr=nr(_e),qr=nr(o);s.checkTriggers(a,o.name,Mr,qr)};if(e.name==="curve-style"&&a.isEdge()&&(e.value!=="bezier"&&a.isLoop()||e.value==="haystack"&&(a.source().isParent()||a.target().isParent()))&&(o=e=this.parse(e.name,"bezier",j)),o.delete)return c[o.name]=void 0,ar(),!0;if(o.deleteBypassed)return _e?_e.bypass?(_e.bypassed=void 0,ar(),!0):!1:(ar(),!0);if(o.deleteBypass)return _e?_e.bypass?(c[o.name]=_e.bypassed,ar(),!0):!1:(ar(),!0);var lr=function(){warn("Do not assign mappings to elements without corresponding data (i.e. ele `"+a.id()+"` has no mapping for property `"+o.name+"` with data field `"+o.field+"`); try a `["+o.field+"]` selector to limit scope to elements with `"+o.field+"` defined")};switch(o.mapped){case g.mapData:{for(var or=o.field.split("."),ir=rr.data,sr=0;sr<or.length&&ir;sr++){var ur=or[sr];ir=ir[ur]}if(ir==null)return lr(),!1;var cr;if(number$1(ir)){var fr=o.fieldMax-o.fieldMin;fr===0?cr=0:cr=(ir-o.fieldMin)/fr}else return warn("Do not use continuous mappers without specifying numeric data (i.e. `"+o.field+": "+ir+"` for `"+a.id()+"` is non-numeric)"),!1;if(cr<0?cr=0:cr>1&&(cr=1),b.color){var hr=o.valueMin[0],dr=o.valueMax[0],vr=o.valueMin[1],gr=o.valueMax[1],pr=o.valueMin[2],mr=o.valueMax[2],yr=o.valueMin[3]==null?1:o.valueMin[3],br=o.valueMax[3]==null?1:o.valueMax[3],Er=[Math.round(hr+(dr-hr)*cr),Math.round(vr+(gr-vr)*cr),Math.round(pr+(mr-pr)*cr),Math.round(yr+(br-yr)*cr)];d={bypass:o.bypass,name:o.name,value:Er,strValue:"rgb("+Er[0]+", "+Er[1]+", "+Er[2]+")"}}else if(b.number){var _r=o.valueMin+(o.valueMax-o.valueMin)*cr;d=this.parse(o.name,_r,o.bypass,tr)}else return!1;if(!d)return lr(),!1;d.mapping=o,o=d;break}case g.data:{for(var Rr=o.field.split("."),Cr=rr.data,wr=0;wr<Rr.length&&Cr;wr++){var $r=Rr[wr];Cr=Cr[$r]}if(Cr!=null&&(d=this.parse(o.name,Cr,o.bypass,tr)),!d)return lr(),!1;d.mapping=o,o=d;break}case g.fn:{var Ar=o.value,Sr=o.fnValue!=null?o.fnValue:Ar(a);if(o.prevFnValue=Sr,Sr==null)return warn("Custom function mappers may not return null (i.e. `"+o.name+"` for ele `"+a.id()+"` is null)"),!1;if(d=this.parse(o.name,Sr,o.bypass,tr),!d)return warn("Custom function mappers may not return invalid values for the property type (i.e. `"+o.name+"` for ele `"+a.id()+"` is invalid)"),!1;d.mapping=copy(o),o=d;break}case void 0:break;default:return!1}return j?(er?o.bypassed=_e.bypassed:o.bypassed=_e,c[o.name]=o):er?_e.bypassed=o:c[o.name]=o,ar(),!0};styfn$8.cleanElements=function(a,e){for(var s=0;s<a.length;s++){var o=a[s];if(this.clearStyleHints(o),o.dirtyCompoundBoundsCache(),o.dirtyBoundingBoxCache(),!e)o._private.style={};else for(var c=o._private.style,d=Object.keys(c),g=0;g<d.length;g++){var b=d[g],j=c[b];j!=null&&(j.bypass?j.bypassed=null:c[b]=null)}}};styfn$8.update=function(){var a=this._private.cy,e=a.mutableElements();e.updateStyle()};styfn$8.updateTransitions=function(a,e){var s=this,o=a._private,c=a.pstyle("transition-property").value,d=a.pstyle("transition-duration").pfValue,g=a.pstyle("transition-delay").pfValue;if(c.length>0&&d>0){for(var b={},j=!1,_e=0;_e<c.length;_e++){var er=c[_e],rr=a.pstyle(er),tr=e[er];if(tr){var nr=tr.prev,ar=nr,lr=tr.next!=null?tr.next:rr,or=!1,ir=void 0,sr=1e-6;ar&&(number$1(ar.pfValue)&&number$1(lr.pfValue)?(or=lr.pfValue-ar.pfValue,ir=ar.pfValue+sr*or):number$1(ar.value)&&number$1(lr.value)?(or=lr.value-ar.value,ir=ar.value+sr*or):array(ar.value)&&array(lr.value)&&(or=ar.value[0]!==lr.value[0]||ar.value[1]!==lr.value[1]||ar.value[2]!==lr.value[2],ir=ar.strValue),or&&(b[er]=lr.strValue,this.applyBypass(a,er,ir),j=!0))}}if(!j)return;o.transitioning=!0,new Promise$1(function(ur){g>0?a.delayAnimation(g).play().promise().then(ur):ur()}).then(function(){return a.animation({style:b,duration:d,easing:a.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){s.removeBypasses(a,c),a.emitAndNotify("style"),o.transitioning=!1})}else o.transitioning&&(this.removeBypasses(a,c),a.emitAndNotify("style"),o.transitioning=!1)};styfn$8.checkTrigger=function(a,e,s,o,c,d){var g=this.properties[e],b=c(g);a.removed()||b!=null&&b(s,o,a)&&d(g)};styfn$8.checkZOrderTrigger=function(a,e,s,o){var c=this;this.checkTrigger(a,e,s,o,function(d){return d.triggersZOrder},function(){c._private.cy.notify("zorder",a)})};styfn$8.checkBoundsTrigger=function(a,e,s,o){this.checkTrigger(a,e,s,o,function(c){return c.triggersBounds},function(c){a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache()})};styfn$8.checkConnectedEdgesBoundsTrigger=function(a,e,s,o){this.checkTrigger(a,e,s,o,function(c){return c.triggersBoundsOfConnectedEdges},function(c){a.connectedEdges().forEach(function(d){d.dirtyBoundingBoxCache()})})};styfn$8.checkParallelEdgesBoundsTrigger=function(a,e,s,o){this.checkTrigger(a,e,s,o,function(c){return c.triggersBoundsOfParallelEdges},function(c){a.parallelEdges().forEach(function(d){d.dirtyBoundingBoxCache()})})};styfn$8.checkTriggers=function(a,e,s,o){a.dirtyStyleCache(),this.checkZOrderTrigger(a,e,s,o),this.checkBoundsTrigger(a,e,s,o),this.checkConnectedEdgesBoundsTrigger(a,e,s,o),this.checkParallelEdgesBoundsTrigger(a,e,s,o)};var styfn$7={};styfn$7.applyBypass=function(a,e,s,o){var c=this,d=[],g=!0;if(e==="*"||e==="**"){if(s!==void 0)for(var b=0;b<c.properties.length;b++){var j=c.properties[b],_e=j.name,er=this.parse(_e,s,!0);er&&d.push(er)}}else if(string(e)){var rr=this.parse(e,s,!0);rr&&d.push(rr)}else if(plainObject(e)){var tr=e;o=s;for(var nr=Object.keys(tr),ar=0;ar<nr.length;ar++){var lr=nr[ar],or=tr[lr];if(or===void 0&&(or=tr[dash2camel(lr)]),or!==void 0){var ir=this.parse(lr,or,!0);ir&&d.push(ir)}}}else return!1;if(d.length===0)return!1;for(var sr=!1,ur=0;ur<a.length;ur++){for(var cr=a[ur],fr={},hr=void 0,dr=0;dr<d.length;dr++){var vr=d[dr];if(o){var gr=cr.pstyle(vr.name);hr=fr[vr.name]={prev:gr}}sr=this.applyParsedProperty(cr,copy(vr))||sr,o&&(hr.next=cr.pstyle(vr.name))}sr&&this.updateStyleHints(cr),o&&this.updateTransitions(cr,fr,g)}return sr};styfn$7.overrideBypass=function(a,e,s){e=camel2dash(e);for(var o=0;o<a.length;o++){var c=a[o],d=c._private.style[e],g=this.properties[e].type,b=g.color,j=g.mutiple,_e=d?d.pfValue!=null?d.pfValue:d.value:null;!d||!d.bypass?this.applyBypass(c,e,s):(d.value=s,d.pfValue!=null&&(d.pfValue=s),b?d.strValue="rgb("+s.join(",")+")":j?d.strValue=s.join(" "):d.strValue=""+s,this.updateStyleHints(c)),this.checkTriggers(c,e,_e,s)}};styfn$7.removeAllBypasses=function(a,e){return this.removeBypasses(a,this.propertyNames,e)};styfn$7.removeBypasses=function(a,e,s){for(var o=!0,c=0;c<a.length;c++){for(var d=a[c],g={},b=0;b<e.length;b++){var j=e[b],_e=this.properties[j],er=d.pstyle(_e.name);if(!(!er||!er.bypass)){var rr="",tr=this.parse(j,rr,!0),nr=g[_e.name]={prev:er};this.applyParsedProperty(d,tr),nr.next=d.pstyle(_e.name)}}this.updateStyleHints(d),s&&this.updateTransitions(d,g,o)}};var styfn$6={};styfn$6.getEmSizeInPixels=function(){var a=this.containerCss("font-size");return a!=null?parseFloat(a):1};styfn$6.containerCss=function(a){var e=this._private.cy,s=e.container(),o=e.window();if(o&&s&&o.getComputedStyle)return o.getComputedStyle(s).getPropertyValue(a)};var styfn$5={};styfn$5.getRenderedStyle=function(a,e){return e?this.getStylePropertyValue(a,e,!0):this.getRawStyle(a,!0)};styfn$5.getRawStyle=function(a,e){var s=this;if(a=a[0],a){for(var o={},c=0;c<s.properties.length;c++){var d=s.properties[c],g=s.getStylePropertyValue(a,d.name,e);g!=null&&(o[d.name]=g,o[dash2camel(d.name)]=g)}return o}};styfn$5.getIndexedStyle=function(a,e,s,o){var c=a.pstyle(e)[s][o];return c??a.cy().style().getDefaultProperty(e)[s][0]};styfn$5.getStylePropertyValue=function(a,e,s){var o=this;if(a=a[0],a){var c=o.properties[e];c.alias&&(c=c.pointsTo);var d=c.type,g=a.pstyle(c.name);if(g){var b=g.value,j=g.units,_e=g.strValue;if(s&&d.number&&b!=null&&number$1(b)){var er=a.cy().zoom(),rr=function(or){return or*er},tr=function(or,ir){return rr(or)+ir},nr=array(b),ar=nr?j.every(function(lr){return lr!=null}):j!=null;return ar?nr?b.map(function(lr,or){return tr(lr,j[or])}).join(" "):tr(b,j):nr?b.map(function(lr){return string(lr)?lr:""+rr(lr)}).join(" "):""+rr(b)}else if(_e!=null)return _e}return null}};styfn$5.getAnimationStartStyle=function(a,e){for(var s={},o=0;o<e.length;o++){var c=e[o],d=c.name,g=a.pstyle(d);g!==void 0&&(plainObject(g)?g=this.parse(d,g.strValue):g=this.parse(d,g)),g&&(s[d]=g)}return s};styfn$5.getPropsList=function(a){var e=this,s=[],o=a,c=e.properties;if(o)for(var d=Object.keys(o),g=0;g<d.length;g++){var b=d[g],j=o[b],_e=c[b]||c[camel2dash(b)],er=this.parse(_e.name,j);er&&s.push(er)}return s};styfn$5.getNonDefaultPropertiesHash=function(a,e,s){var o=s.slice(),c,d,g,b,j,_e;for(j=0;j<e.length;j++)if(c=e[j],d=a.pstyle(c,!1),d!=null)if(d.pfValue!=null)o[0]=hashInt(b,o[0]),o[1]=hashIntAlt(b,o[1]);else for(g=d.strValue,_e=0;_e<g.length;_e++)b=g.charCodeAt(_e),o[0]=hashInt(b,o[0]),o[1]=hashIntAlt(b,o[1]);return o};styfn$5.getPropertiesHash=styfn$5.getNonDefaultPropertiesHash;var styfn$4={};styfn$4.appendFromJson=function(a){for(var e=this,s=0;s<a.length;s++){var o=a[s],c=o.selector,d=o.style||o.css,g=Object.keys(d);e.selector(c);for(var b=0;b<g.length;b++){var j=g[b],_e=d[j];e.css(j,_e)}}return e};styfn$4.fromJson=function(a){var e=this;return e.resetToDefault(),e.appendFromJson(a),e};styfn$4.json=function(){for(var a=[],e=this.defaultLength;e<this.length;e++){for(var s=this[e],o=s.selector,c=s.properties,d={},g=0;g<c.length;g++){var b=c[g];d[b.name]=b.strValue}a.push({selector:o?o.toString():"core",style:d})}return a};var styfn$3={};styfn$3.appendFromString=function(a){var e=this,s=this,o=""+a,c,d,g;o=o.replace(/[/][*](\s|.)+?[*][/]/g,"");function b(){o.length>c.length?o=o.substr(c.length):o=""}function j(){d.length>g.length?d=d.substr(g.length):d=""}for(;;){var _e=o.match(/^\s*$/);if(_e)break;var er=o.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!er){warn("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+o);break}c=er[0];var rr=er[1];if(rr!=="core"){var tr=new Selector(rr);if(tr.invalid){warn("Skipping parsing of block: Invalid selector found in string stylesheet: "+rr),b();continue}}var nr=er[2],ar=!1;d=nr;for(var lr=[];;){var or=d.match(/^\s*$/);if(or)break;var ir=d.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!ir){warn("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+nr),ar=!0;break}g=ir[0];var sr=ir[1],ur=ir[2],cr=e.properties[sr];if(!cr){warn("Skipping property: Invalid property name in: "+g),j();continue}var fr=s.parse(sr,ur);if(!fr){warn("Skipping property: Invalid property definition in: "+g),j();continue}lr.push({name:sr,val:ur}),j()}if(ar){b();break}s.selector(rr);for(var hr=0;hr<lr.length;hr++){var dr=lr[hr];s.css(dr.name,dr.val)}b()}return s};styfn$3.fromString=function(a){var e=this;return e.resetToDefault(),e.appendFromString(a),e};var styfn$2={};(function(){var a=number,e=rgbaNoBackRefs,s=hslaNoBackRefs,o=hex3,c=hex6,d=function(Dr){return"^"+Dr+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},g=function(Dr){var Or=a+"|\\w+|"+e+"|"+s+"|"+o+"|"+c;return"^"+Dr+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+a+")\\s*\\,\\s*("+a+")\\s*,\\s*("+Or+")\\s*\\,\\s*("+Or+")\\)$"},b=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];styfn$2.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:d("data")},layoutData:{mapping:!0,regex:d("layoutData")},scratch:{mapping:!0,regex:d("scratch")},mapData:{mapping:!0,regex:g("mapData")},mapLayoutData:{mapping:!0,regex:g("mapLayoutData")},mapScratch:{mapping:!0,regex:g("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:b,singleRegexMatchValue:!0},urls:{regexes:b,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(Dr,Or){switch(Dr.length){case 2:return Or[0]!=="deg"&&Or[0]!=="rad"&&Or[1]!=="deg"&&Or[1]!=="rad";case 1:return string(Dr[0])||Or[0]==="deg"||Or[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+a+")\\s*,\\s*("+a+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+a+")\\s*,\\s*("+a+")\\s*,\\s*("+a+")\\s*,\\s*("+a+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(Dr){var Or=Dr.length;return Or===1||Or===2||Or===4}}};var j={zeroNonZero:function(Dr,Or){return(Dr==null||Or==null)&&Dr!==Or||Dr==0&&Or!=0?!0:Dr!=0&&Or==0},any:function(Dr,Or){return Dr!=Or},emptyNonEmpty:function(Dr,Or){var jr=emptyString(Dr),Wr=emptyString(Or);return jr&&!Wr||!jr&&Wr}},_e=styfn$2.types,er=[{name:"label",type:_e.text,triggersBounds:j.any,triggersZOrder:j.emptyNonEmpty},{name:"text-rotation",type:_e.textRotation,triggersBounds:j.any},{name:"text-margin-x",type:_e.bidirectionalSize,triggersBounds:j.any},{name:"text-margin-y",type:_e.bidirectionalSize,triggersBounds:j.any}],rr=[{name:"source-label",type:_e.text,triggersBounds:j.any},{name:"source-text-rotation",type:_e.textRotation,triggersBounds:j.any},{name:"source-text-margin-x",type:_e.bidirectionalSize,triggersBounds:j.any},{name:"source-text-margin-y",type:_e.bidirectionalSize,triggersBounds:j.any},{name:"source-text-offset",type:_e.size,triggersBounds:j.any}],tr=[{name:"target-label",type:_e.text,triggersBounds:j.any},{name:"target-text-rotation",type:_e.textRotation,triggersBounds:j.any},{name:"target-text-margin-x",type:_e.bidirectionalSize,triggersBounds:j.any},{name:"target-text-margin-y",type:_e.bidirectionalSize,triggersBounds:j.any},{name:"target-text-offset",type:_e.size,triggersBounds:j.any}],nr=[{name:"font-family",type:_e.fontFamily,triggersBounds:j.any},{name:"font-style",type:_e.fontStyle,triggersBounds:j.any},{name:"font-weight",type:_e.fontWeight,triggersBounds:j.any},{name:"font-size",type:_e.size,triggersBounds:j.any},{name:"text-transform",type:_e.textTransform,triggersBounds:j.any},{name:"text-wrap",type:_e.textWrap,triggersBounds:j.any},{name:"text-overflow-wrap",type:_e.textOverflowWrap,triggersBounds:j.any},{name:"text-max-width",type:_e.size,triggersBounds:j.any},{name:"text-outline-width",type:_e.size,triggersBounds:j.any},{name:"line-height",type:_e.positiveNumber,triggersBounds:j.any}],ar=[{name:"text-valign",type:_e.valign,triggersBounds:j.any},{name:"text-halign",type:_e.halign,triggersBounds:j.any},{name:"color",type:_e.color},{name:"text-outline-color",type:_e.color},{name:"text-outline-opacity",type:_e.zeroOneNumber},{name:"text-background-color",type:_e.color},{name:"text-background-opacity",type:_e.zeroOneNumber},{name:"text-background-padding",type:_e.size,triggersBounds:j.any},{name:"text-border-opacity",type:_e.zeroOneNumber},{name:"text-border-color",type:_e.color},{name:"text-border-width",type:_e.size,triggersBounds:j.any},{name:"text-border-style",type:_e.borderStyle,triggersBounds:j.any},{name:"text-background-shape",type:_e.textBackgroundShape,triggersBounds:j.any},{name:"text-justification",type:_e.justification},{name:"box-select-labels",type:_e.bool,triggersBounds:j.any}],lr=[{name:"events",type:_e.bool,triggersZOrder:j.any},{name:"text-events",type:_e.bool,triggersZOrder:j.any},{name:"box-selection",type:_e.boxSelection,triggersZOrder:j.any}],or=[{name:"display",type:_e.display,triggersZOrder:j.any,triggersBounds:j.any,triggersBoundsOfConnectedEdges:j.any,triggersBoundsOfParallelEdges:function(Dr,Or,jr){return Dr===Or?!1:jr.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:_e.visibility,triggersZOrder:j.any},{name:"opacity",type:_e.zeroOneNumber,triggersZOrder:j.zeroNonZero},{name:"text-opacity",type:_e.zeroOneNumber},{name:"min-zoomed-font-size",type:_e.size},{name:"z-compound-depth",type:_e.zCompoundDepth,triggersZOrder:j.any},{name:"z-index-compare",type:_e.zIndexCompare,triggersZOrder:j.any},{name:"z-index",type:_e.number,triggersZOrder:j.any}],ir=[{name:"overlay-padding",type:_e.size,triggersBounds:j.any},{name:"overlay-color",type:_e.color},{name:"overlay-opacity",type:_e.zeroOneNumber,triggersBounds:j.zeroNonZero},{name:"overlay-shape",type:_e.overlayShape,triggersBounds:j.any},{name:"overlay-corner-radius",type:_e.cornerRadius}],sr=[{name:"underlay-padding",type:_e.size,triggersBounds:j.any},{name:"underlay-color",type:_e.color},{name:"underlay-opacity",type:_e.zeroOneNumber,triggersBounds:j.zeroNonZero},{name:"underlay-shape",type:_e.overlayShape,triggersBounds:j.any},{name:"underlay-corner-radius",type:_e.cornerRadius}],ur=[{name:"transition-property",type:_e.propList},{name:"transition-duration",type:_e.time},{name:"transition-delay",type:_e.time},{name:"transition-timing-function",type:_e.easing}],cr=function(Dr,Or){return Or.value==="label"?-Dr.poolIndex():Or.pfValue},fr=[{name:"height",type:_e.nodeSize,triggersBounds:j.any,hashOverride:cr},{name:"width",type:_e.nodeSize,triggersBounds:j.any,hashOverride:cr},{name:"shape",type:_e.nodeShape,triggersBounds:j.any},{name:"shape-polygon-points",type:_e.polygonPointList,triggersBounds:j.any},{name:"corner-radius",type:_e.cornerRadius},{name:"background-color",type:_e.color},{name:"background-fill",type:_e.fill},{name:"background-opacity",type:_e.zeroOneNumber},{name:"background-blacken",type:_e.nOneOneNumber},{name:"background-gradient-stop-colors",type:_e.colors},{name:"background-gradient-stop-positions",type:_e.percentages},{name:"background-gradient-direction",type:_e.gradientDirection},{name:"padding",type:_e.sizeMaybePercent,triggersBounds:j.any},{name:"padding-relative-to",type:_e.paddingRelativeTo,triggersBounds:j.any},{name:"bounds-expansion",type:_e.boundsExpansion,triggersBounds:j.any}],hr=[{name:"border-color",type:_e.color},{name:"border-opacity",type:_e.zeroOneNumber},{name:"border-width",type:_e.size,triggersBounds:j.any},{name:"border-style",type:_e.borderStyle},{name:"border-cap",type:_e.lineCap},{name:"border-join",type:_e.lineJoin},{name:"border-dash-pattern",type:_e.numbers},{name:"border-dash-offset",type:_e.number},{name:"border-position",type:_e.linePosition}],dr=[{name:"outline-color",type:_e.color},{name:"outline-opacity",type:_e.zeroOneNumber},{name:"outline-width",type:_e.size,triggersBounds:j.any},{name:"outline-style",type:_e.borderStyle},{name:"outline-offset",type:_e.size,triggersBounds:j.any}],vr=[{name:"background-image",type:_e.urls},{name:"background-image-crossorigin",type:_e.bgCrossOrigin},{name:"background-image-opacity",type:_e.zeroOneNumbers},{name:"background-image-containment",type:_e.bgContainment},{name:"background-image-smoothing",type:_e.bools},{name:"background-position-x",type:_e.bgPos},{name:"background-position-y",type:_e.bgPos},{name:"background-width-relative-to",type:_e.bgRelativeTo},{name:"background-height-relative-to",type:_e.bgRelativeTo},{name:"background-repeat",type:_e.bgRepeat},{name:"background-fit",type:_e.bgFit},{name:"background-clip",type:_e.bgClip},{name:"background-width",type:_e.bgWH},{name:"background-height",type:_e.bgWH},{name:"background-offset-x",type:_e.bgPos},{name:"background-offset-y",type:_e.bgPos}],gr=[{name:"position",type:_e.position,triggersBounds:j.any},{name:"compound-sizing-wrt-labels",type:_e.compoundIncludeLabels,triggersBounds:j.any},{name:"min-width",type:_e.size,triggersBounds:j.any},{name:"min-width-bias-left",type:_e.sizeMaybePercent,triggersBounds:j.any},{name:"min-width-bias-right",type:_e.sizeMaybePercent,triggersBounds:j.any},{name:"min-height",type:_e.size,triggersBounds:j.any},{name:"min-height-bias-top",type:_e.sizeMaybePercent,triggersBounds:j.any},{name:"min-height-bias-bottom",type:_e.sizeMaybePercent,triggersBounds:j.any}],pr=[{name:"line-style",type:_e.lineStyle},{name:"line-color",type:_e.color},{name:"line-fill",type:_e.fill},{name:"line-cap",type:_e.lineCap},{name:"line-opacity",type:_e.zeroOneNumber},{name:"line-dash-pattern",type:_e.numbers},{name:"line-dash-offset",type:_e.number},{name:"line-outline-width",type:_e.size},{name:"line-outline-color",type:_e.color},{name:"line-gradient-stop-colors",type:_e.colors},{name:"line-gradient-stop-positions",type:_e.percentages},{name:"curve-style",type:_e.curveStyle,triggersBounds:j.any,triggersBoundsOfParallelEdges:function(Dr,Or){return Dr===Or?!1:Dr==="bezier"||Or==="bezier"}},{name:"haystack-radius",type:_e.zeroOneNumber,triggersBounds:j.any},{name:"source-endpoint",type:_e.edgeEndpoint,triggersBounds:j.any},{name:"target-endpoint",type:_e.edgeEndpoint,triggersBounds:j.any},{name:"control-point-step-size",type:_e.size,triggersBounds:j.any},{name:"control-point-distances",type:_e.bidirectionalSizes,triggersBounds:j.any},{name:"control-point-weights",type:_e.numbers,triggersBounds:j.any},{name:"segment-distances",type:_e.bidirectionalSizes,triggersBounds:j.any},{name:"segment-weights",type:_e.numbers,triggersBounds:j.any},{name:"segment-radii",type:_e.numbers,triggersBounds:j.any},{name:"radius-type",type:_e.radiusType,triggersBounds:j.any},{name:"taxi-turn",type:_e.bidirectionalSizeMaybePercent,triggersBounds:j.any},{name:"taxi-turn-min-distance",type:_e.size,triggersBounds:j.any},{name:"taxi-direction",type:_e.axisDirection,triggersBounds:j.any},{name:"taxi-radius",type:_e.number,triggersBounds:j.any},{name:"edge-distances",type:_e.edgeDistances,triggersBounds:j.any},{name:"arrow-scale",type:_e.positiveNumber,triggersBounds:j.any},{name:"loop-direction",type:_e.angle,triggersBounds:j.any},{name:"loop-sweep",type:_e.angle,triggersBounds:j.any},{name:"source-distance-from-node",type:_e.size,triggersBounds:j.any},{name:"target-distance-from-node",type:_e.size,triggersBounds:j.any}],mr=[{name:"ghost",type:_e.bool,triggersBounds:j.any},{name:"ghost-offset-x",type:_e.bidirectionalSize,triggersBounds:j.any},{name:"ghost-offset-y",type:_e.bidirectionalSize,triggersBounds:j.any},{name:"ghost-opacity",type:_e.zeroOneNumber}],yr=[{name:"selection-box-color",type:_e.color},{name:"selection-box-opacity",type:_e.zeroOneNumber},{name:"selection-box-border-color",type:_e.color},{name:"selection-box-border-width",type:_e.size},{name:"active-bg-color",type:_e.color},{name:"active-bg-opacity",type:_e.zeroOneNumber},{name:"active-bg-size",type:_e.size},{name:"outside-texture-bg-color",type:_e.color},{name:"outside-texture-bg-opacity",type:_e.zeroOneNumber}],br=[];styfn$2.pieBackgroundN=16,br.push({name:"pie-size",type:_e.sizeMaybePercent}),br.push({name:"pie-hole",type:_e.sizeMaybePercent}),br.push({name:"pie-start-angle",type:_e.angle});for(var Er=1;Er<=styfn$2.pieBackgroundN;Er++)br.push({name:"pie-"+Er+"-background-color",type:_e.color}),br.push({name:"pie-"+Er+"-background-size",type:_e.percent}),br.push({name:"pie-"+Er+"-background-opacity",type:_e.zeroOneNumber});var _r=[];styfn$2.stripeBackgroundN=16,_r.push({name:"stripe-size",type:_e.sizeMaybePercent}),_r.push({name:"stripe-direction",type:_e.axisDirectionPrimary});for(var Rr=1;Rr<=styfn$2.stripeBackgroundN;Rr++)_r.push({name:"stripe-"+Rr+"-background-color",type:_e.color}),_r.push({name:"stripe-"+Rr+"-background-size",type:_e.percent}),_r.push({name:"stripe-"+Rr+"-background-opacity",type:_e.zeroOneNumber});var Cr=[],wr=styfn$2.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:_e.arrowShape,triggersBounds:j.any},{name:"arrow-color",type:_e.color},{name:"arrow-fill",type:_e.arrowFill},{name:"arrow-width",type:_e.arrowWidth}].forEach(function(Ir){wr.forEach(function(Dr){var Or=Dr+"-"+Ir.name,jr=Ir.type,Wr=Ir.triggersBounds;Cr.push({name:Or,type:jr,triggersBounds:Wr})})},{});var $r=styfn$2.properties=[].concat(lr,ur,or,ir,sr,mr,ar,nr,er,rr,tr,fr,hr,dr,vr,br,_r,gr,pr,Cr,yr),Ar=styfn$2.propertyGroups={behavior:lr,transition:ur,visibility:or,overlay:ir,underlay:sr,ghost:mr,commonLabel:ar,labelDimensions:nr,mainLabel:er,sourceLabel:rr,targetLabel:tr,nodeBody:fr,nodeBorder:hr,nodeOutline:dr,backgroundImage:vr,pie:br,stripe:_r,compound:gr,edgeLine:pr,edgeArrow:Cr,core:yr},Sr=styfn$2.propertyGroupNames={},kr=styfn$2.propertyGroupKeys=Object.keys(Ar);kr.forEach(function(Ir){Sr[Ir]=Ar[Ir].map(function(Dr){return Dr.name}),Ar[Ir].forEach(function(Dr){return Dr.groupKey=Ir})});var Mr=styfn$2.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];styfn$2.propertyNames=$r.map(function(Ir){return Ir.name});for(var qr=0;qr<$r.length;qr++){var Tr=$r[qr];$r[Tr.name]=Tr}for(var Pr=0;Pr<Mr.length;Pr++){var Br=Mr[Pr],Ur=$r[Br.pointsTo],Nr={name:Br.name,alias:!0,pointsTo:Ur};$r.push(Nr),$r[Br.name]=Nr}})();styfn$2.getDefaultProperty=function(a){return this.getDefaultProperties()[a]};styfn$2.getDefaultProperties=function(){var a=this._private;if(a.defaultProperties!=null)return a.defaultProperties;for(var e=extend({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(j,_e){for(var er=1;er<=styfn$2.pieBackgroundN;er++){var rr=_e.name.replace("{{i}}",er),tr=_e.value;j[rr]=tr}return j},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(j,_e){for(var er=1;er<=styfn$2.stripeBackgroundN;er++){var rr=_e.name.replace("{{i}}",er),tr=_e.value;j[rr]=tr}return j},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(j,_e){return styfn$2.arrowPrefixes.forEach(function(er){var rr=er+"-"+_e.name,tr=_e.value;j[rr]=tr}),j},{})),s={},o=0;o<this.properties.length;o++){var c=this.properties[o];if(!c.pointsTo){var d=c.name,g=e[d],b=this.parse(d,g);s[d]=b}}return a.defaultProperties=s,a.defaultProperties};styfn$2.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var styfn$1={};styfn$1.parse=function(a,e,s,o){var c=this;if(fn$6(e))return c.parseImplWarn(a,e,s,o);var d=o==="mapping"||o===!0||o===!1||o==null?"dontcare":o,g=s?"t":"f",b=""+e,j=hashStrings(a,b,g,d),_e=c.propCache=c.propCache||[],er;return(er=_e[j])||(er=_e[j]=c.parseImplWarn(a,e,s,o)),(s||o==="mapping")&&(er=copy(er),er&&(er.value=copy(er.value))),er};styfn$1.parseImplWarn=function(a,e,s,o){var c=this.parseImpl(a,e,s,o);return!c&&e!=null&&warn("The style property `".concat(a,": ").concat(e,"` is invalid")),c&&(c.name==="width"||c.name==="height")&&e==="label"&&warn("The style value of `label` is deprecated for `"+c.name+"`"),c};styfn$1.parseImpl=function(a,e,s,o){var c=this;a=camel2dash(a);var d=c.properties[a],g=e,b=c.types;if(!d||e===void 0)return null;d.alias&&(d=d.pointsTo,a=d.name);var j=string(e);j&&(e=e.trim());var _e=d.type;if(!_e)return null;if(s&&(e===""||e===null))return{name:a,value:e,bypass:!0,deleteBypass:!0};if(fn$6(e))return{name:a,value:e,strValue:"fn",mapped:b.fn,bypass:s};var er,rr;if(!(!j||o||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(er=new RegExp(b.data.regex).exec(e))){if(s)return!1;var tr=b.data;return{name:a,value:er,strValue:""+e,mapped:tr,field:er[1],bypass:s}}else if(e.length>=10&&e[0]==="m"&&(rr=new RegExp(b.mapData.regex).exec(e))){if(s||_e.multiple)return!1;var nr=b.mapData;if(!(_e.color||_e.number))return!1;var ar=this.parse(a,rr[4]);if(!ar||ar.mapped)return!1;var lr=this.parse(a,rr[5]);if(!lr||lr.mapped)return!1;if(ar.pfValue===lr.pfValue||ar.strValue===lr.strValue)return warn("`"+a+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+a+": "+ar.strValue+"`"),this.parse(a,ar.strValue);if(_e.color){var or=ar.value,ir=lr.value,sr=or[0]===ir[0]&&or[1]===ir[1]&&or[2]===ir[2]&&(or[3]===ir[3]||(or[3]==null||or[3]===1)&&(ir[3]==null||ir[3]===1));if(sr)return!1}return{name:a,value:rr,strValue:""+e,mapped:nr,field:rr[1],fieldMin:parseFloat(rr[2]),fieldMax:parseFloat(rr[3]),valueMin:ar.value,valueMax:lr.value,bypass:s}}}if(_e.multiple&&o!=="multiple"){var ur;if(j?ur=e.split(/\s+/):array(e)?ur=e:ur=[e],_e.evenMultiple&&ur.length%2!==0)return null;for(var cr=[],fr=[],hr=[],dr="",vr=!1,gr=0;gr<ur.length;gr++){var pr=c.parse(a,ur[gr],s,"multiple");vr=vr||string(pr.value),cr.push(pr.value),hr.push(pr.pfValue!=null?pr.pfValue:pr.value),fr.push(pr.units),dr+=(gr>0?" ":"")+pr.strValue}return _e.validate&&!_e.validate(cr,fr)?null:_e.singleEnum&&vr?cr.length===1&&string(cr[0])?{name:a,value:cr[0],strValue:cr[0],bypass:s}:null:{name:a,value:cr,pfValue:hr,strValue:dr,bypass:s,units:fr}}var mr=function(){for(var Nr=0;Nr<_e.enums.length;Nr++){var Ir=_e.enums[Nr];if(Ir===e)return{name:a,value:e,strValue:""+e,bypass:s}}return null};if(_e.number){var yr,br="px";if(_e.units&&(yr=_e.units),_e.implicitUnits&&(br=_e.implicitUnits),!_e.unitless)if(j){var Er="px|em"+(_e.allowPercent?"|\\%":"");yr&&(Er=yr);var _r=e.match("^("+number+")("+Er+")?$");_r&&(e=_r[1],yr=_r[2]||br)}else(!yr||_e.implicitUnits)&&(yr=br);if(e=parseFloat(e),isNaN(e)&&_e.enums===void 0)return null;if(isNaN(e)&&_e.enums!==void 0)return e=g,mr();if(_e.integer&&!integer(e)||_e.min!==void 0&&(e<_e.min||_e.strictMin&&e===_e.min)||_e.max!==void 0&&(e>_e.max||_e.strictMax&&e===_e.max))return null;var Rr={name:a,value:e,strValue:""+e+(yr||""),units:yr,bypass:s};return _e.unitless||yr!=="px"&&yr!=="em"?Rr.pfValue=e:Rr.pfValue=yr==="px"||!yr?e:this.getEmSizeInPixels()*e,(yr==="ms"||yr==="s")&&(Rr.pfValue=yr==="ms"?e:1e3*e),(yr==="deg"||yr==="rad")&&(Rr.pfValue=yr==="rad"?e:deg2rad(e)),yr==="%"&&(Rr.pfValue=e/100),Rr}else if(_e.propList){var Cr=[],wr=""+e;if(wr!=="none"){for(var $r=wr.split(/\s*,\s*|\s+/),Ar=0;Ar<$r.length;Ar++){var Sr=$r[Ar].trim();c.properties[Sr]?Cr.push(Sr):warn("`"+Sr+"` is not a valid property name")}if(Cr.length===0)return null}return{name:a,value:Cr,strValue:Cr.length===0?"none":Cr.join(" "),bypass:s}}else if(_e.color){var kr=color2tuple(e);return kr?{name:a,value:kr,pfValue:kr,strValue:"rgb("+kr[0]+","+kr[1]+","+kr[2]+")",bypass:s}:null}else if(_e.regex||_e.regexes){if(_e.enums){var Mr=mr();if(Mr)return Mr}for(var qr=_e.regexes?_e.regexes:[_e.regex],Tr=0;Tr<qr.length;Tr++){var Pr=new RegExp(qr[Tr]),Br=Pr.exec(e);if(Br)return{name:a,value:_e.singleRegexMatchValue?Br[1]:Br,strValue:""+e,bypass:s}}return null}else return _e.string?{name:a,value:""+e,strValue:""+e,bypass:s}:_e.enums?mr():null};var _Style=function(e){if(!(this instanceof _Style))return new _Style(e);if(!core(e)){error("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},styfn=_Style.prototype;styfn.instanceString=function(){return"style"};styfn.clear=function(){for(var a=this._private,e=a.cy,s=e.elements(),o=0;o<this.length;o++)this[o]=void 0;return this.length=0,a.contextStyles={},a.propDiffs={},this.cleanElements(s,!0),s.forEach(function(c){var d=c[0]._private;d.styleDirty=!0,d.appliedInitStyle=!1}),this};styfn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};styfn.core=function(a){return this._private.coreStyle[a]||this.getDefaultProperty(a)};styfn.selector=function(a){var e=a==="core"?null:new Selector(a),s=this.length++;return this[s]={selector:e,properties:[],mappedProperties:[],index:s},this};styfn.css=function(){var a=this,e=arguments;if(e.length===1)for(var s=e[0],o=0;o<a.properties.length;o++){var c=a.properties[o],d=s[c.name];d===void 0&&(d=s[dash2camel(c.name)]),d!==void 0&&this.cssRule(c.name,d)}else e.length===2&&this.cssRule(e[0],e[1]);return this};styfn.style=styfn.css;styfn.cssRule=function(a,e){var s=this.parse(a,e);if(s){var o=this.length-1;this[o].properties.push(s),this[o].properties[s.name]=s,s.name.match(/pie-(\d+)-background-size/)&&s.value&&(this._private.hasPie=!0),s.name.match(/stripe-(\d+)-background-size/)&&s.value&&(this._private.hasStripe=!0),s.mapped&&this[o].mappedProperties.push(s);var c=!this[o].selector;c&&(this._private.coreStyle[s.name]=s)}return this};styfn.append=function(a){return stylesheet(a)?a.appendToStyle(this):array(a)?this.appendFromJson(a):string(a)&&this.appendFromString(a),this};_Style.fromJson=function(a,e){var s=new _Style(a);return s.fromJson(e),s};_Style.fromString=function(a,e){return new _Style(a).fromString(e)};[styfn$8,styfn$7,styfn$6,styfn$5,styfn$4,styfn$3,styfn$2,styfn$1].forEach(function(a){extend(styfn,a)});_Style.types=styfn.types;_Style.properties=styfn.properties;_Style.propertyGroups=styfn.propertyGroups;_Style.propertyGroupNames=styfn.propertyGroupNames;_Style.propertyGroupKeys=styfn.propertyGroupKeys;var corefn$2={style:function(e){if(e){var s=this.setStyle(e);s.update()}return this._private.style},setStyle:function(e){var s=this._private;return stylesheet(e)?s.style=e.generateStyle(this):array(e)?s.style=_Style.fromJson(this,e):string(e)?s.style=_Style.fromString(this,e):s.style=_Style(this),s.style},updateStyle:function(){this.mutableElements().updateStyle()}},defaultSelectionType="single",corefn$1={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var s=this._private;if(s.selectionType==null&&(s.selectionType=defaultSelectionType),e!==void 0)(e==="additive"||e==="single")&&(s.selectionType=e);else return s.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,s=this._private.pan,o,c,d,g,b;switch(e.length){case 0:return s;case 1:if(string(e[0]))return o=e[0],s[o];if(plainObject(e[0])){if(!this._private.panningEnabled)return this;d=e[0],g=d.x,b=d.y,number$1(g)&&(s.x=g),number$1(b)&&(s.y=b),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;o=e[0],c=e[1],(o==="x"||o==="y")&&number$1(c)&&(s[o]=c),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,s){var o=arguments,c=this._private.pan,d,g,b,j,_e;if(!this._private.panningEnabled)return this;switch(o.length){case 1:plainObject(e)&&(b=o[0],j=b.x,_e=b.y,number$1(j)&&(c.x+=j),number$1(_e)&&(c.y+=_e),this.emit("pan viewport"));break;case 2:d=e,g=s,(d==="x"||d==="y")&&number$1(g)&&(c[d]+=g),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,s){var o=this.getFitViewport(e,s);if(o){var c=this._private;c.zoom=o.zoom,c.pan=o.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,s){if(number$1(e)&&s===void 0&&(s=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var o;if(string(e)){var c=e;e=this.$(c)}else if(boundingBox(e)){var d=e;o={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2},o.w=o.x2-o.x1,o.h=o.y2-o.y1}else elementOrCollection(e)||(e=this.mutableElements());if(!(elementOrCollection(e)&&e.empty())){o=o||e.boundingBox();var g=this.width(),b=this.height(),j;if(s=number$1(s)?s:0,!isNaN(g)&&!isNaN(b)&&g>0&&b>0&&!isNaN(o.w)&&!isNaN(o.h)&&o.w>0&&o.h>0){j=Math.min((g-2*s)/o.w,(b-2*s)/o.h),j=j>this._private.maxZoom?this._private.maxZoom:j,j=j<this._private.minZoom?this._private.minZoom:j;var _e={x:(g-j*(o.x1+o.x2))/2,y:(b-j*(o.y1+o.y2))/2};return{zoom:j,pan:_e}}}}},zoomRange:function(e,s){var o=this._private;if(s==null){var c=e;e=c.min,s=c.max}return number$1(e)&&number$1(s)&&e<=s?(o.minZoom=e,o.maxZoom=s):number$1(e)&&s===void 0&&e<=o.maxZoom?o.minZoom=e:number$1(s)&&e===void 0&&s>=o.minZoom&&(o.maxZoom=s),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var s=this._private,o=s.pan,c=s.zoom,d,g,b=!1;if(s.zoomingEnabled||(b=!0),number$1(e)?g=e:plainObject(e)&&(g=e.level,e.position!=null?d=modelToRenderedPosition$1(e.position,c,o):e.renderedPosition!=null&&(d=e.renderedPosition),d!=null&&!s.panningEnabled&&(b=!0)),g=g>s.maxZoom?s.maxZoom:g,g=g<s.minZoom?s.minZoom:g,b||!number$1(g)||g===c||d!=null&&(!number$1(d.x)||!number$1(d.y)))return null;if(d!=null){var j=o,_e=c,er=g,rr={x:-er/_e*(d.x-j.x)+d.x,y:-er/_e*(d.y-j.y)+d.y};return{zoomed:!0,panned:!0,zoom:er,pan:rr}}else return{zoomed:!0,panned:!1,zoom:g,pan:o}},zoom:function(e){if(e===void 0)return this._private.zoom;var s=this.getZoomedViewport(e),o=this._private;return s==null||!s.zoomed?this:(o.zoom=s.zoom,s.panned&&(o.pan.x=s.pan.x,o.pan.y=s.pan.y),this.emit("zoom"+(s.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var s=this._private,o=!0,c=!0,d=[],g=!1,b=!1;if(!e)return this;if(number$1(e.zoom)||(o=!1),plainObject(e.pan)||(c=!1),!o&&!c)return this;if(o){var j=e.zoom;j<s.minZoom||j>s.maxZoom||!s.zoomingEnabled?g=!0:(s.zoom=j,d.push("zoom"))}if(c&&(!g||!e.cancelOnFailedZoom)&&s.panningEnabled){var _e=e.pan;number$1(_e.x)&&(s.pan.x=_e.x,b=!1),number$1(_e.y)&&(s.pan.y=_e.y,b=!1),b||d.push("pan")}return d.length>0&&(d.push("viewport"),this.emit(d.join(" ")),this.notify("viewport")),this},center:function(e){var s=this.getCenterPan(e);return s&&(this._private.pan=s,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,s){if(this._private.panningEnabled){if(string(e)){var o=e;e=this.mutableElements().filter(o)}else elementOrCollection(e)||(e=this.mutableElements());if(e.length!==0){var c=e.boundingBox(),d=this.width(),g=this.height();s=s===void 0?this._private.zoom:s;var b={x:(d-s*(c.x1+c.x2))/2,y:(g-s*(c.y1+c.y2))/2};return b}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,s=e.container,o=this;return e.sizeCache=e.sizeCache||(s?function(){var c=o.window().getComputedStyle(s),d=function(b){return parseFloat(c.getPropertyValue(b))};return{width:s.clientWidth-d("padding-left")-d("padding-right"),height:s.clientHeight-d("padding-top")-d("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,s=this._private.zoom,o=this.renderedExtent(),c={x1:(o.x1-e.x)/s,x2:(o.x2-e.x)/s,y1:(o.y1-e.y)/s,y2:(o.y2-e.y)/s};return c.w=c.x2-c.x1,c.h=c.y2-c.y1,c},renderedExtent:function(){var e=this.width(),s=this.height();return{x1:0,y1:0,x2:e,y2:s,w:e,h:s}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};corefn$1.centre=corefn$1.center;corefn$1.autolockNodes=corefn$1.autolock;corefn$1.autoungrabifyNodes=corefn$1.autoungrabify;var fn={data:define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:define.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:define.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};fn.attr=fn.data;fn.removeAttr=fn.removeData;var Core=function(e){var s=this;e=extend({},e);var o=e.container;o&&!htmlElement(o)&&htmlElement(o[0])&&(o=o[0]);var c=o?o._cyreg:null;c=c||{},c&&c.cy&&(c.cy.destroy(),c={});var d=c.readies=c.readies||[];o&&(o._cyreg=c),c.cy=s;var g=_window!==void 0&&o!==void 0&&!e.headless,b=e;b.layout=extend({name:g?"grid":"null"},b.layout),b.renderer=extend({name:g?"canvas":"null"},b.renderer);var j=function(ar,lr,or){return lr!==void 0?lr:or!==void 0?or:ar},_e=this._private={container:o,ready:!1,options:b,elements:new Collection(this),listeners:[],aniEles:new Collection(this),data:b.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:j(!0,b.zoomingEnabled),userZoomingEnabled:j(!0,b.userZoomingEnabled),panningEnabled:j(!0,b.panningEnabled),userPanningEnabled:j(!0,b.userPanningEnabled),boxSelectionEnabled:j(!0,b.boxSelectionEnabled),autolock:j(!1,b.autolock,b.autolockNodes),autoungrabify:j(!1,b.autoungrabify,b.autoungrabifyNodes),autounselectify:j(!1,b.autounselectify),styleEnabled:b.styleEnabled===void 0?g:b.styleEnabled,zoom:number$1(b.zoom)?b.zoom:1,pan:{x:plainObject(b.pan)&&number$1(b.pan.x)?b.pan.x:0,y:plainObject(b.pan)&&number$1(b.pan.y)?b.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:j(250,b.multiClickDebounceTime)};this.createEmitter(),this.selectionType(b.selectionType),this.zoomRange({min:b.minZoom,max:b.maxZoom});var er=function(ar,lr){var or=ar.some(promise);if(or)return Promise$1.all(ar).then(lr);lr(ar)};_e.styleEnabled&&s.setStyle([]);var rr=extend({},b,b.renderer);s.initRenderer(rr);var tr=function(ar,lr,or){s.notifications(!1);var ir=s.mutableElements();ir.length>0&&ir.remove(),ar!=null&&(plainObject(ar)||array(ar))&&s.add(ar),s.one("layoutready",function(ur){s.notifications(!0),s.emit(ur),s.one("load",lr),s.emitAndNotify("load")}).one("layoutstop",function(){s.one("done",or),s.emit("done")});var sr=extend({},s._private.options.layout);sr.eles=s.elements(),s.layout(sr).run()};er([b.style,b.elements],function(nr){var ar=nr[0],lr=nr[1];_e.styleEnabled&&s.style().append(ar),tr(lr,function(){s.startAnimationLoop(),_e.ready=!0,fn$6(b.ready)&&s.on("ready",b.ready);for(var or=0;or<d.length;or++){var ir=d[or];s.on("ready",ir)}c&&(c.readies=[]),s.emit("ready")},b.done)})},corefn=Core.prototype;extend(corefn,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return _window;var s=this._private.container.ownerDocument;return s===void 0||s==null?_window:s.defaultView||_window},mount:function(e){if(e!=null){var s=this,o=s._private,c=o.options;return!htmlElement(e)&&htmlElement(e[0])&&(e=e[0]),s.stopAnimationLoop(),s.destroyRenderer(),o.container=e,o.styleEnabled=!0,s.invalidateSize(),s.initRenderer(extend({},c,c.renderer,{name:c.renderer.name==="null"?"canvas":c.renderer.name})),s.startAnimationLoop(),s.style(c.style),s.emit("mount"),s}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return copy(this._private.options)},json:function(e){var s=this,o=s._private,c=s.mutableElements(),d=function(cr){return s.getElementById(cr.id())};if(plainObject(e)){if(s.startBatch(),e.elements){var g={},b=function(cr,fr){for(var hr=[],dr=[],vr=0;vr<cr.length;vr++){var gr=cr[vr];if(!gr.data.id){warn("cy.json() cannot handle elements without an ID attribute");continue}var pr=""+gr.data.id,mr=s.getElementById(pr);g[pr]=!0,mr.length!==0?dr.push({ele:mr,json:gr}):(fr&&(gr.group=fr),hr.push(gr))}s.add(hr);for(var yr=0;yr<dr.length;yr++){var br=dr[yr],Er=br.ele,_r=br.json;Er.json(_r)}};if(array(e.elements))b(e.elements);else for(var j=["nodes","edges"],_e=0;_e<j.length;_e++){var er=j[_e],rr=e.elements[er];array(rr)&&b(rr,er)}var tr=s.collection();c.filter(function(ur){return!g[ur.id()]}).forEach(function(ur){ur.isParent()?tr.merge(ur):ur.remove()}),tr.forEach(function(ur){return ur.children().move({parent:null})}),tr.forEach(function(ur){return d(ur).remove()})}e.style&&s.style(e.style),e.zoom!=null&&e.zoom!==o.zoom&&s.zoom(e.zoom),e.pan&&(e.pan.x!==o.pan.x||e.pan.y!==o.pan.y)&&s.pan(e.pan),e.data&&s.data(e.data);for(var nr=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],ar=0;ar<nr.length;ar++){var lr=nr[ar];e[lr]!=null&&s[lr](e[lr])}return s.endBatch(),this}else{var or=!!e,ir={};or?ir.elements=this.elements().map(function(ur){return ur.json()}):(ir.elements={},c.forEach(function(ur){var cr=ur.group();ir.elements[cr]||(ir.elements[cr]=[]),ir.elements[cr].push(ur.json())})),this._private.styleEnabled&&(ir.style=s.style().json()),ir.data=copy(s.data());var sr=o.options;return ir.zoomingEnabled=o.zoomingEnabled,ir.userZoomingEnabled=o.userZoomingEnabled,ir.zoom=o.zoom,ir.minZoom=o.minZoom,ir.maxZoom=o.maxZoom,ir.panningEnabled=o.panningEnabled,ir.userPanningEnabled=o.userPanningEnabled,ir.pan=copy(o.pan),ir.boxSelectionEnabled=o.boxSelectionEnabled,ir.renderer=copy(sr.renderer),ir.hideEdgesOnViewport=sr.hideEdgesOnViewport,ir.textureOnViewport=sr.textureOnViewport,ir.wheelSensitivity=sr.wheelSensitivity,ir.motionBlur=sr.motionBlur,ir.multiClickDebounceTime=sr.multiClickDebounceTime,ir}}});corefn.$id=corefn.getElementById;[corefn$9,corefn$8,elesfn,corefn$7,corefn$6,corefn$5,corefn$4,corefn$3,corefn$2,corefn$1,fn].forEach(function(a){extend(corefn,a)});var defaults$7={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,s){return!0},ready:void 0,stop:void 0,transform:function(e,s){return s}},deprecatedOptionDefaults={maximal:!1,acyclic:!1},getInfo=function(e){return e.scratch("breadthfirst")},setInfo=function(e,s){return e.scratch("breadthfirst",s)};function BreadthFirstLayout(a){this.options=extend({},defaults$7,deprecatedOptionDefaults,a)}BreadthFirstLayout.prototype.run=function(){var a=this.options,e=a.cy,s=a.eles,o=s.nodes().filter(function(et){return et.isChildless()}),c=s,d=a.directed,g=a.acyclic||a.maximal||a.maximalAdjustments>0,b=!!a.boundingBox,j=makeBoundingBox(b?a.boundingBox:structuredClone(e.extent())),_e;if(elementOrCollection(a.roots))_e=a.roots;else if(array(a.roots)){for(var er=[],rr=0;rr<a.roots.length;rr++){var tr=a.roots[rr],nr=e.getElementById(tr);er.push(nr)}_e=e.collection(er)}else if(string(a.roots))_e=e.$(a.roots);else if(d)_e=o.roots();else{var ar=s.components();_e=e.collection();for(var lr=function(){var Yr=ar[or],Qr=Yr.maxDegree(!1),Jr=Yr.filter(function(rt){return rt.degree(!1)===Qr});_e=_e.add(Jr)},or=0;or<ar.length;or++)lr()}var ir=[],sr={},ur=function(Yr,Qr){ir[Qr]==null&&(ir[Qr]=[]);var Jr=ir[Qr].length;ir[Qr].push(Yr),setInfo(Yr,{index:Jr,depth:Qr})},cr=function(Yr,Qr){var Jr=getInfo(Yr),rt=Jr.depth,tt=Jr.index;ir[rt][tt]=null,Yr.isChildless()&&ur(Yr,Qr)};c.bfs({roots:_e,directed:a.directed,visit:function(Yr,Qr,Jr,rt,tt){var lt=Yr[0],pt=lt.id();lt.isChildless()&&ur(lt,tt),sr[pt]=!0}});for(var fr=[],hr=0;hr<o.length;hr++){var dr=o[hr];sr[dr.id()]||fr.push(dr)}var vr=function(Yr){for(var Qr=ir[Yr],Jr=0;Jr<Qr.length;Jr++){var rt=Qr[Jr];if(rt==null){Qr.splice(Jr,1),Jr--;continue}setInfo(rt,{depth:Yr,index:Jr})}},gr=function(Yr,Qr){for(var Jr=getInfo(Yr),rt=Yr.incomers().filter(function(ct){return ct.isNode()&&s.has(ct)}),tt=-1,lt=Yr.id(),pt=0;pt<rt.length;pt++){var yt=rt[pt],gt=getInfo(yt);tt=Math.max(tt,gt.depth)}if(Jr.depth<=tt){if(!a.acyclic&&Qr[lt])return null;var bt=tt+1;return cr(Yr,bt),Qr[lt]=bt,!0}return!1};if(d&&g){var pr=[],mr={},yr=function(Yr){return pr.push(Yr)},br=function(){return pr.shift()};for(o.forEach(function(et){return pr.push(et)});pr.length>0;){var Er=br(),_r=gr(Er,mr);if(_r)Er.outgoers().filter(function(et){return et.isNode()&&s.has(et)}).forEach(yr);else if(_r===null){warn("Detected double maximal shift for node `"+Er.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var Rr=0;if(a.avoidOverlap)for(var Cr=0;Cr<o.length;Cr++){var wr=o[Cr],$r=wr.layoutDimensions(a),Ar=$r.w,Sr=$r.h;Rr=Math.max(Rr,Ar,Sr)}var kr={},Mr=function(Yr){if(kr[Yr.id()])return kr[Yr.id()];for(var Qr=getInfo(Yr).depth,Jr=Yr.neighborhood(),rt=0,tt=0,lt=0;lt<Jr.length;lt++){var pt=Jr[lt];if(!(pt.isEdge()||pt.isParent()||!o.has(pt))){var yt=getInfo(pt);if(yt!=null){var gt=yt.index,bt=yt.depth;if(!(gt==null||bt==null)){var ct=ir[bt].length;bt<Qr&&(rt+=gt/ct,tt++)}}}}return tt=Math.max(1,tt),rt=rt/tt,tt===0&&(rt=0),kr[Yr.id()]=rt,rt},qr=function(Yr,Qr){var Jr=Mr(Yr),rt=Mr(Qr),tt=Jr-rt;return tt===0?ascending(Yr.id(),Qr.id()):tt};a.depthSort!==void 0&&(qr=a.depthSort);for(var Tr=ir.length,Pr=0;Pr<Tr;Pr++)ir[Pr].sort(qr),vr(Pr);for(var Br=[],Ur=0;Ur<fr.length;Ur++)Br.push(fr[Ur]);var Nr=function(){for(var Yr=0;Yr<Tr;Yr++)vr(Yr)};Br.length&&(ir.unshift(Br),Tr=ir.length,Nr());for(var Ir=0,Dr=0;Dr<Tr;Dr++)Ir=Math.max(ir[Dr].length,Ir);var Or={x:j.x1+j.w/2,y:j.y1+j.h/2},jr=o.reduce(function(et,Yr){return function(Qr){return{w:et.w===-1?Qr.w:(et.w+Qr.w)/2,h:et.h===-1?Qr.h:(et.h+Qr.h)/2}}(Yr.boundingBox({includeLabels:a.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),Wr=Math.max(Tr===1?0:b?(j.h-a.padding*2-jr.h)/(Tr-1):(j.h-a.padding*2-jr.h)/(Tr+1),Rr),Xr=ir.reduce(function(et,Yr){return Math.max(et,Yr.length)},0),dt=function(Yr){var Qr=getInfo(Yr),Jr=Qr.depth,rt=Qr.index;if(a.circle){var tt=Math.min(j.w/2/Tr,j.h/2/Tr);tt=Math.max(tt,Rr);var lt=tt*Jr+tt-(Tr>0&&ir[0].length<=3?tt/2:0),pt=2*Math.PI/ir[Jr].length*rt;return Jr===0&&ir[0].length===1&&(lt=1),{x:Or.x+lt*Math.cos(pt),y:Or.y+lt*Math.sin(pt)}}else{var yt=ir[Jr].length,gt=Math.max(yt===1?0:b?(j.w-a.padding*2-jr.w)/((a.grid?Xr:yt)-1):(j.w-a.padding*2-jr.w)/((a.grid?Xr:yt)+1),Rr),bt={x:Or.x+(rt+1-(yt+1)/2)*gt,y:Or.y+(Jr+1-(Tr+1)/2)*Wr};return bt}},Vr={downward:0,leftward:90,upward:180,rightward:-90};Object.keys(Vr).indexOf(a.direction)===-1&&error("Invalid direction '".concat(a.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(Vr).join(", ")));var Zr=function(Yr){return rotatePosAndSkewByBox(dt(Yr),j,Vr[a.direction])};return s.nodes().layoutPositions(this,a,Zr),this};var defaults$6={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,s){return!0},ready:void 0,stop:void 0,transform:function(e,s){return s}};function CircleLayout(a){this.options=extend({},defaults$6,a)}CircleLayout.prototype.run=function(){var a=this.options,e=a,s=a.cy,o=e.eles,c=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,d=o.nodes().not(":parent");e.sort&&(d=d.sort(e.sort));for(var g=makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:s.width(),h:s.height()}),b={x:g.x1+g.w/2,y:g.y1+g.h/2},j=e.sweep===void 0?2*Math.PI-2*Math.PI/d.length:e.sweep,_e=j/Math.max(1,d.length-1),er,rr=0,tr=0;tr<d.length;tr++){var nr=d[tr],ar=nr.layoutDimensions(e),lr=ar.w,or=ar.h;rr=Math.max(rr,lr,or)}if(number$1(e.radius)?er=e.radius:d.length<=1?er=0:er=Math.min(g.h,g.w)/2-rr,d.length>1&&e.avoidOverlap){rr*=1.75;var ir=Math.cos(_e)-Math.cos(0),sr=Math.sin(_e)-Math.sin(0),ur=Math.sqrt(rr*rr/(ir*ir+sr*sr));er=Math.max(ur,er)}var cr=function(hr,dr){var vr=e.startAngle+dr*_e*(c?1:-1),gr=er*Math.cos(vr),pr=er*Math.sin(vr),mr={x:b.x+gr,y:b.y+pr};return mr};return o.nodes().layoutPositions(this,e,cr),this};var defaults$5={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,s){return!0},ready:void 0,stop:void 0,transform:function(e,s){return s}};function ConcentricLayout(a){this.options=extend({},defaults$5,a)}ConcentricLayout.prototype.run=function(){for(var a=this.options,e=a,s=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,o=a.cy,c=e.eles,d=c.nodes().not(":parent"),g=makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:o.width(),h:o.height()}),b={x:g.x1+g.w/2,y:g.y1+g.h/2},j=[],_e=0,er=0;er<d.length;er++){var rr=d[er],tr=void 0;tr=e.concentric(rr),j.push({value:tr,node:rr}),rr._private.scratch.concentric=tr}d.updateStyle();for(var nr=0;nr<d.length;nr++){var ar=d[nr],lr=ar.layoutDimensions(e);_e=Math.max(_e,lr.w,lr.h)}j.sort(function(Wr,Xr){return Xr.value-Wr.value});for(var or=e.levelWidth(d),ir=[[]],sr=ir[0],ur=0;ur<j.length;ur++){var cr=j[ur];if(sr.length>0){var fr=Math.abs(sr[0].value-cr.value);fr>=or&&(sr=[],ir.push(sr))}sr.push(cr)}var hr=_e+e.minNodeSpacing;if(!e.avoidOverlap){var dr=ir.length>0&&ir[0].length>1,vr=Math.min(g.w,g.h)/2-hr,gr=vr/(ir.length+dr?1:0);hr=Math.min(hr,gr)}for(var pr=0,mr=0;mr<ir.length;mr++){var yr=ir[mr],br=e.sweep===void 0?2*Math.PI-2*Math.PI/yr.length:e.sweep,Er=yr.dTheta=br/Math.max(1,yr.length-1);if(yr.length>1&&e.avoidOverlap){var _r=Math.cos(Er)-Math.cos(0),Rr=Math.sin(Er)-Math.sin(0),Cr=Math.sqrt(hr*hr/(_r*_r+Rr*Rr));pr=Math.max(Cr,pr)}yr.r=pr,pr+=hr}if(e.equidistant){for(var wr=0,$r=0,Ar=0;Ar<ir.length;Ar++){var Sr=ir[Ar],kr=Sr.r-$r;wr=Math.max(wr,kr)}$r=0;for(var Mr=0;Mr<ir.length;Mr++){var qr=ir[Mr];Mr===0&&($r=qr.r),qr.r=$r,$r+=wr}}for(var Tr={},Pr=0;Pr<ir.length;Pr++)for(var Br=ir[Pr],Ur=Br.dTheta,Nr=Br.r,Ir=0;Ir<Br.length;Ir++){var Dr=Br[Ir],Or=e.startAngle+(s?1:-1)*Ur*Ir,jr={x:b.x+Nr*Math.cos(Or),y:b.y+Nr*Math.sin(Or)};Tr[Dr.node.id()]=jr}return c.nodes().layoutPositions(this,e,function(Wr){var Xr=Wr.id();return Tr[Xr]}),this};var DEBUG,defaults$4={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,s){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function CoseLayout(a){this.options=extend({},defaults$4,a),this.options.layout=this;var e=this.options.eles.nodes(),s=this.options.eles.edges(),o=s.filter(function(c){var d=c.source().data("id"),g=c.target().data("id"),b=e.some(function(_e){return _e.data("id")===d}),j=e.some(function(_e){return _e.data("id")===g});return!b||!j});this.options.eles=this.options.eles.not(o)}CoseLayout.prototype.run=function(){var a=this.options,e=a.cy,s=this;s.stopped=!1,(a.animate===!0||a.animate===!1)&&s.emit({type:"layoutstart",layout:s}),a.debug===!0?DEBUG=!0:DEBUG=!1;var o=createLayoutInfo(e,s,a);DEBUG&&printLayoutInfo(o),a.randomize&&randomizePositions(o);var c=performanceNow(),d=function(){refreshPositions(o,e,a),a.fit===!0&&e.fit(a.padding)},g=function(tr){return!(s.stopped||tr>=a.numIter||(step(o,a),o.temperature=o.temperature*a.coolingFactor,o.temperature<a.minTemp))},b=function(){if(a.animate===!0||a.animate===!1)d(),s.one("layoutstop",a.stop),s.emit({type:"layoutstop",layout:s});else{var tr=a.eles.nodes(),nr=getScaleInBoundsFn(o,a,tr);tr.layoutPositions(s,a,nr)}},j=0,_e=!0;if(a.animate===!0){var er=function(){for(var tr=0;_e&&tr<a.refresh;)_e=g(j),j++,tr++;if(!_e)separateComponents(o,a),b();else{var nr=performanceNow();nr-c>=a.animationThreshold&&d(),requestAnimationFrame(er)}};er()}else{for(;_e;)_e=g(j),j++;separateComponents(o,a),b()}return this};CoseLayout.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};CoseLayout.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var createLayoutInfo=function(e,s,o){for(var c=o.eles.edges(),d=o.eles.nodes(),g=makeBoundingBox(o.boundingBox?o.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),b={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:d.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:c.size(),temperature:o.initialTemp,clientWidth:g.w,clientHeight:g.h,boundingBox:g},j=o.eles.components(),_e={},er=0;er<j.length;er++)for(var rr=j[er],tr=0;tr<rr.length;tr++){var nr=rr[tr];_e[nr.id()]=er}for(var er=0;er<b.nodeSize;er++){var ar=d[er],lr=ar.layoutDimensions(o),or={};or.isLocked=ar.locked(),or.id=ar.data("id"),or.parentId=ar.data("parent"),or.cmptId=_e[ar.id()],or.children=[],or.positionX=ar.position("x"),or.positionY=ar.position("y"),or.offsetX=0,or.offsetY=0,or.height=lr.w,or.width=lr.h,or.maxX=or.positionX+or.width/2,or.minX=or.positionX-or.width/2,or.maxY=or.positionY+or.height/2,or.minY=or.positionY-or.height/2,or.padLeft=parseFloat(ar.style("padding")),or.padRight=parseFloat(ar.style("padding")),or.padTop=parseFloat(ar.style("padding")),or.padBottom=parseFloat(ar.style("padding")),or.nodeRepulsion=fn$6(o.nodeRepulsion)?o.nodeRepulsion(ar):o.nodeRepulsion,b.layoutNodes.push(or),b.idToIndex[or.id]=er}for(var ir=[],sr=0,ur=-1,cr=[],er=0;er<b.nodeSize;er++){var ar=b.layoutNodes[er],fr=ar.parentId;fr!=null?b.layoutNodes[b.idToIndex[fr]].children.push(ar.id):(ir[++ur]=ar.id,cr.push(ar.id))}for(b.graphSet.push(cr);sr<=ur;){var hr=ir[sr++],dr=b.idToIndex[hr],nr=b.layoutNodes[dr],vr=nr.children;if(vr.length>0){b.graphSet.push(vr);for(var er=0;er<vr.length;er++)ir[++ur]=vr[er]}}for(var er=0;er<b.graphSet.length;er++)for(var gr=b.graphSet[er],tr=0;tr<gr.length;tr++){var pr=b.idToIndex[gr[tr]];b.indexToGraph[pr]=er}for(var er=0;er<b.edgeSize;er++){var mr=c[er],yr={};yr.id=mr.data("id"),yr.sourceId=mr.data("source"),yr.targetId=mr.data("target");var br=fn$6(o.idealEdgeLength)?o.idealEdgeLength(mr):o.idealEdgeLength,Er=fn$6(o.edgeElasticity)?o.edgeElasticity(mr):o.edgeElasticity,_r=b.idToIndex[yr.sourceId],Rr=b.idToIndex[yr.targetId],Cr=b.indexToGraph[_r],wr=b.indexToGraph[Rr];if(Cr!=wr){for(var $r=findLCA(yr.sourceId,yr.targetId,b),Ar=b.graphSet[$r],Sr=0,or=b.layoutNodes[_r];Ar.indexOf(or.id)===-1;)or=b.layoutNodes[b.idToIndex[or.parentId]],Sr++;for(or=b.layoutNodes[Rr];Ar.indexOf(or.id)===-1;)or=b.layoutNodes[b.idToIndex[or.parentId]],Sr++;br*=Sr*o.nestingFactor}yr.idealLength=br,yr.elasticity=Er,b.layoutEdges.push(yr)}return b},findLCA=function(e,s,o){var c=_findLCA_aux(e,s,0,o);return 2>c.count?0:c.graph},_findLCA_aux=function(e,s,o,c){var d=c.graphSet[o];if(-1<d.indexOf(e)&&-1<d.indexOf(s))return{count:2,graph:o};for(var g=0,b=0;b<d.length;b++){var j=d[b],_e=c.idToIndex[j],er=c.layoutNodes[_e].children;if(er.length!==0){var rr=c.indexToGraph[c.idToIndex[er[0]]],tr=_findLCA_aux(e,s,rr,c);if(tr.count!==0)if(tr.count===1){if(g++,g===2)break}else return tr}}return{count:g,graph:o}},printLayoutInfo,randomizePositions=function(e,s){for(var o=e.clientWidth,c=e.clientHeight,d=0;d<e.nodeSize;d++){var g=e.layoutNodes[d];g.children.length===0&&!g.isLocked&&(g.positionX=Math.random()*o,g.positionY=Math.random()*c)}},getScaleInBoundsFn=function(e,s,o){var c=e.boundingBox,d={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return s.boundingBox&&(o.forEach(function(g){var b=e.layoutNodes[e.idToIndex[g.data("id")]];d.x1=Math.min(d.x1,b.positionX),d.x2=Math.max(d.x2,b.positionX),d.y1=Math.min(d.y1,b.positionY),d.y2=Math.max(d.y2,b.positionY)}),d.w=d.x2-d.x1,d.h=d.y2-d.y1),function(g,b){var j=e.layoutNodes[e.idToIndex[g.data("id")]];if(s.boundingBox){var _e=d.w===0?.5:(j.positionX-d.x1)/d.w,er=d.h===0?.5:(j.positionY-d.y1)/d.h;return{x:c.x1+_e*c.w,y:c.y1+er*c.h}}else return{x:j.positionX,y:j.positionY}}},refreshPositions=function(e,s,o){var c=o.layout,d=o.eles.nodes(),g=getScaleInBoundsFn(e,o,d);d.positions(g),e.ready!==!0&&(e.ready=!0,c.one("layoutready",o.ready),c.emit({type:"layoutready",layout:this}))},step=function(e,s,o){calculateNodeForces(e,s),calculateEdgeForces(e),calculateGravityForces(e,s),propagateForces(e),updatePositions(e)},calculateNodeForces=function(e,s){for(var o=0;o<e.graphSet.length;o++)for(var c=e.graphSet[o],d=c.length,g=0;g<d;g++)for(var b=e.layoutNodes[e.idToIndex[c[g]]],j=g+1;j<d;j++){var _e=e.layoutNodes[e.idToIndex[c[j]]];nodeRepulsion(b,_e,e,s)}},randomDistance=function(e){return-1+2*e*Math.random()},nodeRepulsion=function(e,s,o,c){var d=e.cmptId,g=s.cmptId;if(!(d!==g&&!o.isCompound)){var b=s.positionX-e.positionX,j=s.positionY-e.positionY,_e=1;b===0&&j===0&&(b=randomDistance(_e),j=randomDistance(_e));var er=nodesOverlap(e,s,b,j);if(er>0)var rr=c.nodeOverlap*er,tr=Math.sqrt(b*b+j*j),nr=rr*b/tr,ar=rr*j/tr;else var lr=findClippingPoint(e,b,j),or=findClippingPoint(s,-1*b,-1*j),ir=or.x-lr.x,sr=or.y-lr.y,ur=ir*ir+sr*sr,tr=Math.sqrt(ur),rr=(e.nodeRepulsion+s.nodeRepulsion)/ur,nr=rr*ir/tr,ar=rr*sr/tr;e.isLocked||(e.offsetX-=nr,e.offsetY-=ar),s.isLocked||(s.offsetX+=nr,s.offsetY+=ar)}},nodesOverlap=function(e,s,o,c){if(o>0)var d=e.maxX-s.minX;else var d=s.maxX-e.minX;if(c>0)var g=e.maxY-s.minY;else var g=s.maxY-e.minY;return d>=0&&g>=0?Math.sqrt(d*d+g*g):0},findClippingPoint=function(e,s,o){var c=e.positionX,d=e.positionY,g=e.height||1,b=e.width||1,j=o/s,_e=g/b,er={};return s===0&&0<o||s===0&&0>o?(er.x=c,er.y=d+g/2,er):0<s&&-1*_e<=j&&j<=_e?(er.x=c+b/2,er.y=d+b*o/2/s,er):0>s&&-1*_e<=j&&j<=_e?(er.x=c-b/2,er.y=d-b*o/2/s,er):0<o&&(j<=-1*_e||j>=_e)?(er.x=c+g*s/2/o,er.y=d+g/2,er):(0>o&&(j<=-1*_e||j>=_e)&&(er.x=c-g*s/2/o,er.y=d-g/2),er)},calculateEdgeForces=function(e,s){for(var o=0;o<e.edgeSize;o++){var c=e.layoutEdges[o],d=e.idToIndex[c.sourceId],g=e.layoutNodes[d],b=e.idToIndex[c.targetId],j=e.layoutNodes[b],_e=j.positionX-g.positionX,er=j.positionY-g.positionY;if(!(_e===0&&er===0)){var rr=findClippingPoint(g,_e,er),tr=findClippingPoint(j,-1*_e,-1*er),nr=tr.x-rr.x,ar=tr.y-rr.y,lr=Math.sqrt(nr*nr+ar*ar),or=Math.pow(c.idealLength-lr,2)/c.elasticity;if(lr!==0)var ir=or*nr/lr,sr=or*ar/lr;else var ir=0,sr=0;g.isLocked||(g.offsetX+=ir,g.offsetY+=sr),j.isLocked||(j.offsetX-=ir,j.offsetY-=sr)}}},calculateGravityForces=function(e,s){if(s.gravity!==0)for(var o=1,c=0;c<e.graphSet.length;c++){var d=e.graphSet[c],g=d.length;if(c===0)var b=e.clientHeight/2,j=e.clientWidth/2;else var _e=e.layoutNodes[e.idToIndex[d[0]]],er=e.layoutNodes[e.idToIndex[_e.parentId]],b=er.positionX,j=er.positionY;for(var rr=0;rr<g;rr++){var tr=e.layoutNodes[e.idToIndex[d[rr]]];if(!tr.isLocked){var nr=b-tr.positionX,ar=j-tr.positionY,lr=Math.sqrt(nr*nr+ar*ar);if(lr>o){var or=s.gravity*nr/lr,ir=s.gravity*ar/lr;tr.offsetX+=or,tr.offsetY+=ir}}}}},propagateForces=function(e,s){var o=[],c=0,d=-1;for(o.push.apply(o,e.graphSet[0]),d+=e.graphSet[0].length;c<=d;){var g=o[c++],b=e.idToIndex[g],j=e.layoutNodes[b],_e=j.children;if(0<_e.length&&!j.isLocked){for(var er=j.offsetX,rr=j.offsetY,tr=0;tr<_e.length;tr++){var nr=e.layoutNodes[e.idToIndex[_e[tr]]];nr.offsetX+=er,nr.offsetY+=rr,o[++d]=_e[tr]}j.offsetX=0,j.offsetY=0}}},updatePositions=function(e,s){for(var o=0;o<e.nodeSize;o++){var c=e.layoutNodes[o];0<c.children.length&&(c.maxX=void 0,c.minX=void 0,c.maxY=void 0,c.minY=void 0)}for(var o=0;o<e.nodeSize;o++){var c=e.layoutNodes[o];if(!(0<c.children.length||c.isLocked)){var d=limitForce(c.offsetX,c.offsetY,e.temperature);c.positionX+=d.x,c.positionY+=d.y,c.offsetX=0,c.offsetY=0,c.minX=c.positionX-c.width,c.maxX=c.positionX+c.width,c.minY=c.positionY-c.height,c.maxY=c.positionY+c.height,_updateAncestryBoundaries(c,e)}}for(var o=0;o<e.nodeSize;o++){var c=e.layoutNodes[o];0<c.children.length&&!c.isLocked&&(c.positionX=(c.maxX+c.minX)/2,c.positionY=(c.maxY+c.minY)/2,c.width=c.maxX-c.minX,c.height=c.maxY-c.minY)}},limitForce=function(e,s,o){var c=Math.sqrt(e*e+s*s);if(c>o)var d={x:o*e/c,y:o*s/c};else var d={x:e,y:s};return d},_updateAncestryBoundaries=function(e,s){var o=e.parentId;if(o!=null){var c=s.layoutNodes[s.idToIndex[o]],d=!1;if((c.maxX==null||e.maxX+c.padRight>c.maxX)&&(c.maxX=e.maxX+c.padRight,d=!0),(c.minX==null||e.minX-c.padLeft<c.minX)&&(c.minX=e.minX-c.padLeft,d=!0),(c.maxY==null||e.maxY+c.padBottom>c.maxY)&&(c.maxY=e.maxY+c.padBottom,d=!0),(c.minY==null||e.minY-c.padTop<c.minY)&&(c.minY=e.minY-c.padTop,d=!0),d)return _updateAncestryBoundaries(c,s)}},separateComponents=function(e,s){for(var o=e.layoutNodes,c=[],d=0;d<o.length;d++){var g=o[d],b=g.cmptId,j=c[b]=c[b]||[];j.push(g)}for(var _e=0,d=0;d<c.length;d++){var er=c[d];if(er){er.x1=1/0,er.x2=-1/0,er.y1=1/0,er.y2=-1/0;for(var rr=0;rr<er.length;rr++){var tr=er[rr];er.x1=Math.min(er.x1,tr.positionX-tr.width/2),er.x2=Math.max(er.x2,tr.positionX+tr.width/2),er.y1=Math.min(er.y1,tr.positionY-tr.height/2),er.y2=Math.max(er.y2,tr.positionY+tr.height/2)}er.w=er.x2-er.x1,er.h=er.y2-er.y1,_e+=er.w*er.h}}c.sort(function(sr,ur){return ur.w*ur.h-sr.w*sr.h});for(var nr=0,ar=0,lr=0,or=0,ir=Math.sqrt(_e)*e.clientWidth/e.clientHeight,d=0;d<c.length;d++){var er=c[d];if(er){for(var rr=0;rr<er.length;rr++){var tr=er[rr];tr.isLocked||(tr.positionX+=nr-er.x1,tr.positionY+=ar-er.y1)}nr+=er.w+s.componentSpacing,lr+=er.w+s.componentSpacing,or=Math.max(or,er.h),lr>ir&&(ar+=or+s.componentSpacing,nr=0,lr=0,or=0)}}},defaults$3={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,s){return!0},ready:void 0,stop:void 0,transform:function(e,s){return s}};function GridLayout(a){this.options=extend({},defaults$3,a)}GridLayout.prototype.run=function(){var a=this.options,e=a,s=a.cy,o=e.eles,c=o.nodes().not(":parent");e.sort&&(c=c.sort(e.sort));var d=makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:s.width(),h:s.height()});if(d.h===0||d.w===0)o.nodes().layoutPositions(this,e,function(Mr){return{x:d.x1,y:d.y1}});else{var g=c.size(),b=Math.sqrt(g*d.h/d.w),j=Math.round(b),_e=Math.round(d.w/d.h*b),er=function(qr){if(qr==null)return Math.min(j,_e);var Tr=Math.min(j,_e);Tr==j?j=qr:_e=qr},rr=function(qr){if(qr==null)return Math.max(j,_e);var Tr=Math.max(j,_e);Tr==j?j=qr:_e=qr},tr=e.rows,nr=e.cols!=null?e.cols:e.columns;if(tr!=null&&nr!=null)j=tr,_e=nr;else if(tr!=null&&nr==null)j=tr,_e=Math.ceil(g/j);else if(tr==null&&nr!=null)_e=nr,j=Math.ceil(g/_e);else if(_e*j>g){var ar=er(),lr=rr();(ar-1)*lr>=g?er(ar-1):(lr-1)*ar>=g&&rr(lr-1)}else for(;_e*j<g;){var or=er(),ir=rr();(ir+1)*or>=g?rr(ir+1):er(or+1)}var sr=d.w/_e,ur=d.h/j;if(e.condense&&(sr=0,ur=0),e.avoidOverlap)for(var cr=0;cr<c.length;cr++){var fr=c[cr],hr=fr._private.position;(hr.x==null||hr.y==null)&&(hr.x=0,hr.y=0);var dr=fr.layoutDimensions(e),vr=e.avoidOverlapPadding,gr=dr.w+vr,pr=dr.h+vr;sr=Math.max(sr,gr),ur=Math.max(ur,pr)}for(var mr={},yr=function(qr,Tr){return!!mr["c-"+qr+"-"+Tr]},br=function(qr,Tr){mr["c-"+qr+"-"+Tr]=!0},Er=0,_r=0,Rr=function(){_r++,_r>=_e&&(_r=0,Er++)},Cr={},wr=0;wr<c.length;wr++){var $r=c[wr],Ar=e.position($r);if(Ar&&(Ar.row!==void 0||Ar.col!==void 0)){var Sr={row:Ar.row,col:Ar.col};if(Sr.col===void 0)for(Sr.col=0;yr(Sr.row,Sr.col);)Sr.col++;else if(Sr.row===void 0)for(Sr.row=0;yr(Sr.row,Sr.col);)Sr.row++;Cr[$r.id()]=Sr,br(Sr.row,Sr.col)}}var kr=function(qr,Tr){var Pr,Br;if(qr.locked()||qr.isParent())return!1;var Ur=Cr[qr.id()];if(Ur)Pr=Ur.col*sr+sr/2+d.x1,Br=Ur.row*ur+ur/2+d.y1;else{for(;yr(Er,_r);)Rr();Pr=_r*sr+sr/2+d.x1,Br=Er*ur+ur/2+d.y1,br(Er,_r),Rr()}return{x:Pr,y:Br}};c.layoutPositions(this,e,kr)}return this};var defaults$2={ready:function(){},stop:function(){}};function NullLayout(a){this.options=extend({},defaults$2,a)}NullLayout.prototype.run=function(){var a=this.options,e=a.eles,s=this;return a.cy,s.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),s.one("layoutready",a.ready),s.emit("layoutready"),s.one("layoutstop",a.stop),s.emit("layoutstop"),this};NullLayout.prototype.stop=function(){return this};var defaults$1={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,s){return!0},ready:void 0,stop:void 0,transform:function(e,s){return s}};function PresetLayout(a){this.options=extend({},defaults$1,a)}PresetLayout.prototype.run=function(){var a=this.options,e=a.eles,s=e.nodes(),o=fn$6(a.positions);function c(d){if(a.positions==null)return copyPosition(d.position());if(o)return a.positions(d);var g=a.positions[d._private.data.id];return g??null}return s.layoutPositions(this,a,function(d,g){var b=c(d);return d.locked()||b==null?!1:b}),this};var defaults={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,s){return!0},ready:void 0,stop:void 0,transform:function(e,s){return s}};function RandomLayout(a){this.options=extend({},defaults,a)}RandomLayout.prototype.run=function(){var a=this.options,e=a.cy,s=a.eles,o=makeBoundingBox(a.boundingBox?a.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),c=function(g,b){return{x:o.x1+Math.round(Math.random()*o.w),y:o.y1+Math.round(Math.random()*o.h)}};return s.nodes().layoutPositions(this,a,c),this};var layout=[{name:"breadthfirst",impl:BreadthFirstLayout},{name:"circle",impl:CircleLayout},{name:"concentric",impl:ConcentricLayout},{name:"cose",impl:CoseLayout},{name:"grid",impl:GridLayout},{name:"null",impl:NullLayout},{name:"preset",impl:PresetLayout},{name:"random",impl:RandomLayout}];function NullRenderer(a){this.options=a,this.notifications=0}var noop=function(){},throwImgErr=function(){throw new Error("A headless instance can not render images")};NullRenderer.prototype={recalculateRenderedStyle:noop,notify:function(){this.notifications++},init:noop,isHeadless:function(){return!0},png:throwImgErr,jpg:throwImgErr};var BRp$f={};BRp$f.arrowShapeWidth=.3;BRp$f.registerArrowShapes=function(){var a=this.arrowShapes={},e=this,s=function(_e,er,rr,tr,nr,ar,lr){var or=nr.x-rr/2-lr,ir=nr.x+rr/2+lr,sr=nr.y-rr/2-lr,ur=nr.y+rr/2+lr,cr=or<=_e&&_e<=ir&&sr<=er&&er<=ur;return cr},o=function(_e,er,rr,tr,nr){var ar=_e*Math.cos(tr)-er*Math.sin(tr),lr=_e*Math.sin(tr)+er*Math.cos(tr),or=ar*rr,ir=lr*rr,sr=or+nr.x,ur=ir+nr.y;return{x:sr,y:ur}},c=function(_e,er,rr,tr){for(var nr=[],ar=0;ar<_e.length;ar+=2){var lr=_e[ar],or=_e[ar+1];nr.push(o(lr,or,er,rr,tr))}return nr},d=function(_e){for(var er=[],rr=0;rr<_e.length;rr++){var tr=_e[rr];er.push(tr.x,tr.y)}return er},g=function(_e){return _e.pstyle("width").pfValue*_e.pstyle("arrow-scale").pfValue*2},b=function(_e,er){string(er)&&(er=a[er]),a[_e]=extend({name:_e,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(tr,nr,ar,lr,or,ir){var sr=d(c(this.points,ar+2*ir,lr,or)),ur=pointInsidePolygonPoints(tr,nr,sr);return ur},roughCollide:s,draw:function(tr,nr,ar,lr){var or=c(this.points,nr,ar,lr);e.arrowShapeImpl("polygon")(tr,or)},spacing:function(tr){return 0},gap:g},er)};b("none",{collide:falsify,roughCollide:falsify,draw:noop$1,spacing:zeroify,gap:zeroify}),b("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),b("arrow","triangle"),b("triangle-backcurve",{points:a.triangle.points,controlPoint:[0,-.15],roughCollide:s,draw:function(_e,er,rr,tr,nr){var ar=c(this.points,er,rr,tr),lr=this.controlPoint,or=o(lr[0],lr[1],er,rr,tr);e.arrowShapeImpl(this.name)(_e,ar,or)},gap:function(_e){return g(_e)*.8}}),b("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(_e,er,rr,tr,nr,ar,lr){var or=d(c(this.points,rr+2*lr,tr,nr)),ir=d(c(this.pointsTee,rr+2*lr,tr,nr)),sr=pointInsidePolygonPoints(_e,er,or)||pointInsidePolygonPoints(_e,er,ir);return sr},draw:function(_e,er,rr,tr,nr){var ar=c(this.points,er,rr,tr),lr=c(this.pointsTee,er,rr,tr);e.arrowShapeImpl(this.name)(_e,ar,lr)}}),b("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(_e,er,rr,tr,nr,ar,lr){var or=nr,ir=Math.pow(or.x-_e,2)+Math.pow(or.y-er,2)<=Math.pow((rr+2*lr)*this.radius,2),sr=d(c(this.points,rr+2*lr,tr,nr));return pointInsidePolygonPoints(_e,er,sr)||ir},draw:function(_e,er,rr,tr,nr){var ar=c(this.pointsTr,er,rr,tr);e.arrowShapeImpl(this.name)(_e,ar,tr.x,tr.y,this.radius*er)},spacing:function(_e){return e.getArrowWidth(_e.pstyle("width").pfValue,_e.pstyle("arrow-scale").value)*this.radius}}),b("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(_e,er){var rr=this.baseCrossLinePts.slice(),tr=er/_e,nr=3,ar=5;return rr[nr]=rr[nr]-tr,rr[ar]=rr[ar]-tr,rr},collide:function(_e,er,rr,tr,nr,ar,lr){var or=d(c(this.points,rr+2*lr,tr,nr)),ir=d(c(this.crossLinePts(rr,ar),rr+2*lr,tr,nr)),sr=pointInsidePolygonPoints(_e,er,or)||pointInsidePolygonPoints(_e,er,ir);return sr},draw:function(_e,er,rr,tr,nr){var ar=c(this.points,er,rr,tr),lr=c(this.crossLinePts(er,nr),er,rr,tr);e.arrowShapeImpl(this.name)(_e,ar,lr)}}),b("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(_e){return g(_e)*.525}}),b("circle",{radius:.15,collide:function(_e,er,rr,tr,nr,ar,lr){var or=nr,ir=Math.pow(or.x-_e,2)+Math.pow(or.y-er,2)<=Math.pow((rr+2*lr)*this.radius,2);return ir},draw:function(_e,er,rr,tr,nr){e.arrowShapeImpl(this.name)(_e,tr.x,tr.y,this.radius*er)},spacing:function(_e){return e.getArrowWidth(_e.pstyle("width").pfValue,_e.pstyle("arrow-scale").value)*this.radius}}),b("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(_e){return 1},gap:function(_e){return 1}}),b("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),b("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(_e){return _e.pstyle("width").pfValue*_e.pstyle("arrow-scale").value}}),b("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(_e){return .95*_e.pstyle("width").pfValue*_e.pstyle("arrow-scale").value}})};var BRp$e={};BRp$e.projectIntoViewport=function(a,e){var s=this.cy,o=this.findContainerClientCoords(),c=o[0],d=o[1],g=o[4],b=s.pan(),j=s.zoom(),_e=((a-c)/g-b.x)/j,er=((e-d)/g-b.y)/j;return[_e,er]};BRp$e.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var a=this.container,e=a.getBoundingClientRect(),s=this.cy.window().getComputedStyle(a),o=function(ir){return parseFloat(s.getPropertyValue(ir))},c={left:o("padding-left"),right:o("padding-right"),top:o("padding-top"),bottom:o("padding-bottom")},d={left:o("border-left-width"),right:o("border-right-width"),top:o("border-top-width"),bottom:o("border-bottom-width")},g=a.clientWidth,b=a.clientHeight,j=c.left+c.right,_e=c.top+c.bottom,er=d.left+d.right,rr=e.width/(g+er),tr=g-j,nr=b-_e,ar=e.left+c.left+d.left,lr=e.top+c.top+d.top;return this.containerBB=[ar,lr,tr,nr,rr]};BRp$e.invalidateContainerClientCoordsCache=function(){this.containerBB=null};BRp$e.findNearestElement=function(a,e,s,o){return this.findNearestElements(a,e,s,o)[0]};BRp$e.findNearestElements=function(a,e,s,o){var c=this,d=this,g=d.getCachedZSortedEles(),b=[],j=d.cy.zoom(),_e=d.cy.hasCompoundNodes(),er=(o?24:8)/j,rr=(o?8:2)/j,tr=(o?8:2)/j,nr=1/0,ar,lr;s&&(g=g.interactive);function or(dr,vr){if(dr.isNode()){if(lr)return;lr=dr,b.push(dr)}if(dr.isEdge()&&(vr==null||vr<nr))if(ar){if(ar.pstyle("z-compound-depth").value===dr.pstyle("z-compound-depth").value&&ar.pstyle("z-compound-depth").value===dr.pstyle("z-compound-depth").value){for(var gr=0;gr<b.length;gr++)if(b[gr].isEdge()){b[gr]=dr,ar=dr,nr=vr??nr;break}}}else b.push(dr),ar=dr,nr=vr??nr}function ir(dr){var vr=dr.outerWidth()+2*rr,gr=dr.outerHeight()+2*rr,pr=vr/2,mr=gr/2,yr=dr.position(),br=dr.pstyle("corner-radius").value==="auto"?"auto":dr.pstyle("corner-radius").pfValue,Er=dr._private.rscratch;if(yr.x-pr<=a&&a<=yr.x+pr&&yr.y-mr<=e&&e<=yr.y+mr){var _r=d.nodeShapes[c.getNodeShape(dr)];if(_r.checkPoint(a,e,0,vr,gr,yr.x,yr.y,br,Er))return or(dr,0),!0}}function sr(dr){var vr=dr._private,gr=vr.rscratch,pr=dr.pstyle("width").pfValue,mr=dr.pstyle("arrow-scale").value,yr=pr/2+er,br=yr*yr,Er=yr*2,wr=vr.source,$r=vr.target,_r;if(gr.edgeType==="segments"||gr.edgeType==="straight"||gr.edgeType==="haystack"){for(var Rr=gr.allpts,Cr=0;Cr+3<Rr.length;Cr+=2)if(inLineVicinity(a,e,Rr[Cr],Rr[Cr+1],Rr[Cr+2],Rr[Cr+3],Er)&&br>(_r=sqdistToFiniteLine(a,e,Rr[Cr],Rr[Cr+1],Rr[Cr+2],Rr[Cr+3])))return or(dr,_r),!0}else if(gr.edgeType==="bezier"||gr.edgeType==="multibezier"||gr.edgeType==="self"||gr.edgeType==="compound"){for(var Rr=gr.allpts,Cr=0;Cr+5<gr.allpts.length;Cr+=4)if(inBezierVicinity(a,e,Rr[Cr],Rr[Cr+1],Rr[Cr+2],Rr[Cr+3],Rr[Cr+4],Rr[Cr+5],Er)&&br>(_r=sqdistToQuadraticBezier(a,e,Rr[Cr],Rr[Cr+1],Rr[Cr+2],Rr[Cr+3],Rr[Cr+4],Rr[Cr+5])))return or(dr,_r),!0}for(var wr=wr||vr.source,$r=$r||vr.target,Ar=c.getArrowWidth(pr,mr),Sr=[{name:"source",x:gr.arrowStartX,y:gr.arrowStartY,angle:gr.srcArrowAngle},{name:"target",x:gr.arrowEndX,y:gr.arrowEndY,angle:gr.tgtArrowAngle},{name:"mid-source",x:gr.midX,y:gr.midY,angle:gr.midsrcArrowAngle},{name:"mid-target",x:gr.midX,y:gr.midY,angle:gr.midtgtArrowAngle}],Cr=0;Cr<Sr.length;Cr++){var kr=Sr[Cr],Mr=d.arrowShapes[dr.pstyle(kr.name+"-arrow-shape").value],qr=dr.pstyle("width").pfValue;if(Mr.roughCollide(a,e,Ar,kr.angle,{x:kr.x,y:kr.y},qr,er)&&Mr.collide(a,e,Ar,kr.angle,{x:kr.x,y:kr.y},qr,er))return or(dr),!0}_e&&b.length>0&&(ir(wr),ir($r))}function ur(dr,vr,gr){return getPrefixedProperty(dr,vr,gr)}function cr(dr,vr){var gr=dr._private,pr=tr,mr;vr?mr=vr+"-":mr="",dr.boundingBox();var yr=gr.labelBounds[vr||"main"],br=dr.pstyle(mr+"label").value,Er=dr.pstyle("text-events").strValue==="yes";if(!(!Er||!br)){var _r=ur(gr.rscratch,"labelX",vr),Rr=ur(gr.rscratch,"labelY",vr),Cr=ur(gr.rscratch,"labelAngle",vr),wr=dr.pstyle(mr+"text-margin-x").pfValue,$r=dr.pstyle(mr+"text-margin-y").pfValue,Ar=yr.x1-pr-wr,Sr=yr.x2+pr-wr,kr=yr.y1-pr-$r,Mr=yr.y2+pr-$r;if(Cr){var qr=Math.cos(Cr),Tr=Math.sin(Cr),Pr=function(jr,Wr){return jr=jr-_r,Wr=Wr-Rr,{x:jr*qr-Wr*Tr+_r,y:jr*Tr+Wr*qr+Rr}},Br=Pr(Ar,kr),Ur=Pr(Ar,Mr),Nr=Pr(Sr,kr),Ir=Pr(Sr,Mr),Dr=[Br.x+wr,Br.y+$r,Nr.x+wr,Nr.y+$r,Ir.x+wr,Ir.y+$r,Ur.x+wr,Ur.y+$r];if(pointInsidePolygonPoints(a,e,Dr))return or(dr),!0}else if(inBoundingBox(yr,a,e))return or(dr),!0}}for(var fr=g.length-1;fr>=0;fr--){var hr=g[fr];hr.isNode()?ir(hr)||cr(hr):sr(hr)||cr(hr)||cr(hr,"source")||cr(hr,"target")}return b};BRp$e.getAllInBox=function(a,e,s,o){var c=this.getCachedZSortedEles().interactive,d=this.cy.zoom(),g=2/d,b=[],j=Math.min(a,s),_e=Math.max(a,s),er=Math.min(e,o),rr=Math.max(e,o);a=j,s=_e,e=er,o=rr;var tr=makeBoundingBox({x1:a,y1:e,x2:s,y2:o}),nr=[{x:tr.x1,y:tr.y1},{x:tr.x2,y:tr.y1},{x:tr.x2,y:tr.y2},{x:tr.x1,y:tr.y2}],ar=[[nr[0],nr[1]],[nr[1],nr[2]],[nr[2],nr[3]],[nr[3],nr[0]]];function lr(jr,Wr,Xr){return getPrefixedProperty(jr,Wr,Xr)}function or(jr,Wr){var Xr=jr._private,dt=g,Vr="";jr.boundingBox();var Zr=Xr.labelBounds.main;if(!Zr)return null;var et=lr(Xr.rscratch,"labelX",Wr),Yr=lr(Xr.rscratch,"labelY",Wr),Qr=lr(Xr.rscratch,"labelAngle",Wr),Jr=jr.pstyle(Vr+"text-margin-x").pfValue,rt=jr.pstyle(Vr+"text-margin-y").pfValue,tt=Zr.x1-dt-Jr,lt=Zr.x2+dt-Jr,pt=Zr.y1-dt-rt,yt=Zr.y2+dt-rt;if(Qr){var gt=Math.cos(Qr),bt=Math.sin(Qr),ct=function(Gr,xr){return Gr=Gr-et,xr=xr-Yr,{x:Gr*gt-xr*bt+et,y:Gr*bt+xr*gt+Yr}};return[ct(tt,pt),ct(lt,pt),ct(lt,yt),ct(tt,yt)]}else return[{x:tt,y:pt},{x:lt,y:pt},{x:lt,y:yt},{x:tt,y:yt}]}function ir(jr,Wr,Xr,dt){function Vr(Zr,et,Yr){return(Yr.y-Zr.y)*(et.x-Zr.x)>(et.y-Zr.y)*(Yr.x-Zr.x)}return Vr(jr,Xr,dt)!==Vr(Wr,Xr,dt)&&Vr(jr,Wr,Xr)!==Vr(jr,Wr,dt)}for(var sr=0;sr<c.length;sr++){var ur=c[sr];if(ur.isNode()){var cr=ur,fr=cr.pstyle("text-events").strValue==="yes",hr=cr.pstyle("box-selection").strValue,dr=cr.pstyle("box-select-labels").strValue==="yes";if(hr==="none")continue;var vr=(hr==="overlap"||dr)&&fr,gr=cr.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:vr});if(hr==="contain"){var pr=!1;if(dr&&fr){var mr=or(cr);mr&&satPolygonIntersection(mr,nr)&&(b.push(cr),pr=!0)}!pr&&boundingBoxInBoundingBox(tr,gr)&&b.push(cr)}else if(hr==="overlap"&&boundingBoxesIntersect(tr,gr)){var yr=cr.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),br=[{x:yr.x1,y:yr.y1},{x:yr.x2,y:yr.y1},{x:yr.x2,y:yr.y2},{x:yr.x1,y:yr.y2}];if(satPolygonIntersection(br,nr))b.push(cr);else{var Er=or(cr);Er&&satPolygonIntersection(Er,nr)&&b.push(cr)}}}else{var _r=ur,Rr=_r._private,Cr=Rr.rscratch,wr=_r.pstyle("box-selection").strValue;if(wr==="none")continue;if(wr==="contain"){if(Cr.startX!=null&&Cr.startY!=null&&!inBoundingBox(tr,Cr.startX,Cr.startY)||Cr.endX!=null&&Cr.endY!=null&&!inBoundingBox(tr,Cr.endX,Cr.endY))continue;if(Cr.edgeType==="bezier"||Cr.edgeType==="multibezier"||Cr.edgeType==="self"||Cr.edgeType==="compound"||Cr.edgeType==="segments"||Cr.edgeType==="haystack"){for(var $r=Rr.rstyle.bezierPts||Rr.rstyle.linePts||Rr.rstyle.haystackPts,Ar=!0,Sr=0;Sr<$r.length;Sr++)if(!pointInBoundingBox(tr,$r[Sr])){Ar=!1;break}Ar&&b.push(_r)}else Cr.edgeType==="straight"&&b.push(_r)}else if(wr==="overlap"){var kr=!1;if(Cr.startX!=null&&Cr.startY!=null&&Cr.endX!=null&&Cr.endY!=null&&(inBoundingBox(tr,Cr.startX,Cr.startY)||inBoundingBox(tr,Cr.endX,Cr.endY)))b.push(_r),kr=!0;else if(!kr&&Cr.edgeType==="haystack"){for(var Mr=Rr.rstyle.haystackPts,qr=0;qr<Mr.length;qr++)if(pointInBoundingBox(tr,Mr[qr])){b.push(_r),kr=!0;break}}if(!kr){var Tr=Rr.rstyle.bezierPts||Rr.rstyle.linePts||Rr.rstyle.haystackPts;if((!Tr||Tr.length<2)&&Cr.edgeType==="straight"&&Cr.startX!=null&&Cr.startY!=null&&Cr.endX!=null&&Cr.endY!=null&&(Tr=[{x:Cr.startX,y:Cr.startY},{x:Cr.endX,y:Cr.endY}]),!Tr||Tr.length<2)continue;for(var Pr=0;Pr<Tr.length-1;Pr++){for(var Br=Tr[Pr],Ur=Tr[Pr+1],Nr=0;Nr<ar.length;Nr++){var Ir=_slicedToArray$1(ar[Nr],2),Dr=Ir[0],Or=Ir[1];if(ir(Br,Ur,Dr,Or)){b.push(_r),kr=!0;break}}if(kr)break}}}}}return b};var BRp$d={};BRp$d.calculateArrowAngles=function(a){var e=a._private.rscratch,s=e.edgeType==="haystack",o=e.edgeType==="bezier",c=e.edgeType==="multibezier",d=e.edgeType==="segments",g=e.edgeType==="compound",b=e.edgeType==="self",j,_e,er,rr,tr,nr,ir,sr;if(s?(er=e.haystackPts[0],rr=e.haystackPts[1],tr=e.haystackPts[2],nr=e.haystackPts[3]):(er=e.arrowStartX,rr=e.arrowStartY,tr=e.arrowEndX,nr=e.arrowEndY),ir=e.midX,sr=e.midY,d)j=er-e.segpts[0],_e=rr-e.segpts[1];else if(c||g||b||o){var ar=e.allpts,lr=qbezierAt(ar[0],ar[2],ar[4],.1),or=qbezierAt(ar[1],ar[3],ar[5],.1);j=er-lr,_e=rr-or}else j=er-ir,_e=rr-sr;e.srcArrowAngle=getAngleFromDisp(j,_e);var ir=e.midX,sr=e.midY;if(s&&(ir=(er+tr)/2,sr=(rr+nr)/2),j=tr-er,_e=nr-rr,d){var ar=e.allpts;if(ar.length/2%2===0){var ur=ar.length/2,cr=ur-2;j=ar[ur]-ar[cr],_e=ar[ur+1]-ar[cr+1]}else if(e.isRound)j=e.midVector[1],_e=-e.midVector[0];else{var ur=ar.length/2-1,cr=ur-2;j=ar[ur]-ar[cr],_e=ar[ur+1]-ar[cr+1]}}else if(c||g||b){var ar=e.allpts,fr=e.ctrlpts,hr,dr,vr,gr;if(fr.length/2%2===0){var pr=ar.length/2-1,mr=pr+2,yr=mr+2;hr=qbezierAt(ar[pr],ar[mr],ar[yr],0),dr=qbezierAt(ar[pr+1],ar[mr+1],ar[yr+1],0),vr=qbezierAt(ar[pr],ar[mr],ar[yr],1e-4),gr=qbezierAt(ar[pr+1],ar[mr+1],ar[yr+1],1e-4)}else{var mr=ar.length/2-1,pr=mr-2,yr=mr+2;hr=qbezierAt(ar[pr],ar[mr],ar[yr],.4999),dr=qbezierAt(ar[pr+1],ar[mr+1],ar[yr+1],.4999),vr=qbezierAt(ar[pr],ar[mr],ar[yr],.5),gr=qbezierAt(ar[pr+1],ar[mr+1],ar[yr+1],.5)}j=vr-hr,_e=gr-dr}if(e.midtgtArrowAngle=getAngleFromDisp(j,_e),e.midDispX=j,e.midDispY=_e,j*=-1,_e*=-1,d){var ar=e.allpts;if(ar.length/2%2!==0){if(!e.isRound){var ur=ar.length/2-1,br=ur+2;j=-(ar[br]-ar[ur]),_e=-(ar[br+1]-ar[ur+1])}}}if(e.midsrcArrowAngle=getAngleFromDisp(j,_e),d)j=tr-e.segpts[e.segpts.length-2],_e=nr-e.segpts[e.segpts.length-1];else if(c||g||b||o){var ar=e.allpts,Er=ar.length,lr=qbezierAt(ar[Er-6],ar[Er-4],ar[Er-2],.9),or=qbezierAt(ar[Er-5],ar[Er-3],ar[Er-1],.9);j=tr-lr,_e=nr-or}else j=tr-ir,_e=nr-sr;e.tgtArrowAngle=getAngleFromDisp(j,_e)};BRp$d.getArrowWidth=BRp$d.getArrowHeight=function(a,e){var s=this.arrowWidthCache=this.arrowWidthCache||{},o=s[a+", "+e];return o||(o=Math.max(Math.pow(a*13.37,.9),29)*e,s[a+", "+e]=o,o)};var x,y,v1={},v2={},sinA,sinA90,radDirection,drawDirection,angle,halfAngle,cRadius,lenOut,radius,limit,startX,startY,stopX,stopY,lastPoint,asVec=function(e,s,o){o.x=s.x-e.x,o.y=s.y-e.y,o.len=Math.sqrt(o.x*o.x+o.y*o.y),o.nx=o.x/o.len,o.ny=o.y/o.len,o.ang=Math.atan2(o.ny,o.nx)},invertVec=function(e,s){s.x=e.x*-1,s.y=e.y*-1,s.nx=e.nx*-1,s.ny=e.ny*-1,s.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},calcCornerArc=function(e,s,o,c,d){if(e!==lastPoint?asVec(s,e,v1):invertVec(v2,v1),asVec(s,o,v2),sinA=v1.nx*v2.ny-v1.ny*v2.nx,sinA90=v1.nx*v2.nx-v1.ny*-v2.ny,angle=Math.asin(Math.max(-1,Math.min(1,sinA))),Math.abs(angle)<1e-6){x=s.x,y=s.y,cRadius=radius=0;return}radDirection=1,drawDirection=!1,sinA90<0?angle<0?angle=Math.PI+angle:(angle=Math.PI-angle,radDirection=-1,drawDirection=!0):angle>0&&(radDirection=-1,drawDirection=!0),s.radius!==void 0?radius=s.radius:radius=c,halfAngle=angle/2,limit=Math.min(v1.len/2,v2.len/2),d?(lenOut=Math.abs(Math.cos(halfAngle)*radius/Math.sin(halfAngle)),lenOut>limit?(lenOut=limit,cRadius=Math.abs(lenOut*Math.sin(halfAngle)/Math.cos(halfAngle))):cRadius=radius):(lenOut=Math.min(limit,radius),cRadius=Math.abs(lenOut*Math.sin(halfAngle)/Math.cos(halfAngle))),stopX=s.x+v2.nx*lenOut,stopY=s.y+v2.ny*lenOut,x=stopX-v2.ny*cRadius*radDirection,y=stopY+v2.nx*cRadius*radDirection,startX=s.x+v1.nx*lenOut,startY=s.y+v1.ny*lenOut,lastPoint=s};function drawPreparedRoundCorner(a,e){e.radius===0?a.lineTo(e.cx,e.cy):a.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function getRoundCorner(a,e,s,o){var c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return o===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(calcCornerArc(a,e,s,o,c),{cx:x,cy:y,radius:cRadius,startX,startY,stopX,stopY,startAngle:v1.ang+Math.PI/2*radDirection,endAngle:v2.ang-Math.PI/2*radDirection,counterClockwise:drawDirection})}var AVOID_IMPOSSIBLE_BEZIER_CONSTANT=.01,AVOID_IMPOSSIBLE_BEZIER_CONSTANT_L=Math.sqrt(2*AVOID_IMPOSSIBLE_BEZIER_CONSTANT),BRp$c={};BRp$c.findMidptPtsEtc=function(a,e){var s=e.posPts,o=e.intersectionPts,c=e.vectorNormInverse,d,g=a.pstyle("source-endpoint"),b=a.pstyle("target-endpoint"),j=g.units!=null&&b.units!=null,_e=function(fr,hr,dr,vr){var gr=vr-hr,pr=dr-fr,mr=Math.sqrt(pr*pr+gr*gr);return{x:-gr/mr,y:pr/mr}},er=a.pstyle("edge-distances").value;switch(er){case"node-position":d=s;break;case"intersection":d=o;break;case"endpoints":{if(j){var rr=this.manualEndptToPx(a.source()[0],g),tr=_slicedToArray$1(rr,2),nr=tr[0],ar=tr[1],lr=this.manualEndptToPx(a.target()[0],b),or=_slicedToArray$1(lr,2),ir=or[0],sr=or[1],ur={x1:nr,y1:ar,x2:ir,y2:sr};c=_e(nr,ar,ir,sr),d=ur}else warn("Edge ".concat(a.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),d=o;break}}return{midptPts:d,vectorNormInverse:c}};BRp$c.findHaystackPoints=function(a){for(var e=0;e<a.length;e++){var s=a[e],o=s._private,c=o.rscratch;if(!c.haystack){var d=Math.random()*2*Math.PI;c.source={x:Math.cos(d),y:Math.sin(d)},d=Math.random()*2*Math.PI,c.target={x:Math.cos(d),y:Math.sin(d)}}var g=o.source,b=o.target,j=g.position(),_e=b.position(),er=g.width(),rr=b.width(),tr=g.height(),nr=b.height(),ar=s.pstyle("haystack-radius").value,lr=ar/2;c.haystackPts=c.allpts=[c.source.x*er*lr+j.x,c.source.y*tr*lr+j.y,c.target.x*rr*lr+_e.x,c.target.y*nr*lr+_e.y],c.midX=(c.allpts[0]+c.allpts[2])/2,c.midY=(c.allpts[1]+c.allpts[3])/2,c.edgeType="haystack",c.haystack=!0,this.storeEdgeProjections(s),this.calculateArrowAngles(s),this.recalculateEdgeLabelProjections(s),this.calculateLabelAngles(s)}};BRp$c.findSegmentsPoints=function(a,e){var s=a._private.rscratch,o=a.pstyle("segment-weights"),c=a.pstyle("segment-distances"),d=a.pstyle("segment-radii"),g=a.pstyle("radius-type"),b=Math.min(o.pfValue.length,c.pfValue.length),j=d.pfValue[d.pfValue.length-1],_e=g.pfValue[g.pfValue.length-1];s.edgeType="segments",s.segpts=[],s.radii=[],s.isArcRadius=[];for(var er=0;er<b;er++){var rr=o.pfValue[er],tr=c.pfValue[er],nr=1-rr,ar=rr,lr=this.findMidptPtsEtc(a,e),or=lr.midptPts,ir=lr.vectorNormInverse,sr={x:or.x1*nr+or.x2*ar,y:or.y1*nr+or.y2*ar};s.segpts.push(sr.x+ir.x*tr,sr.y+ir.y*tr),s.radii.push(d.pfValue[er]!==void 0?d.pfValue[er]:j),s.isArcRadius.push((g.pfValue[er]!==void 0?g.pfValue[er]:_e)==="arc-radius")}};BRp$c.findLoopPoints=function(a,e,s,o){var c=a._private.rscratch,d=e.dirCounts,g=e.srcPos,b=a.pstyle("control-point-distances"),j=b?b.pfValue[0]:void 0,_e=a.pstyle("loop-direction").pfValue,er=a.pstyle("loop-sweep").pfValue,rr=a.pstyle("control-point-step-size").pfValue;c.edgeType="self";var tr=s,nr=rr;o&&(tr=0,nr=j);var ar=_e-Math.PI/2,lr=ar-er/2,or=ar+er/2,ir=_e+"_"+er;tr=d[ir]===void 0?d[ir]=0:++d[ir],c.ctrlpts=[g.x+Math.cos(lr)*1.4*nr*(tr/3+1),g.y+Math.sin(lr)*1.4*nr*(tr/3+1),g.x+Math.cos(or)*1.4*nr*(tr/3+1),g.y+Math.sin(or)*1.4*nr*(tr/3+1)]};BRp$c.findCompoundLoopPoints=function(a,e,s,o){var c=a._private.rscratch;c.edgeType="compound";var d=e.srcPos,g=e.tgtPos,b=e.srcW,j=e.srcH,_e=e.tgtW,er=e.tgtH,rr=a.pstyle("control-point-step-size").pfValue,tr=a.pstyle("control-point-distances"),nr=tr?tr.pfValue[0]:void 0,ar=s,lr=rr;o&&(ar=0,lr=nr);var or=50,ir={x:d.x-b/2,y:d.y-j/2},sr={x:g.x-_e/2,y:g.y-er/2},ur={x:Math.min(ir.x,sr.x),y:Math.min(ir.y,sr.y)},cr=.5,fr=Math.max(cr,Math.log(b*AVOID_IMPOSSIBLE_BEZIER_CONSTANT)),hr=Math.max(cr,Math.log(_e*AVOID_IMPOSSIBLE_BEZIER_CONSTANT));c.ctrlpts=[ur.x,ur.y-(1+Math.pow(or,1.12)/100)*lr*(ar/3+1)*fr,ur.x-(1+Math.pow(or,1.12)/100)*lr*(ar/3+1)*hr,ur.y]};BRp$c.findStraightEdgePoints=function(a){a._private.rscratch.edgeType="straight"};BRp$c.findBezierPoints=function(a,e,s,o,c){var d=a._private.rscratch,g=a.pstyle("control-point-step-size").pfValue,b=a.pstyle("control-point-distances"),j=a.pstyle("control-point-weights"),_e=b&&j?Math.min(b.value.length,j.value.length):1,er=b?b.pfValue[0]:void 0,rr=j.value[0],tr=o;d.edgeType=tr?"multibezier":"bezier",d.ctrlpts=[];for(var nr=0;nr<_e;nr++){var ar=(.5-e.eles.length/2+s)*g*(c?-1:1),lr=void 0,or=signum(ar);tr&&(er=b?b.pfValue[nr]:g,rr=j.value[nr]),o?lr=er:lr=er!==void 0?or*er:void 0;var ir=lr!==void 0?lr:ar,sr=1-rr,ur=rr,cr=this.findMidptPtsEtc(a,e),fr=cr.midptPts,hr=cr.vectorNormInverse,dr={x:fr.x1*sr+fr.x2*ur,y:fr.y1*sr+fr.y2*ur};d.ctrlpts.push(dr.x+hr.x*ir,dr.y+hr.y*ir)}};BRp$c.findTaxiPoints=function(a,e){var s=a._private.rscratch;s.edgeType="segments";var o="vertical",c="horizontal",d="leftward",g="rightward",b="downward",j="upward",_e="auto",er=e.posPts,rr=e.srcW,tr=e.srcH,nr=e.tgtW,ar=e.tgtH,lr=a.pstyle("edge-distances").value,or=lr!=="node-position",ir=a.pstyle("taxi-direction").value,sr=ir,ur=a.pstyle("taxi-turn"),cr=ur.units==="%",fr=ur.pfValue,hr=fr<0,dr=a.pstyle("taxi-turn-min-distance").pfValue,vr=or?(rr+nr)/2:0,gr=or?(tr+ar)/2:0,pr=er.x2-er.x1,mr=er.y2-er.y1,yr=function(xr,Lr){return xr>0?Math.max(xr-Lr,0):Math.min(xr+Lr,0)},br=yr(pr,vr),Er=yr(mr,gr),_r=!1;sr===_e?ir=Math.abs(br)>Math.abs(Er)?c:o:sr===j||sr===b?(ir=o,_r=!0):(sr===d||sr===g)&&(ir=c,_r=!0);var Rr=ir===o,Cr=Rr?Er:br,wr=Rr?mr:pr,$r=signum(wr),Ar=!1;!(_r&&(cr||hr))&&(sr===b&&wr<0||sr===j&&wr>0||sr===d&&wr>0||sr===g&&wr<0)&&($r*=-1,Cr=$r*Math.abs(Cr),Ar=!0);var Sr;if(cr){var kr=fr<0?1+fr:fr;Sr=kr*Cr}else{var Mr=fr<0?Cr:0;Sr=Mr+fr*$r}var qr=function(xr){return Math.abs(xr)<dr||Math.abs(xr)>=Math.abs(Cr)},Tr=qr(Sr),Pr=qr(Math.abs(Cr)-Math.abs(Sr)),Br=Tr||Pr;if(Br&&!Ar)if(Rr){var Ur=Math.abs(wr)<=tr/2,Nr=Math.abs(pr)<=nr/2;if(Ur){var Ir=(er.x1+er.x2)/2,Dr=er.y1,Or=er.y2;s.segpts=[Ir,Dr,Ir,Or]}else if(Nr){var jr=(er.y1+er.y2)/2,Wr=er.x1,Xr=er.x2;s.segpts=[Wr,jr,Xr,jr]}else s.segpts=[er.x1,er.y2]}else{var dt=Math.abs(wr)<=rr/2,Vr=Math.abs(mr)<=ar/2;if(dt){var Zr=(er.y1+er.y2)/2,et=er.x1,Yr=er.x2;s.segpts=[et,Zr,Yr,Zr]}else if(Vr){var Qr=(er.x1+er.x2)/2,Jr=er.y1,rt=er.y2;s.segpts=[Qr,Jr,Qr,rt]}else s.segpts=[er.x2,er.y1]}else if(Rr){var tt=er.y1+Sr+(or?tr/2*$r:0),lt=er.x1,pt=er.x2;s.segpts=[lt,tt,pt,tt]}else{var yt=er.x1+Sr+(or?rr/2*$r:0),gt=er.y1,bt=er.y2;s.segpts=[yt,gt,yt,bt]}if(s.isRound){var ct=a.pstyle("taxi-radius").value,nt=a.pstyle("radius-type").value[0]==="arc-radius";s.radii=new Array(s.segpts.length/2).fill(ct),s.isArcRadius=new Array(s.segpts.length/2).fill(nt)}};BRp$c.tryToCorrectInvalidPoints=function(a,e){var s=a._private.rscratch;if(s.edgeType==="bezier"){var o=e.srcPos,c=e.tgtPos,d=e.srcW,g=e.srcH,b=e.tgtW,j=e.tgtH,_e=e.srcShape,er=e.tgtShape,rr=e.srcCornerRadius,tr=e.tgtCornerRadius,nr=e.srcRs,ar=e.tgtRs,lr=!number$1(s.startX)||!number$1(s.startY),or=!number$1(s.arrowStartX)||!number$1(s.arrowStartY),ir=!number$1(s.endX)||!number$1(s.endY),sr=!number$1(s.arrowEndX)||!number$1(s.arrowEndY),ur=3,cr=this.getArrowWidth(a.pstyle("width").pfValue,a.pstyle("arrow-scale").value)*this.arrowShapeWidth,fr=ur*cr,hr=dist({x:s.ctrlpts[0],y:s.ctrlpts[1]},{x:s.startX,y:s.startY}),dr=hr<fr,vr=dist({x:s.ctrlpts[0],y:s.ctrlpts[1]},{x:s.endX,y:s.endY}),gr=vr<fr,pr=!1;if(lr||or||dr){pr=!0;var mr={x:s.ctrlpts[0]-o.x,y:s.ctrlpts[1]-o.y},yr=Math.sqrt(mr.x*mr.x+mr.y*mr.y),br={x:mr.x/yr,y:mr.y/yr},Er=Math.max(d,g),_r={x:s.ctrlpts[0]+br.x*2*Er,y:s.ctrlpts[1]+br.y*2*Er},Rr=_e.intersectLine(o.x,o.y,d,g,_r.x,_r.y,0,rr,nr);dr?(s.ctrlpts[0]=s.ctrlpts[0]+br.x*(fr-hr),s.ctrlpts[1]=s.ctrlpts[1]+br.y*(fr-hr)):(s.ctrlpts[0]=Rr[0]+br.x*fr,s.ctrlpts[1]=Rr[1]+br.y*fr)}if(ir||sr||gr){pr=!0;var Cr={x:s.ctrlpts[0]-c.x,y:s.ctrlpts[1]-c.y},wr=Math.sqrt(Cr.x*Cr.x+Cr.y*Cr.y),$r={x:Cr.x/wr,y:Cr.y/wr},Ar=Math.max(d,g),Sr={x:s.ctrlpts[0]+$r.x*2*Ar,y:s.ctrlpts[1]+$r.y*2*Ar},kr=er.intersectLine(c.x,c.y,b,j,Sr.x,Sr.y,0,tr,ar);gr?(s.ctrlpts[0]=s.ctrlpts[0]+$r.x*(fr-vr),s.ctrlpts[1]=s.ctrlpts[1]+$r.y*(fr-vr)):(s.ctrlpts[0]=kr[0]+$r.x*fr,s.ctrlpts[1]=kr[1]+$r.y*fr)}pr&&this.findEndpoints(a)}};BRp$c.storeAllpts=function(a){var e=a._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var s=0;s+1<e.ctrlpts.length;s+=2)e.allpts.push(e.ctrlpts[s],e.ctrlpts[s+1]),s+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[s]+e.ctrlpts[s+2])/2,(e.ctrlpts[s+1]+e.ctrlpts[s+3])/2);e.allpts.push(e.endX,e.endY);var o,c;e.ctrlpts.length/2%2===0?(o=e.allpts.length/2-1,e.midX=e.allpts[o],e.midY=e.allpts[o+1]):(o=e.allpts.length/2-3,c=.5,e.midX=qbezierAt(e.allpts[o],e.allpts[o+2],e.allpts[o+4],c),e.midY=qbezierAt(e.allpts[o+1],e.allpts[o+3],e.allpts[o+5],c))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var d=2;d+3<e.allpts.length;d+=2){var g=e.radii[d/2-1],b=e.isArcRadius[d/2-1];e.roundCorners.push(getRoundCorner({x:e.allpts[d-2],y:e.allpts[d-1]},{x:e.allpts[d],y:e.allpts[d+1],radius:g},{x:e.allpts[d+2],y:e.allpts[d+3]},g,b))}}if(e.segpts.length%4===0){var j=e.segpts.length/2,_e=j-2;e.midX=(e.segpts[_e]+e.segpts[j])/2,e.midY=(e.segpts[_e+1]+e.segpts[j+1])/2}else{var er=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[er],e.midY=e.segpts[er+1];else{var rr={x:e.segpts[er],y:e.segpts[er+1]},tr=e.roundCorners[er/2];if(tr.radius===0){var nr={x:e.segpts[er+2],y:e.segpts[er+3]};e.midX=rr.x,e.midY=rr.y,e.midVector=[rr.y-nr.y,nr.x-rr.x]}else{var ar=[rr.x-tr.cx,rr.y-tr.cy],lr=tr.radius/Math.sqrt(Math.pow(ar[0],2)+Math.pow(ar[1],2));ar=ar.map(function(or){return or*lr}),e.midX=tr.cx+ar[0],e.midY=tr.cy+ar[1],e.midVector=ar}}}}};BRp$c.checkForInvalidEdgeWarning=function(a){var e=a[0]._private.rscratch;e.nodesOverlap||number$1(e.startX)&&number$1(e.startY)&&number$1(e.endX)&&number$1(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,warn("Edge `"+a.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};BRp$c.findEdgeControlPoints=function(a){var e=this;if(!(!a||a.length===0)){for(var s=this,o=s.cy,c=o.hasCompoundNodes(),d=new Map$1,g=function(gr,pr){return[].concat(_toConsumableArray(gr),[pr?1:0]).join("-")},b=[],j=[],_e=0;_e<a.length;_e++){var er=a[_e],rr=er._private,tr=er.pstyle("curve-style").value;if(!(er.removed()||!er.takesUpSpace())){if(tr==="haystack"){j.push(er);continue}var nr=tr==="unbundled-bezier"||endsWith(tr,"segments")||tr==="straight"||tr==="straight-triangle"||endsWith(tr,"taxi"),ar=tr==="unbundled-bezier"||tr==="bezier",lr=rr.source,or=rr.target,ir=lr.poolIndex(),sr=or.poolIndex(),ur=[ir,sr].sort(),cr=g(ur,nr),fr=d.get(cr);fr==null&&(fr={eles:[]},b.push({pairId:ur,edgeIsUnbundled:nr}),d.set(cr,fr)),fr.eles.push(er),nr&&(fr.hasUnbundled=!0),ar&&(fr.hasBezier=!0)}}for(var hr=function(){var gr=b[dr],pr=gr.pairId,mr=gr.edgeIsUnbundled,yr=g(pr,mr),br=d.get(yr),Er;if(!br.hasUnbundled){var _r=br.eles[0].parallelEdges().filter(function(nt){return nt.isBundledBezier()});clearArray(br.eles),_r.forEach(function(nt){return br.eles.push(nt)}),br.eles.sort(function(nt,Gr){return nt.poolIndex()-Gr.poolIndex()})}var Rr=br.eles[0],Cr=Rr.source(),wr=Rr.target();if(Cr.poolIndex()>wr.poolIndex()){var $r=Cr;Cr=wr,wr=$r}var Ar=br.srcPos=Cr.position(),Sr=br.tgtPos=wr.position(),kr=br.srcW=Cr.outerWidth(),Mr=br.srcH=Cr.outerHeight(),qr=br.tgtW=wr.outerWidth(),Tr=br.tgtH=wr.outerHeight(),Pr=br.srcShape=s.nodeShapes[e.getNodeShape(Cr)],Br=br.tgtShape=s.nodeShapes[e.getNodeShape(wr)],Ur=br.srcCornerRadius=Cr.pstyle("corner-radius").value==="auto"?"auto":Cr.pstyle("corner-radius").pfValue,Nr=br.tgtCornerRadius=wr.pstyle("corner-radius").value==="auto"?"auto":wr.pstyle("corner-radius").pfValue,Ir=br.tgtRs=wr._private.rscratch,Dr=br.srcRs=Cr._private.rscratch;br.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Or=0;Or<br.eles.length;Or++){var jr=br.eles[Or],Wr=jr[0]._private.rscratch,Xr=jr.pstyle("curve-style").value,dt=Xr==="unbundled-bezier"||endsWith(Xr,"segments")||endsWith(Xr,"taxi"),Vr=!Cr.same(jr.source());if(!br.calculatedIntersection&&Cr!==wr&&(br.hasBezier||br.hasUnbundled)){br.calculatedIntersection=!0;var Zr=Pr.intersectLine(Ar.x,Ar.y,kr,Mr,Sr.x,Sr.y,0,Ur,Dr),et=br.srcIntn=Zr,Yr=Br.intersectLine(Sr.x,Sr.y,qr,Tr,Ar.x,Ar.y,0,Nr,Ir),Qr=br.tgtIntn=Yr,Jr=br.intersectionPts={x1:Zr[0],x2:Yr[0],y1:Zr[1],y2:Yr[1]},rt=br.posPts={x1:Ar.x,x2:Sr.x,y1:Ar.y,y2:Sr.y},tt=Yr[1]-Zr[1],lt=Yr[0]-Zr[0],pt=Math.sqrt(lt*lt+tt*tt);number$1(pt)&&pt>=AVOID_IMPOSSIBLE_BEZIER_CONSTANT_L||(pt=Math.sqrt(Math.max(lt*lt,AVOID_IMPOSSIBLE_BEZIER_CONSTANT)+Math.max(tt*tt,AVOID_IMPOSSIBLE_BEZIER_CONSTANT)));var yt=br.vector={x:lt,y:tt},gt=br.vectorNorm={x:yt.x/pt,y:yt.y/pt},bt={x:-gt.y,y:gt.x};br.nodesOverlap=!number$1(pt)||Br.checkPoint(Zr[0],Zr[1],0,qr,Tr,Sr.x,Sr.y,Nr,Ir)||Pr.checkPoint(Yr[0],Yr[1],0,kr,Mr,Ar.x,Ar.y,Ur,Dr),br.vectorNormInverse=bt,Er={nodesOverlap:br.nodesOverlap,dirCounts:br.dirCounts,calculatedIntersection:!0,hasBezier:br.hasBezier,hasUnbundled:br.hasUnbundled,eles:br.eles,srcPos:Sr,srcRs:Ir,tgtPos:Ar,tgtRs:Dr,srcW:qr,srcH:Tr,tgtW:kr,tgtH:Mr,srcIntn:Qr,tgtIntn:et,srcShape:Br,tgtShape:Pr,posPts:{x1:rt.x2,y1:rt.y2,x2:rt.x1,y2:rt.y1},intersectionPts:{x1:Jr.x2,y1:Jr.y2,x2:Jr.x1,y2:Jr.y1},vector:{x:-yt.x,y:-yt.y},vectorNorm:{x:-gt.x,y:-gt.y},vectorNormInverse:{x:-bt.x,y:-bt.y}}}var ct=Vr?Er:br;Wr.nodesOverlap=ct.nodesOverlap,Wr.srcIntn=ct.srcIntn,Wr.tgtIntn=ct.tgtIntn,Wr.isRound=Xr.startsWith("round"),c&&(Cr.isParent()||Cr.isChild()||wr.isParent()||wr.isChild())&&(Cr.parents().anySame(wr)||wr.parents().anySame(Cr)||Cr.same(wr)&&Cr.isParent())?e.findCompoundLoopPoints(jr,ct,Or,dt):Cr===wr?e.findLoopPoints(jr,ct,Or,dt):Xr.endsWith("segments")?e.findSegmentsPoints(jr,ct):Xr.endsWith("taxi")?e.findTaxiPoints(jr,ct):Xr==="straight"||!dt&&br.eles.length%2===1&&Or===Math.floor(br.eles.length/2)?e.findStraightEdgePoints(jr):e.findBezierPoints(jr,ct,Or,dt,Vr),e.findEndpoints(jr),e.tryToCorrectInvalidPoints(jr,ct),e.checkForInvalidEdgeWarning(jr),e.storeAllpts(jr),e.storeEdgeProjections(jr),e.calculateArrowAngles(jr),e.recalculateEdgeLabelProjections(jr),e.calculateLabelAngles(jr)}},dr=0;dr<b.length;dr++)hr();this.findHaystackPoints(j)}};function getPts(a){var e=[];if(a!=null){for(var s=0;s<a.length;s+=2){var o=a[s],c=a[s+1];e.push({x:o,y:c})}return e}}BRp$c.getSegmentPoints=function(a){var e=a[0]._private.rscratch;this.recalculateRenderedStyle(a);var s=e.edgeType;if(s==="segments")return getPts(e.segpts)};BRp$c.getControlPoints=function(a){var e=a[0]._private.rscratch;this.recalculateRenderedStyle(a);var s=e.edgeType;if(s==="bezier"||s==="multibezier"||s==="self"||s==="compound")return getPts(e.ctrlpts)};BRp$c.getEdgeMidpoint=function(a){var e=a[0]._private.rscratch;return this.recalculateRenderedStyle(a),{x:e.midX,y:e.midY}};var BRp$b={};BRp$b.manualEndptToPx=function(a,e){var s=this,o=a.position(),c=a.outerWidth(),d=a.outerHeight(),g=a._private.rscratch;if(e.value.length===2){var b=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(b[0]=b[0]*c),e.units[1]==="%"&&(b[1]=b[1]*d),b[0]+=o.x,b[1]+=o.y,b}else{var j=e.pfValue[0];j=-Math.PI/2+j;var _e=2*Math.max(c,d),er=[o.x+Math.cos(j)*_e,o.y+Math.sin(j)*_e];return s.nodeShapes[this.getNodeShape(a)].intersectLine(o.x,o.y,c,d,er[0],er[1],0,a.pstyle("corner-radius").value==="auto"?"auto":a.pstyle("corner-radius").pfValue,g)}};BRp$b.findEndpoints=function(a){var e,s,o,c,d=this,g,b=a.source()[0],j=a.target()[0],_e=b.position(),er=j.position(),rr=a.pstyle("target-arrow-shape").value,tr=a.pstyle("source-arrow-shape").value,nr=a.pstyle("target-distance-from-node").pfValue,ar=a.pstyle("source-distance-from-node").pfValue,lr=b._private.rscratch,or=j._private.rscratch,ir=a.pstyle("curve-style").value,sr=a._private.rscratch,ur=sr.edgeType,cr=endsWith(ir,"taxi"),fr=ur==="self"||ur==="compound",hr=ur==="bezier"||ur==="multibezier"||fr,dr=ur!=="bezier",vr=ur==="straight"||ur==="segments",gr=ur==="segments",pr=hr||dr||vr,mr=fr||cr,yr=a.pstyle("source-endpoint"),br=mr?"outside-to-node":yr.value,Er=b.pstyle("corner-radius").value==="auto"?"auto":b.pstyle("corner-radius").pfValue,_r=a.pstyle("target-endpoint"),Rr=mr?"outside-to-node":_r.value,Cr=j.pstyle("corner-radius").value==="auto"?"auto":j.pstyle("corner-radius").pfValue;sr.srcManEndpt=yr,sr.tgtManEndpt=_r;var wr,$r,Ar,Sr,kr=(e=(_r==null||(s=_r.pfValue)===null||s===void 0?void 0:s.length)===2?_r.pfValue:null)!==null&&e!==void 0?e:[0,0],Mr=(o=(yr==null||(c=yr.pfValue)===null||c===void 0?void 0:c.length)===2?yr.pfValue:null)!==null&&o!==void 0?o:[0,0];if(hr){var qr=[sr.ctrlpts[0],sr.ctrlpts[1]],Tr=dr?[sr.ctrlpts[sr.ctrlpts.length-2],sr.ctrlpts[sr.ctrlpts.length-1]]:qr;wr=Tr,$r=qr}else if(vr){var Pr=gr?sr.segpts.slice(0,2):[er.x+kr[0],er.y+kr[1]],Br=gr?sr.segpts.slice(sr.segpts.length-2):[_e.x+Mr[0],_e.y+Mr[1]];wr=Br,$r=Pr}if(Rr==="inside-to-node")g=[er.x,er.y];else if(_r.units)g=this.manualEndptToPx(j,_r);else if(Rr==="outside-to-line")g=sr.tgtIntn;else if(Rr==="outside-to-node"||Rr==="outside-to-node-or-label"?Ar=wr:(Rr==="outside-to-line"||Rr==="outside-to-line-or-label")&&(Ar=[_e.x,_e.y]),g=d.nodeShapes[this.getNodeShape(j)].intersectLine(er.x,er.y,j.outerWidth(),j.outerHeight(),Ar[0],Ar[1],0,Cr,or),Rr==="outside-to-node-or-label"||Rr==="outside-to-line-or-label"){var Ur=j._private.rscratch,Nr=Ur.labelWidth,Ir=Ur.labelHeight,Dr=Ur.labelX,Or=Ur.labelY,jr=Nr/2,Wr=Ir/2,Xr=j.pstyle("text-valign").value;Xr==="top"?Or-=Wr:Xr==="bottom"&&(Or+=Wr);var dt=j.pstyle("text-halign").value;dt==="left"?Dr-=jr:dt==="right"&&(Dr+=jr);var Vr=polygonIntersectLine(Ar[0],Ar[1],[Dr-jr,Or-Wr,Dr+jr,Or-Wr,Dr+jr,Or+Wr,Dr-jr,Or+Wr],er.x,er.y);if(Vr.length>0){var Zr=_e,et=sqdist(Zr,array2point(g)),Yr=sqdist(Zr,array2point(Vr)),Qr=et;if(Yr<et&&(g=Vr,Qr=Yr),Vr.length>2){var Jr=sqdist(Zr,{x:Vr[2],y:Vr[3]});Jr<Qr&&(g=[Vr[2],Vr[3]])}}}var rt=shortenIntersection(g,wr,d.arrowShapes[rr].spacing(a)+nr),tt=shortenIntersection(g,wr,d.arrowShapes[rr].gap(a)+nr);if(sr.endX=tt[0],sr.endY=tt[1],sr.arrowEndX=rt[0],sr.arrowEndY=rt[1],br==="inside-to-node")g=[_e.x,_e.y];else if(yr.units)g=this.manualEndptToPx(b,yr);else if(br==="outside-to-line")g=sr.srcIntn;else if(br==="outside-to-node"||br==="outside-to-node-or-label"?Sr=$r:(br==="outside-to-line"||br==="outside-to-line-or-label")&&(Sr=[er.x,er.y]),g=d.nodeShapes[this.getNodeShape(b)].intersectLine(_e.x,_e.y,b.outerWidth(),b.outerHeight(),Sr[0],Sr[1],0,Er,lr),br==="outside-to-node-or-label"||br==="outside-to-line-or-label"){var lt=b._private.rscratch,pt=lt.labelWidth,yt=lt.labelHeight,gt=lt.labelX,bt=lt.labelY,ct=pt/2,nt=yt/2,Gr=b.pstyle("text-valign").value;Gr==="top"?bt-=nt:Gr==="bottom"&&(bt+=nt);var xr=b.pstyle("text-halign").value;xr==="left"?gt-=ct:xr==="right"&&(gt+=ct);var Lr=polygonIntersectLine(Sr[0],Sr[1],[gt-ct,bt-nt,gt+ct,bt-nt,gt+ct,bt+nt,gt-ct,bt+nt],_e.x,_e.y);if(Lr.length>0){var Fr=er,zr=sqdist(Fr,array2point(g)),Hr=sqdist(Fr,array2point(Lr)),at=zr;if(Hr<zr&&(g=[Lr[0],Lr[1]],at=Hr),Lr.length>2){var Kr=sqdist(Fr,{x:Lr[2],y:Lr[3]});Kr<at&&(g=[Lr[2],Lr[3]])}}}var st=shortenIntersection(g,$r,d.arrowShapes[tr].spacing(a)+ar),it=shortenIntersection(g,$r,d.arrowShapes[tr].gap(a)+ar);sr.startX=it[0],sr.startY=it[1],sr.arrowStartX=st[0],sr.arrowStartY=st[1],pr&&(!number$1(sr.startX)||!number$1(sr.startY)||!number$1(sr.endX)||!number$1(sr.endY)?sr.badLine=!0:sr.badLine=!1)};BRp$b.getSourceEndpoint=function(a){var e=a[0]._private.rscratch;switch(this.recalculateRenderedStyle(a),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};BRp$b.getTargetEndpoint=function(a){var e=a[0]._private.rscratch;switch(this.recalculateRenderedStyle(a),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var BRp$a={};function pushBezierPts(a,e,s){for(var o=function(_e,er,rr,tr){return qbezierAt(_e,er,rr,tr)},c=e._private,d=c.rstyle.bezierPts,g=0;g<a.bezierProjPcts.length;g++){var b=a.bezierProjPcts[g];d.push({x:o(s[0],s[2],s[4],b),y:o(s[1],s[3],s[5],b)})}}BRp$a.storeEdgeProjections=function(a){var e=a._private,s=e.rscratch,o=s.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,o==="multibezier"||o==="bezier"||o==="self"||o==="compound"){e.rstyle.bezierPts=[];for(var c=0;c+5<s.allpts.length;c+=4)pushBezierPts(this,a,s.allpts.slice(c,c+6))}else if(o==="segments")for(var d=e.rstyle.linePts=[],c=0;c+1<s.allpts.length;c+=2)d.push({x:s.allpts[c],y:s.allpts[c+1]});else if(o==="haystack"){var g=s.haystackPts;e.rstyle.haystackPts=[{x:g[0],y:g[1]},{x:g[2],y:g[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(a.pstyle("width").pfValue,a.pstyle("arrow-scale").value)*this.arrowShapeWidth};BRp$a.recalculateEdgeProjections=function(a){this.findEdgeControlPoints(a)};var BRp$9={};BRp$9.recalculateNodeLabelProjection=function(a){var e=a.pstyle("label").strValue;if(!emptyString(e)){var s,o,c=a._private,d=a.width(),g=a.height(),b=a.padding(),j=a.position(),_e=a.pstyle("text-halign").strValue,er=a.pstyle("text-valign").strValue,rr=c.rscratch,tr=c.rstyle;switch(_e){case"left":s=j.x-d/2-b;break;case"right":s=j.x+d/2+b;break;default:s=j.x}switch(er){case"top":o=j.y-g/2-b;break;case"bottom":o=j.y+g/2+b;break;default:o=j.y}rr.labelX=s,rr.labelY=o,tr.labelX=s,tr.labelY=o,this.calculateLabelAngles(a),this.applyLabelDimensions(a)}};var lineAngleFromDelta=function(e,s){var o=Math.atan(s/e);return e===0&&o<0&&(o=o*-1),o},lineAngle=function(e,s){var o=s.x-e.x,c=s.y-e.y;return lineAngleFromDelta(o,c)},bezierAngle=function(e,s,o,c){var d=bound(0,c-.001,1),g=bound(0,c+.001,1),b=qbezierPtAt(e,s,o,d),j=qbezierPtAt(e,s,o,g);return lineAngle(b,j)};BRp$9.recalculateEdgeLabelProjections=function(a){var e,s=a._private,o=s.rscratch,c=this,d={mid:a.pstyle("label").strValue,source:a.pstyle("source-label").strValue,target:a.pstyle("target-label").strValue};if(d.mid||d.source||d.target){e={x:o.midX,y:o.midY};var g=function(rr,tr,nr){setPrefixedProperty(s.rscratch,rr,tr,nr),setPrefixedProperty(s.rstyle,rr,tr,nr)};g("labelX",null,e.x),g("labelY",null,e.y);var b=lineAngleFromDelta(o.midDispX,o.midDispY);g("labelAutoAngle",null,b);var j=function(){if(j.cache)return j.cache;for(var rr=[],tr=0;tr+5<o.allpts.length;tr+=4){var nr={x:o.allpts[tr],y:o.allpts[tr+1]},ar={x:o.allpts[tr+2],y:o.allpts[tr+3]},lr={x:o.allpts[tr+4],y:o.allpts[tr+5]};rr.push({p0:nr,p1:ar,p2:lr,startDist:0,length:0,segments:[]})}var or=s.rstyle.bezierPts,ir=c.bezierProjPcts.length;function sr(dr,vr,gr,pr,mr){var yr=dist(vr,gr),br=dr.segments[dr.segments.length-1],Er={p0:vr,p1:gr,t0:pr,t1:mr,startDist:br?br.startDist+br.length:0,length:yr};dr.segments.push(Er),dr.length+=yr}for(var ur=0;ur<rr.length;ur++){var cr=rr[ur],fr=rr[ur-1];fr&&(cr.startDist=fr.startDist+fr.length),sr(cr,cr.p0,or[ur*ir],0,c.bezierProjPcts[0]);for(var hr=0;hr<ir-1;hr++)sr(cr,or[ur*ir+hr],or[ur*ir+hr+1],c.bezierProjPcts[hr],c.bezierProjPcts[hr+1]);sr(cr,or[ur*ir+ir-1],cr.p2,c.bezierProjPcts[ir-1],1)}return j.cache=rr},_e=function(rr){var tr,nr=rr==="source";if(d[rr]){var ar=a.pstyle(rr+"-text-offset").pfValue;switch(o.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var lr=j(),or,ir=0,sr=0,ur=0;ur<lr.length;ur++){for(var cr=lr[nr?ur:lr.length-1-ur],fr=0;fr<cr.segments.length;fr++){var hr=cr.segments[nr?fr:cr.segments.length-1-fr],dr=ur===lr.length-1&&fr===cr.segments.length-1;if(ir=sr,sr+=hr.length,sr>=ar||dr){or={cp:cr,segment:hr};break}}if(or)break}var vr=or.cp,gr=or.segment,pr=(ar-ir)/gr.length,mr=gr.t1-gr.t0,yr=nr?gr.t0+mr*pr:gr.t1-mr*pr;yr=bound(0,yr,1),e=qbezierPtAt(vr.p0,vr.p1,vr.p2,yr),tr=bezierAngle(vr.p0,vr.p1,vr.p2,yr);break}case"straight":case"segments":case"haystack":{for(var br=0,Er,_r,Rr,Cr,wr=o.allpts.length,$r=0;$r+3<wr&&(nr?(Rr={x:o.allpts[$r],y:o.allpts[$r+1]},Cr={x:o.allpts[$r+2],y:o.allpts[$r+3]}):(Rr={x:o.allpts[wr-2-$r],y:o.allpts[wr-1-$r]},Cr={x:o.allpts[wr-4-$r],y:o.allpts[wr-3-$r]}),Er=dist(Rr,Cr),_r=br,br+=Er,!(br>=ar));$r+=2);var Ar=ar-_r,Sr=Ar/Er;Sr=bound(0,Sr,1),e=lineAt(Rr,Cr,Sr),tr=lineAngle(Rr,Cr);break}}g("labelX",rr,e.x),g("labelY",rr,e.y),g("labelAutoAngle",rr,tr)}};_e("source"),_e("target"),this.applyLabelDimensions(a)}};BRp$9.applyLabelDimensions=function(a){this.applyPrefixedLabelDimensions(a),a.isEdge()&&(this.applyPrefixedLabelDimensions(a,"source"),this.applyPrefixedLabelDimensions(a,"target"))};BRp$9.applyPrefixedLabelDimensions=function(a,e){var s=a._private,o=this.getLabelText(a,e),c=hashString(o,a._private.labelDimsKey);if(getPrefixedProperty(s.rscratch,"prefixedLabelDimsKey",e)!==c){setPrefixedProperty(s.rscratch,"prefixedLabelDimsKey",e,c);var d=this.calculateLabelDimensions(a,o),g=a.pstyle("line-height").pfValue,b=a.pstyle("text-wrap").strValue,j=getPrefixedProperty(s.rscratch,"labelWrapCachedLines",e)||[],_e=b!=="wrap"?1:Math.max(j.length,1),er=d.height/_e,rr=er*g,tr=d.width,nr=d.height+(_e-1)*(g-1)*er;setPrefixedProperty(s.rstyle,"labelWidth",e,tr),setPrefixedProperty(s.rscratch,"labelWidth",e,tr),setPrefixedProperty(s.rstyle,"labelHeight",e,nr),setPrefixedProperty(s.rscratch,"labelHeight",e,nr),setPrefixedProperty(s.rscratch,"labelLineHeight",e,rr)}};BRp$9.getLabelText=function(a,e){var s=a._private,o=e?e+"-":"",c=a.pstyle(o+"label").strValue,d=a.pstyle("text-transform").value,g=function(Mr,qr){return qr?(setPrefixedProperty(s.rscratch,Mr,e,qr),qr):getPrefixedProperty(s.rscratch,Mr,e)};if(!c)return"";d=="none"||(d=="uppercase"?c=c.toUpperCase():d=="lowercase"&&(c=c.toLowerCase()));var b=a.pstyle("text-wrap").value;if(b==="wrap"){var j=g("labelKey");if(j!=null&&g("labelWrapKey")===j)return g("labelWrapCachedText");for(var _e="",er=c.split(`
`),rr=a.pstyle("text-max-width").pfValue,tr=a.pstyle("text-overflow-wrap").value,nr=tr==="anywhere",ar=[],lr=/[\s\u200b]+|$/g,or=0;or<er.length;or++){var ir=er[or],sr=this.calculateLabelDimensions(a,ir),ur=sr.width;if(nr){var cr=ir.split("").join(_e);ir=cr}if(ur>rr){var fr=ir.matchAll(lr),hr="",dr=0,vr=_createForOfIteratorHelper(fr),gr;try{for(vr.s();!(gr=vr.n()).done;){var pr=gr.value,mr=pr[0],yr=ir.substring(dr,pr.index);dr=pr.index+mr.length;var br=hr.length===0?yr:hr+yr+mr,Er=this.calculateLabelDimensions(a,br),_r=Er.width;_r<=rr?hr+=yr+mr:(hr&&ar.push(hr),hr=yr+mr)}}catch(kr){vr.e(kr)}finally{vr.f()}hr.match(/^[\s\u200b]+$/)||ar.push(hr)}else ar.push(ir)}g("labelWrapCachedLines",ar),c=g("labelWrapCachedText",ar.join(`
`)),g("labelWrapKey",j)}else if(b==="ellipsis"){var Rr=a.pstyle("text-max-width").pfValue,Cr="",wr="",$r=!1;if(this.calculateLabelDimensions(a,c).width<Rr)return c;for(var Ar=0;Ar<c.length;Ar++){var Sr=this.calculateLabelDimensions(a,Cr+c[Ar]+wr).width;if(Sr>Rr)break;Cr+=c[Ar],Ar===c.length-1&&($r=!0)}return $r||(Cr+=wr),Cr}return c};BRp$9.getLabelJustification=function(a){var e=a.pstyle("text-justification").strValue,s=a.pstyle("text-halign").strValue;if(e==="auto")if(a.isNode())switch(s){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};BRp$9.calculateLabelDimensions=function(a,e){var s=this,o=s.cy.window(),c=o.document,d=0,g=a.pstyle("font-style").strValue,b=a.pstyle("font-size").pfValue,j=a.pstyle("font-family").strValue,_e=a.pstyle("font-weight").strValue,er=this.labelCalcCanvas,rr=this.labelCalcCanvasContext;if(!er){er=this.labelCalcCanvas=c.createElement("canvas"),rr=this.labelCalcCanvasContext=er.getContext("2d");var tr=er.style;tr.position="absolute",tr.left="-9999px",tr.top="-9999px",tr.zIndex="-1",tr.visibility="hidden",tr.pointerEvents="none"}rr.font="".concat(g," ").concat(_e," ").concat(b,"px ").concat(j);for(var nr=0,ar=0,lr=e.split(`
`),or=0;or<lr.length;or++){var ir=lr[or],sr=rr.measureText(ir),ur=Math.ceil(sr.width),cr=b;nr=Math.max(ur,nr),ar+=cr}return nr+=d,ar+=d,{width:nr,height:ar}};BRp$9.calculateLabelAngle=function(a,e){var s=a._private,o=s.rscratch,c=a.isEdge(),d=e?e+"-":"",g=a.pstyle(d+"text-rotation"),b=g.strValue;return b==="none"?0:c&&b==="autorotate"?o.labelAutoAngle:b==="autorotate"?0:g.pfValue};BRp$9.calculateLabelAngles=function(a){var e=this,s=a.isEdge(),o=a._private,c=o.rscratch;c.labelAngle=e.calculateLabelAngle(a),s&&(c.sourceLabelAngle=e.calculateLabelAngle(a,"source"),c.targetLabelAngle=e.calculateLabelAngle(a,"target"))};var BRp$8={},TOO_SMALL_CUT_RECT=28,warnedCutRect=!1;BRp$8.getNodeShape=function(a){var e=this,s=a.pstyle("shape").value;if(s==="cutrectangle"&&(a.width()<TOO_SMALL_CUT_RECT||a.height()<TOO_SMALL_CUT_RECT))return warnedCutRect||(warn("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),warnedCutRect=!0),"rectangle";if(a.isParent())return s==="rectangle"||s==="roundrectangle"||s==="round-rectangle"||s==="cutrectangle"||s==="cut-rectangle"||s==="barrel"?s:"rectangle";if(s==="polygon"){var o=a.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(o).name}return s};var BRp$7={};BRp$7.registerCalculationListeners=function(){var a=this.cy,e=a.collection(),s=this,o=function(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(g),b)for(var j=0;j<g.length;j++){var _e=g[j],er=_e._private,rr=er.rstyle;rr.clean=!1,rr.cleanConnected=!1}};s.binder(a).on("bounds.* dirty.*",function(g){var b=g.target;o(b)}).on("style.* background.*",function(g){var b=g.target;o(b,!1)});var c=function(g){if(g){var b=s.onUpdateEleCalcsFns;e.cleanStyle();for(var j=0;j<e.length;j++){var _e=e[j],er=_e._private.rstyle;_e.isNode()&&!er.cleanConnected&&(o(_e.connectedEdges()),er.cleanConnected=!0)}if(b)for(var rr=0;rr<b.length;rr++){var tr=b[rr];tr(g,e)}s.recalculateRenderedStyle(e),e=a.collection()}};s.flushRenderedStyleQueue=function(){c(!0)},s.beforeRender(c,s.beforeRenderPriorities.eleCalcs)};BRp$7.onUpdateEleCalcs=function(a){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(a)};BRp$7.recalculateRenderedStyle=function(a,e){var s=function(cr){return cr._private.rstyle.cleanConnected};if(a.length!==0){var o=[],c=[];if(!this.destroyed){e===void 0&&(e=!0);for(var d=0;d<a.length;d++){var g=a[d],b=g._private,j=b.rstyle;g.isEdge()&&(!s(g.source())||!s(g.target()))&&(j.clean=!1),g.isEdge()&&g.isBundledBezier()&&g.parallelEdges().some(function(ur){return!ur._private.rstyle.clean&&ur.isBundledBezier()})&&(j.clean=!1),!(e&&j.clean||g.removed())&&g.pstyle("display").value!=="none"&&(b.group==="nodes"?c.push(g):o.push(g),j.clean=!0)}for(var _e=0;_e<c.length;_e++){var er=c[_e],rr=er._private,tr=rr.rstyle,nr=er.position();this.recalculateNodeLabelProjection(er),tr.nodeX=nr.x,tr.nodeY=nr.y,tr.nodeW=er.pstyle("width").pfValue,tr.nodeH=er.pstyle("height").pfValue}this.recalculateEdgeProjections(o);for(var ar=0;ar<o.length;ar++){var lr=o[ar],or=lr._private,ir=or.rstyle,sr=or.rscratch;ir.srcX=sr.arrowStartX,ir.srcY=sr.arrowStartY,ir.tgtX=sr.arrowEndX,ir.tgtY=sr.arrowEndY,ir.midX=sr.midX,ir.midY=sr.midY,ir.labelAngle=sr.labelAngle,ir.sourceLabelAngle=sr.sourceLabelAngle,ir.targetLabelAngle=sr.targetLabelAngle}}}};var BRp$6={};BRp$6.updateCachedGrabbedEles=function(){var a=this.cachedZSortedEles;if(a){a.drag=[],a.nondrag=[];for(var e=[],s=0;s<a.length;s++){var o=a[s],c=o._private.rscratch;o.grabbed()&&!o.isParent()?e.push(o):c.inDragLayer?a.drag.push(o):a.nondrag.push(o)}for(var s=0;s<e.length;s++){var o=e[s];a.drag.push(o)}}};BRp$6.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};BRp$6.getCachedZSortedEles=function(a){if(a||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(zIndexSort),e.interactive=e.filter(function(s){return s.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var BRp$5={};[BRp$e,BRp$d,BRp$c,BRp$b,BRp$a,BRp$9,BRp$8,BRp$7,BRp$6].forEach(function(a){extend(BRp$5,a)});var BRp$4={};BRp$4.getCachedImage=function(a,e,s){var o=this,c=o.imageCache=o.imageCache||{},d=c[a];if(d)return d.image.complete||d.image.addEventListener("load",s),d.image;d=c[a]=c[a]||{};var g=d.image=new Image;g.addEventListener("load",s),g.addEventListener("error",function(){g.error=!0});var b="data:",j=a.substring(0,b.length).toLowerCase()===b;return j||(e=e==="null"?null:e,g.crossOrigin=e),g.src=a,g};var BRp$3={};BRp$3.registerBinding=function(a,e,s,o){var c=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(a)){for(var d=[],g=0;g<a.length;g++){var b=a[g];if(b!==void 0){var j=this.binder(b);d.push(j.on.apply(j,c))}}return d}var j=this.binder(a);return j.on.apply(j,c)};BRp$3.binder=function(a){var e=this,s=e.cy.window(),o=a===s||a===s.document||a===s.document.body||domElement(a);if(e.supportsPassiveEvents==null){var c=!1;try{var d=Object.defineProperty({},"passive",{get:function(){return c=!0,!0}});s.addEventListener("test",null,d)}catch{}e.supportsPassiveEvents=c}var g=function(j,_e,er){var rr=Array.prototype.slice.call(arguments);return o&&e.supportsPassiveEvents&&(rr[2]={capture:er??!1,passive:!1,once:!1}),e.bindings.push({target:a,args:rr}),(a.addEventListener||a.on).apply(a,rr),this};return{on:g,addEventListener:g,addListener:g,bind:g}};BRp$3.nodeIsDraggable=function(a){return a&&a.isNode()&&!a.locked()&&a.grabbable()};BRp$3.nodeIsGrabbable=function(a){return this.nodeIsDraggable(a)&&a.interactive()};BRp$3.load=function(){var a=this,e=a.cy.window(),s=function(xr){return xr.selected()},o=function(xr){var Lr=xr.getRootNode();if(Lr&&Lr.nodeType===11&&Lr.host!==void 0)return Lr},c=function(xr,Lr,Fr,zr){xr==null&&(xr=a.cy);for(var Hr=0;Hr<Lr.length;Hr++){var at=Lr[Hr];xr.emit({originalEvent:Fr,type:at,position:zr})}},d=function(xr){return xr.shiftKey||xr.metaKey||xr.ctrlKey},g=function(xr,Lr){var Fr=!0;if(a.cy.hasCompoundNodes()&&xr&&xr.pannable())for(var zr=0;Lr&&zr<Lr.length;zr++){var xr=Lr[zr];if(xr.isNode()&&xr.isParent()&&!xr.pannable()){Fr=!1;break}}else Fr=!0;return Fr},b=function(xr){xr[0]._private.grabbed=!0},j=function(xr){xr[0]._private.grabbed=!1},_e=function(xr){xr[0]._private.rscratch.inDragLayer=!0},er=function(xr){xr[0]._private.rscratch.inDragLayer=!1},rr=function(xr){xr[0]._private.rscratch.isGrabTarget=!0},tr=function(xr){xr[0]._private.rscratch.isGrabTarget=!1},nr=function(xr,Lr){var Fr=Lr.addToList,zr=Fr.has(xr);!zr&&xr.grabbable()&&!xr.locked()&&(Fr.merge(xr),b(xr))},ar=function(xr,Lr){if(xr.cy().hasCompoundNodes()&&!(Lr.inDragLayer==null&&Lr.addToList==null)){var Fr=xr.descendants();Lr.inDragLayer&&(Fr.forEach(_e),Fr.connectedEdges().forEach(_e)),Lr.addToList&&nr(Fr,Lr)}},lr=function(xr,Lr){Lr=Lr||{};var Fr=xr.cy().hasCompoundNodes();Lr.inDragLayer&&(xr.forEach(_e),xr.neighborhood().stdFilter(function(zr){return!Fr||zr.isEdge()}).forEach(_e)),Lr.addToList&&xr.forEach(function(zr){nr(zr,Lr)}),ar(xr,Lr),sr(xr,{inDragLayer:Lr.inDragLayer}),a.updateCachedGrabbedEles()},or=lr,ir=function(xr){xr&&(a.getCachedZSortedEles().forEach(function(Lr){j(Lr),er(Lr),tr(Lr)}),a.updateCachedGrabbedEles())},sr=function(xr,Lr){if(!(Lr.inDragLayer==null&&Lr.addToList==null)&&xr.cy().hasCompoundNodes()){var Fr=xr.ancestors().orphans();if(!Fr.same(xr)){var zr=Fr.descendants().spawnSelf().merge(Fr).unmerge(xr).unmerge(xr.descendants()),Hr=zr.connectedEdges();Lr.inDragLayer&&(Hr.forEach(_e),zr.forEach(_e)),Lr.addToList&&zr.forEach(function(at){nr(at,Lr)})}}},ur=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},cr=typeof MutationObserver<"u",fr=typeof ResizeObserver<"u";cr?(a.removeObserver=new MutationObserver(function(Gr){for(var xr=0;xr<Gr.length;xr++){var Lr=Gr[xr],Fr=Lr.removedNodes;if(Fr)for(var zr=0;zr<Fr.length;zr++){var Hr=Fr[zr];if(Hr===a.container){a.destroy();break}}}}),a.container.parentNode&&a.removeObserver.observe(a.container.parentNode,{childList:!0})):a.registerBinding(a.container,"DOMNodeRemoved",function(Gr){a.destroy()});var hr=debounce(function(){a.cy.resize()},100);cr&&(a.styleObserver=new MutationObserver(hr),a.styleObserver.observe(a.container,{attributes:!0})),a.registerBinding(e,"resize",hr),fr&&(a.resizeObserver=new ResizeObserver(hr),a.resizeObserver.observe(a.container));var dr=function(xr,Lr){for(;xr!=null;)Lr(xr),xr=xr.parentNode},vr=function(){a.invalidateContainerClientCoordsCache()};dr(a.container,function(Gr){a.registerBinding(Gr,"transitionend",vr),a.registerBinding(Gr,"animationend",vr),a.registerBinding(Gr,"scroll",vr)}),a.registerBinding(a.container,"contextmenu",function(Gr){Gr.preventDefault()});var gr=function(){return a.selection[4]!==0},pr=function(xr){for(var Lr=a.findContainerClientCoords(),Fr=Lr[0],zr=Lr[1],Hr=Lr[2],at=Lr[3],Kr=xr.touches?xr.touches:[xr],st=!1,it=0;it<Kr.length;it++){var ut=Kr[it];if(Fr<=ut.clientX&&ut.clientX<=Fr+Hr&&zr<=ut.clientY&&ut.clientY<=zr+at){st=!0;break}}if(!st)return!1;for(var ht=a.container,ft=xr.target,ot=ft.parentNode,mt=!1;ot;){if(ot===ht){mt=!0;break}ot=ot.parentNode}return!!mt};a.registerBinding(a.container,"mousedown",function(xr){if(pr(xr)&&!(a.hoverData.which===1&&xr.which!==1)){xr.preventDefault(),ur(),a.hoverData.capture=!0,a.hoverData.which=xr.which;var Lr=a.cy,Fr=[xr.clientX,xr.clientY],zr=a.projectIntoViewport(Fr[0],Fr[1]),Hr=a.selection,at=a.findNearestElements(zr[0],zr[1],!0,!1),Kr=at[0],st=a.dragData.possibleDragElements;a.hoverData.mdownPos=zr,a.hoverData.mdownGPos=Fr;var it=function(vt){return{originalEvent:xr,type:vt,position:{x:zr[0],y:zr[1]}}},ut=function(){a.hoverData.tapholdCancelled=!1,clearTimeout(a.hoverData.tapholdTimeout),a.hoverData.tapholdTimeout=setTimeout(function(){if(!a.hoverData.tapholdCancelled){var vt=a.hoverData.down;vt?vt.emit(it("taphold")):Lr.emit(it("taphold"))}},a.tapholdDuration)};if(xr.which==3){a.hoverData.cxtStarted=!0;var ht={originalEvent:xr,type:"cxttapstart",position:{x:zr[0],y:zr[1]}};Kr?(Kr.activate(),Kr.emit(ht),a.hoverData.down=Kr):Lr.emit(ht),a.hoverData.downTime=new Date().getTime(),a.hoverData.cxtDragged=!1}else if(xr.which==1){Kr&&Kr.activate();{if(Kr!=null&&a.nodeIsGrabbable(Kr)){var ft=function(vt){vt.emit(it("grab"))};if(rr(Kr),!Kr.selected())st=a.dragData.possibleDragElements=Lr.collection(),or(Kr,{addToList:st}),Kr.emit(it("grabon")).emit(it("grab"));else{st=a.dragData.possibleDragElements=Lr.collection();var ot=Lr.$(function(mt){return mt.isNode()&&mt.selected()&&a.nodeIsGrabbable(mt)});lr(ot,{addToList:st}),Kr.emit(it("grabon")),ot.forEach(ft)}a.redrawHint("eles",!0),a.redrawHint("drag",!0)}a.hoverData.down=Kr,a.hoverData.downs=at,a.hoverData.downTime=new Date().getTime()}c(Kr,["mousedown","tapstart","vmousedown"],xr,{x:zr[0],y:zr[1]}),Kr==null?(Hr[4]=1,a.data.bgActivePosistion={x:zr[0],y:zr[1]},a.redrawHint("select",!0),a.redraw()):Kr.pannable()&&(Hr[4]=1),ut()}Hr[0]=Hr[2]=zr[0],Hr[1]=Hr[3]=zr[1]}},!1);var mr=o(a.container);a.registerBinding([e,mr],"mousemove",function(xr){var Lr=a.hoverData.capture;if(!(!Lr&&!pr(xr))){var Fr=!1,zr=a.cy,Hr=zr.zoom(),at=[xr.clientX,xr.clientY],Kr=a.projectIntoViewport(at[0],at[1]),st=a.hoverData.mdownPos,it=a.hoverData.mdownGPos,ut=a.selection,ht=null;!a.hoverData.draggingEles&&!a.hoverData.dragging&&!a.hoverData.selecting&&(ht=a.findNearestElement(Kr[0],Kr[1],!0,!1));var ft=a.hoverData.last,ot=a.hoverData.down,mt=[Kr[0]-ut[2],Kr[1]-ut[3]],vt=a.dragData.possibleDragElements,Et;if(it){var xt=at[0]-it[0],Tt=xt*xt,_t=at[1]-it[1],Ct=_t*_t,Rt=Tt+Ct;a.hoverData.isOverThresholdDrag=Et=Rt>=a.desktopTapThreshold2}var St=d(xr);Et&&(a.hoverData.tapholdCancelled=!0);var Lt=function(){var At=a.hoverData.dragDelta=a.hoverData.dragDelta||[];At.length===0?(At.push(mt[0]),At.push(mt[1])):(At[0]+=mt[0],At[1]+=mt[1])};Fr=!0,c(ht,["mousemove","vmousemove","tapdrag"],xr,{x:Kr[0],y:Kr[1]});var wt=function(At){return{originalEvent:xr,type:At,position:{x:Kr[0],y:Kr[1]}}},Dt=function(){a.data.bgActivePosistion=void 0,a.hoverData.selecting||zr.emit(wt("boxstart")),ut[4]=1,a.hoverData.selecting=!0,a.redrawHint("select",!0),a.redraw()};if(a.hoverData.which===3){if(Et){var Bt=wt("cxtdrag");ot?ot.emit(Bt):zr.emit(Bt),a.hoverData.cxtDragged=!0,(!a.hoverData.cxtOver||ht!==a.hoverData.cxtOver)&&(a.hoverData.cxtOver&&a.hoverData.cxtOver.emit(wt("cxtdragout")),a.hoverData.cxtOver=ht,ht&&ht.emit(wt("cxtdragover")))}}else if(a.hoverData.dragging){if(Fr=!0,zr.panningEnabled()&&zr.userPanningEnabled()){var Mt;if(a.hoverData.justStartedPan){var Vt=a.hoverData.mdownPos;Mt={x:(Kr[0]-Vt[0])*Hr,y:(Kr[1]-Vt[1])*Hr},a.hoverData.justStartedPan=!1}else Mt={x:mt[0]*Hr,y:mt[1]*Hr};zr.panBy(Mt),zr.emit(wt("dragpan")),a.hoverData.dragged=!0}Kr=a.projectIntoViewport(xr.clientX,xr.clientY)}else if(ut[4]==1&&(ot==null||ot.pannable())){if(Et){if(!a.hoverData.dragging&&zr.boxSelectionEnabled()&&(St||!zr.panningEnabled()||!zr.userPanningEnabled()))Dt();else if(!a.hoverData.selecting&&zr.panningEnabled()&&zr.userPanningEnabled()){var Ot=g(ot,a.hoverData.downs);Ot&&(a.hoverData.dragging=!0,a.hoverData.justStartedPan=!0,ut[4]=0,a.data.bgActivePosistion=array2point(st),a.redrawHint("select",!0),a.redraw())}ot&&ot.pannable()&&ot.active()&&ot.unactivate()}}else{if(ot&&ot.pannable()&&ot.active()&&ot.unactivate(),(!ot||!ot.grabbed())&&ht!=ft&&(ft&&c(ft,["mouseout","tapdragout"],xr,{x:Kr[0],y:Kr[1]}),ht&&c(ht,["mouseover","tapdragover"],xr,{x:Kr[0],y:Kr[1]}),a.hoverData.last=ht),ot)if(Et){if(zr.boxSelectionEnabled()&&St)ot&&ot.grabbed()&&(ir(vt),ot.emit(wt("freeon")),vt.emit(wt("free")),a.dragData.didDrag&&(ot.emit(wt("dragfreeon")),vt.emit(wt("dragfree")))),Dt();else if(ot&&ot.grabbed()&&a.nodeIsDraggable(ot)){var kt=!a.dragData.didDrag;kt&&a.redrawHint("eles",!0),a.dragData.didDrag=!0,a.hoverData.draggingEles||lr(vt,{inDragLayer:!0});var qt={x:0,y:0};if(number$1(mt[0])&&number$1(mt[1])&&(qt.x+=mt[0],qt.y+=mt[1],kt)){var $t=a.hoverData.dragDelta;$t&&number$1($t[0])&&number$1($t[1])&&(qt.x+=$t[0],qt.y+=$t[1])}a.hoverData.draggingEles=!0,vt.silentShift(qt).emit(wt("position")).emit(wt("drag")),a.redrawHint("drag",!0),a.redraw()}}else Lt();Fr=!0}if(ut[2]=Kr[0],ut[3]=Kr[1],Fr)return xr.stopPropagation&&xr.stopPropagation(),xr.preventDefault&&xr.preventDefault(),!1}},!1);var yr,br,Er;a.registerBinding(e,"mouseup",function(xr){if(!(a.hoverData.which===1&&xr.which!==1&&a.hoverData.capture)){var Lr=a.hoverData.capture;if(Lr){a.hoverData.capture=!1;var Fr=a.cy,zr=a.projectIntoViewport(xr.clientX,xr.clientY),Hr=a.selection,at=a.findNearestElement(zr[0],zr[1],!0,!1),Kr=a.dragData.possibleDragElements,st=a.hoverData.down,it=d(xr);a.data.bgActivePosistion&&(a.redrawHint("select",!0),a.redraw()),a.hoverData.tapholdCancelled=!0,a.data.bgActivePosistion=void 0,st&&st.unactivate();var ut=function(xt){return{originalEvent:xr,type:xt,position:{x:zr[0],y:zr[1]}}};if(a.hoverData.which===3){var ht=ut("cxttapend");if(st?st.emit(ht):Fr.emit(ht),!a.hoverData.cxtDragged){var ft=ut("cxttap");st?st.emit(ft):Fr.emit(ft)}a.hoverData.cxtDragged=!1,a.hoverData.which=null}else if(a.hoverData.which===1){if(c(at,["mouseup","tapend","vmouseup"],xr,{x:zr[0],y:zr[1]}),!a.dragData.didDrag&&!a.hoverData.dragged&&!a.hoverData.selecting&&!a.hoverData.isOverThresholdDrag&&(c(st,["click","tap","vclick"],xr,{x:zr[0],y:zr[1]}),br=!1,xr.timeStamp-Er<=Fr.multiClickDebounceTime()?(yr&&clearTimeout(yr),br=!0,Er=null,c(st,["dblclick","dbltap","vdblclick"],xr,{x:zr[0],y:zr[1]})):(yr=setTimeout(function(){br||c(st,["oneclick","onetap","voneclick"],xr,{x:zr[0],y:zr[1]})},Fr.multiClickDebounceTime()),Er=xr.timeStamp)),st==null&&!a.dragData.didDrag&&!a.hoverData.selecting&&!a.hoverData.dragged&&!d(xr)&&(Fr.$(s).unselect(["tapunselect"]),Kr.length>0&&a.redrawHint("eles",!0),a.dragData.possibleDragElements=Kr=Fr.collection()),at==st&&!a.dragData.didDrag&&!a.hoverData.selecting&&at!=null&&at._private.selectable&&(a.hoverData.dragging||(Fr.selectionType()==="additive"||it?at.selected()?at.unselect(["tapunselect"]):at.select(["tapselect"]):it||(Fr.$(s).unmerge(at).unselect(["tapunselect"]),at.select(["tapselect"]))),a.redrawHint("eles",!0)),a.hoverData.selecting){var ot=Fr.collection(a.getAllInBox(Hr[0],Hr[1],Hr[2],Hr[3]));a.redrawHint("select",!0),ot.length>0&&a.redrawHint("eles",!0),Fr.emit(ut("boxend"));var mt=function(xt){return xt.selectable()&&!xt.selected()};Fr.selectionType()==="additive"||it||Fr.$(s).unmerge(ot).unselect(),ot.emit(ut("box")).stdFilter(mt).select().emit(ut("boxselect")),a.redraw()}if(a.hoverData.dragging&&(a.hoverData.dragging=!1,a.redrawHint("select",!0),a.redrawHint("eles",!0),a.redraw()),!Hr[4]){a.redrawHint("drag",!0),a.redrawHint("eles",!0);var vt=st&&st.grabbed();ir(Kr),vt&&(st.emit(ut("freeon")),Kr.emit(ut("free")),a.dragData.didDrag&&(st.emit(ut("dragfreeon")),Kr.emit(ut("dragfree"))))}}Hr[4]=0,a.hoverData.down=null,a.hoverData.cxtStarted=!1,a.hoverData.draggingEles=!1,a.hoverData.selecting=!1,a.hoverData.isOverThresholdDrag=!1,a.dragData.didDrag=!1,a.hoverData.dragged=!1,a.hoverData.dragDelta=[],a.hoverData.mdownPos=null,a.hoverData.mdownGPos=null,a.hoverData.which=null}}},!1);var _r=[],Rr=4,Cr,wr=1e5,$r=function(xr,Lr){for(var Fr=0;Fr<xr.length;Fr++)if(xr[Fr]%Lr!==0)return!1;return!0},Ar=function(xr){for(var Lr=Math.abs(xr[0]),Fr=1;Fr<xr.length;Fr++)if(Math.abs(xr[Fr])!==Lr)return!1;return!0},Sr=function(xr){var Lr=!1,Fr=xr.deltaY;if(Fr==null&&(xr.wheelDeltaY!=null?Fr=xr.wheelDeltaY/4:xr.wheelDelta!=null&&(Fr=xr.wheelDelta/4)),Fr!==0){if(Cr==null)if(_r.length>=Rr){var zr=_r;if(Cr=$r(zr,5),!Cr){var Hr=Math.abs(zr[0]);Cr=Ar(zr)&&Hr>5}if(Cr)for(var at=0;at<zr.length;at++)wr=Math.min(Math.abs(zr[at]),wr)}else _r.push(Fr),Lr=!0;else Cr&&(wr=Math.min(Math.abs(Fr),wr));if(!a.scrollingPage){var Kr=a.cy,st=Kr.zoom(),it=Kr.pan(),ut=a.projectIntoViewport(xr.clientX,xr.clientY),ht=[ut[0]*st+it.x,ut[1]*st+it.y];if(a.hoverData.draggingEles||a.hoverData.dragging||a.hoverData.cxtStarted||gr()){xr.preventDefault();return}if(Kr.panningEnabled()&&Kr.userPanningEnabled()&&Kr.zoomingEnabled()&&Kr.userZoomingEnabled()){xr.preventDefault(),a.data.wheelZooming=!0,clearTimeout(a.data.wheelTimeout),a.data.wheelTimeout=setTimeout(function(){a.data.wheelZooming=!1,a.redrawHint("eles",!0),a.redraw()},150);var ft;Lr&&Math.abs(Fr)>5&&(Fr=signum(Fr)*5),ft=Fr/-250,Cr&&(ft/=wr,ft*=3),ft=ft*a.wheelSensitivity;var ot=xr.deltaMode===1;ot&&(ft*=33);var mt=Kr.zoom()*Math.pow(10,ft);xr.type==="gesturechange"&&(mt=a.gestureStartZoom*xr.scale),Kr.zoom({level:mt,renderedPosition:{x:ht[0],y:ht[1]}}),Kr.emit({type:xr.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:xr,position:{x:ut[0],y:ut[1]}})}}}};a.registerBinding(a.container,"wheel",Sr,!0),a.registerBinding(e,"scroll",function(xr){a.scrollingPage=!0,clearTimeout(a.scrollingPageTimeout),a.scrollingPageTimeout=setTimeout(function(){a.scrollingPage=!1},250)},!0),a.registerBinding(a.container,"gesturestart",function(xr){a.gestureStartZoom=a.cy.zoom(),a.hasTouchStarted||xr.preventDefault()},!0),a.registerBinding(a.container,"gesturechange",function(Gr){a.hasTouchStarted||Sr(Gr)},!0),a.registerBinding(a.container,"mouseout",function(xr){var Lr=a.projectIntoViewport(xr.clientX,xr.clientY);a.cy.emit({originalEvent:xr,type:"mouseout",position:{x:Lr[0],y:Lr[1]}})},!1),a.registerBinding(a.container,"mouseover",function(xr){var Lr=a.projectIntoViewport(xr.clientX,xr.clientY);a.cy.emit({originalEvent:xr,type:"mouseover",position:{x:Lr[0],y:Lr[1]}})},!1);var kr,Mr,qr,Tr,Pr,Br,Ur,Nr,Ir,Dr,Or,jr,Wr,Xr=function(xr,Lr,Fr,zr){return Math.sqrt((Fr-xr)*(Fr-xr)+(zr-Lr)*(zr-Lr))},dt=function(xr,Lr,Fr,zr){return(Fr-xr)*(Fr-xr)+(zr-Lr)*(zr-Lr)},Vr;a.registerBinding(a.container,"touchstart",Vr=function(xr){if(a.hasTouchStarted=!0,!!pr(xr)){ur(),a.touchData.capture=!0,a.data.bgActivePosistion=void 0;var Lr=a.cy,Fr=a.touchData.now,zr=a.touchData.earlier;if(xr.touches[0]){var Hr=a.projectIntoViewport(xr.touches[0].clientX,xr.touches[0].clientY);Fr[0]=Hr[0],Fr[1]=Hr[1]}if(xr.touches[1]){var Hr=a.projectIntoViewport(xr.touches[1].clientX,xr.touches[1].clientY);Fr[2]=Hr[0],Fr[3]=Hr[1]}if(xr.touches[2]){var Hr=a.projectIntoViewport(xr.touches[2].clientX,xr.touches[2].clientY);Fr[4]=Hr[0],Fr[5]=Hr[1]}var at=function(St){return{originalEvent:xr,type:St,position:{x:Fr[0],y:Fr[1]}}};if(xr.touches[1]){a.touchData.singleTouchMoved=!0,ir(a.dragData.touchDragEles);var Kr=a.findContainerClientCoords();Ir=Kr[0],Dr=Kr[1],Or=Kr[2],jr=Kr[3],kr=xr.touches[0].clientX-Ir,Mr=xr.touches[0].clientY-Dr,qr=xr.touches[1].clientX-Ir,Tr=xr.touches[1].clientY-Dr,Wr=0<=kr&&kr<=Or&&0<=qr&&qr<=Or&&0<=Mr&&Mr<=jr&&0<=Tr&&Tr<=jr;var st=Lr.pan(),it=Lr.zoom();Pr=Xr(kr,Mr,qr,Tr),Br=dt(kr,Mr,qr,Tr),Ur=[(kr+qr)/2,(Mr+Tr)/2],Nr=[(Ur[0]-st.x)/it,(Ur[1]-st.y)/it];var ut=200,ht=ut*ut;if(Br<ht&&!xr.touches[2]){var ft=a.findNearestElement(Fr[0],Fr[1],!0,!0),ot=a.findNearestElement(Fr[2],Fr[3],!0,!0);ft&&ft.isNode()?(ft.activate().emit(at("cxttapstart")),a.touchData.start=ft):ot&&ot.isNode()?(ot.activate().emit(at("cxttapstart")),a.touchData.start=ot):Lr.emit(at("cxttapstart")),a.touchData.start&&(a.touchData.start._private.grabbed=!1),a.touchData.cxt=!0,a.touchData.cxtDragged=!1,a.data.bgActivePosistion=void 0,a.redraw();return}}if(xr.touches[2])Lr.boxSelectionEnabled()&&xr.preventDefault();else if(!xr.touches[1]){if(xr.touches[0]){var mt=a.findNearestElements(Fr[0],Fr[1],!0,!0),vt=mt[0];if(vt!=null&&(vt.activate(),a.touchData.start=vt,a.touchData.starts=mt,a.nodeIsGrabbable(vt))){var Et=a.dragData.touchDragEles=Lr.collection(),xt=null;a.redrawHint("eles",!0),a.redrawHint("drag",!0),vt.selected()?(xt=Lr.$(function(Rt){return Rt.selected()&&a.nodeIsGrabbable(Rt)}),lr(xt,{addToList:Et})):or(vt,{addToList:Et}),rr(vt),vt.emit(at("grabon")),xt?xt.forEach(function(Rt){Rt.emit(at("grab"))}):vt.emit(at("grab"))}c(vt,["touchstart","tapstart","vmousedown"],xr,{x:Fr[0],y:Fr[1]}),vt==null&&(a.data.bgActivePosistion={x:Hr[0],y:Hr[1]},a.redrawHint("select",!0),a.redraw()),a.touchData.singleTouchMoved=!1,a.touchData.singleTouchStartTime=+new Date,clearTimeout(a.touchData.tapholdTimeout),a.touchData.tapholdTimeout=setTimeout(function(){a.touchData.singleTouchMoved===!1&&!a.pinching&&!a.touchData.selecting&&c(a.touchData.start,["taphold"],xr,{x:Fr[0],y:Fr[1]})},a.tapholdDuration)}}if(xr.touches.length>=1){for(var Tt=a.touchData.startPosition=[null,null,null,null,null,null],_t=0;_t<Fr.length;_t++)Tt[_t]=zr[_t]=Fr[_t];var Ct=xr.touches[0];a.touchData.startGPosition=[Ct.clientX,Ct.clientY]}}},!1);var Zr;a.registerBinding(e,"touchmove",Zr=function(xr){var Lr=a.touchData.capture;if(!(!Lr&&!pr(xr))){var Fr=a.selection,zr=a.cy,Hr=a.touchData.now,at=a.touchData.earlier,Kr=zr.zoom();if(xr.touches[0]){var st=a.projectIntoViewport(xr.touches[0].clientX,xr.touches[0].clientY);Hr[0]=st[0],Hr[1]=st[1]}if(xr.touches[1]){var st=a.projectIntoViewport(xr.touches[1].clientX,xr.touches[1].clientY);Hr[2]=st[0],Hr[3]=st[1]}if(xr.touches[2]){var st=a.projectIntoViewport(xr.touches[2].clientX,xr.touches[2].clientY);Hr[4]=st[0],Hr[5]=st[1]}var it=function(on){return{originalEvent:xr,type:on,position:{x:Hr[0],y:Hr[1]}}},ut=a.touchData.startGPosition,ht;if(Lr&&xr.touches[0]&&ut){for(var ft=[],ot=0;ot<Hr.length;ot++)ft[ot]=Hr[ot]-at[ot];var mt=xr.touches[0].clientX-ut[0],vt=mt*mt,Et=xr.touches[0].clientY-ut[1],xt=Et*Et,Tt=vt+xt;ht=Tt>=a.touchTapThreshold2}if(Lr&&a.touchData.cxt){xr.preventDefault();var _t=xr.touches[0].clientX-Ir,Ct=xr.touches[0].clientY-Dr,Rt=xr.touches[1].clientX-Ir,St=xr.touches[1].clientY-Dr,Lt=dt(_t,Ct,Rt,St),wt=Lt/Br,Dt=150,Bt=Dt*Dt,Mt=1.5,Vt=Mt*Mt;if(wt>=Vt||Lt>=Bt){a.touchData.cxt=!1,a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);var Ot=it("cxttapend");a.touchData.start?(a.touchData.start.unactivate().emit(Ot),a.touchData.start=null):zr.emit(Ot)}}if(Lr&&a.touchData.cxt){var Ot=it("cxtdrag");a.data.bgActivePosistion=void 0,a.redrawHint("select",!0),a.touchData.start?a.touchData.start.emit(Ot):zr.emit(Ot),a.touchData.start&&(a.touchData.start._private.grabbed=!1),a.touchData.cxtDragged=!0;var kt=a.findNearestElement(Hr[0],Hr[1],!0,!0);(!a.touchData.cxtOver||kt!==a.touchData.cxtOver)&&(a.touchData.cxtOver&&a.touchData.cxtOver.emit(it("cxtdragout")),a.touchData.cxtOver=kt,kt&&kt.emit(it("cxtdragover")))}else if(Lr&&xr.touches[2]&&zr.boxSelectionEnabled())xr.preventDefault(),a.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,a.touchData.selecting||zr.emit(it("boxstart")),a.touchData.selecting=!0,a.touchData.didSelect=!0,Fr[4]=1,!Fr||Fr.length===0||Fr[0]===void 0?(Fr[0]=(Hr[0]+Hr[2]+Hr[4])/3,Fr[1]=(Hr[1]+Hr[3]+Hr[5])/3,Fr[2]=(Hr[0]+Hr[2]+Hr[4])/3+1,Fr[3]=(Hr[1]+Hr[3]+Hr[5])/3+1):(Fr[2]=(Hr[0]+Hr[2]+Hr[4])/3,Fr[3]=(Hr[1]+Hr[3]+Hr[5])/3),a.redrawHint("select",!0),a.redraw();else if(Lr&&xr.touches[1]&&!a.touchData.didSelect&&zr.zoomingEnabled()&&zr.panningEnabled()&&zr.userZoomingEnabled()&&zr.userPanningEnabled()){xr.preventDefault(),a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);var qt=a.dragData.touchDragEles;if(qt){a.redrawHint("drag",!0);for(var $t=0;$t<qt.length;$t++){var Nt=qt[$t]._private;Nt.grabbed=!1,Nt.rscratch.inDragLayer=!1}}var At=a.touchData.start,_t=xr.touches[0].clientX-Ir,Ct=xr.touches[0].clientY-Dr,Rt=xr.touches[1].clientX-Ir,St=xr.touches[1].clientY-Dr,Kt=Xr(_t,Ct,Rt,St),Qt=Kt/Pr;if(Wr){var Zt=_t-kr,Jt=Ct-Mr,en=Rt-qr,rn=St-Tr,tn=(Zt+en)/2,nn=(Jt+rn)/2,jt=zr.zoom(),Ht=jt*Qt,Gt=zr.pan(),Wt=Nr[0]*jt+Gt.x,Xt=Nr[1]*jt+Gt.y,an={x:-Ht/jt*(Wt-Gt.x-tn)+Wt,y:-Ht/jt*(Xt-Gt.y-nn)+Xt};if(At&&At.active()){var qt=a.dragData.touchDragEles;ir(qt),a.redrawHint("drag",!0),a.redrawHint("eles",!0),At.unactivate().emit(it("freeon")),qt.emit(it("free")),a.dragData.didDrag&&(At.emit(it("dragfreeon")),qt.emit(it("dragfree")))}zr.viewport({zoom:Ht,pan:an,cancelOnFailedZoom:!0}),zr.emit(it("pinchzoom")),Pr=Kt,kr=_t,Mr=Ct,qr=Rt,Tr=St,a.pinching=!0}if(xr.touches[0]){var st=a.projectIntoViewport(xr.touches[0].clientX,xr.touches[0].clientY);Hr[0]=st[0],Hr[1]=st[1]}if(xr.touches[1]){var st=a.projectIntoViewport(xr.touches[1].clientX,xr.touches[1].clientY);Hr[2]=st[0],Hr[3]=st[1]}if(xr.touches[2]){var st=a.projectIntoViewport(xr.touches[2].clientX,xr.touches[2].clientY);Hr[4]=st[0],Hr[5]=st[1]}}else if(xr.touches[0]&&!a.touchData.didSelect){var Pt=a.touchData.start,Ut=a.touchData.last,kt;if(!a.hoverData.draggingEles&&!a.swipePanning&&(kt=a.findNearestElement(Hr[0],Hr[1],!0,!0)),Lr&&Pt!=null&&xr.preventDefault(),Lr&&Pt!=null&&a.nodeIsDraggable(Pt))if(ht){var qt=a.dragData.touchDragEles,Yt=!a.dragData.didDrag;Yt&&lr(qt,{inDragLayer:!0}),a.dragData.didDrag=!0;var zt={x:0,y:0};if(number$1(ft[0])&&number$1(ft[1])&&(zt.x+=ft[0],zt.y+=ft[1],Yt)){a.redrawHint("eles",!0);var It=a.touchData.dragDelta;It&&number$1(It[0])&&number$1(It[1])&&(zt.x+=It[0],zt.y+=It[1])}a.hoverData.draggingEles=!0,qt.silentShift(zt).emit(it("position")).emit(it("drag")),a.redrawHint("drag",!0),a.touchData.startPosition[0]==at[0]&&a.touchData.startPosition[1]==at[1]&&a.redrawHint("eles",!0),a.redraw()}else{var It=a.touchData.dragDelta=a.touchData.dragDelta||[];It.length===0?(It.push(ft[0]),It.push(ft[1])):(It[0]+=ft[0],It[1]+=ft[1])}if(c(Pt||kt,["touchmove","tapdrag","vmousemove"],xr,{x:Hr[0],y:Hr[1]}),(!Pt||!Pt.grabbed())&&kt!=Ut&&(Ut&&Ut.emit(it("tapdragout")),kt&&kt.emit(it("tapdragover"))),a.touchData.last=kt,Lr)for(var $t=0;$t<Hr.length;$t++)Hr[$t]&&a.touchData.startPosition[$t]&&ht&&(a.touchData.singleTouchMoved=!0);if(Lr&&(Pt==null||Pt.pannable())&&zr.panningEnabled()&&zr.userPanningEnabled()){var sn=g(Pt,a.touchData.starts);sn&&(xr.preventDefault(),a.data.bgActivePosistion||(a.data.bgActivePosistion=array2point(a.touchData.startPosition)),a.swipePanning?(zr.panBy({x:ft[0]*Kr,y:ft[1]*Kr}),zr.emit(it("dragpan"))):ht&&(a.swipePanning=!0,zr.panBy({x:mt*Kr,y:Et*Kr}),zr.emit(it("dragpan")),Pt&&(Pt.unactivate(),a.redrawHint("select",!0),a.touchData.start=null)));var st=a.projectIntoViewport(xr.touches[0].clientX,xr.touches[0].clientY);Hr[0]=st[0],Hr[1]=st[1]}}for(var ot=0;ot<Hr.length;ot++)at[ot]=Hr[ot];Lr&&xr.touches.length>0&&!a.hoverData.draggingEles&&!a.swipePanning&&a.data.bgActivePosistion!=null&&(a.data.bgActivePosistion=void 0,a.redrawHint("select",!0),a.redraw())}},!1);var et;a.registerBinding(e,"touchcancel",et=function(xr){var Lr=a.touchData.start;a.touchData.capture=!1,Lr&&Lr.unactivate()});var Yr,Qr,Jr,rt;if(a.registerBinding(e,"touchend",Yr=function(xr){var Lr=a.touchData.start,Fr=a.touchData.capture;if(Fr)xr.touches.length===0&&(a.touchData.capture=!1),xr.preventDefault();else return;var zr=a.selection;a.swipePanning=!1,a.hoverData.draggingEles=!1;var Hr=a.cy,at=Hr.zoom(),Kr=a.touchData.now,st=a.touchData.earlier;if(xr.touches[0]){var it=a.projectIntoViewport(xr.touches[0].clientX,xr.touches[0].clientY);Kr[0]=it[0],Kr[1]=it[1]}if(xr.touches[1]){var it=a.projectIntoViewport(xr.touches[1].clientX,xr.touches[1].clientY);Kr[2]=it[0],Kr[3]=it[1]}if(xr.touches[2]){var it=a.projectIntoViewport(xr.touches[2].clientX,xr.touches[2].clientY);Kr[4]=it[0],Kr[5]=it[1]}var ut=function(Bt){return{originalEvent:xr,type:Bt,position:{x:Kr[0],y:Kr[1]}}};Lr&&Lr.unactivate();var ht;if(a.touchData.cxt){if(ht=ut("cxttapend"),Lr?Lr.emit(ht):Hr.emit(ht),!a.touchData.cxtDragged){var ft=ut("cxttap");Lr?Lr.emit(ft):Hr.emit(ft)}a.touchData.start&&(a.touchData.start._private.grabbed=!1),a.touchData.cxt=!1,a.touchData.start=null,a.redraw();return}if(!xr.touches[2]&&Hr.boxSelectionEnabled()&&a.touchData.selecting){a.touchData.selecting=!1;var ot=Hr.collection(a.getAllInBox(zr[0],zr[1],zr[2],zr[3]));zr[0]=void 0,zr[1]=void 0,zr[2]=void 0,zr[3]=void 0,zr[4]=0,a.redrawHint("select",!0),Hr.emit(ut("boxend"));var mt=function(Bt){return Bt.selectable()&&!Bt.selected()};ot.emit(ut("box")).stdFilter(mt).select().emit(ut("boxselect")),ot.nonempty()&&a.redrawHint("eles",!0),a.redraw()}if(Lr!=null&&Lr.unactivate(),xr.touches[2])a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);else if(!xr.touches[1]){if(!xr.touches[0]){if(!xr.touches[0]){a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);var vt=a.dragData.touchDragEles;if(Lr!=null){var Et=Lr._private.grabbed;ir(vt),a.redrawHint("drag",!0),a.redrawHint("eles",!0),Et&&(Lr.emit(ut("freeon")),vt.emit(ut("free")),a.dragData.didDrag&&(Lr.emit(ut("dragfreeon")),vt.emit(ut("dragfree")))),c(Lr,["touchend","tapend","vmouseup","tapdragout"],xr,{x:Kr[0],y:Kr[1]}),Lr.unactivate(),a.touchData.start=null}else{var xt=a.findNearestElement(Kr[0],Kr[1],!0,!0);c(xt,["touchend","tapend","vmouseup","tapdragout"],xr,{x:Kr[0],y:Kr[1]})}var Tt=a.touchData.startPosition[0]-Kr[0],_t=Tt*Tt,Ct=a.touchData.startPosition[1]-Kr[1],Rt=Ct*Ct,St=_t+Rt,Lt=St*at*at;a.touchData.singleTouchMoved||(Lr||Hr.$(":selected").unselect(["tapunselect"]),c(Lr,["tap","vclick"],xr,{x:Kr[0],y:Kr[1]}),Qr=!1,xr.timeStamp-rt<=Hr.multiClickDebounceTime()?(Jr&&clearTimeout(Jr),Qr=!0,rt=null,c(Lr,["dbltap","vdblclick"],xr,{x:Kr[0],y:Kr[1]})):(Jr=setTimeout(function(){Qr||c(Lr,["onetap","voneclick"],xr,{x:Kr[0],y:Kr[1]})},Hr.multiClickDebounceTime()),rt=xr.timeStamp)),Lr!=null&&!a.dragData.didDrag&&Lr._private.selectable&&Lt<a.touchTapThreshold2&&!a.pinching&&(Hr.selectionType()==="single"?(Hr.$(s).unmerge(Lr).unselect(["tapunselect"]),Lr.select(["tapselect"])):Lr.selected()?Lr.unselect(["tapunselect"]):Lr.select(["tapselect"]),a.redrawHint("eles",!0)),a.touchData.singleTouchMoved=!0}}}for(var wt=0;wt<Kr.length;wt++)st[wt]=Kr[wt];a.dragData.didDrag=!1,xr.touches.length===0&&(a.touchData.dragDelta=[],a.touchData.startPosition=[null,null,null,null,null,null],a.touchData.startGPosition=null,a.touchData.didSelect=!1),xr.touches.length<2&&(xr.touches.length===1&&(a.touchData.startGPosition=[xr.touches[0].clientX,xr.touches[0].clientY]),a.pinching=!1,a.redrawHint("eles",!0),a.redraw())},!1),typeof TouchEvent>"u"){var tt=[],lt=function(xr){return{clientX:xr.clientX,clientY:xr.clientY,force:1,identifier:xr.pointerId,pageX:xr.pageX,pageY:xr.pageY,radiusX:xr.width/2,radiusY:xr.height/2,screenX:xr.screenX,screenY:xr.screenY,target:xr.target}},pt=function(xr){return{event:xr,touch:lt(xr)}},yt=function(xr){tt.push(pt(xr))},gt=function(xr){for(var Lr=0;Lr<tt.length;Lr++){var Fr=tt[Lr];if(Fr.event.pointerId===xr.pointerId){tt.splice(Lr,1);return}}},bt=function(xr){var Lr=tt.filter(function(Fr){return Fr.event.pointerId===xr.pointerId})[0];Lr.event=xr,Lr.touch=lt(xr)},ct=function(xr){xr.touches=tt.map(function(Lr){return Lr.touch})},nt=function(xr){return xr.pointerType==="mouse"||xr.pointerType===4};a.registerBinding(a.container,"pointerdown",function(Gr){nt(Gr)||(Gr.preventDefault(),yt(Gr),ct(Gr),Vr(Gr))}),a.registerBinding(a.container,"pointerup",function(Gr){nt(Gr)||(gt(Gr),ct(Gr),Yr(Gr))}),a.registerBinding(a.container,"pointercancel",function(Gr){nt(Gr)||(gt(Gr),ct(Gr),et(Gr))}),a.registerBinding(a.container,"pointermove",function(Gr){nt(Gr)||(Gr.preventDefault(),bt(Gr),ct(Gr),Zr(Gr))})}};var BRp$2={};BRp$2.generatePolygon=function(a,e){return this.nodeShapes[a]={renderer:this,name:a,points:e,draw:function(o,c,d,g,b,j){this.renderer.nodeShapeImpl("polygon",o,c,d,g,b,this.points)},intersectLine:function(o,c,d,g,b,j,_e,er){return polygonIntersectLine(b,j,this.points,o,c,d/2,g/2,_e)},checkPoint:function(o,c,d,g,b,j,_e,er){return pointInsidePolygon(o,c,this.points,j,_e,g,b,[0,-1],d)},hasMiterBounds:a!=="rectangle",miterBounds:function(o,c,d,g,b,j){return miterBox(this.points,o,c,d,g,b)}}};BRp$2.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,s,o,c,d,g){this.renderer.nodeShapeImpl(this.name,e,s,o,c,d)},intersectLine:function(e,s,o,c,d,g,b,j){return intersectLineEllipse(d,g,e,s,o/2+b,c/2+b)},checkPoint:function(e,s,o,c,d,g,b,j){return checkInEllipse(e,s,c,d,g,b,o)}}};BRp$2.generateRoundPolygon=function(a,e){return this.nodeShapes[a]={renderer:this,name:a,points:e,getOrCreateCorners:function(o,c,d,g,b,j,_e){if(j[_e]!==void 0&&j[_e+"-cx"]===o&&j[_e+"-cy"]===c)return j[_e];j[_e]=new Array(e.length/2),j[_e+"-cx"]=o,j[_e+"-cy"]=c;var er=d/2,rr=g/2;b=b==="auto"?getRoundPolygonRadius(d,g):b;for(var tr=new Array(e.length/2),nr=0;nr<e.length/2;nr++)tr[nr]={x:o+er*e[nr*2],y:c+rr*e[nr*2+1]};var ar,lr,or,ir,sr=tr.length;for(lr=tr[sr-1],ar=0;ar<sr;ar++)or=tr[ar%sr],ir=tr[(ar+1)%sr],j[_e][ar]=getRoundCorner(lr,or,ir,b),lr=or,or=ir;return j[_e]},draw:function(o,c,d,g,b,j,_e){this.renderer.nodeShapeImpl("round-polygon",o,c,d,g,b,this.points,this.getOrCreateCorners(c,d,g,b,j,_e,"drawCorners"))},intersectLine:function(o,c,d,g,b,j,_e,er,rr){return roundPolygonIntersectLine(b,j,this.points,o,c,d,g,_e,this.getOrCreateCorners(o,c,d,g,er,rr,"corners"))},checkPoint:function(o,c,d,g,b,j,_e,er,rr){return pointInsideRoundPolygon(o,c,this.points,j,_e,g,b,this.getOrCreateCorners(j,_e,g,b,er,rr,"corners"))}}};BRp$2.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(e,s,o,c,d,g){this.renderer.nodeShapeImpl(this.name,e,s,o,c,d,this.points,g)},intersectLine:function(e,s,o,c,d,g,b,j){return roundRectangleIntersectLine(d,g,e,s,o,c,b,j)},checkPoint:function(e,s,o,c,d,g,b,j){var _e=c/2,er=d/2;j=j==="auto"?getRoundRectangleRadius(c,d):j,j=Math.min(_e,er,j);var rr=j*2;return!!(pointInsidePolygon(e,s,this.points,g,b,c,d-rr,[0,-1],o)||pointInsidePolygon(e,s,this.points,g,b,c-rr,d,[0,-1],o)||checkInEllipse(e,s,rr,rr,g-_e+j,b-er+j,o)||checkInEllipse(e,s,rr,rr,g+_e-j,b-er+j,o)||checkInEllipse(e,s,rr,rr,g+_e-j,b+er-j,o)||checkInEllipse(e,s,rr,rr,g-_e+j,b+er-j,o))}}};BRp$2.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:getCutRectangleCornerLength(),points:generateUnitNgonPointsFitToSquare(4,0),draw:function(e,s,o,c,d,g){this.renderer.nodeShapeImpl(this.name,e,s,o,c,d,null,g)},generateCutTrianglePts:function(e,s,o,c,d){var g=d==="auto"?this.cornerLength:d,b=s/2,j=e/2,_e=o-j,er=o+j,rr=c-b,tr=c+b;return{topLeft:[_e,rr+g,_e+g,rr,_e+g,rr+g],topRight:[er-g,rr,er,rr+g,er-g,rr+g],bottomRight:[er,tr-g,er-g,tr,er-g,tr-g],bottomLeft:[_e+g,tr,_e,tr-g,_e+g,tr-g]}},intersectLine:function(e,s,o,c,d,g,b,j){var _e=this.generateCutTrianglePts(o+2*b,c+2*b,e,s,j),er=[].concat.apply([],[_e.topLeft.splice(0,4),_e.topRight.splice(0,4),_e.bottomRight.splice(0,4),_e.bottomLeft.splice(0,4)]);return polygonIntersectLine(d,g,er,e,s)},checkPoint:function(e,s,o,c,d,g,b,j){var _e=j==="auto"?this.cornerLength:j;if(pointInsidePolygon(e,s,this.points,g,b,c,d-2*_e,[0,-1],o)||pointInsidePolygon(e,s,this.points,g,b,c-2*_e,d,[0,-1],o))return!0;var er=this.generateCutTrianglePts(c,d,g,b);return pointInsidePolygonPoints(e,s,er.topLeft)||pointInsidePolygonPoints(e,s,er.topRight)||pointInsidePolygonPoints(e,s,er.bottomRight)||pointInsidePolygonPoints(e,s,er.bottomLeft)}}};BRp$2.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(e,s,o,c,d,g){this.renderer.nodeShapeImpl(this.name,e,s,o,c,d)},intersectLine:function(e,s,o,c,d,g,b,j){var _e=.15,er=.5,rr=.85,tr=this.generateBarrelBezierPts(o+2*b,c+2*b,e,s),nr=function(or){var ir=qbezierPtAt({x:or[0],y:or[1]},{x:or[2],y:or[3]},{x:or[4],y:or[5]},_e),sr=qbezierPtAt({x:or[0],y:or[1]},{x:or[2],y:or[3]},{x:or[4],y:or[5]},er),ur=qbezierPtAt({x:or[0],y:or[1]},{x:or[2],y:or[3]},{x:or[4],y:or[5]},rr);return[or[0],or[1],ir.x,ir.y,sr.x,sr.y,ur.x,ur.y,or[4],or[5]]},ar=[].concat(nr(tr.topLeft),nr(tr.topRight),nr(tr.bottomRight),nr(tr.bottomLeft));return polygonIntersectLine(d,g,ar,e,s)},generateBarrelBezierPts:function(e,s,o,c){var d=s/2,g=e/2,b=o-g,j=o+g,_e=c-d,er=c+d,rr=getBarrelCurveConstants(e,s),tr=rr.heightOffset,nr=rr.widthOffset,ar=rr.ctrlPtOffsetPct*e,lr={topLeft:[b,_e+tr,b+ar,_e,b+nr,_e],topRight:[j-nr,_e,j-ar,_e,j,_e+tr],bottomRight:[j,er-tr,j-ar,er,j-nr,er],bottomLeft:[b+nr,er,b+ar,er,b,er-tr]};return lr.topLeft.isTop=!0,lr.topRight.isTop=!0,lr.bottomLeft.isBottom=!0,lr.bottomRight.isBottom=!0,lr},checkPoint:function(e,s,o,c,d,g,b,j){var _e=getBarrelCurveConstants(c,d),er=_e.heightOffset,rr=_e.widthOffset;if(pointInsidePolygon(e,s,this.points,g,b,c,d-2*er,[0,-1],o)||pointInsidePolygon(e,s,this.points,g,b,c-2*rr,d,[0,-1],o))return!0;for(var tr=this.generateBarrelBezierPts(c,d,g,b),nr=function(vr,gr,pr){var mr=pr[4],yr=pr[2],br=pr[0],Er=pr[5],_r=pr[1],Rr=Math.min(mr,br),Cr=Math.max(mr,br),wr=Math.min(Er,_r),$r=Math.max(Er,_r);if(Rr<=vr&&vr<=Cr&&wr<=gr&&gr<=$r){var Ar=bezierPtsToQuadCoeff(mr,yr,br),Sr=solveQuadratic(Ar[0],Ar[1],Ar[2],vr),kr=Sr.filter(function(Mr){return 0<=Mr&&Mr<=1});if(kr.length>0)return kr[0]}return null},ar=Object.keys(tr),lr=0;lr<ar.length;lr++){var or=ar[lr],ir=tr[or],sr=nr(e,s,ir);if(sr!=null){var ur=ir[5],cr=ir[3],fr=ir[1],hr=qbezierAt(ur,cr,fr,sr);if(ir.isTop&&hr<=s||ir.isBottom&&s<=hr)return!0}}return!1}}};BRp$2.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:generateUnitNgonPointsFitToSquare(4,0),draw:function(e,s,o,c,d,g){this.renderer.nodeShapeImpl(this.name,e,s,o,c,d,this.points,g)},intersectLine:function(e,s,o,c,d,g,b,j){var _e=e-(o/2+b),er=s-(c/2+b),rr=er,tr=e+(o/2+b),nr=finiteLinesIntersect(d,g,e,s,_e,er,tr,rr,!1);return nr.length>0?nr:roundRectangleIntersectLine(d,g,e,s,o,c,b,j)},checkPoint:function(e,s,o,c,d,g,b,j){j=j==="auto"?getRoundRectangleRadius(c,d):j;var _e=2*j;if(pointInsidePolygon(e,s,this.points,g,b,c,d-_e,[0,-1],o)||pointInsidePolygon(e,s,this.points,g,b,c-_e,d,[0,-1],o))return!0;var er=c/2+2*o,rr=d/2+2*o,tr=[g-er,b-rr,g-er,b,g+er,b,g+er,b-rr];return!!(pointInsidePolygonPoints(e,s,tr)||checkInEllipse(e,s,_e,_e,g+c/2-j,b+d/2-j,o)||checkInEllipse(e,s,_e,_e,g-c/2+j,b+d/2-j,o))}}};BRp$2.registerNodeShapes=function(){var a=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",generateUnitNgonPointsFitToSquare(3,0)),this.generateRoundPolygon("round-triangle",generateUnitNgonPointsFitToSquare(3,0)),this.generatePolygon("rectangle",generateUnitNgonPointsFitToSquare(4,0)),a.square=a.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var s=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",s),this.generateRoundPolygon("round-diamond",s)}this.generatePolygon("pentagon",generateUnitNgonPointsFitToSquare(5,0)),this.generateRoundPolygon("round-pentagon",generateUnitNgonPointsFitToSquare(5,0)),this.generatePolygon("hexagon",generateUnitNgonPointsFitToSquare(6,0)),this.generateRoundPolygon("round-hexagon",generateUnitNgonPointsFitToSquare(6,0)),this.generatePolygon("heptagon",generateUnitNgonPointsFitToSquare(7,0)),this.generateRoundPolygon("round-heptagon",generateUnitNgonPointsFitToSquare(7,0)),this.generatePolygon("octagon",generateUnitNgonPointsFitToSquare(8,0)),this.generateRoundPolygon("round-octagon",generateUnitNgonPointsFitToSquare(8,0));var o=new Array(20);{var c=generateUnitNgonPoints(5,0),d=generateUnitNgonPoints(5,Math.PI/5),g=.5*(3-Math.sqrt(5));g*=1.57;for(var b=0;b<d.length/2;b++)d[b*2]*=g,d[b*2+1]*=g;for(var b=0;b<20/4;b++)o[b*4]=c[b*2],o[b*4+1]=c[b*2+1],o[b*4+2]=d[b*2],o[b*4+3]=d[b*2+1]}o=fitPolygonToSquare(o),this.generatePolygon("star",o),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var j=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",j),this.generateRoundPolygon("round-tag",j)}a.makePolygon=function(_e){var er=_e.join("$"),rr="polygon-"+er,tr;return(tr=this[rr])?tr:e.generatePolygon(rr,_e)}};var BRp$1={};BRp$1.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};BRp$1.redraw=function(a){a=a||staticEmptyObject();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=a};BRp$1.beforeRender=function(a,e){if(!this.destroyed){e==null&&error("Priority is not optional for beforeRender");var s=this.beforeRenderCallbacks;s.push({fn:a,priority:e}),s.sort(function(o,c){return c.priority-o.priority})}};var beforeRenderCallbacks=function(e,s,o){for(var c=e.beforeRenderCallbacks,d=0;d<c.length;d++)c[d].fn(s,o)};BRp$1.startRenderLoop=function(){var a=this,e=a.cy;if(!a.renderLoopStarted){a.renderLoopStarted=!0;var s=function(c){if(!a.destroyed){if(!e.batching())if(a.requestedFrame&&!a.skipFrame){beforeRenderCallbacks(a,!0,c);var d=performanceNow();a.render(a.renderOptions);var g=a.lastDrawTime=performanceNow();a.averageRedrawTime===void 0&&(a.averageRedrawTime=g-d),a.redrawCount===void 0&&(a.redrawCount=0),a.redrawCount++,a.redrawTotalTime===void 0&&(a.redrawTotalTime=0);var b=g-d;a.redrawTotalTime+=b,a.lastRedrawTime=b,a.averageRedrawTime=a.averageRedrawTime/2+b/2,a.requestedFrame=!1}else beforeRenderCallbacks(a,!1,c);a.skipFrame=!1,requestAnimationFrame(s)}};requestAnimationFrame(s)}};var BaseRenderer=function(e){this.init(e)},BR=BaseRenderer,BRp=BR.prototype;BRp.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];BRp.init=function(a){var e=this;e.options=a,e.cy=a.cy;var s=e.container=a.cy.container(),o=e.cy.window();if(o){var c=o.document,d=c.head,g="__________cytoscape_stylesheet",b="__________cytoscape_container",j=c.getElementById(g)!=null;if(s.className.indexOf(b)<0&&(s.className=(s.className||"")+" "+b),!j){var _e=c.createElement("style");_e.id=g,_e.textContent="."+b+" { position: relative; }",d.insertBefore(_e,d.children[0])}var er=o.getComputedStyle(s),rr=er.getPropertyValue("position");rr==="static"&&warn("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=a.showFps,e.debug=a.debug,e.webgl=a.webgl,e.hideEdgesOnViewport=a.hideEdgesOnViewport,e.textureOnViewport=a.textureOnViewport,e.wheelSensitivity=a.wheelSensitivity,e.motionBlurEnabled=a.motionBlur,e.forcedPixelRatio=number$1(a.pixelRatio)?a.pixelRatio:null,e.motionBlur=a.motionBlur,e.motionBlurOpacity=a.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=a.desktopTapThreshold,e.desktopTapThreshold2=a.desktopTapThreshold*a.desktopTapThreshold,e.touchTapThreshold=a.touchTapThreshold,e.touchTapThreshold2=a.touchTapThreshold*a.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};BRp.notify=function(a,e){var s=this,o=s.cy;if(!this.destroyed){if(a==="init"){s.load();return}if(a==="destroy"){s.destroy();return}(a==="add"||a==="remove"||a==="move"&&o.hasCompoundNodes()||a==="load"||a==="zorder"||a==="mount")&&s.invalidateCachedZSortedEles(),a==="viewport"&&s.redrawHint("select",!0),a==="gc"&&s.redrawHint("gc",!0),(a==="load"||a==="resize"||a==="mount")&&(s.invalidateContainerClientCoordsCache(),s.matchCanvasSize(s.container)),s.redrawHint("eles",!0),s.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};BRp.destroy=function(){var a=this;a.destroyed=!0,a.cy.stopAnimationLoop();for(var e=0;e<a.bindings.length;e++){var s=a.bindings[e],o=s,c=o.target;(c.off||c.removeEventListener).apply(c,o.args)}if(a.bindings=[],a.beforeRenderCallbacks=[],a.onUpdateEleCalcsFns=[],a.removeObserver&&a.removeObserver.disconnect(),a.styleObserver&&a.styleObserver.disconnect(),a.resizeObserver&&a.resizeObserver.disconnect(),a.labelCalcDiv)try{document.body.removeChild(a.labelCalcDiv)}catch{}};BRp.isHeadless=function(){return!1};[BRp$f,BRp$5,BRp$4,BRp$3,BRp$2,BRp$1].forEach(function(a){extend(BRp,a)});var fullFpsTime=1e3/60,defs={setupDequeueing:function(e){return function(){var o=this,c=this.renderer;if(!o.dequeueingSetup){o.dequeueingSetup=!0;var d=debounce(function(){c.redrawHint("eles",!0),c.redrawHint("drag",!0),c.redraw()},e.deqRedrawThreshold),g=function(_e,er){var rr=performanceNow(),tr=c.averageRedrawTime,nr=c.lastRedrawTime,ar=[],lr=c.cy.extent(),or=c.getPixelRatio();for(_e||c.flushRenderedStyleQueue();;){var ir=performanceNow(),sr=ir-rr,ur=ir-er;if(nr<fullFpsTime){var cr=fullFpsTime-(_e?tr:0);if(ur>=e.deqFastCost*cr)break}else if(_e){if(sr>=e.deqCost*nr||sr>=e.deqAvgCost*tr)break}else if(ur>=e.deqNoDrawCost*fullFpsTime)break;var fr=e.deq(o,or,lr);if(fr.length>0)for(var hr=0;hr<fr.length;hr++)ar.push(fr[hr]);else break}ar.length>0&&(e.onDeqd(o,ar),!_e&&e.shouldRedraw(o,ar,or,lr)&&d())},b=e.priority||noop$1;c.beforeRender(g,b(o))}}}},ElementTextureCacheLookup=function(){function a(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:falsify;_classCallCheck(this,a),this.idsByKey=new Map$1,this.keyForId=new Map$1,this.cachesByLvl=new Map$1,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=s}return _createClass(a,[{key:"getIdsFor",value:function(s){s==null&&error("Can not get id list for null key");var o=this.idsByKey,c=this.idsByKey.get(s);return c||(c=new Set$1,o.set(s,c)),c}},{key:"addIdForKey",value:function(s,o){s!=null&&this.getIdsFor(s).add(o)}},{key:"deleteIdForKey",value:function(s,o){s!=null&&this.getIdsFor(s).delete(o)}},{key:"getNumberOfIdsForKey",value:function(s){return s==null?0:this.getIdsFor(s).size}},{key:"updateKeyMappingFor",value:function(s){var o=s.id(),c=this.keyForId.get(o),d=this.getKey(s);this.deleteIdForKey(c,o),this.addIdForKey(d,o),this.keyForId.set(o,d)}},{key:"deleteKeyMappingFor",value:function(s){var o=s.id(),c=this.keyForId.get(o);this.deleteIdForKey(c,o),this.keyForId.delete(o)}},{key:"keyHasChangedFor",value:function(s){var o=s.id(),c=this.keyForId.get(o),d=this.getKey(s);return c!==d}},{key:"isInvalid",value:function(s){return this.keyHasChangedFor(s)||this.doesEleInvalidateKey(s)}},{key:"getCachesAt",value:function(s){var o=this.cachesByLvl,c=this.lvls,d=o.get(s);return d||(d=new Map$1,o.set(s,d),c.push(s)),d}},{key:"getCache",value:function(s,o){return this.getCachesAt(o).get(s)}},{key:"get",value:function(s,o){var c=this.getKey(s),d=this.getCache(c,o);return d!=null&&this.updateKeyMappingFor(s),d}},{key:"getForCachedKey",value:function(s,o){var c=this.keyForId.get(s.id()),d=this.getCache(c,o);return d}},{key:"hasCache",value:function(s,o){return this.getCachesAt(o).has(s)}},{key:"has",value:function(s,o){var c=this.getKey(s);return this.hasCache(c,o)}},{key:"setCache",value:function(s,o,c){c.key=s,this.getCachesAt(o).set(s,c)}},{key:"set",value:function(s,o,c){var d=this.getKey(s);this.setCache(d,o,c),this.updateKeyMappingFor(s)}},{key:"deleteCache",value:function(s,o){this.getCachesAt(o).delete(s)}},{key:"delete",value:function(s,o){var c=this.getKey(s);this.deleteCache(c,o)}},{key:"invalidateKey",value:function(s){var o=this;this.lvls.forEach(function(c){return o.deleteCache(s,c)})}},{key:"invalidate",value:function(s){var o=s.id(),c=this.keyForId.get(o);this.deleteKeyMappingFor(s);var d=this.doesEleInvalidateKey(s);return d&&this.invalidateKey(c),d||this.getNumberOfIdsForKey(c)===0}}])}(),minTxrH=25,txrStepH=50,minLvl$1=-4,maxLvl$1=3,maxZoom$1=7.99,eleTxrSpacing=8,defTxrWidth=1024,maxTxrW=1024,maxTxrH=1024,minUtility=.2,maxFullness=.8,maxFullnessChecks=10,deqCost$1=.15,deqAvgCost$1=.1,deqNoDrawCost$1=.9,deqFastCost$1=.9,deqRedrawThreshold$1=100,maxDeqSize$1=1,getTxrReasons={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},initDefaults=defaults$g({getKey:null,doesEleInvalidateKey:falsify,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:trueify,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),ElementTextureCache=function(e,s){var o=this;o.renderer=e,o.onDequeues=[];var c=initDefaults(s);extend(o,c),o.lookup=new ElementTextureCacheLookup(c.getKey,c.doesEleInvalidateKey),o.setupDequeueing()},ETCp=ElementTextureCache.prototype;ETCp.reasons=getTxrReasons;ETCp.getTextureQueue=function(a){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[a]=e.eleImgCaches[a]||[]};ETCp.getRetiredTextureQueue=function(a){var e=this,s=e.eleImgCaches.retired=e.eleImgCaches.retired||{},o=s[a]=s[a]||[];return o};ETCp.getElementQueue=function(){var a=this,e=a.eleCacheQueue=a.eleCacheQueue||new Heap(function(s,o){return o.reqs-s.reqs});return e};ETCp.getElementKeyToQueue=function(){var a=this,e=a.eleKeyToCacheQueue=a.eleKeyToCacheQueue||{};return e};ETCp.getElement=function(a,e,s,o,c){var d=this,g=this.renderer,b=g.cy.zoom(),j=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!a.visible()||a.removed()||!d.allowEdgeTxrCaching&&a.isEdge()||!d.allowParentTxrCaching&&a.isParent())return null;if(o==null&&(o=Math.ceil(log2(b*s))),o<minLvl$1)o=minLvl$1;else if(b>=maxZoom$1||o>maxLvl$1)return null;var _e=Math.pow(2,o),er=e.h*_e,rr=e.w*_e,tr=g.eleTextBiggerThanMin(a,_e);if(!this.isVisible(a,tr))return null;var nr=j.get(a,o);if(nr&&nr.invalidated&&(nr.invalidated=!1,nr.texture.invalidatedWidth-=nr.width),nr)return nr;var ar;if(er<=minTxrH?ar=minTxrH:er<=txrStepH?ar=txrStepH:ar=Math.ceil(er/txrStepH)*txrStepH,er>maxTxrH||rr>maxTxrW)return null;var lr=d.getTextureQueue(ar),or=lr[lr.length-2],ir=function(){return d.recycleTexture(ar,rr)||d.addTexture(ar,rr)};or||(or=lr[lr.length-1]),or||(or=ir()),or.width-or.usedWidth<rr&&(or=ir());for(var sr=function(Rr){return Rr&&Rr.scaledLabelShown===tr},ur=c&&c===getTxrReasons.dequeue,cr=c&&c===getTxrReasons.highQuality,fr=c&&c===getTxrReasons.downscale,hr,dr=o+1;dr<=maxLvl$1;dr++){var vr=j.get(a,dr);if(vr){hr=vr;break}}var gr=hr&&hr.level===o+1?hr:null,pr=function(){or.context.drawImage(gr.texture.canvas,gr.x,0,gr.width,gr.height,or.usedWidth,0,rr,er)};if(or.context.setTransform(1,0,0,1,0,0),or.context.clearRect(or.usedWidth,0,rr,ar),sr(gr))pr();else if(sr(hr))if(cr){for(var mr=hr.level;mr>o;mr--)gr=d.getElement(a,e,s,mr,getTxrReasons.downscale);pr()}else return d.queueElement(a,hr.level-1),hr;else{var yr;if(!ur&&!cr&&!fr)for(var br=o-1;br>=minLvl$1;br--){var Er=j.get(a,br);if(Er){yr=Er;break}}if(sr(yr))return d.queueElement(a,o),yr;or.context.translate(or.usedWidth,0),or.context.scale(_e,_e),this.drawElement(or.context,a,e,tr,!1),or.context.scale(1/_e,1/_e),or.context.translate(-or.usedWidth,0)}return nr={x:or.usedWidth,texture:or,level:o,scale:_e,width:rr,height:er,scaledLabelShown:tr},or.usedWidth+=Math.ceil(rr+eleTxrSpacing),or.eleCaches.push(nr),j.set(a,o,nr),d.checkTextureFullness(or),nr};ETCp.invalidateElements=function(a){for(var e=0;e<a.length;e++)this.invalidateElement(a[e])};ETCp.invalidateElement=function(a){var e=this,s=e.lookup,o=[],c=s.isInvalid(a);if(c){for(var d=minLvl$1;d<=maxLvl$1;d++){var g=s.getForCachedKey(a,d);g&&o.push(g)}var b=s.invalidate(a);if(b)for(var j=0;j<o.length;j++){var _e=o[j],er=_e.texture;er.invalidatedWidth+=_e.width,_e.invalidated=!0,e.checkTextureUtility(er)}e.removeFromQueue(a)}};ETCp.checkTextureUtility=function(a){a.invalidatedWidth>=minUtility*a.width&&this.retireTexture(a)};ETCp.checkTextureFullness=function(a){var e=this,s=e.getTextureQueue(a.height);a.usedWidth/a.width>maxFullness&&a.fullnessChecks>=maxFullnessChecks?removeFromArray(s,a):a.fullnessChecks++};ETCp.retireTexture=function(a){var e=this,s=a.height,o=e.getTextureQueue(s),c=this.lookup;removeFromArray(o,a),a.retired=!0;for(var d=a.eleCaches,g=0;g<d.length;g++){var b=d[g];c.deleteCache(b.key,b.level)}clearArray(d);var j=e.getRetiredTextureQueue(s);j.push(a)};ETCp.addTexture=function(a,e){var s=this,o=s.getTextureQueue(a),c={};return o.push(c),c.eleCaches=[],c.height=a,c.width=Math.max(defTxrWidth,e),c.usedWidth=0,c.invalidatedWidth=0,c.fullnessChecks=0,c.canvas=s.renderer.makeOffscreenCanvas(c.width,c.height),c.context=c.canvas.getContext("2d"),c};ETCp.recycleTexture=function(a,e){for(var s=this,o=s.getTextureQueue(a),c=s.getRetiredTextureQueue(a),d=0;d<c.length;d++){var g=c[d];if(g.width>=e)return g.retired=!1,g.usedWidth=0,g.invalidatedWidth=0,g.fullnessChecks=0,clearArray(g.eleCaches),g.context.setTransform(1,0,0,1,0,0),g.context.clearRect(0,0,g.width,g.height),removeFromArray(c,g),o.push(g),g}};ETCp.queueElement=function(a,e){var s=this,o=s.getElementQueue(),c=s.getElementKeyToQueue(),d=this.getKey(a),g=c[d];if(g)g.level=Math.max(g.level,e),g.eles.merge(a),g.reqs++,o.updateItem(g);else{var b={eles:a.spawn().merge(a),level:e,reqs:1,key:d};o.push(b),c[d]=b}};ETCp.dequeue=function(a){for(var e=this,s=e.getElementQueue(),o=e.getElementKeyToQueue(),c=[],d=e.lookup,g=0;g<maxDeqSize$1&&s.size()>0;g++){var b=s.pop(),j=b.key,_e=b.eles[0],er=d.hasCache(_e,b.level);if(o[j]=null,er)continue;c.push(b);var rr=e.getBoundingBox(_e);e.getElement(_e,rr,a,b.level,getTxrReasons.dequeue)}return c};ETCp.removeFromQueue=function(a){var e=this,s=e.getElementQueue(),o=e.getElementKeyToQueue(),c=this.getKey(a),d=o[c];d!=null&&(d.eles.length===1?(d.reqs=MAX_INT$1,s.updateItem(d),s.pop(),o[c]=null):d.eles.unmerge(a))};ETCp.onDequeue=function(a){this.onDequeues.push(a)};ETCp.offDequeue=function(a){removeFromArray(this.onDequeues,a)};ETCp.setupDequeueing=defs.setupDequeueing({deqRedrawThreshold:deqRedrawThreshold$1,deqCost:deqCost$1,deqAvgCost:deqAvgCost$1,deqNoDrawCost:deqNoDrawCost$1,deqFastCost:deqFastCost$1,deq:function(e,s,o){return e.dequeue(s,o)},onDeqd:function(e,s){for(var o=0;o<e.onDequeues.length;o++){var c=e.onDequeues[o];c(s)}},shouldRedraw:function(e,s,o,c){for(var d=0;d<s.length;d++)for(var g=s[d].eles,b=0;b<g.length;b++){var j=g[b].boundingBox();if(boundingBoxesIntersect(j,c))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var defNumLayers=1,minLvl=-4,maxLvl=2,maxZoom=3.99,deqRedrawThreshold=50,refineEleDebounceTime=50,deqCost=.15,deqAvgCost=.1,deqNoDrawCost=.9,deqFastCost=.9,maxDeqSize=1,invalidThreshold=250,maxLayerArea=4e3*4e3,maxLayerDim=32767,useHighQualityEleTxrReqs=!0,LayeredTextureCache=function(e){var s=this,o=s.renderer=e,c=o.cy;s.layersByLevel={},s.firstGet=!0,s.lastInvalidationTime=performanceNow()-2*invalidThreshold,s.skipping=!1,s.eleTxrDeqs=c.collection(),s.scheduleElementRefinement=debounce(function(){s.refineElementTextures(s.eleTxrDeqs),s.eleTxrDeqs.unmerge(s.eleTxrDeqs)},refineEleDebounceTime),o.beforeRender(function(g,b){b-s.lastInvalidationTime<=invalidThreshold?s.skipping=!0:s.skipping=!1},o.beforeRenderPriorities.lyrTxrSkip);var d=function(b,j){return j.reqs-b.reqs};s.layersQueue=new Heap(d),s.setupDequeueing()},LTCp=LayeredTextureCache.prototype,layerIdPool=0,MAX_INT=Math.pow(2,53)-1;LTCp.makeLayer=function(a,e){var s=Math.pow(2,e),o=Math.ceil(a.w*s),c=Math.ceil(a.h*s),d=this.renderer.makeOffscreenCanvas(o,c),g={id:layerIdPool=++layerIdPool%MAX_INT,bb:a,level:e,width:o,height:c,canvas:d,context:d.getContext("2d"),eles:[],elesQueue:[],reqs:0},b=g.context,j=-g.bb.x1,_e=-g.bb.y1;return b.scale(s,s),b.translate(j,_e),g};LTCp.getLayers=function(a,e,s){var o=this,c=o.renderer,d=c.cy,g=d.zoom(),b=o.firstGet;if(o.firstGet=!1,s==null){if(s=Math.ceil(log2(g*e)),s<minLvl)s=minLvl;else if(g>=maxZoom||s>maxLvl)return null}o.validateLayersElesOrdering(s,a);var j=o.layersByLevel,_e=Math.pow(2,s),er=j[s]=j[s]||[],rr,tr=o.levelIsComplete(s,a),nr,ar=function(){var pr=function(_r){if(o.validateLayersElesOrdering(_r,a),o.levelIsComplete(_r,a))return nr=j[_r],!0},mr=function(_r){if(!nr)for(var Rr=s+_r;minLvl<=Rr&&Rr<=maxLvl&&!pr(Rr);Rr+=_r);};mr(1),mr(-1);for(var yr=er.length-1;yr>=0;yr--){var br=er[yr];br.invalid&&removeFromArray(er,br)}};if(!tr)ar();else return er;var lr=function(){if(!rr){rr=makeBoundingBox();for(var pr=0;pr<a.length;pr++)updateBoundingBox(rr,a[pr].boundingBox())}return rr},or=function(pr){pr=pr||{};var mr=pr.after;lr();var yr=Math.ceil(rr.w*_e),br=Math.ceil(rr.h*_e);if(yr>maxLayerDim||br>maxLayerDim)return null;var Er=yr*br;if(Er>maxLayerArea)return null;var _r=o.makeLayer(rr,s);if(mr!=null){var Rr=er.indexOf(mr)+1;er.splice(Rr,0,_r)}else(pr.insert===void 0||pr.insert)&&er.unshift(_r);return _r};if(o.skipping&&!b)return null;for(var ir=null,sr=a.length/defNumLayers,ur=!b,cr=0;cr<a.length;cr++){var fr=a[cr],hr=fr._private.rscratch,dr=hr.imgLayerCaches=hr.imgLayerCaches||{},vr=dr[s];if(vr){ir=vr;continue}if((!ir||ir.eles.length>=sr||!boundingBoxInBoundingBox(ir.bb,fr.boundingBox()))&&(ir=or({insert:!0,after:ir}),!ir))return null;nr||ur?o.queueLayer(ir,fr):o.drawEleInLayer(ir,fr,s,e),ir.eles.push(fr),dr[s]=ir}return nr||(ur?null:er)};LTCp.getEleLevelForLayerLevel=function(a,e){return a};LTCp.drawEleInLayer=function(a,e,s,o){var c=this,d=this.renderer,g=a.context,b=e.boundingBox();b.w===0||b.h===0||!e.visible()||(s=c.getEleLevelForLayerLevel(s,o),d.setImgSmoothing(g,!1),d.drawCachedElement(g,e,null,null,s,useHighQualityEleTxrReqs),d.setImgSmoothing(g,!0))};LTCp.levelIsComplete=function(a,e){var s=this,o=s.layersByLevel[a];if(!o||o.length===0)return!1;for(var c=0,d=0;d<o.length;d++){var g=o[d];if(g.reqs>0||g.invalid)return!1;c+=g.eles.length}return c===e.length};LTCp.validateLayersElesOrdering=function(a,e){var s=this.layersByLevel[a];if(s)for(var o=0;o<s.length;o++){for(var c=s[o],d=-1,g=0;g<e.length;g++)if(c.eles[0]===e[g]){d=g;break}if(d<0){this.invalidateLayer(c);continue}for(var b=d,g=0;g<c.eles.length;g++)if(c.eles[g]!==e[b+g]){this.invalidateLayer(c);break}}};LTCp.updateElementsInLayers=function(a,e){for(var s=this,o=element(a[0]),c=0;c<a.length;c++)for(var d=o?null:a[c],g=o?a[c]:a[c].ele,b=g._private.rscratch,j=b.imgLayerCaches=b.imgLayerCaches||{},_e=minLvl;_e<=maxLvl;_e++){var er=j[_e];er&&(d&&s.getEleLevelForLayerLevel(er.level)!==d.level||e(er,g,d))}};LTCp.haveLayers=function(){for(var a=this,e=!1,s=minLvl;s<=maxLvl;s++){var o=a.layersByLevel[s];if(o&&o.length>0){e=!0;break}}return e};LTCp.invalidateElements=function(a){var e=this;a.length!==0&&(e.lastInvalidationTime=performanceNow(),!(a.length===0||!e.haveLayers())&&e.updateElementsInLayers(a,function(o,c,d){e.invalidateLayer(o)}))};LTCp.invalidateLayer=function(a){if(this.lastInvalidationTime=performanceNow(),!a.invalid){var e=a.level,s=a.eles,o=this.layersByLevel[e];removeFromArray(o,a),a.elesQueue=[],a.invalid=!0,a.replacement&&(a.replacement.invalid=!0);for(var c=0;c<s.length;c++){var d=s[c]._private.rscratch.imgLayerCaches;d&&(d[e]=null)}}};LTCp.refineElementTextures=function(a){var e=this;e.updateElementsInLayers(a,function(o,c,d){var g=o.replacement;if(g||(g=o.replacement=e.makeLayer(o.bb,o.level),g.replaces=o,g.eles=o.eles),!g.reqs)for(var b=0;b<g.eles.length;b++)e.queueLayer(g,g.eles[b])})};LTCp.enqueueElementRefinement=function(a){this.eleTxrDeqs.merge(a),this.scheduleElementRefinement()};LTCp.queueLayer=function(a,e){var s=this,o=s.layersQueue,c=a.elesQueue,d=c.hasId=c.hasId||{};if(!a.replacement){if(e){if(d[e.id()])return;c.push(e),d[e.id()]=!0}a.reqs?(a.reqs++,o.updateItem(a)):(a.reqs=1,o.push(a))}};LTCp.dequeue=function(a){for(var e=this,s=e.layersQueue,o=[],c=0;c<maxDeqSize&&s.size()!==0;){var d=s.peek();if(d.replacement){s.pop();continue}if(d.replaces&&d!==d.replaces.replacement){s.pop();continue}if(d.invalid){s.pop();continue}var g=d.elesQueue.shift();g&&(e.drawEleInLayer(d,g,d.level,a),c++),o.length===0&&o.push(!0),d.elesQueue.length===0&&(s.pop(),d.reqs=0,d.replaces&&e.applyLayerReplacement(d),e.requestRedraw())}return o};LTCp.applyLayerReplacement=function(a){var e=this,s=e.layersByLevel[a.level],o=a.replaces,c=s.indexOf(o);if(!(c<0||o.invalid)){s[c]=a;for(var d=0;d<a.eles.length;d++){var g=a.eles[d]._private,b=g.imgLayerCaches=g.imgLayerCaches||{};b&&(b[a.level]=a)}e.requestRedraw()}};LTCp.requestRedraw=debounce(function(){var a=this.renderer;a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},100);LTCp.setupDequeueing=defs.setupDequeueing({deqRedrawThreshold,deqCost,deqAvgCost,deqNoDrawCost,deqFastCost,deq:function(e,s){return e.dequeue(s)},onDeqd:noop$1,shouldRedraw:trueify,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var CRp$b={},impl;function polygon(a,e){for(var s=0;s<e.length;s++){var o=e[s];a.lineTo(o.x,o.y)}}function triangleBackcurve(a,e,s){for(var o,c=0;c<e.length;c++){var d=e[c];c===0&&(o=d),a.lineTo(d.x,d.y)}a.quadraticCurveTo(s.x,s.y,o.x,o.y)}function triangleTee(a,e,s){a.beginPath&&a.beginPath();for(var o=e,c=0;c<o.length;c++){var d=o[c];a.lineTo(d.x,d.y)}var g=s,b=s[0];a.moveTo(b.x,b.y);for(var c=1;c<g.length;c++){var d=g[c];a.lineTo(d.x,d.y)}a.closePath&&a.closePath()}function circleTriangle(a,e,s,o,c){a.beginPath&&a.beginPath(),a.arc(s,o,c,0,Math.PI*2,!1);var d=e,g=d[0];a.moveTo(g.x,g.y);for(var b=0;b<d.length;b++){var j=d[b];a.lineTo(j.x,j.y)}a.closePath&&a.closePath()}function circle$1(a,e,s,o){a.arc(e,s,o,0,Math.PI*2,!1)}CRp$b.arrowShapeImpl=function(a){return(impl||(impl={polygon,"triangle-backcurve":triangleBackcurve,"triangle-tee":triangleTee,"circle-triangle":circleTriangle,"triangle-cross":triangleTee,circle:circle$1}))[a]};var CRp$a={};CRp$a.drawElement=function(a,e,s,o,c,d){var g=this;e.isNode()?g.drawNode(a,e,s,o,c,d):g.drawEdge(a,e,s,o,c,d)};CRp$a.drawElementOverlay=function(a,e){var s=this;e.isNode()?s.drawNodeOverlay(a,e):s.drawEdgeOverlay(a,e)};CRp$a.drawElementUnderlay=function(a,e){var s=this;e.isNode()?s.drawNodeUnderlay(a,e):s.drawEdgeUnderlay(a,e)};CRp$a.drawCachedElementPortion=function(a,e,s,o,c,d,g,b){var j=this,_e=s.getBoundingBox(e);if(!(_e.w===0||_e.h===0)){var er=s.getElement(e,_e,o,c,d);if(er!=null){var rr=b(j,e);if(rr===0)return;var tr=g(j,e),nr=_e.x1,ar=_e.y1,lr=_e.w,or=_e.h,ir,sr,ur,cr,fr;if(tr!==0){var hr=s.getRotationPoint(e);ur=hr.x,cr=hr.y,a.translate(ur,cr),a.rotate(tr),fr=j.getImgSmoothing(a),fr||j.setImgSmoothing(a,!0);var dr=s.getRotationOffset(e);ir=dr.x,sr=dr.y}else ir=nr,sr=ar;var vr;rr!==1&&(vr=a.globalAlpha,a.globalAlpha=vr*rr),a.drawImage(er.texture.canvas,er.x,0,er.width,er.height,ir,sr,lr,or),rr!==1&&(a.globalAlpha=vr),tr!==0&&(a.rotate(-tr),a.translate(-ur,-cr),fr||j.setImgSmoothing(a,!1))}else s.drawElement(a,e)}};var getZeroRotation=function(){return 0},getLabelRotation=function(e,s){return e.getTextAngle(s,null)},getSourceLabelRotation=function(e,s){return e.getTextAngle(s,"source")},getTargetLabelRotation=function(e,s){return e.getTextAngle(s,"target")},getOpacity=function(e,s){return s.effectiveOpacity()},getTextOpacity=function(e,s){return s.pstyle("text-opacity").pfValue*s.effectiveOpacity()};CRp$a.drawCachedElement=function(a,e,s,o,c,d){var g=this,b=g.data,j=b.eleTxrCache,_e=b.lblTxrCache,er=b.slbTxrCache,rr=b.tlbTxrCache,tr=e.boundingBox(),nr=d===!0?j.reasons.highQuality:null;if(!(tr.w===0||tr.h===0||!e.visible())&&(!o||boundingBoxesIntersect(tr,o))){var ar=e.isEdge(),lr=e.element()._private.rscratch.badLine;g.drawElementUnderlay(a,e),g.drawCachedElementPortion(a,e,j,s,c,nr,getZeroRotation,getOpacity),(!ar||!lr)&&g.drawCachedElementPortion(a,e,_e,s,c,nr,getLabelRotation,getTextOpacity),ar&&!lr&&(g.drawCachedElementPortion(a,e,er,s,c,nr,getSourceLabelRotation,getTextOpacity),g.drawCachedElementPortion(a,e,rr,s,c,nr,getTargetLabelRotation,getTextOpacity)),g.drawElementOverlay(a,e)}};CRp$a.drawElements=function(a,e){for(var s=this,o=0;o<e.length;o++){var c=e[o];s.drawElement(a,c)}};CRp$a.drawCachedElements=function(a,e,s,o){for(var c=this,d=0;d<e.length;d++){var g=e[d];c.drawCachedElement(a,g,s,o)}};CRp$a.drawCachedNodes=function(a,e,s,o){for(var c=this,d=0;d<e.length;d++){var g=e[d];g.isNode()&&c.drawCachedElement(a,g,s,o)}};CRp$a.drawLayeredElements=function(a,e,s,o){var c=this,d=c.data.lyrTxrCache.getLayers(e,s);if(d)for(var g=0;g<d.length;g++){var b=d[g],j=b.bb;j.w===0||j.h===0||a.drawImage(b.canvas,j.x1,j.y1,j.w,j.h)}else c.drawCachedElements(a,e,s,o)};var CRp$9={};CRp$9.drawEdge=function(a,e,s){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,g=this,b=e._private.rscratch;if(!(d&&!e.visible())&&!(b.badLine||b.allpts==null||isNaN(b.allpts[0]))){var j;s&&(j=s,a.translate(-j.x1,-j.y1));var _e=d?e.pstyle("opacity").value:1,er=d?e.pstyle("line-opacity").value:1,rr=e.pstyle("curve-style").value,tr=e.pstyle("line-style").value,nr=e.pstyle("width").pfValue,ar=e.pstyle("line-cap").value,lr=e.pstyle("line-outline-width").value,or=e.pstyle("line-outline-color").value,ir=_e*er,sr=_e*er,ur=function(){var _r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ir;rr==="straight-triangle"?(g.eleStrokeStyle(a,e,_r),g.drawEdgeTrianglePath(e,a,b.allpts)):(a.lineWidth=nr,a.lineCap=ar,g.eleStrokeStyle(a,e,_r),g.drawEdgePath(e,a,b.allpts,tr),a.lineCap="butt")},cr=function(){var _r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ir;if(a.lineWidth=nr+lr,a.lineCap=ar,lr>0)g.colorStrokeStyle(a,or[0],or[1],or[2],_r);else{a.lineCap="butt";return}rr==="straight-triangle"?g.drawEdgeTrianglePath(e,a,b.allpts):(g.drawEdgePath(e,a,b.allpts,tr),a.lineCap="butt")},fr=function(){c&&g.drawEdgeOverlay(a,e)},hr=function(){c&&g.drawEdgeUnderlay(a,e)},dr=function(){var _r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:sr;g.drawArrowheads(a,e,_r)},vr=function(){g.drawElementText(a,e,null,o)};a.lineJoin="round";var gr=e.pstyle("ghost").value==="yes";if(gr){var pr=e.pstyle("ghost-offset-x").pfValue,mr=e.pstyle("ghost-offset-y").pfValue,yr=e.pstyle("ghost-opacity").value,br=ir*yr;a.translate(pr,mr),ur(br),dr(br),a.translate(-pr,-mr)}else cr();hr(),ur(),dr(),fr(),vr(),s&&a.translate(j.x1,j.y1)}};var drawEdgeOverlayUnderlay=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(s,o){if(o.visible()){var c=o.pstyle("".concat(e,"-opacity")).value;if(c!==0){var d=this,g=d.usePaths(),b=o._private.rscratch,j=o.pstyle("".concat(e,"-padding")).pfValue,_e=2*j,er=o.pstyle("".concat(e,"-color")).value;s.lineWidth=_e,b.edgeType==="self"&&!g?s.lineCap="butt":s.lineCap="round",d.colorStrokeStyle(s,er[0],er[1],er[2],c),d.drawEdgePath(o,s,b.allpts,"solid")}}}};CRp$9.drawEdgeOverlay=drawEdgeOverlayUnderlay("overlay");CRp$9.drawEdgeUnderlay=drawEdgeOverlayUnderlay("underlay");CRp$9.drawEdgePath=function(a,e,s,o){var c=a._private.rscratch,d=e,g,b=!1,j=this.usePaths(),_e=a.pstyle("line-dash-pattern").pfValue,er=a.pstyle("line-dash-offset").pfValue;if(j){var rr=s.join("$"),tr=c.pathCacheKey&&c.pathCacheKey===rr;tr?(g=e=c.pathCache,b=!0):(g=e=new Path2D,c.pathCacheKey=rr,c.pathCache=g)}if(d.setLineDash)switch(o){case"dotted":d.setLineDash([1,1]);break;case"dashed":d.setLineDash(_e),d.lineDashOffset=er;break;case"solid":d.setLineDash([]);break}if(!b&&!c.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(s[0],s[1]),c.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var nr=2;nr+3<s.length;nr+=4)e.quadraticCurveTo(s[nr],s[nr+1],s[nr+2],s[nr+3]);break;case"straight":case"haystack":for(var ar=2;ar+1<s.length;ar+=2)e.lineTo(s[ar],s[ar+1]);break;case"segments":if(c.isRound){var lr=_createForOfIteratorHelper(c.roundCorners),or;try{for(lr.s();!(or=lr.n()).done;){var ir=or.value;drawPreparedRoundCorner(e,ir)}}catch(ur){lr.e(ur)}finally{lr.f()}e.lineTo(s[s.length-2],s[s.length-1])}else for(var sr=2;sr+1<s.length;sr+=2)e.lineTo(s[sr],s[sr+1]);break}e=d,j?e.stroke(g):e.stroke(),e.setLineDash&&e.setLineDash([])};CRp$9.drawEdgeTrianglePath=function(a,e,s){e.fillStyle=e.strokeStyle;for(var o=a.pstyle("width").pfValue,c=0;c+1<s.length;c+=2){var d=[s[c+2]-s[c],s[c+3]-s[c+1]],g=Math.sqrt(d[0]*d[0]+d[1]*d[1]),b=[d[1]/g,-d[0]/g],j=[b[0]*o/2,b[1]*o/2];e.beginPath(),e.moveTo(s[c]-j[0],s[c+1]-j[1]),e.lineTo(s[c]+j[0],s[c+1]+j[1]),e.lineTo(s[c+2],s[c+3]),e.closePath(),e.fill()}};CRp$9.drawArrowheads=function(a,e,s){var o=e._private.rscratch,c=o.edgeType==="haystack";c||this.drawArrowhead(a,e,"source",o.arrowStartX,o.arrowStartY,o.srcArrowAngle,s),this.drawArrowhead(a,e,"mid-target",o.midX,o.midY,o.midtgtArrowAngle,s),this.drawArrowhead(a,e,"mid-source",o.midX,o.midY,o.midsrcArrowAngle,s),c||this.drawArrowhead(a,e,"target",o.arrowEndX,o.arrowEndY,o.tgtArrowAngle,s)};CRp$9.drawArrowhead=function(a,e,s,o,c,d,g){if(!(isNaN(o)||o==null||isNaN(c)||c==null||isNaN(d)||d==null)){var b=this,j=e.pstyle(s+"-arrow-shape").value;if(j!=="none"){var _e=e.pstyle(s+"-arrow-fill").value==="hollow"?"both":"filled",er=e.pstyle(s+"-arrow-fill").value,rr=e.pstyle("width").pfValue,tr=e.pstyle(s+"-arrow-width"),nr=tr.value==="match-line"?rr:tr.pfValue;tr.units==="%"&&(nr*=rr);var ar=e.pstyle("opacity").value;g===void 0&&(g=ar);var lr=a.globalCompositeOperation;(g!==1||er==="hollow")&&(a.globalCompositeOperation="destination-out",b.colorFillStyle(a,255,255,255,1),b.colorStrokeStyle(a,255,255,255,1),b.drawArrowShape(e,a,_e,rr,j,nr,o,c,d),a.globalCompositeOperation=lr);var or=e.pstyle(s+"-arrow-color").value;b.colorFillStyle(a,or[0],or[1],or[2],g),b.colorStrokeStyle(a,or[0],or[1],or[2],g),b.drawArrowShape(e,a,er,rr,j,nr,o,c,d)}}};CRp$9.drawArrowShape=function(a,e,s,o,c,d,g,b,j){var _e=this,er=this.usePaths()&&c!=="triangle-cross",rr=!1,tr,nr=e,ar={x:g,y:b},lr=a.pstyle("arrow-scale").value,or=this.getArrowWidth(o,lr),ir=_e.arrowShapes[c];if(er){var sr=_e.arrowPathCache=_e.arrowPathCache||[],ur=hashString(c),cr=sr[ur];cr!=null?(tr=e=cr,rr=!0):(tr=e=new Path2D,sr[ur]=tr)}rr||(e.beginPath&&e.beginPath(),er?ir.draw(e,1,0,{x:0,y:0},1):ir.draw(e,or,j,ar,o),e.closePath&&e.closePath()),e=nr,er&&(e.translate(g,b),e.rotate(j),e.scale(or,or)),(s==="filled"||s==="both")&&(er?e.fill(tr):e.fill()),(s==="hollow"||s==="both")&&(e.lineWidth=d/(er?or:1),e.lineJoin="miter",er?e.stroke(tr):e.stroke()),er&&(e.scale(1/or,1/or),e.rotate(-j),e.translate(-g,-b))};var CRp$8={};CRp$8.safeDrawImage=function(a,e,s,o,c,d,g,b,j,_e){if(!(c<=0||d<=0||j<=0||_e<=0))try{a.drawImage(e,s,o,c,d,g,b,j,_e)}catch(er){warn(er)}};CRp$8.drawInscribedImage=function(a,e,s,o,c){var d=this,g=s.position(),b=g.x,j=g.y,_e=s.cy().style(),er=_e.getIndexedStyle.bind(_e),rr=er(s,"background-fit","value",o),tr=er(s,"background-repeat","value",o),nr=s.width(),ar=s.height(),lr=s.padding()*2,or=nr+(er(s,"background-width-relative-to","value",o)==="inner"?0:lr),ir=ar+(er(s,"background-height-relative-to","value",o)==="inner"?0:lr),sr=s._private.rscratch,ur=er(s,"background-clip","value",o),cr=ur==="node",fr=er(s,"background-image-opacity","value",o)*c,hr=er(s,"background-image-smoothing","value",o),dr=s.pstyle("corner-radius").value;dr!=="auto"&&(dr=s.pstyle("corner-radius").pfValue);var vr=e.width||e.cachedW,gr=e.height||e.cachedH;(vr==null||gr==null)&&(document.body.appendChild(e),vr=e.cachedW=e.width||e.offsetWidth,gr=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var pr=vr,mr=gr;if(er(s,"background-width","value",o)!=="auto"&&(er(s,"background-width","units",o)==="%"?pr=er(s,"background-width","pfValue",o)*or:pr=er(s,"background-width","pfValue",o)),er(s,"background-height","value",o)!=="auto"&&(er(s,"background-height","units",o)==="%"?mr=er(s,"background-height","pfValue",o)*ir:mr=er(s,"background-height","pfValue",o)),!(pr===0||mr===0)){if(rr==="contain"){var yr=Math.min(or/pr,ir/mr);pr*=yr,mr*=yr}else if(rr==="cover"){var yr=Math.max(or/pr,ir/mr);pr*=yr,mr*=yr}var br=b-or/2,Er=er(s,"background-position-x","units",o),_r=er(s,"background-position-x","pfValue",o);Er==="%"?br+=(or-pr)*_r:br+=_r;var Rr=er(s,"background-offset-x","units",o),Cr=er(s,"background-offset-x","pfValue",o);Rr==="%"?br+=(or-pr)*Cr:br+=Cr;var wr=j-ir/2,$r=er(s,"background-position-y","units",o),Ar=er(s,"background-position-y","pfValue",o);$r==="%"?wr+=(ir-mr)*Ar:wr+=Ar;var Sr=er(s,"background-offset-y","units",o),kr=er(s,"background-offset-y","pfValue",o);Sr==="%"?wr+=(ir-mr)*kr:wr+=kr,sr.pathCache&&(br-=b,wr-=j,b=0,j=0);var Mr=a.globalAlpha;a.globalAlpha=fr;var qr=d.getImgSmoothing(a),Tr=!1;if(hr==="no"&&qr?(d.setImgSmoothing(a,!1),Tr=!0):hr==="yes"&&!qr&&(d.setImgSmoothing(a,!0),Tr=!0),tr==="no-repeat")cr&&(a.save(),sr.pathCache?a.clip(sr.pathCache):(d.nodeShapes[d.getNodeShape(s)].draw(a,b,j,or,ir,dr,sr),a.clip())),d.safeDrawImage(a,e,0,0,vr,gr,br,wr,pr,mr),cr&&a.restore();else{var Pr=a.createPattern(e,tr);a.fillStyle=Pr,d.nodeShapes[d.getNodeShape(s)].draw(a,b,j,or,ir,dr,sr),a.translate(br,wr),a.fill(),a.translate(-br,-wr)}a.globalAlpha=Mr,Tr&&d.setImgSmoothing(a,qr)}};var CRp$7={};CRp$7.eleTextBiggerThanMin=function(a,e){if(!e){var s=a.cy().zoom(),o=this.getPixelRatio(),c=Math.ceil(log2(s*o));e=Math.pow(2,c)}var d=a.pstyle("font-size").pfValue*e,g=a.pstyle("min-zoomed-font-size").pfValue;return!(d<g)};CRp$7.drawElementText=function(a,e,s,o,c){var d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,g=this;if(o==null){if(d&&!g.eleTextBiggerThanMin(e))return}else if(o===!1)return;if(e.isNode()){var b=e.pstyle("label");if(!b||!b.value)return;var j=g.getLabelJustification(e);a.textAlign=j,a.textBaseline="bottom"}else{var _e=e.element()._private.rscratch.badLine,er=e.pstyle("label"),rr=e.pstyle("source-label"),tr=e.pstyle("target-label");if(_e||(!er||!er.value)&&(!rr||!rr.value)&&(!tr||!tr.value))return;a.textAlign="center",a.textBaseline="bottom"}var nr=!s,ar;s&&(ar=s,a.translate(-ar.x1,-ar.y1)),c==null?(g.drawText(a,e,null,nr,d),e.isEdge()&&(g.drawText(a,e,"source",nr,d),g.drawText(a,e,"target",nr,d))):g.drawText(a,e,c,nr,d),s&&a.translate(ar.x1,ar.y1)};CRp$7.getFontCache=function(a){var e;this.fontCaches=this.fontCaches||[];for(var s=0;s<this.fontCaches.length;s++)if(e=this.fontCaches[s],e.context===a)return e;return e={context:a},this.fontCaches.push(e),e};CRp$7.setupTextStyle=function(a,e){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=e.pstyle("font-style").strValue,c=e.pstyle("font-size").pfValue+"px",d=e.pstyle("font-family").strValue,g=e.pstyle("font-weight").strValue,b=s?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,j=e.pstyle("text-outline-opacity").value*b,_e=e.pstyle("color").value,er=e.pstyle("text-outline-color").value;a.font=o+" "+g+" "+c+" "+d,a.lineJoin="round",this.colorFillStyle(a,_e[0],_e[1],_e[2],b),this.colorStrokeStyle(a,er[0],er[1],er[2],j)};function circle(a,e,s,o,c){var d=Math.min(o,c),g=d/2,b=e+o/2,j=s+c/2;a.beginPath(),a.arc(b,j,g,0,Math.PI*2),a.closePath()}function roundRect(a,e,s,o,c){var d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,g=Math.min(d,o/2,c/2);a.beginPath(),a.moveTo(e+g,s),a.lineTo(e+o-g,s),a.quadraticCurveTo(e+o,s,e+o,s+g),a.lineTo(e+o,s+c-g),a.quadraticCurveTo(e+o,s+c,e+o-g,s+c),a.lineTo(e+g,s+c),a.quadraticCurveTo(e,s+c,e,s+c-g),a.lineTo(e,s+g),a.quadraticCurveTo(e,s,e+g,s),a.closePath()}CRp$7.getTextAngle=function(a,e){var s,o=a._private,c=o.rscratch,d=e?e+"-":"",g=a.pstyle(d+"text-rotation");if(g.strValue==="autorotate"){var b=getPrefixedProperty(c,"labelAngle",e);s=a.isEdge()?b:0}else g.strValue==="none"?s=0:s=g.pfValue;return s};CRp$7.drawText=function(a,e,s){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,d=e._private,g=d.rscratch,b=c?e.effectiveOpacity():1;if(!(c&&(b===0||e.pstyle("text-opacity").value===0))){s==="main"&&(s=null);var j=getPrefixedProperty(g,"labelX",s),_e=getPrefixedProperty(g,"labelY",s),er,rr,tr=this.getLabelText(e,s);if(tr!=null&&tr!==""&&!isNaN(j)&&!isNaN(_e)){this.setupTextStyle(a,e,c);var nr=s?s+"-":"",ar=getPrefixedProperty(g,"labelWidth",s),lr=getPrefixedProperty(g,"labelHeight",s),or=e.pstyle(nr+"text-margin-x").pfValue,ir=e.pstyle(nr+"text-margin-y").pfValue,sr=e.isEdge(),ur=e.pstyle("text-halign").value,cr=e.pstyle("text-valign").value;sr&&(ur="center",cr="center"),j+=or,_e+=ir;var fr;switch(o?fr=this.getTextAngle(e,s):fr=0,fr!==0&&(er=j,rr=_e,a.translate(er,rr),a.rotate(fr),j=0,_e=0),cr){case"top":break;case"center":_e+=lr/2;break;case"bottom":_e+=lr;break}var hr=e.pstyle("text-background-opacity").value,dr=e.pstyle("text-border-opacity").value,vr=e.pstyle("text-border-width").pfValue,gr=e.pstyle("text-background-padding").pfValue,pr=e.pstyle("text-background-shape").strValue,mr=pr==="round-rectangle"||pr==="roundrectangle",yr=pr==="circle",br=2;if(hr>0||vr>0&&dr>0){var Er=a.fillStyle,_r=a.strokeStyle,Rr=a.lineWidth,Cr=e.pstyle("text-background-color").value,wr=e.pstyle("text-border-color").value,$r=e.pstyle("text-border-style").value,Ar=hr>0,Sr=vr>0&&dr>0,kr=j-gr;switch(ur){case"left":kr-=ar;break;case"center":kr-=ar/2;break}var Mr=_e-lr-gr,qr=ar+2*gr,Tr=lr+2*gr;if(Ar&&(a.fillStyle="rgba(".concat(Cr[0],",").concat(Cr[1],",").concat(Cr[2],",").concat(hr*b,")")),Sr&&(a.strokeStyle="rgba(".concat(wr[0],",").concat(wr[1],",").concat(wr[2],",").concat(dr*b,")"),a.lineWidth=vr,a.setLineDash))switch($r){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash([4,2]);break;case"double":a.lineWidth=vr/4,a.setLineDash([]);break;case"solid":default:a.setLineDash([]);break}if(mr?(a.beginPath(),roundRect(a,kr,Mr,qr,Tr,br)):yr?(a.beginPath(),circle(a,kr,Mr,qr,Tr)):(a.beginPath(),a.rect(kr,Mr,qr,Tr)),Ar&&a.fill(),Sr&&a.stroke(),Sr&&$r==="double"){var Pr=vr/2;a.beginPath(),mr?roundRect(a,kr+Pr,Mr+Pr,qr-2*Pr,Tr-2*Pr,br):a.rect(kr+Pr,Mr+Pr,qr-2*Pr,Tr-2*Pr),a.stroke()}a.fillStyle=Er,a.strokeStyle=_r,a.lineWidth=Rr,a.setLineDash&&a.setLineDash([])}var Br=2*e.pstyle("text-outline-width").pfValue;if(Br>0&&(a.lineWidth=Br),e.pstyle("text-wrap").value==="wrap"){var Ur=getPrefixedProperty(g,"labelWrapCachedLines",s),Nr=getPrefixedProperty(g,"labelLineHeight",s),Ir=ar/2,Dr=this.getLabelJustification(e);switch(Dr==="auto"||(ur==="left"?Dr==="left"?j+=-ar:Dr==="center"&&(j+=-Ir):ur==="center"?Dr==="left"?j+=-Ir:Dr==="right"&&(j+=Ir):ur==="right"&&(Dr==="center"?j+=Ir:Dr==="right"&&(j+=ar))),cr){case"top":_e-=(Ur.length-1)*Nr;break;case"center":case"bottom":_e-=(Ur.length-1)*Nr;break}for(var Or=0;Or<Ur.length;Or++)Br>0&&a.strokeText(Ur[Or],j,_e),a.fillText(Ur[Or],j,_e),_e+=Nr}else Br>0&&a.strokeText(tr,j,_e),a.fillText(tr,j,_e);fr!==0&&(a.rotate(-fr),a.translate(-er,-rr))}}};var CRp$6={};CRp$6.drawNode=function(a,e,s){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,g=this,b,j,_e=e._private,er=_e.rscratch,rr=e.position();if(!(!number$1(rr.x)||!number$1(rr.y))&&!(d&&!e.visible())){var tr=d?e.effectiveOpacity():1,nr=g.usePaths(),ar,lr=!1,or=e.padding();b=e.width()+2*or,j=e.height()+2*or;var ir;s&&(ir=s,a.translate(-ir.x1,-ir.y1));for(var sr=e.pstyle("background-image"),ur=sr.value,cr=new Array(ur.length),fr=new Array(ur.length),hr=0,dr=0;dr<ur.length;dr++){var vr=ur[dr],gr=cr[dr]=vr!=null&&vr!=="none";if(gr){var pr=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",dr);hr++,fr[dr]=g.getCachedImage(vr,pr,function(){_e.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var mr=e.pstyle("background-blacken").value,yr=e.pstyle("border-width").pfValue,br=e.pstyle("background-opacity").value*tr,Er=e.pstyle("border-color").value,_r=e.pstyle("border-style").value,Rr=e.pstyle("border-join").value,Cr=e.pstyle("border-cap").value,wr=e.pstyle("border-position").value,$r=e.pstyle("border-dash-pattern").pfValue,Ar=e.pstyle("border-dash-offset").pfValue,Sr=e.pstyle("border-opacity").value*tr,kr=e.pstyle("outline-width").pfValue,Mr=e.pstyle("outline-color").value,qr=e.pstyle("outline-style").value,Tr=e.pstyle("outline-opacity").value*tr,Pr=e.pstyle("outline-offset").value,Br=e.pstyle("corner-radius").value;Br!=="auto"&&(Br=e.pstyle("corner-radius").pfValue);var Ur=function(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:br;g.eleFillStyle(a,e,nt)},Nr=function(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Sr;g.colorStrokeStyle(a,Er[0],Er[1],Er[2],nt)},Ir=function(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Tr;g.colorStrokeStyle(a,Mr[0],Mr[1],Mr[2],nt)},Dr=function(nt,Gr,xr,Lr){var Fr=g.nodePathCache=g.nodePathCache||[],zr=hashStrings(xr==="polygon"?xr+","+Lr.join(","):xr,""+Gr,""+nt,""+Br),Hr=Fr[zr],at,Kr=!1;return Hr!=null?(at=Hr,Kr=!0,er.pathCache=at):(at=new Path2D,Fr[zr]=er.pathCache=at),{path:at,cacheHit:Kr}},Or=e.pstyle("shape").strValue,jr=e.pstyle("shape-polygon-points").pfValue;if(nr){a.translate(rr.x,rr.y);var Wr=Dr(b,j,Or,jr);ar=Wr.path,lr=Wr.cacheHit}var Xr=function(){if(!lr){var nt=rr;nr&&(nt={x:0,y:0}),g.nodeShapes[g.getNodeShape(e)].draw(ar||a,nt.x,nt.y,b,j,Br,er)}nr?a.fill(ar):a.fill()},dt=function(){for(var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:tr,Gr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,xr=_e.backgrounding,Lr=0,Fr=0;Fr<fr.length;Fr++){var zr=e.cy().style().getIndexedStyle(e,"background-image-containment","value",Fr);if(Gr&&zr==="over"||!Gr&&zr==="inside"){Lr++;continue}cr[Fr]&&fr[Fr].complete&&!fr[Fr].error&&(Lr++,g.drawInscribedImage(a,fr[Fr],e,Fr,nt))}_e.backgrounding=Lr!==hr,xr!==_e.backgrounding&&e.updateStyle(!1)},Vr=function(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Gr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tr;g.hasPie(e)&&(g.drawPie(a,e,Gr),nt&&(nr||g.nodeShapes[g.getNodeShape(e)].draw(a,rr.x,rr.y,b,j,Br,er)))},Zr=function(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Gr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tr;g.hasStripe(e)&&(a.save(),nr?a.clip(er.pathCache):(g.nodeShapes[g.getNodeShape(e)].draw(a,rr.x,rr.y,b,j,Br,er),a.clip()),g.drawStripe(a,e,Gr),a.restore(),nt&&(nr||g.nodeShapes[g.getNodeShape(e)].draw(a,rr.x,rr.y,b,j,Br,er)))},et=function(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:tr,Gr=(mr>0?mr:-mr)*nt,xr=mr>0?0:255;mr!==0&&(g.colorFillStyle(a,xr,xr,xr,Gr),nr?a.fill(ar):a.fill())},Yr=function(){if(yr>0){if(a.lineWidth=yr,a.lineCap=Cr,a.lineJoin=Rr,a.setLineDash)switch(_r){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash($r),a.lineDashOffset=Ar;break;case"solid":case"double":a.setLineDash([]);break}if(wr!=="center"){if(a.save(),a.lineWidth*=2,wr==="inside")nr?a.clip(ar):a.clip();else{var nt=new Path2D;nt.rect(-b/2-yr,-j/2-yr,b+2*yr,j+2*yr),nt.addPath(ar),a.clip(nt,"evenodd")}nr?a.stroke(ar):a.stroke(),a.restore()}else nr?a.stroke(ar):a.stroke();if(_r==="double"){a.lineWidth=yr/3;var Gr=a.globalCompositeOperation;a.globalCompositeOperation="destination-out",nr?a.stroke(ar):a.stroke(),a.globalCompositeOperation=Gr}a.setLineDash&&a.setLineDash([])}},Qr=function(){if(kr>0){if(a.lineWidth=kr,a.lineCap="butt",a.setLineDash)switch(qr){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash([4,2]);break;case"solid":case"double":a.setLineDash([]);break}var nt=rr;nr&&(nt={x:0,y:0});var Gr=g.getNodeShape(e),xr=yr;wr==="inside"&&(xr=0),wr==="outside"&&(xr*=2);var Lr=(b+xr+(kr+Pr))/b,Fr=(j+xr+(kr+Pr))/j,zr=b*Lr,Hr=j*Fr,at=g.nodeShapes[Gr].points,Kr;if(nr){var st=Dr(zr,Hr,Gr,at);Kr=st.path}if(Gr==="ellipse")g.drawEllipsePath(Kr||a,nt.x,nt.y,zr,Hr);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(Gr)){var it=0,ut=0,ht=0;Gr==="round-diamond"?it=(xr+Pr+kr)*1.4:Gr==="round-heptagon"?(it=(xr+Pr+kr)*1.075,ht=-(xr/2+Pr+kr)/35):Gr==="round-hexagon"?it=(xr+Pr+kr)*1.12:Gr==="round-pentagon"?(it=(xr+Pr+kr)*1.13,ht=-(xr/2+Pr+kr)/15):Gr==="round-tag"?(it=(xr+Pr+kr)*1.12,ut=(xr/2+kr+Pr)*.07):Gr==="round-triangle"&&(it=(xr+Pr+kr)*(Math.PI/2),ht=-(xr+Pr/2+kr)/Math.PI),it!==0&&(Lr=(b+it)/b,zr=b*Lr,["round-hexagon","round-tag"].includes(Gr)||(Fr=(j+it)/j,Hr=j*Fr)),Br=Br==="auto"?getRoundPolygonRadius(zr,Hr):Br;for(var ft=zr/2,ot=Hr/2,mt=Br+(xr+kr+Pr)/2,vt=new Array(at.length/2),Et=new Array(at.length/2),xt=0;xt<at.length/2;xt++)vt[xt]={x:nt.x+ut+ft*at[xt*2],y:nt.y+ht+ot*at[xt*2+1]};var Tt,_t,Ct,Rt,St=vt.length;for(_t=vt[St-1],Tt=0;Tt<St;Tt++)Ct=vt[Tt%St],Rt=vt[(Tt+1)%St],Et[Tt]=getRoundCorner(_t,Ct,Rt,mt),_t=Ct,Ct=Rt;g.drawRoundPolygonPath(Kr||a,nt.x+ut,nt.y+ht,b*Lr,j*Fr,at,Et)}else if(["roundrectangle","round-rectangle"].includes(Gr))Br=Br==="auto"?getRoundRectangleRadius(zr,Hr):Br,g.drawRoundRectanglePath(Kr||a,nt.x,nt.y,zr,Hr,Br+(xr+kr+Pr)/2);else if(["cutrectangle","cut-rectangle"].includes(Gr))Br=Br==="auto"?getCutRectangleCornerLength():Br,g.drawCutRectanglePath(Kr||a,nt.x,nt.y,zr,Hr,null,Br+(xr+kr+Pr)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(Gr))Br=Br==="auto"?getRoundRectangleRadius(zr,Hr):Br,g.drawBottomRoundRectanglePath(Kr||a,nt.x,nt.y,zr,Hr,Br+(xr+kr+Pr)/2);else if(Gr==="barrel")g.drawBarrelPath(Kr||a,nt.x,nt.y,zr,Hr);else if(Gr.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(Gr)){var Lt=(xr+kr+Pr)/b;at=joinLines(expandPolygon(at,Lt)),g.drawPolygonPath(Kr||a,nt.x,nt.y,b,j,at)}else{var wt=(xr+kr+Pr)/b;at=joinLines(expandPolygon(at,-wt)),g.drawPolygonPath(Kr||a,nt.x,nt.y,b,j,at)}if(nr?a.stroke(Kr):a.stroke(),qr==="double"){a.lineWidth=xr/3;var Dt=a.globalCompositeOperation;a.globalCompositeOperation="destination-out",nr?a.stroke(Kr):a.stroke(),a.globalCompositeOperation=Dt}a.setLineDash&&a.setLineDash([])}},Jr=function(){c&&g.drawNodeOverlay(a,e,rr,b,j)},rt=function(){c&&g.drawNodeUnderlay(a,e,rr,b,j)},tt=function(){g.drawElementText(a,e,null,o)},lt=e.pstyle("ghost").value==="yes";if(lt){var pt=e.pstyle("ghost-offset-x").pfValue,yt=e.pstyle("ghost-offset-y").pfValue,gt=e.pstyle("ghost-opacity").value,bt=gt*tr;a.translate(pt,yt),Ir(),Qr(),Ur(gt*br),Xr(),dt(bt,!0),Nr(gt*Sr),Yr(),Vr(mr!==0||yr!==0),Zr(mr!==0||yr!==0),dt(bt,!1),et(bt),a.translate(-pt,-yt)}nr&&a.translate(-rr.x,-rr.y),rt(),nr&&a.translate(rr.x,rr.y),Ir(),Qr(),Ur(),Xr(),dt(tr,!0),Nr(),Yr(),Vr(mr!==0||yr!==0),Zr(mr!==0||yr!==0),dt(tr,!1),et(),nr&&a.translate(-rr.x,-rr.y),tt(),Jr(),s&&a.translate(ir.x1,ir.y1)}};var drawNodeOverlayUnderlay=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(s,o,c,d,g){var b=this;if(o.visible()){var j=o.pstyle("".concat(e,"-padding")).pfValue,_e=o.pstyle("".concat(e,"-opacity")).value,er=o.pstyle("".concat(e,"-color")).value,rr=o.pstyle("".concat(e,"-shape")).value,tr=o.pstyle("".concat(e,"-corner-radius")).value;if(_e>0){if(c=c||o.position(),d==null||g==null){var nr=o.padding();d=o.width()+2*nr,g=o.height()+2*nr}b.colorFillStyle(s,er[0],er[1],er[2],_e),b.nodeShapes[rr].draw(s,c.x,c.y,d+j*2,g+j*2,tr),s.fill()}}}};CRp$6.drawNodeOverlay=drawNodeOverlayUnderlay("overlay");CRp$6.drawNodeUnderlay=drawNodeOverlayUnderlay("underlay");CRp$6.hasPie=function(a){return a=a[0],a._private.hasPie};CRp$6.hasStripe=function(a){return a=a[0],a._private.hasStripe};CRp$6.drawPie=function(a,e,s,o){e=e[0],o=o||e.position();var c=e.cy().style(),d=e.pstyle("pie-size"),g=e.pstyle("pie-hole"),b=e.pstyle("pie-start-angle").pfValue,j=o.x,_e=o.y,er=e.width(),rr=e.height(),tr=Math.min(er,rr)/2,nr,ar=0,lr=this.usePaths();if(lr&&(j=0,_e=0),d.units==="%"?tr=tr*d.pfValue:d.pfValue!==void 0&&(tr=d.pfValue/2),g.units==="%"?nr=tr*g.pfValue:g.pfValue!==void 0&&(nr=g.pfValue/2),!(nr>=tr))for(var or=1;or<=c.pieBackgroundN;or++){var ir=e.pstyle("pie-"+or+"-background-size").value,sr=e.pstyle("pie-"+or+"-background-color").value,ur=e.pstyle("pie-"+or+"-background-opacity").value*s,cr=ir/100;cr+ar>1&&(cr=1-ar);var fr=1.5*Math.PI+2*Math.PI*ar;fr+=b;var hr=2*Math.PI*cr,dr=fr+hr;ir===0||ar>=1||ar+cr>1||(nr===0?(a.beginPath(),a.moveTo(j,_e),a.arc(j,_e,tr,fr,dr),a.closePath()):(a.beginPath(),a.arc(j,_e,tr,fr,dr),a.arc(j,_e,nr,dr,fr,!0),a.closePath()),this.colorFillStyle(a,sr[0],sr[1],sr[2],ur),a.fill(),ar+=cr)}};CRp$6.drawStripe=function(a,e,s,o){e=e[0],o=o||e.position();var c=e.cy().style(),d=o.x,g=o.y,b=e.width(),j=e.height(),_e=0,er=this.usePaths();a.save();var rr=e.pstyle("stripe-direction").value,tr=e.pstyle("stripe-size");switch(rr){case"vertical":break;case"righward":a.rotate(-Math.PI/2);break}var nr=b,ar=j;tr.units==="%"?(nr=nr*tr.pfValue,ar=ar*tr.pfValue):tr.pfValue!==void 0&&(nr=tr.pfValue,ar=tr.pfValue),er&&(d=0,g=0),g-=nr/2,d-=ar/2;for(var lr=1;lr<=c.stripeBackgroundN;lr++){var or=e.pstyle("stripe-"+lr+"-background-size").value,ir=e.pstyle("stripe-"+lr+"-background-color").value,sr=e.pstyle("stripe-"+lr+"-background-opacity").value*s,ur=or/100;ur+_e>1&&(ur=1-_e),!(or===0||_e>=1||_e+ur>1)&&(a.beginPath(),a.rect(d,g+ar*_e,nr,ar*ur),a.closePath(),this.colorFillStyle(a,ir[0],ir[1],ir[2],sr),a.fill(),_e+=ur)}a.restore()};var CRp$5={},motionBlurDelay=100;CRp$5.getPixelRatio=function(){var a=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),s=a.backingStorePixelRatio||a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/s};CRp$5.paintCache=function(a){for(var e=this.paintCaches=this.paintCaches||[],s=!0,o,c=0;c<e.length;c++)if(o=e[c],o.context===a){s=!1;break}return s&&(o={context:a},e.push(o)),o};CRp$5.createGradientStyleFor=function(a,e,s,o,c){var d,g=this.usePaths(),b=s.pstyle(e+"-gradient-stop-colors").value,j=s.pstyle(e+"-gradient-stop-positions").pfValue;if(o==="radial-gradient")if(s.isEdge()){var _e=s.sourceEndpoint(),er=s.targetEndpoint(),rr=s.midpoint(),tr=dist(_e,rr),nr=dist(er,rr);d=a.createRadialGradient(rr.x,rr.y,0,rr.x,rr.y,Math.max(tr,nr))}else{var ar=g?{x:0,y:0}:s.position(),lr=s.paddedWidth(),or=s.paddedHeight();d=a.createRadialGradient(ar.x,ar.y,0,ar.x,ar.y,Math.max(lr,or))}else if(s.isEdge()){var ir=s.sourceEndpoint(),sr=s.targetEndpoint();d=a.createLinearGradient(ir.x,ir.y,sr.x,sr.y)}else{var ur=g?{x:0,y:0}:s.position(),cr=s.paddedWidth(),fr=s.paddedHeight(),hr=cr/2,dr=fr/2,vr=s.pstyle("background-gradient-direction").value;switch(vr){case"to-bottom":d=a.createLinearGradient(ur.x,ur.y-dr,ur.x,ur.y+dr);break;case"to-top":d=a.createLinearGradient(ur.x,ur.y+dr,ur.x,ur.y-dr);break;case"to-left":d=a.createLinearGradient(ur.x+hr,ur.y,ur.x-hr,ur.y);break;case"to-right":d=a.createLinearGradient(ur.x-hr,ur.y,ur.x+hr,ur.y);break;case"to-bottom-right":case"to-right-bottom":d=a.createLinearGradient(ur.x-hr,ur.y-dr,ur.x+hr,ur.y+dr);break;case"to-top-right":case"to-right-top":d=a.createLinearGradient(ur.x-hr,ur.y+dr,ur.x+hr,ur.y-dr);break;case"to-bottom-left":case"to-left-bottom":d=a.createLinearGradient(ur.x+hr,ur.y-dr,ur.x-hr,ur.y+dr);break;case"to-top-left":case"to-left-top":d=a.createLinearGradient(ur.x+hr,ur.y+dr,ur.x-hr,ur.y-dr);break}}if(!d)return null;for(var gr=j.length===b.length,pr=b.length,mr=0;mr<pr;mr++)d.addColorStop(gr?j[mr]:mr/(pr-1),"rgba("+b[mr][0]+","+b[mr][1]+","+b[mr][2]+","+c+")");return d};CRp$5.gradientFillStyle=function(a,e,s,o){var c=this.createGradientStyleFor(a,"background",e,s,o);if(!c)return null;a.fillStyle=c};CRp$5.colorFillStyle=function(a,e,s,o,c){a.fillStyle="rgba("+e+","+s+","+o+","+c+")"};CRp$5.eleFillStyle=function(a,e,s){var o=e.pstyle("background-fill").value;if(o==="linear-gradient"||o==="radial-gradient")this.gradientFillStyle(a,e,o,s);else{var c=e.pstyle("background-color").value;this.colorFillStyle(a,c[0],c[1],c[2],s)}};CRp$5.gradientStrokeStyle=function(a,e,s,o){var c=this.createGradientStyleFor(a,"line",e,s,o);if(!c)return null;a.strokeStyle=c};CRp$5.colorStrokeStyle=function(a,e,s,o,c){a.strokeStyle="rgba("+e+","+s+","+o+","+c+")"};CRp$5.eleStrokeStyle=function(a,e,s){var o=e.pstyle("line-fill").value;if(o==="linear-gradient"||o==="radial-gradient")this.gradientStrokeStyle(a,e,o,s);else{var c=e.pstyle("line-color").value;this.colorStrokeStyle(a,c[0],c[1],c[2],s)}};CRp$5.matchCanvasSize=function(a){var e=this,s=e.data,o=e.findContainerClientCoords(),c=o[2],d=o[3],g=e.getPixelRatio(),b=e.motionBlurPxRatio;(a===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||a===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(g=b);var j=c*g,_e=d*g,er;if(!(j===e.canvasWidth&&_e===e.canvasHeight)){e.fontCaches=null;var rr=s.canvasContainer;rr.style.width=c+"px",rr.style.height=d+"px";for(var tr=0;tr<e.CANVAS_LAYERS;tr++)er=s.canvases[tr],er.width=j,er.height=_e,er.style.width=c+"px",er.style.height=d+"px";for(var tr=0;tr<e.BUFFER_COUNT;tr++)er=s.bufferCanvases[tr],er.width=j,er.height=_e,er.style.width=c+"px",er.style.height=d+"px";e.textureMult=1,g<=1&&(er=s.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,er.width=j*e.textureMult,er.height=_e*e.textureMult),e.canvasWidth=j,e.canvasHeight=_e,e.pixelRatio=g}};CRp$5.renderTo=function(a,e,s,o){this.render({forcedContext:a,forcedZoom:e,forcedPan:s,drawAllLayers:!0,forcedPxRatio:o})};CRp$5.clearCanvas=function(){var a=this,e=a.data;function s(o){o.clearRect(0,0,a.canvasWidth,a.canvasHeight)}s(e.contexts[a.NODE]),s(e.contexts[a.DRAG])};CRp$5.render=function(a){var e=this;a=a||staticEmptyObject();var s=e.cy,o=a.forcedContext,c=a.drawAllLayers,d=a.drawOnlyNodeLayer,g=a.forcedZoom,b=a.forcedPan,j=a.forcedPxRatio===void 0?this.getPixelRatio():a.forcedPxRatio,_e=e.data,er=_e.canvasNeedsRedraw,rr=e.textureOnViewport&&!o&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),tr=a.motionBlur!==void 0?a.motionBlur:e.motionBlur,nr=e.motionBlurPxRatio,ar=s.hasCompoundNodes(),lr=e.hoverData.draggingEles,or=!!(e.hoverData.selecting||e.touchData.selecting);tr=tr&&!o&&e.motionBlurEnabled&&!or;var ir=tr;o||(e.prevPxRatio!==j&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=j),!o&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),tr&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(ir=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!rr&&(er[e.NODE]=!0,er[e.SELECT_BOX]=!0);var sr=s.style(),ur=s.zoom(),cr=g!==void 0?g:ur,fr=s.pan(),hr={x:fr.x,y:fr.y},dr={zoom:ur,pan:{x:fr.x,y:fr.y}},vr=e.prevViewport,gr=vr===void 0||dr.zoom!==vr.zoom||dr.pan.x!==vr.pan.x||dr.pan.y!==vr.pan.y;!gr&&!(lr&&!ar)&&(e.motionBlurPxRatio=1),b&&(hr=b),cr*=j,hr.x*=j,hr.y*=j;var pr=e.getCachedZSortedEles();function mr(Nr,Ir,Dr,Or,jr){var Wr=Nr.globalCompositeOperation;Nr.globalCompositeOperation="destination-out",e.colorFillStyle(Nr,255,255,255,e.motionBlurTransparency),Nr.fillRect(Ir,Dr,Or,jr),Nr.globalCompositeOperation=Wr}function yr(Nr,Ir){var Dr,Or,jr,Wr;!e.clearingMotionBlur&&(Nr===_e.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||Nr===_e.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(Dr={x:fr.x*nr,y:fr.y*nr},Or=ur*nr,jr=e.canvasWidth*nr,Wr=e.canvasHeight*nr):(Dr=hr,Or=cr,jr=e.canvasWidth,Wr=e.canvasHeight),Nr.setTransform(1,0,0,1,0,0),Ir==="motionBlur"?mr(Nr,0,0,jr,Wr):!o&&(Ir===void 0||Ir)&&Nr.clearRect(0,0,jr,Wr),c||(Nr.translate(Dr.x,Dr.y),Nr.scale(Or,Or)),b&&Nr.translate(b.x,b.y),g&&Nr.scale(g,g)}if(rr||(e.textureDrawLastFrame=!1),rr){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=s.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var br=e.data.bufferContexts[e.TEXTURE_BUFFER];br.setTransform(1,0,0,1,0,0),br.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:br,drawOnlyNodeLayer:!0,forcedPxRatio:j*e.textureMult});var dr=e.textureCache.viewport={zoom:s.zoom(),pan:s.pan(),width:e.canvasWidth,height:e.canvasHeight};dr.mpan={x:(0-dr.pan.x)/dr.zoom,y:(0-dr.pan.y)/dr.zoom}}er[e.DRAG]=!1,er[e.NODE]=!1;var Er=_e.contexts[e.NODE],_r=e.textureCache.texture,dr=e.textureCache.viewport;Er.setTransform(1,0,0,1,0,0),tr?mr(Er,0,0,dr.width,dr.height):Er.clearRect(0,0,dr.width,dr.height);var Rr=sr.core("outside-texture-bg-color").value,Cr=sr.core("outside-texture-bg-opacity").value;e.colorFillStyle(Er,Rr[0],Rr[1],Rr[2],Cr),Er.fillRect(0,0,dr.width,dr.height);var ur=s.zoom();yr(Er,!1),Er.clearRect(dr.mpan.x,dr.mpan.y,dr.width/dr.zoom/j,dr.height/dr.zoom/j),Er.drawImage(_r,dr.mpan.x,dr.mpan.y,dr.width/dr.zoom/j,dr.height/dr.zoom/j)}else e.textureOnViewport&&!o&&(e.textureCache=null);var wr=s.extent(),$r=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),Ar=e.hideEdgesOnViewport&&$r,Sr=[];if(Sr[e.NODE]=!er[e.NODE]&&tr&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,Sr[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),Sr[e.DRAG]=!er[e.DRAG]&&tr&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,Sr[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),er[e.NODE]||c||d||Sr[e.NODE]){var kr=tr&&!Sr[e.NODE]&&nr!==1,Er=o||(kr?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:_e.contexts[e.NODE]),Mr=tr&&!kr?"motionBlur":void 0;yr(Er,Mr),Ar?e.drawCachedNodes(Er,pr.nondrag,j,wr):e.drawLayeredElements(Er,pr.nondrag,j,wr),e.debug&&e.drawDebugPoints(Er,pr.nondrag),!c&&!tr&&(er[e.NODE]=!1)}if(!d&&(er[e.DRAG]||c||Sr[e.DRAG])){var kr=tr&&!Sr[e.DRAG]&&nr!==1,Er=o||(kr?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:_e.contexts[e.DRAG]);yr(Er,tr&&!kr?"motionBlur":void 0),Ar?e.drawCachedNodes(Er,pr.drag,j,wr):e.drawCachedElements(Er,pr.drag,j,wr),e.debug&&e.drawDebugPoints(Er,pr.drag),!c&&!tr&&(er[e.DRAG]=!1)}if(this.drawSelectionRectangle(a,yr),tr&&nr!==1){var qr=_e.contexts[e.NODE],Tr=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],Pr=_e.contexts[e.DRAG],Br=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],Ur=function(Ir,Dr,Or){Ir.setTransform(1,0,0,1,0,0),Or||!ir?Ir.clearRect(0,0,e.canvasWidth,e.canvasHeight):mr(Ir,0,0,e.canvasWidth,e.canvasHeight);var jr=nr;Ir.drawImage(Dr,0,0,e.canvasWidth*jr,e.canvasHeight*jr,0,0,e.canvasWidth,e.canvasHeight)};(er[e.NODE]||Sr[e.NODE])&&(Ur(qr,Tr,Sr[e.NODE]),er[e.NODE]=!1),(er[e.DRAG]||Sr[e.DRAG])&&(Ur(Pr,Br,Sr[e.DRAG]),er[e.DRAG]=!1)}e.prevViewport=dr,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),tr&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!rr,e.mbFrames=0,er[e.NODE]=!0,er[e.DRAG]=!0,e.redraw()},motionBlurDelay)),o||s.emit("render")};var fpsHeight;CRp$5.drawSelectionRectangle=function(a,e){var s=this,o=s.cy,c=s.data,d=o.style(),g=a.drawOnlyNodeLayer,b=a.drawAllLayers,j=c.canvasNeedsRedraw,_e=a.forcedContext;if(s.showFps||!g&&j[s.SELECT_BOX]&&!b){var er=_e||c.contexts[s.SELECT_BOX];if(e(er),s.selection[4]==1&&(s.hoverData.selecting||s.touchData.selecting)){var rr=s.cy.zoom(),tr=d.core("selection-box-border-width").value/rr;er.lineWidth=tr,er.fillStyle="rgba("+d.core("selection-box-color").value[0]+","+d.core("selection-box-color").value[1]+","+d.core("selection-box-color").value[2]+","+d.core("selection-box-opacity").value+")",er.fillRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]),tr>0&&(er.strokeStyle="rgba("+d.core("selection-box-border-color").value[0]+","+d.core("selection-box-border-color").value[1]+","+d.core("selection-box-border-color").value[2]+","+d.core("selection-box-opacity").value+")",er.strokeRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]))}if(c.bgActivePosistion&&!s.hoverData.selecting){var rr=s.cy.zoom(),nr=c.bgActivePosistion;er.fillStyle="rgba("+d.core("active-bg-color").value[0]+","+d.core("active-bg-color").value[1]+","+d.core("active-bg-color").value[2]+","+d.core("active-bg-opacity").value+")",er.beginPath(),er.arc(nr.x,nr.y,d.core("active-bg-size").pfValue/rr,0,2*Math.PI),er.fill()}var ar=s.lastRedrawTime;if(s.showFps&&ar){ar=Math.round(ar);var lr=Math.round(1e3/ar),or="1 frame = "+ar+" ms = "+lr+" fps";if(er.setTransform(1,0,0,1,0,0),er.fillStyle="rgba(255, 0, 0, 0.75)",er.strokeStyle="rgba(255, 0, 0, 0.75)",er.font="30px Arial",!fpsHeight){var ir=er.measureText(or);fpsHeight=ir.actualBoundingBoxAscent}er.fillText(or,0,fpsHeight);var sr=60;er.strokeRect(0,fpsHeight+10,250,20),er.fillRect(0,fpsHeight+10,250*Math.min(lr/sr,1),20)}b||(j[s.SELECT_BOX]=!1)}};function compileShader(a,e,s){var o=a.createShader(e);if(a.shaderSource(o,s),a.compileShader(o),!a.getShaderParameter(o,a.COMPILE_STATUS))throw new Error(a.getShaderInfoLog(o));return o}function createProgram(a,e,s){var o=compileShader(a,a.VERTEX_SHADER,e),c=compileShader(a,a.FRAGMENT_SHADER,s),d=a.createProgram();if(a.attachShader(d,o),a.attachShader(d,c),a.linkProgram(d),!a.getProgramParameter(d,a.LINK_STATUS))throw new Error("Could not initialize shaders");return d}function createTextureCanvas(a,e,s){s===void 0&&(s=e);var o=a.makeOffscreenCanvas(e,s),c=o.context=o.getContext("2d");return o.clear=function(){return c.clearRect(0,0,o.width,o.height)},o.clear(),o}function getEffectivePanZoom(a){var e=a.pixelRatio,s=a.cy.zoom(),o=a.cy.pan();return{zoom:s*e,pan:{x:o.x*e,y:o.y*e}}}function getEffectiveZoom(a){var e=a.pixelRatio,s=a.cy.zoom();return s*e}function modelToRenderedPosition(a,e,s,o,c){var d=o*s+e.x,g=c*s+e.y;return g=Math.round(a.canvasHeight-g),[d,g]}function isSimpleShape(a){return a.pstyle("background-fill").value!=="solid"||a.pstyle("background-image").strValue!=="none"?!1:a.pstyle("border-width").value===0||a.pstyle("border-opacity").value===0?!0:a.pstyle("border-style").value==="solid"}function arrayEqual(a,e){if(a.length!==e.length)return!1;for(var s=0;s<a.length;s++)if(a[s]!==e[s])return!1;return!0}function toWebGLColor(a,e,s){var o=a[0]/255,c=a[1]/255,d=a[2]/255,g=e,b=s||new Array(4);return b[0]=o*g,b[1]=c*g,b[2]=d*g,b[3]=g,b}function indexToVec4(a,e){var s=e||new Array(4);return s[0]=(a>>0&255)/255,s[1]=(a>>8&255)/255,s[2]=(a>>16&255)/255,s[3]=(a>>24&255)/255,s}function vec4ToIndex(a){return a[0]+(a[1]<<8)+(a[2]<<16)+(a[3]<<24)}function createTexture(a,e){var s=a.createTexture();return s.buffer=function(o){a.bindTexture(a.TEXTURE_2D,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR_MIPMAP_NEAREST),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,o),a.generateMipmap(a.TEXTURE_2D),a.bindTexture(a.TEXTURE_2D,null)},s.deleteTexture=function(){a.deleteTexture(s)},s}function getTypeInfo(a,e){switch(e){case"float":return[1,a.FLOAT,4];case"vec2":return[2,a.FLOAT,4];case"vec3":return[3,a.FLOAT,4];case"vec4":return[4,a.FLOAT,4];case"int":return[1,a.INT,4];case"ivec2":return[2,a.INT,4]}}function createTypedArray(a,e,s){switch(e){case a.FLOAT:return new Float32Array(s);case a.INT:return new Int32Array(s)}}function createTypedArrayView(a,e,s,o,c,d){switch(e){case a.FLOAT:return new Float32Array(s.buffer,d*o,c);case a.INT:return new Int32Array(s.buffer,d*o,c)}}function createBufferStaticDraw(a,e,s,o){var c=getTypeInfo(a,e),d=_slicedToArray$1(c,2),g=d[0],b=d[1],j=createTypedArray(a,b,o),_e=a.createBuffer();return a.bindBuffer(a.ARRAY_BUFFER,_e),a.bufferData(a.ARRAY_BUFFER,j,a.STATIC_DRAW),b===a.FLOAT?a.vertexAttribPointer(s,g,b,!1,0,0):b===a.INT&&a.vertexAttribIPointer(s,g,b,0,0),a.enableVertexAttribArray(s),a.bindBuffer(a.ARRAY_BUFFER,null),_e}function createBufferDynamicDraw(a,e,s,o){var c=getTypeInfo(a,s),d=_slicedToArray$1(c,3),g=d[0],b=d[1],j=d[2],_e=createTypedArray(a,b,e*g),er=g*j,rr=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,rr),a.bufferData(a.ARRAY_BUFFER,e*er,a.DYNAMIC_DRAW),a.enableVertexAttribArray(o),b===a.FLOAT?a.vertexAttribPointer(o,g,b,!1,er,0):b===a.INT&&a.vertexAttribIPointer(o,g,b,er,0),a.vertexAttribDivisor(o,1),a.bindBuffer(a.ARRAY_BUFFER,null);for(var tr=new Array(e),nr=0;nr<e;nr++)tr[nr]=createTypedArrayView(a,b,_e,er,g,nr);return rr.dataArray=_e,rr.stride=er,rr.size=g,rr.getView=function(ar){return tr[ar]},rr.setPoint=function(ar,lr,or){var ir=tr[ar];ir[0]=lr,ir[1]=or},rr.bufferSubData=function(ar){a.bindBuffer(a.ARRAY_BUFFER,rr),ar?a.bufferSubData(a.ARRAY_BUFFER,0,_e,0,ar*g):a.bufferSubData(a.ARRAY_BUFFER,0,_e)},rr}function create3x3MatrixBufferDynamicDraw(a,e,s){for(var o=9,c=new Float32Array(e*o),d=new Array(e),g=0;g<e;g++){var b=g*o*4;d[g]=new Float32Array(c.buffer,b,o)}var j=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,j),a.bufferData(a.ARRAY_BUFFER,c.byteLength,a.DYNAMIC_DRAW);for(var _e=0;_e<3;_e++){var er=s+_e;a.enableVertexAttribArray(er),a.vertexAttribPointer(er,3,a.FLOAT,!1,3*12,_e*12),a.vertexAttribDivisor(er,1)}return a.bindBuffer(a.ARRAY_BUFFER,null),j.getMatrixView=function(rr){return d[rr]},j.setData=function(rr,tr){d[tr].set(rr,0)},j.bufferSubData=function(){a.bindBuffer(a.ARRAY_BUFFER,j),a.bufferSubData(a.ARRAY_BUFFER,0,c)},j}function createPickingFrameBuffer(a){var e=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,e);var s=a.createTexture();return a.bindTexture(a.TEXTURE_2D,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,s,0),a.bindFramebuffer(a.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(o,c){a.bindTexture(a.TEXTURE_2D,s),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,o,c,0,a.RGBA,a.UNSIGNED_BYTE,null)},e}var ARRAY_TYPE=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var a=0,e=arguments.length;e--;)a+=arguments[e]*arguments[e];return Math.sqrt(a)});function create$1(){var a=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function identity(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a}function multiply(a,e,s){var o=e[0],c=e[1],d=e[2],g=e[3],b=e[4],j=e[5],_e=e[6],er=e[7],rr=e[8],tr=s[0],nr=s[1],ar=s[2],lr=s[3],or=s[4],ir=s[5],sr=s[6],ur=s[7],cr=s[8];return a[0]=tr*o+nr*g+ar*_e,a[1]=tr*c+nr*b+ar*er,a[2]=tr*d+nr*j+ar*rr,a[3]=lr*o+or*g+ir*_e,a[4]=lr*c+or*b+ir*er,a[5]=lr*d+or*j+ir*rr,a[6]=sr*o+ur*g+cr*_e,a[7]=sr*c+ur*b+cr*er,a[8]=sr*d+ur*j+cr*rr,a}function translate(a,e,s){var o=e[0],c=e[1],d=e[2],g=e[3],b=e[4],j=e[5],_e=e[6],er=e[7],rr=e[8],tr=s[0],nr=s[1];return a[0]=o,a[1]=c,a[2]=d,a[3]=g,a[4]=b,a[5]=j,a[6]=tr*o+nr*g+_e,a[7]=tr*c+nr*b+er,a[8]=tr*d+nr*j+rr,a}function rotate(a,e,s){var o=e[0],c=e[1],d=e[2],g=e[3],b=e[4],j=e[5],_e=e[6],er=e[7],rr=e[8],tr=Math.sin(s),nr=Math.cos(s);return a[0]=nr*o+tr*g,a[1]=nr*c+tr*b,a[2]=nr*d+tr*j,a[3]=nr*g-tr*o,a[4]=nr*b-tr*c,a[5]=nr*j-tr*d,a[6]=_e,a[7]=er,a[8]=rr,a}function scale(a,e,s){var o=s[0],c=s[1];return a[0]=o*e[0],a[1]=o*e[1],a[2]=o*e[2],a[3]=c*e[3],a[4]=c*e[4],a[5]=c*e[5],a[6]=e[6],a[7]=e[7],a[8]=e[8],a}function projection(a,e,s){return a[0]=2/e,a[1]=0,a[2]=0,a[3]=0,a[4]=-2/s,a[5]=0,a[6]=-1,a[7]=1,a[8]=1,a}var Atlas=function(){function a(e,s,o,c){_classCallCheck(this,a),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=s,this.texRows=o,this.texHeight=Math.floor(s/o),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=c(e,s,s),this.scratch=c(e,s,this.texHeight,"scratch")}return _createClass(a,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(s){var o=s.w,c=s.h,d=this.texHeight,g=this.texSize,b=d/c,j=o*b,_e=c*b;return j>g&&(b=g/o,j=o*b,_e=c*b),{scale:b,texW:j,texH:_e}}},{key:"draw",value:function(s,o,c){var d=this;if(this.locked)throw new Error("can't draw, atlas is locked");var g=this.texSize,b=this.texRows,j=this.texHeight,_e=this.getScale(o),er=_e.scale,rr=_e.texW,tr=_e.texH,nr=function(ur,cr){if(c&&cr){var fr=cr.context,hr=ur.x,dr=ur.row,vr=hr,gr=j*dr;fr.save(),fr.translate(vr,gr),fr.scale(er,er),c(fr,o),fr.restore()}},ar=[null,null],lr=function(){nr(d.freePointer,d.canvas),ar[0]={x:d.freePointer.x,y:d.freePointer.row*j,w:rr,h:tr},ar[1]={x:d.freePointer.x+rr,y:d.freePointer.row*j,w:0,h:tr},d.freePointer.x+=rr,d.freePointer.x==g&&(d.freePointer.x=0,d.freePointer.row++)},or=function(){var ur=d.scratch,cr=d.canvas;ur.clear(),nr({x:0,row:0},ur);var fr=g-d.freePointer.x,hr=rr-fr,dr=j;{var vr=d.freePointer.x,gr=d.freePointer.row*j,pr=fr;cr.context.drawImage(ur,0,0,pr,dr,vr,gr,pr,dr),ar[0]={x:vr,y:gr,w:pr,h:tr}}{var mr=fr,yr=(d.freePointer.row+1)*j,br=hr;cr&&cr.context.drawImage(ur,mr,0,br,dr,0,yr,br,dr),ar[1]={x:0,y:yr,w:br,h:tr}}d.freePointer.x=hr,d.freePointer.row++},ir=function(){d.freePointer.x=0,d.freePointer.row++};if(this.freePointer.x+rr<=g)lr();else{if(this.freePointer.row>=b-1)return!1;this.freePointer.x===g?(ir(),lr()):this.enableWrapping?or():(ir(),lr())}return this.keyToLocation.set(s,ar),this.needsBuffer=!0,ar}},{key:"getOffsets",value:function(s){return this.keyToLocation.get(s)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(s){if(this.locked)return!1;var o=this.texSize,c=this.texRows,d=this.getScale(s),g=d.texW;return this.freePointer.x+g>o?this.freePointer.row<c-1:!0}},{key:"bufferIfNeeded",value:function(s){this.texture||(this.texture=createTexture(s,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),AtlasCollection=function(){function a(e,s,o,c){_classCallCheck(this,a),this.r=e,this.texSize=s,this.texRows=o,this.createTextureCanvas=c,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return _createClass(a,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var s=this.r,o=this.texSize,c=this.texRows,d=this.createTextureCanvas;return new Atlas(s,o,c,d)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var s=this.r,o=this.texSize,c=this.texRows,d=this.createTextureCanvas,g=Math.floor(o/c);this.scratch=d(s,o,g,"scratch")}return this.scratch}},{key:"draw",value:function(s,o,c){var d=this.styleKeyToAtlas.get(s);return d||(d=this.atlases[this.atlases.length-1],(!d||!d.canFit(o))&&(d&&d.lock(),d=this._createAtlas(),this.atlases.push(d)),d.draw(s,o,c),this.styleKeyToAtlas.set(s,d)),d}},{key:"getAtlas",value:function(s){return this.styleKeyToAtlas.get(s)}},{key:"hasAtlas",value:function(s){return this.styleKeyToAtlas.has(s)}},{key:"markKeyForGC",value:function(s){this.markedKeys.add(s)}},{key:"gc",value:function(){var s=this,o=this.markedKeys;if(o.size===0){console.log("nothing to garbage collect");return}var c=[],d=new Map,g=null,b=_createForOfIteratorHelper(this.atlases),j;try{var _e=function(){var rr=j.value,tr=rr.getKeys(),nr=intersection(o,tr);if(nr.size===0)return c.push(rr),tr.forEach(function(fr){return d.set(fr,rr)}),1;g||(g=s._createAtlas(),c.push(g));var ar=_createForOfIteratorHelper(tr),lr;try{for(ar.s();!(lr=ar.n()).done;){var or=lr.value;if(!nr.has(or)){var ir=rr.getOffsets(or),sr=_slicedToArray$1(ir,2),ur=sr[0],cr=sr[1];g.canFit({w:ur.w+cr.w,h:ur.h})||(g.lock(),g=s._createAtlas(),c.push(g)),rr.canvas&&(s._copyTextureToNewAtlas(or,rr,g),d.set(or,g))}}}catch(fr){ar.e(fr)}finally{ar.f()}rr.dispose()};for(b.s();!(j=b.n()).done;)_e()}catch(er){b.e(er)}finally{b.f()}this.atlases=c,this.styleKeyToAtlas=d,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(s,o,c){var d=o.getOffsets(s),g=_slicedToArray$1(d,2),b=g[0],j=g[1];if(j.w===0)c.draw(s,b,function(tr){tr.drawImage(o.canvas,b.x,b.y,b.w,b.h,0,0,b.w,b.h)});else{var _e=this._getScratchCanvas();_e.clear(),_e.context.drawImage(o.canvas,b.x,b.y,b.w,b.h,0,0,b.w,b.h),_e.context.drawImage(o.canvas,j.x,j.y,j.w,j.h,b.w,0,j.w,j.h);var er=b.w+j.w,rr=b.h;c.draw(s,{w:er,h:rr},function(tr){tr.drawImage(_e,0,0,er,rr,0,0,er,rr)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();function intersection(a,e){return a.intersection?a.intersection(e):new Set(_toConsumableArray(a).filter(function(s){return e.has(s)}))}var AtlasManager=function(){function a(e,s){_classCallCheck(this,a),this.r=e,this.globalOptions=s,this.atlasSize=s.webglTexSize,this.maxAtlasesPerBatch=s.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return _createClass(a,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(s,o){var c=this.globalOptions,d=c.webglTexSize,g=c.createTextureCanvas,b=o.texRows,j=this._cacheScratchCanvas(g),_e=new AtlasCollection(this.r,d,b,j);this.collections.set(s,_e)}},{key:"addRenderType",value:function(s,o){var c=o.collection;if(!this.collections.has(c))throw new Error("invalid atlas collection name '".concat(c,"'"));var d=this.collections.get(c),g=extend({type:s,atlasCollection:d},o);this.renderTypes.set(s,g)}},{key:"getRenderTypeOpts",value:function(s){return this.renderTypes.get(s)}},{key:"getAtlasCollection",value:function(s){return this.collections.get(s)}},{key:"_cacheScratchCanvas",value:function(s){var o=-1,c=-1,d=null;return function(g,b,j,_e){return _e?((!d||b!=o||j!=c)&&(o=b,c=j,d=s(g,b,j)),d):s(g,b,j)}}},{key:"_key",value:function(s,o){return"".concat(s,"-").concat(o)}},{key:"invalidate",value:function(s){var o=this,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=c.forceRedraw,g=d===void 0?!1:d,b=c.filterEle,j=b===void 0?function(){return!0}:b,_e=c.filterType,er=_e===void 0?function(){return!0}:_e,rr=!1,tr=!1,nr=_createForOfIteratorHelper(s),ar;try{for(nr.s();!(ar=nr.n()).done;){var lr=ar.value;if(j(lr)){var or=_createForOfIteratorHelper(this.renderTypes.values()),ir;try{var sr=function(){var cr=ir.value,fr=cr.type;if(er(fr)){var hr=o.collections.get(cr.collection),dr=cr.getKey(lr),vr=Array.isArray(dr)?dr:[dr];if(g)vr.forEach(function(yr){return hr.markKeyForGC(yr)}),tr=!0;else{var gr=cr.getID?cr.getID(lr):lr.id(),pr=o._key(fr,gr),mr=o.typeAndIdToKey.get(pr);mr!==void 0&&!arrayEqual(vr,mr)&&(rr=!0,o.typeAndIdToKey.delete(pr),mr.forEach(function(yr){return hr.markKeyForGC(yr)}))}}};for(or.s();!(ir=or.n()).done;)sr()}catch(ur){or.e(ur)}finally{or.f()}}}}catch(ur){nr.e(ur)}finally{nr.f()}return tr&&(this.gc(),rr=!1),rr}},{key:"gc",value:function(){var s=_createForOfIteratorHelper(this.collections.values()),o;try{for(s.s();!(o=s.n()).done;){var c=o.value;c.gc()}}catch(d){s.e(d)}finally{s.f()}}},{key:"getOrCreateAtlas",value:function(s,o,c,d){var g=this.renderTypes.get(o),b=this.collections.get(g.collection),j=!1,_e=b.draw(d,c,function(tr){g.drawClipped?(tr.save(),tr.beginPath(),tr.rect(0,0,c.w,c.h),tr.clip(),g.drawElement(tr,s,c,!0,!0),tr.restore()):g.drawElement(tr,s,c,!0,!0),j=!0});if(j){var er=g.getID?g.getID(s):s.id(),rr=this._key(o,er);this.typeAndIdToKey.has(rr)?this.typeAndIdToKey.get(rr).push(d):this.typeAndIdToKey.set(rr,[d])}return _e}},{key:"getAtlasInfo",value:function(s,o){var c=this,d=this.renderTypes.get(o),g=d.getKey(s),b=Array.isArray(g)?g:[g];return b.map(function(j){var _e=d.getBoundingBox(s,j),er=c.getOrCreateAtlas(s,o,_e,j),rr=er.getOffsets(j),tr=_slicedToArray$1(rr,2),nr=tr[0],ar=tr[1];return{atlas:er,tex:nr,tex1:nr,tex2:ar,bb:_e}})}},{key:"getDebugInfo",value:function(){var s=[],o=_createForOfIteratorHelper(this.collections),c;try{for(o.s();!(c=o.n()).done;){var d=_slicedToArray$1(c.value,2),g=d[0],b=d[1],j=b.getCounts(),_e=j.keyCount,er=j.atlasCount;s.push({type:g,keyCount:_e,atlasCount:er})}}catch(rr){o.e(rr)}finally{o.f()}return s}}])}(),AtlasBatchManager=function(){function a(e){_classCallCheck(this,a),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return _createClass(a,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(s,o){return o})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(s){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(s):!0}},{key:"getAtlasIndexForBatch",value:function(s){var o=this.batchAtlases.indexOf(s);if(o<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(s),o=this.batchAtlases.length-1}return o}}])}(),circleSD=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,rectangleSD=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,roundRectangleSD=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,ellipseSD=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,RENDER_TARGET={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},TEX_PICKING_MODE={IGNORE:1,USE_BB:2},TEXTURE=0,EDGE_STRAIGHT=1,EDGE_CURVE_SEGMENT=2,EDGE_ARROW=3,RECTANGLE=4,ROUND_RECTANGLE=5,BOTTOM_ROUND_RECTANGLE=6,ELLIPSE=7,ElementDrawingWebGL=function(){function a(e,s,o){_classCallCheck(this,a),this.r=e,this.gl=s,this.maxInstances=o.webglBatchSize,this.atlasSize=o.webglTexSize,this.bgColor=o.bgColor,this.debug=o.webglDebug,this.batchDebugInfo=[],o.enableWrapping=!0,o.createTextureCanvas=createTextureCanvas,this.atlasManager=new AtlasManager(e,o),this.batchManager=new AtlasBatchManager(o),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(RENDER_TARGET.SCREEN),this.pickingProgram=this._createShaderProgram(RENDER_TARGET.PICKING),this.vao=this._createVAO()}return _createClass(a,[{key:"addAtlasCollection",value:function(s,o){this.atlasManager.addAtlasCollection(s,o)}},{key:"addTextureAtlasRenderType",value:function(s,o){this.atlasManager.addRenderType(s,o)}},{key:"addSimpleShapeRenderType",value:function(s,o){this.simpleShapeOptions.set(s,o)}},{key:"invalidate",value:function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=o.type,d=this.atlasManager;return c?d.invalidate(s,{filterType:function(b){return b===c},forceRedraw:!0}):d.invalidate(s)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(s){var o=this.gl,c=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(TEXTURE,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(RECTANGLE," || aVertType == ").concat(ELLIPSE,` 
             || aVertType == `).concat(ROUND_RECTANGLE," || aVertType == ").concat(BOTTOM_ROUND_RECTANGLE,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(EDGE_STRAIGHT,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(EDGE_CURVE_SEGMENT,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(EDGE_ARROW,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),d=this.batchManager.getIndexArray(),g=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(d.map(function(_e){return"uniform sampler2D uTexture".concat(_e,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(circleSD,`
      `).concat(rectangleSD,`
      `).concat(roundRectangleSD,`
      `).concat(ellipseSD,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(TEXTURE,`) {
          // look up the texel from the texture unit
          `).concat(d.map(function(_e){return"if(vAtlasId == ".concat(_e,") outColor = texture(uTexture").concat(_e,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(EDGE_ARROW,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(RECTANGLE,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(RECTANGLE," || vVertType == ").concat(ELLIPSE,` 
          || vVertType == `).concat(ROUND_RECTANGLE," || vVertType == ").concat(BOTTOM_ROUND_RECTANGLE,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(RECTANGLE,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(ELLIPSE,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(ELLIPSE,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(s.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),b=createProgram(o,c,g);b.aPosition=o.getAttribLocation(b,"aPosition"),b.aIndex=o.getAttribLocation(b,"aIndex"),b.aVertType=o.getAttribLocation(b,"aVertType"),b.aTransform=o.getAttribLocation(b,"aTransform"),b.aAtlasId=o.getAttribLocation(b,"aAtlasId"),b.aTex=o.getAttribLocation(b,"aTex"),b.aPointAPointB=o.getAttribLocation(b,"aPointAPointB"),b.aPointCPointD=o.getAttribLocation(b,"aPointCPointD"),b.aLineWidth=o.getAttribLocation(b,"aLineWidth"),b.aColor=o.getAttribLocation(b,"aColor"),b.aCornerRadius=o.getAttribLocation(b,"aCornerRadius"),b.aBorderColor=o.getAttribLocation(b,"aBorderColor"),b.uPanZoomMatrix=o.getUniformLocation(b,"uPanZoomMatrix"),b.uAtlasSize=o.getUniformLocation(b,"uAtlasSize"),b.uBGColor=o.getUniformLocation(b,"uBGColor"),b.uZoom=o.getUniformLocation(b,"uZoom"),b.uTextures=[];for(var j=0;j<this.batchManager.getMaxAtlasesPerBatch();j++)b.uTextures.push(o.getUniformLocation(b,"uTexture".concat(j)));return b}},{key:"_createVAO",value:function(){var s=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=s.length/2;var o=this.maxInstances,c=this.gl,d=this.program,g=c.createVertexArray();return c.bindVertexArray(g),createBufferStaticDraw(c,"vec2",d.aPosition,s),this.transformBuffer=create3x3MatrixBufferDynamicDraw(c,o,d.aTransform),this.indexBuffer=createBufferDynamicDraw(c,o,"vec4",d.aIndex),this.vertTypeBuffer=createBufferDynamicDraw(c,o,"int",d.aVertType),this.atlasIdBuffer=createBufferDynamicDraw(c,o,"int",d.aAtlasId),this.texBuffer=createBufferDynamicDraw(c,o,"vec4",d.aTex),this.pointAPointBBuffer=createBufferDynamicDraw(c,o,"vec4",d.aPointAPointB),this.pointCPointDBuffer=createBufferDynamicDraw(c,o,"vec4",d.aPointCPointD),this.lineWidthBuffer=createBufferDynamicDraw(c,o,"vec2",d.aLineWidth),this.colorBuffer=createBufferDynamicDraw(c,o,"vec4",d.aColor),this.cornerRadiusBuffer=createBufferDynamicDraw(c,o,"vec4",d.aCornerRadius),this.borderColorBuffer=createBufferDynamicDraw(c,o,"vec4",d.aBorderColor),c.bindVertexArray(null),g}},{key:"buffers",get:function(){var s=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(o){return endsWith(o,"Buffer")}).map(function(o){return s[o]})),this._buffers}},{key:"startFrame",value:function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:RENDER_TARGET.SCREEN;this.panZoomMatrix=s,this.renderTarget=o,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(s,o){return s.visible()?o&&o.isVisible?o.isVisible(s):!0:!1}},{key:"drawTexture",value:function(s,o,c){var d=this.atlasManager,g=this.batchManager,b=d.getRenderTypeOpts(c);if(this._isVisible(s,b)&&!(s.isEdge()&&!this._isValidEdge(s))){if(this.renderTarget.picking&&b.getTexPickingMode){var j=b.getTexPickingMode(s);if(j===TEX_PICKING_MODE.IGNORE)return;if(j==TEX_PICKING_MODE.USE_BB){this.drawPickingRectangle(s,o,c);return}}var _e=d.getAtlasInfo(s,c),er=_createForOfIteratorHelper(_e),rr;try{for(er.s();!(rr=er.n()).done;){var tr=rr.value,nr=tr.atlas,ar=tr.tex1,lr=tr.tex2;g.canAddToCurrentBatch(nr)||this.endBatch();for(var or=g.getAtlasIndexForBatch(nr),ir=0,sr=[[ar,!0],[lr,!1]];ir<sr.length;ir++){var ur=_slicedToArray$1(sr[ir],2),cr=ur[0],fr=ur[1];if(cr.w!=0){var hr=this.instanceCount;this.vertTypeBuffer.getView(hr)[0]=TEXTURE;var dr=this.indexBuffer.getView(hr);indexToVec4(o,dr);var vr=this.atlasIdBuffer.getView(hr);vr[0]=or;var gr=this.texBuffer.getView(hr);gr[0]=cr.x,gr[1]=cr.y,gr[2]=cr.w,gr[3]=cr.h;var pr=this.transformBuffer.getMatrixView(hr);this.setTransformMatrix(s,pr,b,tr,fr),this.instanceCount++,fr||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(mr){er.e(mr)}finally{er.f()}}}},{key:"setTransformMatrix",value:function(s,o,c,d){var g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,b=0;if(c.shapeProps&&c.shapeProps.padding&&(b=s.pstyle(c.shapeProps.padding).pfValue),d){var j=d.bb,_e=d.tex1,er=d.tex2,rr=_e.w/(_e.w+er.w);g||(rr=1-rr);var tr=this._getAdjustedBB(j,b,g,rr);this._applyTransformMatrix(o,tr,c,s)}else{var nr=c.getBoundingBox(s),ar=this._getAdjustedBB(nr,b,!0,1);this._applyTransformMatrix(o,ar,c,s)}}},{key:"_applyTransformMatrix",value:function(s,o,c,d){var g,b;identity(s);var j=c.getRotation?c.getRotation(d):0;if(j!==0){var _e=c.getRotationPoint(d),er=_e.x,rr=_e.y;translate(s,s,[er,rr]),rotate(s,s,j);var tr=c.getRotationOffset(d);g=tr.x+(o.xOffset||0),b=tr.y+(o.yOffset||0)}else g=o.x1,b=o.y1;translate(s,s,[g,b]),scale(s,s,[o.w,o.h])}},{key:"_getAdjustedBB",value:function(s,o,c,d){var g=s.x1,b=s.y1,j=s.w,_e=s.h,er=s.yOffset;o&&(g-=o,b-=o,j+=2*o,_e+=2*o);var rr=0,tr=j*d;return c&&d<1?j=tr:!c&&d<1&&(rr=j-tr,g+=rr,j=tr),{x1:g,y1:b,w:j,h:_e,xOffset:rr,yOffset:er}}},{key:"drawPickingRectangle",value:function(s,o,c){var d=this.atlasManager.getRenderTypeOpts(c),g=this.instanceCount;this.vertTypeBuffer.getView(g)[0]=RECTANGLE;var b=this.indexBuffer.getView(g);indexToVec4(o,b);var j=this.colorBuffer.getView(g);toWebGLColor([0,0,0],1,j);var _e=this.transformBuffer.getMatrixView(g);this.setTransformMatrix(s,_e,d),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(s,o,c){var d=this.simpleShapeOptions.get(c);if(this._isVisible(s,d)){var g=d.shapeProps,b=this._getVertTypeForShape(s,g.shape);if(b===void 0||d.isSimple&&!d.isSimple(s)){this.drawTexture(s,o,c);return}var j=this.instanceCount;if(this.vertTypeBuffer.getView(j)[0]=b,b===ROUND_RECTANGLE||b===BOTTOM_ROUND_RECTANGLE){var _e=d.getBoundingBox(s),er=this._getCornerRadius(s,g.radius,_e),rr=this.cornerRadiusBuffer.getView(j);rr[0]=er,rr[1]=er,rr[2]=er,rr[3]=er,b===BOTTOM_ROUND_RECTANGLE&&(rr[0]=0,rr[2]=0)}var tr=this.indexBuffer.getView(j);indexToVec4(o,tr);var nr=s.pstyle(g.color).value,ar=s.pstyle(g.opacity).value,lr=this.colorBuffer.getView(j);toWebGLColor(nr,ar,lr);var or=this.lineWidthBuffer.getView(j);if(or[0]=0,or[1]=0,g.border){var ir=s.pstyle("border-width").value;if(ir>0){var sr=s.pstyle("border-color").value,ur=s.pstyle("border-opacity").value,cr=this.borderColorBuffer.getView(j);toWebGLColor(sr,ur,cr);var fr=s.pstyle("border-position").value;if(fr==="inside")or[0]=0,or[1]=-ir;else if(fr==="outside")or[0]=ir,or[1]=0;else{var hr=ir/2;or[0]=hr,or[1]=-hr}}}var dr=this.transformBuffer.getMatrixView(j);this.setTransformMatrix(s,dr,d),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(s,o){var c=s.pstyle(o).value;switch(c){case"rectangle":return RECTANGLE;case"ellipse":return ELLIPSE;case"roundrectangle":case"round-rectangle":return ROUND_RECTANGLE;case"bottom-round-rectangle":return BOTTOM_ROUND_RECTANGLE;default:return}}},{key:"_getCornerRadius",value:function(s,o,c){var d=c.w,g=c.h;if(s.pstyle(o).value==="auto")return getRoundRectangleRadius(d,g);var b=s.pstyle(o).pfValue,j=d/2,_e=g/2;return Math.min(b,_e,j)}},{key:"drawEdgeArrow",value:function(s,o,c){if(s.visible()){var d=s._private.rscratch,g,b,j;if(c==="source"?(g=d.arrowStartX,b=d.arrowStartY,j=d.srcArrowAngle):(g=d.arrowEndX,b=d.arrowEndY,j=d.tgtArrowAngle),!(isNaN(g)||g==null||isNaN(b)||b==null||isNaN(j)||j==null)){var _e=s.pstyle(c+"-arrow-shape").value;if(_e!=="none"){var er=s.pstyle(c+"-arrow-color").value,rr=s.pstyle("opacity").value,tr=s.pstyle("line-opacity").value,nr=rr*tr,ar=s.pstyle("width").pfValue,lr=s.pstyle("arrow-scale").value,or=this.r.getArrowWidth(ar,lr),ir=this.instanceCount,sr=this.transformBuffer.getMatrixView(ir);identity(sr),translate(sr,sr,[g,b]),scale(sr,sr,[or,or]),rotate(sr,sr,j),this.vertTypeBuffer.getView(ir)[0]=EDGE_ARROW;var ur=this.indexBuffer.getView(ir);indexToVec4(o,ur);var cr=this.colorBuffer.getView(ir);toWebGLColor(er,nr,cr),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(s,o){if(s.visible()){var c=this._getEdgePoints(s);if(c){var d=s.pstyle("opacity").value,g=s.pstyle("line-opacity").value,b=s.pstyle("width").pfValue,j=s.pstyle("line-color").value,_e=d*g;if(c.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),c.length==4){var er=this.instanceCount;this.vertTypeBuffer.getView(er)[0]=EDGE_STRAIGHT;var rr=this.indexBuffer.getView(er);indexToVec4(o,rr);var tr=this.colorBuffer.getView(er);toWebGLColor(j,_e,tr);var nr=this.lineWidthBuffer.getView(er);nr[0]=b;var ar=this.pointAPointBBuffer.getView(er);ar[0]=c[0],ar[1]=c[1],ar[2]=c[2],ar[3]=c[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var lr=0;lr<c.length-2;lr+=2){var or=this.instanceCount;this.vertTypeBuffer.getView(or)[0]=EDGE_CURVE_SEGMENT;var ir=this.indexBuffer.getView(or);indexToVec4(o,ir);var sr=this.colorBuffer.getView(or);toWebGLColor(j,_e,sr);var ur=this.lineWidthBuffer.getView(or);ur[0]=b;var cr=c[lr-2],fr=c[lr-1],hr=c[lr],dr=c[lr+1],vr=c[lr+2],gr=c[lr+3],pr=c[lr+4],mr=c[lr+5];lr==0&&(cr=2*hr-vr+.001,fr=2*dr-gr+.001),lr==c.length-4&&(pr=2*vr-hr+.001,mr=2*gr-dr+.001);var yr=this.pointAPointBBuffer.getView(or);yr[0]=cr,yr[1]=fr,yr[2]=hr,yr[3]=dr;var br=this.pointCPointDBuffer.getView(or);br[0]=vr,br[1]=gr,br[2]=pr,br[3]=mr,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(s){var o=s._private.rscratch;return!(o.badLine||o.allpts==null||isNaN(o.allpts[0]))}},{key:"_getEdgePoints",value:function(s){var o=s._private.rscratch;if(this._isValidEdge(s)){var c=o.allpts;if(c.length==4)return c;var d=this._getNumSegments(s);return this._getCurveSegmentPoints(c,d)}}},{key:"_getNumSegments",value:function(s){var o=15;return Math.min(Math.max(o,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(s,o){if(s.length==4)return s;for(var c=Array((o+1)*2),d=0;d<=o;d++)if(d==0)c[0]=s[0],c[1]=s[1];else if(d==o)c[d*2]=s[s.length-2],c[d*2+1]=s[s.length-1];else{var g=d/o;this._setCurvePoint(s,g,c,d*2)}return c}},{key:"_setCurvePoint",value:function(s,o,c,d){if(s.length<=2)c[d]=s[0],c[d+1]=s[1];else{for(var g=Array(s.length-2),b=0;b<g.length;b+=2){var j=(1-o)*s[b]+o*s[b+2],_e=(1-o)*s[b+1]+o*s[b+3];g[b]=j,g[b+1]=_e}return this._setCurvePoint(g,o,c,d)}}},{key:"endBatch",value:function(){var s=this.gl,o=this.vao,c=this.vertexCount,d=this.instanceCount;if(d!==0){var g=this.renderTarget.picking?this.pickingProgram:this.program;s.useProgram(g),s.bindVertexArray(o);var b=_createForOfIteratorHelper(this.buffers),j;try{for(b.s();!(j=b.n()).done;){var _e=j.value;_e.bufferSubData(d)}}catch(ar){b.e(ar)}finally{b.f()}for(var er=this.batchManager.getAtlases(),rr=0;rr<er.length;rr++)er[rr].bufferIfNeeded(s);for(var tr=0;tr<er.length;tr++)s.activeTexture(s.TEXTURE0+tr),s.bindTexture(s.TEXTURE_2D,er[tr].texture),s.uniform1i(g.uTextures[tr],tr);s.uniform1f(g.uZoom,getEffectiveZoom(this.r)),s.uniformMatrix3fv(g.uPanZoomMatrix,!1,this.panZoomMatrix),s.uniform1i(g.uAtlasSize,this.batchManager.getAtlasSize());var nr=toWebGLColor(this.bgColor,1);s.uniform4fv(g.uBGColor,nr),s.drawArraysInstanced(s.TRIANGLES,0,c,d),s.bindVertexArray(null),s.bindTexture(s.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:d,atlasCount:er.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var s=this.atlasManager.getDebugInfo(),o=s.reduce(function(g,b){return g+b.atlasCount},0),c=this.batchDebugInfo,d=c.reduce(function(g,b){return g+b.count},0);return{atlasInfo:s,totalAtlases:o,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:c.length,batchInfo:c,totalInstances:d}}}])}(),CRp$4={};CRp$4.initWebgl=function(a,e){var s=this,o=s.data.contexts[s.WEBGL];a.bgColor=getBGColor(s),a.webglTexSize=Math.min(a.webglTexSize,o.getParameter(o.MAX_TEXTURE_SIZE)),a.webglTexRows=Math.min(a.webglTexRows,54),a.webglTexRowsNodes=Math.min(a.webglTexRowsNodes,54),a.webglBatchSize=Math.min(a.webglBatchSize,16384),a.webglTexPerBatch=Math.min(a.webglTexPerBatch,o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS)),s.webglDebug=a.webglDebug,s.webglDebugShowAtlases=a.webglDebugShowAtlases,s.pickingFrameBuffer=createPickingFrameBuffer(o),s.pickingFrameBuffer.needsDraw=!0,s.drawing=new ElementDrawingWebGL(s,o,a);var c=function(rr){return function(tr){return s.getTextAngle(tr,rr)}},d=function(rr){return function(tr){var nr=tr.pstyle(rr);return nr&&nr.value}},g=function(rr){return function(tr){return tr.pstyle("".concat(rr,"-opacity")).value>0}},b=function(rr){var tr=rr.pstyle("text-events").strValue==="yes";return tr?TEX_PICKING_MODE.USE_BB:TEX_PICKING_MODE.IGNORE},j=function(rr){var tr=rr.position(),nr=tr.x,ar=tr.y,lr=rr.outerWidth(),or=rr.outerHeight();return{w:lr,h:or,x1:nr-lr/2,y1:ar-or/2}};s.drawing.addAtlasCollection("node",{texRows:a.webglTexRowsNodes}),s.drawing.addAtlasCollection("label",{texRows:a.webglTexRows}),s.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),s.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:j,isSimple:isSimpleShape,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),s.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:j,isVisible:g("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),s.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:j,isVisible:g("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),s.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:b,getKey:getStyleKeysForLabel(e.getLabelKey,null),getBoundingBox:getBoundingBoxForLabel(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:c(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:d("label")}),s.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:b,getKey:getStyleKeysForLabel(e.getSourceLabelKey,"source"),getBoundingBox:getBoundingBoxForLabel(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:c("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:d("source-label")}),s.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:b,getKey:getStyleKeysForLabel(e.getTargetLabelKey,"target"),getBoundingBox:getBoundingBoxForLabel(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:c("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:d("target-label")});var _e=debounce(function(){console.log("garbage collect flag set"),s.data.gc=!0},1e4);s.onUpdateEleCalcs(function(er,rr){var tr=!1;rr&&rr.length>0&&(tr|=s.drawing.invalidate(rr)),tr&&_e()}),overrideCanvasRendererFunctions(s)};function getBGColor(a){var e=a.cy.container(),s=e&&e.style&&e.style.backgroundColor||"white";return color2tuple(s)}function getLabelLines(a,e){var s=a._private.rscratch;return getPrefixedProperty(s,"labelWrapCachedLines",e)||[]}var getStyleKeysForLabel=function(e,s){return function(o){var c=e(o),d=getLabelLines(o,s);return d.length>1?d.map(function(g,b){return"".concat(c,"_").concat(b)}):c}},getBoundingBoxForLabel=function(e,s){return function(o,c){var d=e(o);if(typeof c=="string"){var g=c.indexOf("_");if(g>0){var b=Number(c.substring(g+1)),j=getLabelLines(o,s),_e=d.h/j.length,er=_e*b,rr=d.y1+er;return{x1:d.x1,w:d.w,y1:rr,h:_e,yOffset:er}}}return d}};function overrideCanvasRendererFunctions(a){{var e=a.render;a.render=function(d){d=d||{};var g=a.cy;a.webgl&&(g.zoom()>maxZoom$1?(clearWebgl(a),e.call(a,d)):(clearCanvas(a),renderWebgl(a,d,RENDER_TARGET.SCREEN)))}}{var s=a.matchCanvasSize;a.matchCanvasSize=function(d){s.call(a,d),a.pickingFrameBuffer.setFramebufferAttachmentSizes(a.canvasWidth,a.canvasHeight),a.pickingFrameBuffer.needsDraw=!0}}a.findNearestElements=function(d,g,b,j){return findNearestElementsWebgl(a,d,g)};{var o=a.invalidateCachedZSortedEles;a.invalidateCachedZSortedEles=function(){o.call(a),a.pickingFrameBuffer.needsDraw=!0}}{var c=a.notify;a.notify=function(d,g){c.call(a,d,g),d==="viewport"||d==="bounds"?a.pickingFrameBuffer.needsDraw=!0:d==="background"&&a.drawing.invalidate(g,{type:"node-body"})}}}function clearWebgl(a){var e=a.data.contexts[a.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function clearCanvas(a){var e=function(o){o.save(),o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,a.canvasWidth,a.canvasHeight),o.restore()};e(a.data.contexts[a.NODE]),e(a.data.contexts[a.DRAG])}function createPanZoomMatrix(a){var e=a.canvasWidth,s=a.canvasHeight,o=getEffectivePanZoom(a),c=o.pan,d=o.zoom,g=create$1();translate(g,g,[c.x,c.y]),scale(g,g,[d,d]);var b=create$1();projection(b,e,s);var j=create$1();return multiply(j,b,g),j}function setContextTransform(a,e){var s=a.canvasWidth,o=a.canvasHeight,c=getEffectivePanZoom(a),d=c.pan,g=c.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,s,o),e.translate(d.x,d.y),e.scale(g,g)}function drawSelectionRectangle(a,e){a.drawSelectionRectangle(e,function(s){return setContextTransform(a,s)})}function drawAxes(a){var e=a.data.contexts[a.NODE];e.save(),setContextTransform(a,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function drawAtlases(a){var e=function(c,d,g){for(var b=c.atlasManager.getAtlasCollection(d),j=a.data.contexts[a.NODE],_e=b.atlases,er=0;er<_e.length;er++){var rr=_e[er],tr=rr.canvas;if(tr){var nr=tr.width,ar=tr.height,lr=nr*er,or=tr.height*g,ir=.4;j.save(),j.scale(ir,ir),j.drawImage(tr,lr,or),j.strokeStyle="black",j.rect(lr,or,nr,ar),j.stroke(),j.restore()}}},s=0;e(a.drawing,"node",s++),e(a.drawing,"label",s++)}function getPickingIndexes(a,e,s,o,c){var d,g,b,j,_e=getEffectivePanZoom(a),er=_e.pan,rr=_e.zoom;{var tr=modelToRenderedPosition(a,er,rr,e,s),nr=_slicedToArray$1(tr,2),ar=nr[0],lr=nr[1],or=6;d=ar-or/2,g=lr-or/2,b=or,j=or}if(b===0||j===0)return[];var ir=a.data.contexts[a.WEBGL];ir.bindFramebuffer(ir.FRAMEBUFFER,a.pickingFrameBuffer),a.pickingFrameBuffer.needsDraw&&(ir.viewport(0,0,ir.canvas.width,ir.canvas.height),renderWebgl(a,null,RENDER_TARGET.PICKING),a.pickingFrameBuffer.needsDraw=!1);var sr=b*j,ur=new Uint8Array(sr*4);ir.readPixels(d,g,b,j,ir.RGBA,ir.UNSIGNED_BYTE,ur),ir.bindFramebuffer(ir.FRAMEBUFFER,null);for(var cr=new Set,fr=0;fr<sr;fr++){var hr=ur.slice(fr*4,fr*4+4),dr=vec4ToIndex(hr)-1;dr>=0&&cr.add(dr)}return cr}function findNearestElementsWebgl(a,e,s){var o=getPickingIndexes(a,e,s),c=a.getCachedZSortedEles(),d,g,b=_createForOfIteratorHelper(o),j;try{for(b.s();!(j=b.n()).done;){var _e=j.value,er=c[_e];if(!d&&er.isNode()&&(d=er),!g&&er.isEdge()&&(g=er),d&&g)break}}catch(rr){b.e(rr)}finally{b.f()}return[d,g].filter(Boolean)}function drawEle(a,e,s){var o=a.drawing;e+=1,s.isNode()?(o.drawNode(s,e,"node-underlay"),o.drawNode(s,e,"node-body"),o.drawTexture(s,e,"label"),o.drawNode(s,e,"node-overlay")):(o.drawEdgeLine(s,e),o.drawEdgeArrow(s,e,"source"),o.drawEdgeArrow(s,e,"target"),o.drawTexture(s,e,"label"),o.drawTexture(s,e,"edge-source-label"),o.drawTexture(s,e,"edge-target-label"))}function renderWebgl(a,e,s){var o;a.webglDebug&&(o=performance.now());var c=a.drawing,d=0;if(s.screen&&a.data.canvasNeedsRedraw[a.SELECT_BOX]&&drawSelectionRectangle(a,e),a.data.canvasNeedsRedraw[a.NODE]||s.picking){var g=a.data.contexts[a.WEBGL];s.screen?(g.clearColor(0,0,0,0),g.enable(g.BLEND),g.blendFunc(g.ONE,g.ONE_MINUS_SRC_ALPHA)):g.disable(g.BLEND),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT),g.viewport(0,0,g.canvas.width,g.canvas.height);var b=createPanZoomMatrix(a),j=a.getCachedZSortedEles();if(d=j.length,c.startFrame(b,s),s.screen){for(var _e=0;_e<j.nondrag.length;_e++)drawEle(a,_e,j.nondrag[_e]);for(var er=0;er<j.drag.length;er++)drawEle(a,er,j.drag[er])}else if(s.picking)for(var rr=0;rr<j.length;rr++)drawEle(a,rr,j[rr]);c.endFrame(),s.screen&&a.webglDebugShowAtlases&&(drawAxes(a),drawAtlases(a)),a.data.canvasNeedsRedraw[a.NODE]=!1,a.data.canvasNeedsRedraw[a.DRAG]=!1}if(a.webglDebug){var tr=performance.now(),nr=!1,ar=Math.ceil(tr-o),lr=c.getDebugInfo(),or=["".concat(d," elements"),"".concat(lr.totalInstances," instances"),"".concat(lr.batchCount," batches"),"".concat(lr.totalAtlases," atlases"),"".concat(lr.wrappedCount," wrapped textures"),"".concat(lr.simpleCount," simple shapes")].join(", ");if(nr)console.log("WebGL (".concat(s.name,") - time ").concat(ar,"ms, ").concat(or));else{console.log("WebGL (".concat(s.name,") - frame time ").concat(ar,"ms")),console.log("Totals:"),console.log("  ".concat(or)),console.log("Texture Atlases Used:");var ir=lr.atlasInfo,sr=_createForOfIteratorHelper(ir),ur;try{for(sr.s();!(ur=sr.n()).done;){var cr=ur.value;console.log("  ".concat(cr.type,": ").concat(cr.keyCount," keys, ").concat(cr.atlasCount," atlases"))}}catch(fr){sr.e(fr)}finally{sr.f()}console.log("")}}a.data.gc&&(console.log("Garbage Collect!"),a.data.gc=!1,c.gc())}var CRp$3={};CRp$3.drawPolygonPath=function(a,e,s,o,c,d){var g=o/2,b=c/2;a.beginPath&&a.beginPath(),a.moveTo(e+g*d[0],s+b*d[1]);for(var j=1;j<d.length/2;j++)a.lineTo(e+g*d[j*2],s+b*d[j*2+1]);a.closePath()};CRp$3.drawRoundPolygonPath=function(a,e,s,o,c,d,g){g.forEach(function(b){return drawPreparedRoundCorner(a,b)}),a.closePath()};CRp$3.drawRoundRectanglePath=function(a,e,s,o,c,d){var g=o/2,b=c/2,j=d==="auto"?getRoundRectangleRadius(o,c):Math.min(d,b,g);a.beginPath&&a.beginPath(),a.moveTo(e,s-b),a.arcTo(e+g,s-b,e+g,s,j),a.arcTo(e+g,s+b,e,s+b,j),a.arcTo(e-g,s+b,e-g,s,j),a.arcTo(e-g,s-b,e,s-b,j),a.lineTo(e,s-b),a.closePath()};CRp$3.drawBottomRoundRectanglePath=function(a,e,s,o,c,d){var g=o/2,b=c/2,j=d==="auto"?getRoundRectangleRadius(o,c):d;a.beginPath&&a.beginPath(),a.moveTo(e,s-b),a.lineTo(e+g,s-b),a.lineTo(e+g,s),a.arcTo(e+g,s+b,e,s+b,j),a.arcTo(e-g,s+b,e-g,s,j),a.lineTo(e-g,s-b),a.lineTo(e,s-b),a.closePath()};CRp$3.drawCutRectanglePath=function(a,e,s,o,c,d,g){var b=o/2,j=c/2,_e=g==="auto"?getCutRectangleCornerLength():g;a.beginPath&&a.beginPath(),a.moveTo(e-b+_e,s-j),a.lineTo(e+b-_e,s-j),a.lineTo(e+b,s-j+_e),a.lineTo(e+b,s+j-_e),a.lineTo(e+b-_e,s+j),a.lineTo(e-b+_e,s+j),a.lineTo(e-b,s+j-_e),a.lineTo(e-b,s-j+_e),a.closePath()};CRp$3.drawBarrelPath=function(a,e,s,o,c){var d=o/2,g=c/2,b=e-d,j=e+d,_e=s-g,er=s+g,rr=getBarrelCurveConstants(o,c),tr=rr.widthOffset,nr=rr.heightOffset,ar=rr.ctrlPtOffsetPct*tr;a.beginPath&&a.beginPath(),a.moveTo(b,_e+nr),a.lineTo(b,er-nr),a.quadraticCurveTo(b+ar,er,b+tr,er),a.lineTo(j-tr,er),a.quadraticCurveTo(j-ar,er,j,er-nr),a.lineTo(j,_e+nr),a.quadraticCurveTo(j-ar,_e,j-tr,_e),a.lineTo(b+tr,_e),a.quadraticCurveTo(b+ar,_e,b,_e+nr),a.closePath()};var sin0=Math.sin(0),cos0=Math.cos(0),sin={},cos={},ellipseStepSize=Math.PI/40;for(var i=0*Math.PI;i<2*Math.PI;i+=ellipseStepSize)sin[i]=Math.sin(i),cos[i]=Math.cos(i);CRp$3.drawEllipsePath=function(a,e,s,o,c){if(a.beginPath&&a.beginPath(),a.ellipse)a.ellipse(e,s,o/2,c/2,0,0,2*Math.PI);else for(var d,g,b=o/2,j=c/2,_e=0*Math.PI;_e<2*Math.PI;_e+=ellipseStepSize)d=e-b*sin[_e]*sin0+b*cos[_e]*cos0,g=s+j*cos[_e]*sin0+j*sin[_e]*cos0,_e===0?a.moveTo(d,g):a.lineTo(d,g);a.closePath()};var CRp$2={};CRp$2.createBuffer=function(a,e){var s=document.createElement("canvas");return s.width=a,s.height=e,[s,s.getContext("2d")]};CRp$2.bufferCanvasImage=function(a){var e=this.cy,s=e.mutableElements(),o=s.boundingBox(),c=this.findContainerClientCoords(),d=a.full?Math.ceil(o.w):c[2],g=a.full?Math.ceil(o.h):c[3],b=number$1(a.maxWidth)||number$1(a.maxHeight),j=this.getPixelRatio(),_e=1;if(a.scale!==void 0)d*=a.scale,g*=a.scale,_e=a.scale;else if(b){var er=1/0,rr=1/0;number$1(a.maxWidth)&&(er=_e*a.maxWidth/d),number$1(a.maxHeight)&&(rr=_e*a.maxHeight/g),_e=Math.min(er,rr),d*=_e,g*=_e}b||(d*=j,g*=j,_e*=j);var tr=document.createElement("canvas");tr.width=d,tr.height=g,tr.style.width=d+"px",tr.style.height=g+"px";var nr=tr.getContext("2d");if(d>0&&g>0){nr.clearRect(0,0,d,g),nr.globalCompositeOperation="source-over";var ar=this.getCachedZSortedEles();if(a.full)nr.translate(-o.x1*_e,-o.y1*_e),nr.scale(_e,_e),this.drawElements(nr,ar),nr.scale(1/_e,1/_e),nr.translate(o.x1*_e,o.y1*_e);else{var lr=e.pan(),or={x:lr.x*_e,y:lr.y*_e};_e*=e.zoom(),nr.translate(or.x,or.y),nr.scale(_e,_e),this.drawElements(nr,ar),nr.scale(1/_e,1/_e),nr.translate(-or.x,-or.y)}a.bg&&(nr.globalCompositeOperation="destination-over",nr.fillStyle=a.bg,nr.rect(0,0,d,g),nr.fill())}return tr};function b64ToBlob(a,e){for(var s=atob(a),o=new ArrayBuffer(s.length),c=new Uint8Array(o),d=0;d<s.length;d++)c[d]=s.charCodeAt(d);return new Blob([o],{type:e})}function b64UriToB64(a){var e=a.indexOf(",");return a.substr(e+1)}function output(a,e,s){var o=function(){return e.toDataURL(s,a.quality)};switch(a.output){case"blob-promise":return new Promise$1(function(c,d){try{e.toBlob(function(g){g!=null?c(g):d(new Error("`canvas.toBlob()` sent a null value in its callback"))},s,a.quality)}catch(g){d(g)}});case"blob":return b64ToBlob(b64UriToB64(o()),s);case"base64":return b64UriToB64(o());case"base64uri":default:return o()}}CRp$2.png=function(a){return output(a,this.bufferCanvasImage(a),"image/png")};CRp$2.jpg=function(a){return output(a,this.bufferCanvasImage(a),"image/jpeg")};var CRp$1={};CRp$1.nodeShapeImpl=function(a,e,s,o,c,d,g,b){switch(a){case"ellipse":return this.drawEllipsePath(e,s,o,c,d);case"polygon":return this.drawPolygonPath(e,s,o,c,d,g);case"round-polygon":return this.drawRoundPolygonPath(e,s,o,c,d,g,b);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,s,o,c,d,b);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,s,o,c,d,g,b);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,s,o,c,d,b);case"barrel":return this.drawBarrelPath(e,s,o,c,d)}};var CR=CanvasRenderer,CRp=CanvasRenderer.prototype;CRp.CANVAS_LAYERS=3;CRp.SELECT_BOX=0;CRp.DRAG=1;CRp.NODE=2;CRp.WEBGL=3;CRp.CANVAS_TYPES=["2d","2d","2d","webgl2"];CRp.BUFFER_COUNT=3;CRp.TEXTURE_BUFFER=0;CRp.MOTIONBLUR_BUFFER_NODE=1;CRp.MOTIONBLUR_BUFFER_DRAG=2;function CanvasRenderer(a){var e=this,s=e.cy.window(),o=s.document;a.webgl&&(CRp.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(CRp.CANVAS_LAYERS),contexts:new Array(CRp.CANVAS_LAYERS),canvasNeedsRedraw:new Array(CRp.CANVAS_LAYERS),bufferCanvases:new Array(CRp.BUFFER_COUNT),bufferContexts:new Array(CRp.CANVAS_LAYERS)};var c="-webkit-tap-highlight-color",d="rgba(0,0,0,0)";e.data.canvasContainer=o.createElement("div");var g=e.data.canvasContainer.style;e.data.canvasContainer.style[c]=d,g.position="relative",g.zIndex="0",g.overflow="hidden";var b=a.cy.container();b.appendChild(e.data.canvasContainer),b.style[c]=d;var j={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};ms()&&(j["-ms-touch-action"]="none",j["touch-action"]="none");for(var _e=0;_e<CRp.CANVAS_LAYERS;_e++){var er=e.data.canvases[_e]=o.createElement("canvas"),rr=CRp.CANVAS_TYPES[_e];e.data.contexts[_e]=er.getContext(rr),e.data.contexts[_e]||error("Could not create canvas of type "+rr),Object.keys(j).forEach(function(Nr){er.style[Nr]=j[Nr]}),er.style.position="absolute",er.setAttribute("data-id","layer"+_e),er.style.zIndex=String(CRp.CANVAS_LAYERS-_e),e.data.canvasContainer.appendChild(er),e.data.canvasNeedsRedraw[_e]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[CRp.NODE].setAttribute("data-id","layer"+CRp.NODE+"-node"),e.data.canvases[CRp.SELECT_BOX].setAttribute("data-id","layer"+CRp.SELECT_BOX+"-selectbox"),e.data.canvases[CRp.DRAG].setAttribute("data-id","layer"+CRp.DRAG+"-drag"),e.data.canvases[CRp.WEBGL]&&e.data.canvases[CRp.WEBGL].setAttribute("data-id","layer"+CRp.WEBGL+"-webgl");for(var _e=0;_e<CRp.BUFFER_COUNT;_e++)e.data.bufferCanvases[_e]=o.createElement("canvas"),e.data.bufferContexts[_e]=e.data.bufferCanvases[_e].getContext("2d"),e.data.bufferCanvases[_e].style.position="absolute",e.data.bufferCanvases[_e].setAttribute("data-id","buffer"+_e),e.data.bufferCanvases[_e].style.zIndex=String(-_e-1),e.data.bufferCanvases[_e].style.visibility="hidden";e.pathsEnabled=!0;var tr=makeBoundingBox(),nr=function(Ir){return{x:(Ir.x1+Ir.x2)/2,y:(Ir.y1+Ir.y2)/2}},ar=function(Ir){return{x:-Ir.w/2,y:-Ir.h/2}},lr=function(Ir){var Dr=Ir[0]._private,Or=Dr.oldBackgroundTimestamp===Dr.backgroundTimestamp;return!Or},or=function(Ir){return Ir[0]._private.nodeKey},ir=function(Ir){return Ir[0]._private.labelStyleKey},sr=function(Ir){return Ir[0]._private.sourceLabelStyleKey},ur=function(Ir){return Ir[0]._private.targetLabelStyleKey},cr=function(Ir,Dr,Or,jr,Wr){return e.drawElement(Ir,Dr,Or,!1,!1,Wr)},fr=function(Ir,Dr,Or,jr,Wr){return e.drawElementText(Ir,Dr,Or,jr,"main",Wr)},hr=function(Ir,Dr,Or,jr,Wr){return e.drawElementText(Ir,Dr,Or,jr,"source",Wr)},dr=function(Ir,Dr,Or,jr,Wr){return e.drawElementText(Ir,Dr,Or,jr,"target",Wr)},vr=function(Ir){return Ir.boundingBox(),Ir[0]._private.bodyBounds},gr=function(Ir){return Ir.boundingBox(),Ir[0]._private.labelBounds.main||tr},pr=function(Ir){return Ir.boundingBox(),Ir[0]._private.labelBounds.source||tr},mr=function(Ir){return Ir.boundingBox(),Ir[0]._private.labelBounds.target||tr},yr=function(Ir,Dr){return Dr},br=function(Ir){return nr(vr(Ir))},Er=function(Ir,Dr,Or){var jr=Ir?Ir+"-":"";return{x:Dr.x+Or.pstyle(jr+"text-margin-x").pfValue,y:Dr.y+Or.pstyle(jr+"text-margin-y").pfValue}},_r=function(Ir,Dr,Or){var jr=Ir[0]._private.rscratch;return{x:jr[Dr],y:jr[Or]}},Rr=function(Ir){return Er("",_r(Ir,"labelX","labelY"),Ir)},Cr=function(Ir){return Er("source",_r(Ir,"sourceLabelX","sourceLabelY"),Ir)},wr=function(Ir){return Er("target",_r(Ir,"targetLabelX","targetLabelY"),Ir)},$r=function(Ir){return ar(vr(Ir))},Ar=function(Ir){return ar(pr(Ir))},Sr=function(Ir){return ar(mr(Ir))},kr=function(Ir){var Dr=gr(Ir),Or=ar(gr(Ir));if(Ir.isNode()){switch(Ir.pstyle("text-halign").value){case"left":Or.x=-Dr.w-(Dr.leftPad||0);break;case"right":Or.x=-(Dr.rightPad||0);break}switch(Ir.pstyle("text-valign").value){case"top":Or.y=-Dr.h-(Dr.topPad||0);break;case"bottom":Or.y=-(Dr.botPad||0);break}}return Or},Mr=e.data.eleTxrCache=new ElementTextureCache(e,{getKey:or,doesEleInvalidateKey:lr,drawElement:cr,getBoundingBox:vr,getRotationPoint:br,getRotationOffset:$r,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),qr=e.data.lblTxrCache=new ElementTextureCache(e,{getKey:ir,drawElement:fr,getBoundingBox:gr,getRotationPoint:Rr,getRotationOffset:kr,isVisible:yr}),Tr=e.data.slbTxrCache=new ElementTextureCache(e,{getKey:sr,drawElement:hr,getBoundingBox:pr,getRotationPoint:Cr,getRotationOffset:Ar,isVisible:yr}),Pr=e.data.tlbTxrCache=new ElementTextureCache(e,{getKey:ur,drawElement:dr,getBoundingBox:mr,getRotationPoint:wr,getRotationOffset:Sr,isVisible:yr}),Br=e.data.lyrTxrCache=new LayeredTextureCache(e);e.onUpdateEleCalcs(function(Ir,Dr){Mr.invalidateElements(Dr),qr.invalidateElements(Dr),Tr.invalidateElements(Dr),Pr.invalidateElements(Dr),Br.invalidateElements(Dr);for(var Or=0;Or<Dr.length;Or++){var jr=Dr[Or]._private;jr.oldBackgroundTimestamp=jr.backgroundTimestamp}});var Ur=function(Ir){for(var Dr=0;Dr<Ir.length;Dr++)Br.enqueueElementRefinement(Ir[Dr].ele)};Mr.onDequeue(Ur),qr.onDequeue(Ur),Tr.onDequeue(Ur),Pr.onDequeue(Ur),a.webgl&&e.initWebgl(a,{getStyleKey:or,getLabelKey:ir,getSourceLabelKey:sr,getTargetLabelKey:ur,drawElement:cr,drawLabel:fr,drawSourceLabel:hr,drawTargetLabel:dr,getElementBox:vr,getLabelBox:gr,getSourceLabelBox:pr,getTargetLabelBox:mr,getElementRotationPoint:br,getElementRotationOffset:$r,getLabelRotationPoint:Rr,getSourceLabelRotationPoint:Cr,getTargetLabelRotationPoint:wr,getLabelRotationOffset:kr,getSourceLabelRotationOffset:Ar,getTargetLabelRotationOffset:Sr})}CRp.redrawHint=function(a,e){var s=this;switch(a){case"eles":s.data.canvasNeedsRedraw[CRp.NODE]=e;break;case"drag":s.data.canvasNeedsRedraw[CRp.DRAG]=e;break;case"select":s.data.canvasNeedsRedraw[CRp.SELECT_BOX]=e;break;case"gc":s.data.gc=!0;break}};var pathsImpld=typeof Path2D<"u";CRp.path2dEnabled=function(a){if(a===void 0)return this.pathsEnabled;this.pathsEnabled=!!a};CRp.usePaths=function(){return pathsImpld&&this.pathsEnabled};CRp.setImgSmoothing=function(a,e){a.imageSmoothingEnabled!=null?a.imageSmoothingEnabled=e:(a.webkitImageSmoothingEnabled=e,a.mozImageSmoothingEnabled=e,a.msImageSmoothingEnabled=e)};CRp.getImgSmoothing=function(a){return a.imageSmoothingEnabled!=null?a.imageSmoothingEnabled:a.webkitImageSmoothingEnabled||a.mozImageSmoothingEnabled||a.msImageSmoothingEnabled};CRp.makeOffscreenCanvas=function(a,e){var s;if((typeof OffscreenCanvas>"u"?"undefined":_typeof(OffscreenCanvas))!=="undefined")s=new OffscreenCanvas(a,e);else{var o=this.cy.window(),c=o.document;s=c.createElement("canvas"),s.width=a,s.height=e}return s};[CRp$b,CRp$a,CRp$9,CRp$8,CRp$7,CRp$6,CRp$5,CRp$4,CRp$3,CRp$2,CRp$1].forEach(function(a){extend(CRp,a)});var renderer=[{name:"null",impl:NullRenderer},{name:"base",impl:BR},{name:"canvas",impl:CR}],incExts=[{type:"layout",extensions:layout},{type:"renderer",extensions:renderer}],extensions={},modules={};function setExtension(a,e,s){var o=s,c=function(vr){warn("Can not register `"+e+"` for `"+a+"` since `"+vr+"` already exists in the prototype and can not be overridden")};if(a==="core"){if(Core.prototype[e])return c(e);Core.prototype[e]=s}else if(a==="collection"){if(Collection.prototype[e])return c(e);Collection.prototype[e]=s}else if(a==="layout"){for(var d=function(vr){this.options=vr,s.call(this,vr),plainObject(this._private)||(this._private={}),this._private.cy=vr.cy,this._private.listeners=[],this.createEmitter()},g=d.prototype=Object.create(s.prototype),b=[],j=0;j<b.length;j++){var _e=b[j];g[_e]=g[_e]||function(){return this}}g.start&&!g.run?g.run=function(){return this.start(),this}:!g.start&&g.run&&(g.start=function(){return this.run(),this});var er=s.prototype.stop;g.stop=function(){var dr=this.options;if(dr&&dr.animate){var vr=this.animations;if(vr)for(var gr=0;gr<vr.length;gr++)vr[gr].stop()}return er?er.call(this):this.emit("layoutstop"),this},g.destroy||(g.destroy=function(){return this}),g.cy=function(){return this._private.cy};var rr=function(vr){return vr._private.cy},tr={addEventFields:function(vr,gr){gr.layout=vr,gr.cy=rr(vr),gr.target=vr},bubble:function(){return!0},parent:function(vr){return rr(vr)}};extend(g,{createEmitter:function(){return this._private.emitter=new Emitter(tr,this),this},emitter:function(){return this._private.emitter},on:function(vr,gr){return this.emitter().on(vr,gr),this},one:function(vr,gr){return this.emitter().one(vr,gr),this},once:function(vr,gr){return this.emitter().one(vr,gr),this},removeListener:function(vr,gr){return this.emitter().removeListener(vr,gr),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(vr,gr){return this.emitter().emit(vr,gr),this}}),define.eventAliasesOn(g),o=d}else if(a==="renderer"&&e!=="null"&&e!=="base"){var nr=getExtension("renderer","base"),ar=nr.prototype,lr=s,or=s.prototype,ir=function(){nr.apply(this,arguments),lr.apply(this,arguments)},sr=ir.prototype;for(var ur in ar){var cr=ar[ur],fr=or[ur]!=null;if(fr)return c(ur);sr[ur]=cr}for(var hr in or)sr[hr]=or[hr];ar.clientFunctions.forEach(function(dr){sr[dr]=sr[dr]||function(){error("Renderer does not implement `renderer."+dr+"()` on its prototype")}}),o=ir}else if(a==="__proto__"||a==="constructor"||a==="prototype")return error(a+" is an illegal type to be registered, possibly lead to prototype pollutions");return setMap({map:extensions,keys:[a,e],value:o})}function getExtension(a,e){return getMap({map:extensions,keys:[a,e]})}function setModule(a,e,s,o,c){return setMap({map:modules,keys:[a,e,s,o],value:c})}function getModule(a,e,s,o){return getMap({map:modules,keys:[a,e,s,o]})}var extension=function(){if(arguments.length===2)return getExtension.apply(null,arguments);if(arguments.length===3)return setExtension.apply(null,arguments);if(arguments.length===4)return getModule.apply(null,arguments);if(arguments.length===5)return setModule.apply(null,arguments);error("Invalid extension access syntax")};Core.prototype.extension=extension;incExts.forEach(function(a){a.extensions.forEach(function(e){setExtension(a.type,e.name,e.impl)})});var _Stylesheet=function(){if(!(this instanceof _Stylesheet))return new _Stylesheet;this.length=0},sheetfn=_Stylesheet.prototype;sheetfn.instanceString=function(){return"stylesheet"};sheetfn.selector=function(a){var e=this.length++;return this[e]={selector:a,properties:[]},this};sheetfn.css=function(a,e){var s=this.length-1;if(string(a))this[s].properties.push({name:a,value:e});else if(plainObject(a))for(var o=a,c=Object.keys(o),d=0;d<c.length;d++){var g=c[d],b=o[g];if(b!=null){var j=_Style.properties[g]||_Style.properties[dash2camel(g)];if(j!=null){var _e=j.name,er=b;this[s].properties.push({name:_e,value:er})}}}return this};sheetfn.style=sheetfn.css;sheetfn.generateStyle=function(a){var e=new _Style(a);return this.appendToStyle(e)};sheetfn.appendToStyle=function(a){for(var e=0;e<this.length;e++){var s=this[e],o=s.selector,c=s.properties;a.selector(o);for(var d=0;d<c.length;d++){var g=c[d];a.css(g.name,g.value)}}return a};var version$2="3.33.1",cytoscape$1=function(e){if(e===void 0&&(e={}),plainObject(e))return new Core(e);if(string(e))return extension.apply(extension,arguments)};cytoscape$1.use=function(a){var e=Array.prototype.slice.call(arguments,1);return e.unshift(cytoscape$1),a.apply(null,e),this};cytoscape$1.warnings=function(a){return warnings(a)};cytoscape$1.version=version$2;cytoscape$1.stylesheet=cytoscape$1.Stylesheet=_Stylesheet;var cytoscapeDagre={exports:{}};function commonjsRequire(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var _listCacheClear,hasRequired_listCacheClear;function require_listCacheClear(){if(hasRequired_listCacheClear)return _listCacheClear;hasRequired_listCacheClear=1;function a(){this.__data__=[],this.size=0}return _listCacheClear=a,_listCacheClear}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;function a(e,s){return e===s||e!==e&&s!==s}return eq_1=a,eq_1}var _assocIndexOf,hasRequired_assocIndexOf;function require_assocIndexOf(){if(hasRequired_assocIndexOf)return _assocIndexOf;hasRequired_assocIndexOf=1;var a=requireEq();function e(s,o){for(var c=s.length;c--;)if(a(s[c][0],o))return c;return-1}return _assocIndexOf=e,_assocIndexOf}var _listCacheDelete,hasRequired_listCacheDelete;function require_listCacheDelete(){if(hasRequired_listCacheDelete)return _listCacheDelete;hasRequired_listCacheDelete=1;var a=require_assocIndexOf(),e=Array.prototype,s=e.splice;function o(c){var d=this.__data__,g=a(d,c);if(g<0)return!1;var b=d.length-1;return g==b?d.pop():s.call(d,g,1),--this.size,!0}return _listCacheDelete=o,_listCacheDelete}var _listCacheGet,hasRequired_listCacheGet;function require_listCacheGet(){if(hasRequired_listCacheGet)return _listCacheGet;hasRequired_listCacheGet=1;var a=require_assocIndexOf();function e(s){var o=this.__data__,c=a(o,s);return c<0?void 0:o[c][1]}return _listCacheGet=e,_listCacheGet}var _listCacheHas,hasRequired_listCacheHas;function require_listCacheHas(){if(hasRequired_listCacheHas)return _listCacheHas;hasRequired_listCacheHas=1;var a=require_assocIndexOf();function e(s){return a(this.__data__,s)>-1}return _listCacheHas=e,_listCacheHas}var _listCacheSet,hasRequired_listCacheSet;function require_listCacheSet(){if(hasRequired_listCacheSet)return _listCacheSet;hasRequired_listCacheSet=1;var a=require_assocIndexOf();function e(s,o){var c=this.__data__,d=a(c,s);return d<0?(++this.size,c.push([s,o])):c[d][1]=o,this}return _listCacheSet=e,_listCacheSet}var _ListCache,hasRequired_ListCache;function require_ListCache(){if(hasRequired_ListCache)return _ListCache;hasRequired_ListCache=1;var a=require_listCacheClear(),e=require_listCacheDelete(),s=require_listCacheGet(),o=require_listCacheHas(),c=require_listCacheSet();function d(g){var b=-1,j=g==null?0:g.length;for(this.clear();++b<j;){var _e=g[b];this.set(_e[0],_e[1])}}return d.prototype.clear=a,d.prototype.delete=e,d.prototype.get=s,d.prototype.has=o,d.prototype.set=c,_ListCache=d,_ListCache}var _stackClear,hasRequired_stackClear;function require_stackClear(){if(hasRequired_stackClear)return _stackClear;hasRequired_stackClear=1;var a=require_ListCache();function e(){this.__data__=new a,this.size=0}return _stackClear=e,_stackClear}var _stackDelete,hasRequired_stackDelete;function require_stackDelete(){if(hasRequired_stackDelete)return _stackDelete;hasRequired_stackDelete=1;function a(e){var s=this.__data__,o=s.delete(e);return this.size=s.size,o}return _stackDelete=a,_stackDelete}var _stackGet,hasRequired_stackGet;function require_stackGet(){if(hasRequired_stackGet)return _stackGet;hasRequired_stackGet=1;function a(e){return this.__data__.get(e)}return _stackGet=a,_stackGet}var _stackHas,hasRequired_stackHas;function require_stackHas(){if(hasRequired_stackHas)return _stackHas;hasRequired_stackHas=1;function a(e){return this.__data__.has(e)}return _stackHas=a,_stackHas}var _freeGlobal,hasRequired_freeGlobal;function require_freeGlobal(){if(hasRequired_freeGlobal)return _freeGlobal;hasRequired_freeGlobal=1;var a=typeof commonjsGlobal$1=="object"&&commonjsGlobal$1&&commonjsGlobal$1.Object===Object&&commonjsGlobal$1;return _freeGlobal=a,_freeGlobal}var _root,hasRequired_root;function require_root(){if(hasRequired_root)return _root;hasRequired_root=1;var a=require_freeGlobal(),e=typeof self=="object"&&self&&self.Object===Object&&self,s=a||e||Function("return this")();return _root=s,_root}var _Symbol,hasRequired_Symbol;function require_Symbol(){if(hasRequired_Symbol)return _Symbol;hasRequired_Symbol=1;var a=require_root(),e=a.Symbol;return _Symbol=e,_Symbol}var _getRawTag,hasRequired_getRawTag;function require_getRawTag(){if(hasRequired_getRawTag)return _getRawTag;hasRequired_getRawTag=1;var a=require_Symbol(),e=Object.prototype,s=e.hasOwnProperty,o=e.toString,c=a?a.toStringTag:void 0;function d(g){var b=s.call(g,c),j=g[c];try{g[c]=void 0;var _e=!0}catch{}var er=o.call(g);return _e&&(b?g[c]=j:delete g[c]),er}return _getRawTag=d,_getRawTag}var _objectToString,hasRequired_objectToString;function require_objectToString(){if(hasRequired_objectToString)return _objectToString;hasRequired_objectToString=1;var a=Object.prototype,e=a.toString;function s(o){return e.call(o)}return _objectToString=s,_objectToString}var _baseGetTag,hasRequired_baseGetTag;function require_baseGetTag(){if(hasRequired_baseGetTag)return _baseGetTag;hasRequired_baseGetTag=1;var a=require_Symbol(),e=require_getRawTag(),s=require_objectToString(),o="[object Null]",c="[object Undefined]",d=a?a.toStringTag:void 0;function g(b){return b==null?b===void 0?c:o:d&&d in Object(b)?e(b):s(b)}return _baseGetTag=g,_baseGetTag}var isObject_1,hasRequiredIsObject;function requireIsObject(){if(hasRequiredIsObject)return isObject_1;hasRequiredIsObject=1;function a(e){var s=typeof e;return e!=null&&(s=="object"||s=="function")}return isObject_1=a,isObject_1}var isFunction_1,hasRequiredIsFunction;function requireIsFunction(){if(hasRequiredIsFunction)return isFunction_1;hasRequiredIsFunction=1;var a=require_baseGetTag(),e=requireIsObject(),s="[object AsyncFunction]",o="[object Function]",c="[object GeneratorFunction]",d="[object Proxy]";function g(b){if(!e(b))return!1;var j=a(b);return j==o||j==c||j==s||j==d}return isFunction_1=g,isFunction_1}var _coreJsData,hasRequired_coreJsData;function require_coreJsData(){if(hasRequired_coreJsData)return _coreJsData;hasRequired_coreJsData=1;var a=require_root(),e=a["__core-js_shared__"];return _coreJsData=e,_coreJsData}var _isMasked,hasRequired_isMasked;function require_isMasked(){if(hasRequired_isMasked)return _isMasked;hasRequired_isMasked=1;var a=require_coreJsData(),e=function(){var o=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}();function s(o){return!!e&&e in o}return _isMasked=s,_isMasked}var _toSource,hasRequired_toSource;function require_toSource(){if(hasRequired_toSource)return _toSource;hasRequired_toSource=1;var a=Function.prototype,e=a.toString;function s(o){if(o!=null){try{return e.call(o)}catch{}try{return o+""}catch{}}return""}return _toSource=s,_toSource}var _baseIsNative,hasRequired_baseIsNative;function require_baseIsNative(){if(hasRequired_baseIsNative)return _baseIsNative;hasRequired_baseIsNative=1;var a=requireIsFunction(),e=require_isMasked(),s=requireIsObject(),o=require_toSource(),c=/[\\^$.*+?()[\]{}|]/g,d=/^\[object .+?Constructor\]$/,g=Function.prototype,b=Object.prototype,j=g.toString,_e=b.hasOwnProperty,er=RegExp("^"+j.call(_e).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function rr(tr){if(!s(tr)||e(tr))return!1;var nr=a(tr)?er:d;return nr.test(o(tr))}return _baseIsNative=rr,_baseIsNative}var _getValue,hasRequired_getValue;function require_getValue(){if(hasRequired_getValue)return _getValue;hasRequired_getValue=1;function a(e,s){return e==null?void 0:e[s]}return _getValue=a,_getValue}var _getNative,hasRequired_getNative;function require_getNative(){if(hasRequired_getNative)return _getNative;hasRequired_getNative=1;var a=require_baseIsNative(),e=require_getValue();function s(o,c){var d=e(o,c);return a(d)?d:void 0}return _getNative=s,_getNative}var _Map,hasRequired_Map;function require_Map(){if(hasRequired_Map)return _Map;hasRequired_Map=1;var a=require_getNative(),e=require_root(),s=a(e,"Map");return _Map=s,_Map}var _nativeCreate,hasRequired_nativeCreate;function require_nativeCreate(){if(hasRequired_nativeCreate)return _nativeCreate;hasRequired_nativeCreate=1;var a=require_getNative(),e=a(Object,"create");return _nativeCreate=e,_nativeCreate}var _hashClear,hasRequired_hashClear;function require_hashClear(){if(hasRequired_hashClear)return _hashClear;hasRequired_hashClear=1;var a=require_nativeCreate();function e(){this.__data__=a?a(null):{},this.size=0}return _hashClear=e,_hashClear}var _hashDelete,hasRequired_hashDelete;function require_hashDelete(){if(hasRequired_hashDelete)return _hashDelete;hasRequired_hashDelete=1;function a(e){var s=this.has(e)&&delete this.__data__[e];return this.size-=s?1:0,s}return _hashDelete=a,_hashDelete}var _hashGet,hasRequired_hashGet;function require_hashGet(){if(hasRequired_hashGet)return _hashGet;hasRequired_hashGet=1;var a=require_nativeCreate(),e="__lodash_hash_undefined__",s=Object.prototype,o=s.hasOwnProperty;function c(d){var g=this.__data__;if(a){var b=g[d];return b===e?void 0:b}return o.call(g,d)?g[d]:void 0}return _hashGet=c,_hashGet}var _hashHas,hasRequired_hashHas;function require_hashHas(){if(hasRequired_hashHas)return _hashHas;hasRequired_hashHas=1;var a=require_nativeCreate(),e=Object.prototype,s=e.hasOwnProperty;function o(c){var d=this.__data__;return a?d[c]!==void 0:s.call(d,c)}return _hashHas=o,_hashHas}var _hashSet,hasRequired_hashSet;function require_hashSet(){if(hasRequired_hashSet)return _hashSet;hasRequired_hashSet=1;var a=require_nativeCreate(),e="__lodash_hash_undefined__";function s(o,c){var d=this.__data__;return this.size+=this.has(o)?0:1,d[o]=a&&c===void 0?e:c,this}return _hashSet=s,_hashSet}var _Hash,hasRequired_Hash;function require_Hash(){if(hasRequired_Hash)return _Hash;hasRequired_Hash=1;var a=require_hashClear(),e=require_hashDelete(),s=require_hashGet(),o=require_hashHas(),c=require_hashSet();function d(g){var b=-1,j=g==null?0:g.length;for(this.clear();++b<j;){var _e=g[b];this.set(_e[0],_e[1])}}return d.prototype.clear=a,d.prototype.delete=e,d.prototype.get=s,d.prototype.has=o,d.prototype.set=c,_Hash=d,_Hash}var _mapCacheClear,hasRequired_mapCacheClear;function require_mapCacheClear(){if(hasRequired_mapCacheClear)return _mapCacheClear;hasRequired_mapCacheClear=1;var a=require_Hash(),e=require_ListCache(),s=require_Map();function o(){this.size=0,this.__data__={hash:new a,map:new(s||e),string:new a}}return _mapCacheClear=o,_mapCacheClear}var _isKeyable,hasRequired_isKeyable;function require_isKeyable(){if(hasRequired_isKeyable)return _isKeyable;hasRequired_isKeyable=1;function a(e){var s=typeof e;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?e!=="__proto__":e===null}return _isKeyable=a,_isKeyable}var _getMapData,hasRequired_getMapData;function require_getMapData(){if(hasRequired_getMapData)return _getMapData;hasRequired_getMapData=1;var a=require_isKeyable();function e(s,o){var c=s.__data__;return a(o)?c[typeof o=="string"?"string":"hash"]:c.map}return _getMapData=e,_getMapData}var _mapCacheDelete,hasRequired_mapCacheDelete;function require_mapCacheDelete(){if(hasRequired_mapCacheDelete)return _mapCacheDelete;hasRequired_mapCacheDelete=1;var a=require_getMapData();function e(s){var o=a(this,s).delete(s);return this.size-=o?1:0,o}return _mapCacheDelete=e,_mapCacheDelete}var _mapCacheGet,hasRequired_mapCacheGet;function require_mapCacheGet(){if(hasRequired_mapCacheGet)return _mapCacheGet;hasRequired_mapCacheGet=1;var a=require_getMapData();function e(s){return a(this,s).get(s)}return _mapCacheGet=e,_mapCacheGet}var _mapCacheHas,hasRequired_mapCacheHas;function require_mapCacheHas(){if(hasRequired_mapCacheHas)return _mapCacheHas;hasRequired_mapCacheHas=1;var a=require_getMapData();function e(s){return a(this,s).has(s)}return _mapCacheHas=e,_mapCacheHas}var _mapCacheSet,hasRequired_mapCacheSet;function require_mapCacheSet(){if(hasRequired_mapCacheSet)return _mapCacheSet;hasRequired_mapCacheSet=1;var a=require_getMapData();function e(s,o){var c=a(this,s),d=c.size;return c.set(s,o),this.size+=c.size==d?0:1,this}return _mapCacheSet=e,_mapCacheSet}var _MapCache,hasRequired_MapCache;function require_MapCache(){if(hasRequired_MapCache)return _MapCache;hasRequired_MapCache=1;var a=require_mapCacheClear(),e=require_mapCacheDelete(),s=require_mapCacheGet(),o=require_mapCacheHas(),c=require_mapCacheSet();function d(g){var b=-1,j=g==null?0:g.length;for(this.clear();++b<j;){var _e=g[b];this.set(_e[0],_e[1])}}return d.prototype.clear=a,d.prototype.delete=e,d.prototype.get=s,d.prototype.has=o,d.prototype.set=c,_MapCache=d,_MapCache}var _stackSet,hasRequired_stackSet;function require_stackSet(){if(hasRequired_stackSet)return _stackSet;hasRequired_stackSet=1;var a=require_ListCache(),e=require_Map(),s=require_MapCache(),o=200;function c(d,g){var b=this.__data__;if(b instanceof a){var j=b.__data__;if(!e||j.length<o-1)return j.push([d,g]),this.size=++b.size,this;b=this.__data__=new s(j)}return b.set(d,g),this.size=b.size,this}return _stackSet=c,_stackSet}var _Stack,hasRequired_Stack;function require_Stack(){if(hasRequired_Stack)return _Stack;hasRequired_Stack=1;var a=require_ListCache(),e=require_stackClear(),s=require_stackDelete(),o=require_stackGet(),c=require_stackHas(),d=require_stackSet();function g(b){var j=this.__data__=new a(b);this.size=j.size}return g.prototype.clear=e,g.prototype.delete=s,g.prototype.get=o,g.prototype.has=c,g.prototype.set=d,_Stack=g,_Stack}var _arrayEach,hasRequired_arrayEach;function require_arrayEach(){if(hasRequired_arrayEach)return _arrayEach;hasRequired_arrayEach=1;function a(e,s){for(var o=-1,c=e==null?0:e.length;++o<c&&s(e[o],o,e)!==!1;);return e}return _arrayEach=a,_arrayEach}var _defineProperty$2,hasRequired_defineProperty;function require_defineProperty(){if(hasRequired_defineProperty)return _defineProperty$2;hasRequired_defineProperty=1;var a=require_getNative(),e=function(){try{var s=a(Object,"defineProperty");return s({},"",{}),s}catch{}}();return _defineProperty$2=e,_defineProperty$2}var _baseAssignValue,hasRequired_baseAssignValue;function require_baseAssignValue(){if(hasRequired_baseAssignValue)return _baseAssignValue;hasRequired_baseAssignValue=1;var a=require_defineProperty();function e(s,o,c){o=="__proto__"&&a?a(s,o,{configurable:!0,enumerable:!0,value:c,writable:!0}):s[o]=c}return _baseAssignValue=e,_baseAssignValue}var _assignValue,hasRequired_assignValue;function require_assignValue(){if(hasRequired_assignValue)return _assignValue;hasRequired_assignValue=1;var a=require_baseAssignValue(),e=requireEq(),s=Object.prototype,o=s.hasOwnProperty;function c(d,g,b){var j=d[g];(!(o.call(d,g)&&e(j,b))||b===void 0&&!(g in d))&&a(d,g,b)}return _assignValue=c,_assignValue}var _copyObject,hasRequired_copyObject;function require_copyObject(){if(hasRequired_copyObject)return _copyObject;hasRequired_copyObject=1;var a=require_assignValue(),e=require_baseAssignValue();function s(o,c,d,g){var b=!d;d||(d={});for(var j=-1,_e=c.length;++j<_e;){var er=c[j],rr=g?g(d[er],o[er],er,d,o):void 0;rr===void 0&&(rr=o[er]),b?e(d,er,rr):a(d,er,rr)}return d}return _copyObject=s,_copyObject}var _baseTimes,hasRequired_baseTimes;function require_baseTimes(){if(hasRequired_baseTimes)return _baseTimes;hasRequired_baseTimes=1;function a(e,s){for(var o=-1,c=Array(e);++o<e;)c[o]=s(o);return c}return _baseTimes=a,_baseTimes}var isObjectLike_1,hasRequiredIsObjectLike;function requireIsObjectLike(){if(hasRequiredIsObjectLike)return isObjectLike_1;hasRequiredIsObjectLike=1;function a(e){return e!=null&&typeof e=="object"}return isObjectLike_1=a,isObjectLike_1}var _baseIsArguments,hasRequired_baseIsArguments;function require_baseIsArguments(){if(hasRequired_baseIsArguments)return _baseIsArguments;hasRequired_baseIsArguments=1;var a=require_baseGetTag(),e=requireIsObjectLike(),s="[object Arguments]";function o(c){return e(c)&&a(c)==s}return _baseIsArguments=o,_baseIsArguments}var isArguments_1,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments_1;hasRequiredIsArguments=1;var a=require_baseIsArguments(),e=requireIsObjectLike(),s=Object.prototype,o=s.hasOwnProperty,c=s.propertyIsEnumerable,d=a(function(){return arguments}())?a:function(g){return e(g)&&o.call(g,"callee")&&!c.call(g,"callee")};return isArguments_1=d,isArguments_1}var isArray_1,hasRequiredIsArray;function requireIsArray(){if(hasRequiredIsArray)return isArray_1;hasRequiredIsArray=1;var a=Array.isArray;return isArray_1=a,isArray_1}var isBuffer={exports:{}},stubFalse_1,hasRequiredStubFalse;function requireStubFalse(){if(hasRequiredStubFalse)return stubFalse_1;hasRequiredStubFalse=1;function a(){return!1}return stubFalse_1=a,stubFalse_1}isBuffer.exports;var hasRequiredIsBuffer;function requireIsBuffer(){return hasRequiredIsBuffer||(hasRequiredIsBuffer=1,function(a,e){var s=require_root(),o=requireStubFalse(),c=e&&!e.nodeType&&e,d=c&&!0&&a&&!a.nodeType&&a,g=d&&d.exports===c,b=g?s.Buffer:void 0,j=b?b.isBuffer:void 0,_e=j||o;a.exports=_e}(isBuffer,isBuffer.exports)),isBuffer.exports}var _isIndex,hasRequired_isIndex;function require_isIndex(){if(hasRequired_isIndex)return _isIndex;hasRequired_isIndex=1;var a=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function s(o,c){var d=typeof o;return c=c??a,!!c&&(d=="number"||d!="symbol"&&e.test(o))&&o>-1&&o%1==0&&o<c}return _isIndex=s,_isIndex}var isLength_1,hasRequiredIsLength;function requireIsLength(){if(hasRequiredIsLength)return isLength_1;hasRequiredIsLength=1;var a=9007199254740991;function e(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=a}return isLength_1=e,isLength_1}var _baseIsTypedArray,hasRequired_baseIsTypedArray;function require_baseIsTypedArray(){if(hasRequired_baseIsTypedArray)return _baseIsTypedArray;hasRequired_baseIsTypedArray=1;var a=require_baseGetTag(),e=requireIsLength(),s=requireIsObjectLike(),o="[object Arguments]",c="[object Array]",d="[object Boolean]",g="[object Date]",b="[object Error]",j="[object Function]",_e="[object Map]",er="[object Number]",rr="[object Object]",tr="[object RegExp]",nr="[object Set]",ar="[object String]",lr="[object WeakMap]",or="[object ArrayBuffer]",ir="[object DataView]",sr="[object Float32Array]",ur="[object Float64Array]",cr="[object Int8Array]",fr="[object Int16Array]",hr="[object Int32Array]",dr="[object Uint8Array]",vr="[object Uint8ClampedArray]",gr="[object Uint16Array]",pr="[object Uint32Array]",mr={};mr[sr]=mr[ur]=mr[cr]=mr[fr]=mr[hr]=mr[dr]=mr[vr]=mr[gr]=mr[pr]=!0,mr[o]=mr[c]=mr[or]=mr[d]=mr[ir]=mr[g]=mr[b]=mr[j]=mr[_e]=mr[er]=mr[rr]=mr[tr]=mr[nr]=mr[ar]=mr[lr]=!1;function yr(br){return s(br)&&e(br.length)&&!!mr[a(br)]}return _baseIsTypedArray=yr,_baseIsTypedArray}var _baseUnary,hasRequired_baseUnary;function require_baseUnary(){if(hasRequired_baseUnary)return _baseUnary;hasRequired_baseUnary=1;function a(e){return function(s){return e(s)}}return _baseUnary=a,_baseUnary}var _nodeUtil={exports:{}};_nodeUtil.exports;var hasRequired_nodeUtil;function require_nodeUtil(){return hasRequired_nodeUtil||(hasRequired_nodeUtil=1,function(a,e){var s=require_freeGlobal(),o=e&&!e.nodeType&&e,c=o&&!0&&a&&!a.nodeType&&a,d=c&&c.exports===o,g=d&&s.process,b=function(){try{var j=c&&c.require&&c.require("util").types;return j||g&&g.binding&&g.binding("util")}catch{}}();a.exports=b}(_nodeUtil,_nodeUtil.exports)),_nodeUtil.exports}var isTypedArray_1,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray_1;hasRequiredIsTypedArray=1;var a=require_baseIsTypedArray(),e=require_baseUnary(),s=require_nodeUtil(),o=s&&s.isTypedArray,c=o?e(o):a;return isTypedArray_1=c,isTypedArray_1}var _arrayLikeKeys,hasRequired_arrayLikeKeys;function require_arrayLikeKeys(){if(hasRequired_arrayLikeKeys)return _arrayLikeKeys;hasRequired_arrayLikeKeys=1;var a=require_baseTimes(),e=requireIsArguments(),s=requireIsArray(),o=requireIsBuffer(),c=require_isIndex(),d=requireIsTypedArray(),g=Object.prototype,b=g.hasOwnProperty;function j(_e,er){var rr=s(_e),tr=!rr&&e(_e),nr=!rr&&!tr&&o(_e),ar=!rr&&!tr&&!nr&&d(_e),lr=rr||tr||nr||ar,or=lr?a(_e.length,String):[],ir=or.length;for(var sr in _e)(er||b.call(_e,sr))&&!(lr&&(sr=="length"||nr&&(sr=="offset"||sr=="parent")||ar&&(sr=="buffer"||sr=="byteLength"||sr=="byteOffset")||c(sr,ir)))&&or.push(sr);return or}return _arrayLikeKeys=j,_arrayLikeKeys}var _isPrototype,hasRequired_isPrototype;function require_isPrototype(){if(hasRequired_isPrototype)return _isPrototype;hasRequired_isPrototype=1;var a=Object.prototype;function e(s){var o=s&&s.constructor,c=typeof o=="function"&&o.prototype||a;return s===c}return _isPrototype=e,_isPrototype}var _overArg,hasRequired_overArg;function require_overArg(){if(hasRequired_overArg)return _overArg;hasRequired_overArg=1;function a(e,s){return function(o){return e(s(o))}}return _overArg=a,_overArg}var _nativeKeys,hasRequired_nativeKeys;function require_nativeKeys(){if(hasRequired_nativeKeys)return _nativeKeys;hasRequired_nativeKeys=1;var a=require_overArg(),e=a(Object.keys,Object);return _nativeKeys=e,_nativeKeys}var _baseKeys,hasRequired_baseKeys;function require_baseKeys(){if(hasRequired_baseKeys)return _baseKeys;hasRequired_baseKeys=1;var a=require_isPrototype(),e=require_nativeKeys(),s=Object.prototype,o=s.hasOwnProperty;function c(d){if(!a(d))return e(d);var g=[];for(var b in Object(d))o.call(d,b)&&b!="constructor"&&g.push(b);return g}return _baseKeys=c,_baseKeys}var isArrayLike_1,hasRequiredIsArrayLike;function requireIsArrayLike(){if(hasRequiredIsArrayLike)return isArrayLike_1;hasRequiredIsArrayLike=1;var a=requireIsFunction(),e=requireIsLength();function s(o){return o!=null&&e(o.length)&&!a(o)}return isArrayLike_1=s,isArrayLike_1}var keys_1,hasRequiredKeys;function requireKeys(){if(hasRequiredKeys)return keys_1;hasRequiredKeys=1;var a=require_arrayLikeKeys(),e=require_baseKeys(),s=requireIsArrayLike();function o(c){return s(c)?a(c):e(c)}return keys_1=o,keys_1}var _baseAssign,hasRequired_baseAssign;function require_baseAssign(){if(hasRequired_baseAssign)return _baseAssign;hasRequired_baseAssign=1;var a=require_copyObject(),e=requireKeys();function s(o,c){return o&&a(c,e(c),o)}return _baseAssign=s,_baseAssign}var _nativeKeysIn,hasRequired_nativeKeysIn;function require_nativeKeysIn(){if(hasRequired_nativeKeysIn)return _nativeKeysIn;hasRequired_nativeKeysIn=1;function a(e){var s=[];if(e!=null)for(var o in Object(e))s.push(o);return s}return _nativeKeysIn=a,_nativeKeysIn}var _baseKeysIn,hasRequired_baseKeysIn;function require_baseKeysIn(){if(hasRequired_baseKeysIn)return _baseKeysIn;hasRequired_baseKeysIn=1;var a=requireIsObject(),e=require_isPrototype(),s=require_nativeKeysIn(),o=Object.prototype,c=o.hasOwnProperty;function d(g){if(!a(g))return s(g);var b=e(g),j=[];for(var _e in g)_e=="constructor"&&(b||!c.call(g,_e))||j.push(_e);return j}return _baseKeysIn=d,_baseKeysIn}var keysIn_1,hasRequiredKeysIn;function requireKeysIn(){if(hasRequiredKeysIn)return keysIn_1;hasRequiredKeysIn=1;var a=require_arrayLikeKeys(),e=require_baseKeysIn(),s=requireIsArrayLike();function o(c){return s(c)?a(c,!0):e(c)}return keysIn_1=o,keysIn_1}var _baseAssignIn,hasRequired_baseAssignIn;function require_baseAssignIn(){if(hasRequired_baseAssignIn)return _baseAssignIn;hasRequired_baseAssignIn=1;var a=require_copyObject(),e=requireKeysIn();function s(o,c){return o&&a(c,e(c),o)}return _baseAssignIn=s,_baseAssignIn}var _cloneBuffer={exports:{}};_cloneBuffer.exports;var hasRequired_cloneBuffer;function require_cloneBuffer(){return hasRequired_cloneBuffer||(hasRequired_cloneBuffer=1,function(a,e){var s=require_root(),o=e&&!e.nodeType&&e,c=o&&!0&&a&&!a.nodeType&&a,d=c&&c.exports===o,g=d?s.Buffer:void 0,b=g?g.allocUnsafe:void 0;function j(_e,er){if(er)return _e.slice();var rr=_e.length,tr=b?b(rr):new _e.constructor(rr);return _e.copy(tr),tr}a.exports=j}(_cloneBuffer,_cloneBuffer.exports)),_cloneBuffer.exports}var _copyArray,hasRequired_copyArray;function require_copyArray(){if(hasRequired_copyArray)return _copyArray;hasRequired_copyArray=1;function a(e,s){var o=-1,c=e.length;for(s||(s=Array(c));++o<c;)s[o]=e[o];return s}return _copyArray=a,_copyArray}var _arrayFilter,hasRequired_arrayFilter;function require_arrayFilter(){if(hasRequired_arrayFilter)return _arrayFilter;hasRequired_arrayFilter=1;function a(e,s){for(var o=-1,c=e==null?0:e.length,d=0,g=[];++o<c;){var b=e[o];s(b,o,e)&&(g[d++]=b)}return g}return _arrayFilter=a,_arrayFilter}var stubArray_1,hasRequiredStubArray;function requireStubArray(){if(hasRequiredStubArray)return stubArray_1;hasRequiredStubArray=1;function a(){return[]}return stubArray_1=a,stubArray_1}var _getSymbols,hasRequired_getSymbols;function require_getSymbols(){if(hasRequired_getSymbols)return _getSymbols;hasRequired_getSymbols=1;var a=require_arrayFilter(),e=requireStubArray(),s=Object.prototype,o=s.propertyIsEnumerable,c=Object.getOwnPropertySymbols,d=c?function(g){return g==null?[]:(g=Object(g),a(c(g),function(b){return o.call(g,b)}))}:e;return _getSymbols=d,_getSymbols}var _copySymbols,hasRequired_copySymbols;function require_copySymbols(){if(hasRequired_copySymbols)return _copySymbols;hasRequired_copySymbols=1;var a=require_copyObject(),e=require_getSymbols();function s(o,c){return a(o,e(o),c)}return _copySymbols=s,_copySymbols}var _arrayPush,hasRequired_arrayPush;function require_arrayPush(){if(hasRequired_arrayPush)return _arrayPush;hasRequired_arrayPush=1;function a(e,s){for(var o=-1,c=s.length,d=e.length;++o<c;)e[d+o]=s[o];return e}return _arrayPush=a,_arrayPush}var _getPrototype,hasRequired_getPrototype;function require_getPrototype(){if(hasRequired_getPrototype)return _getPrototype;hasRequired_getPrototype=1;var a=require_overArg(),e=a(Object.getPrototypeOf,Object);return _getPrototype=e,_getPrototype}var _getSymbolsIn,hasRequired_getSymbolsIn;function require_getSymbolsIn(){if(hasRequired_getSymbolsIn)return _getSymbolsIn;hasRequired_getSymbolsIn=1;var a=require_arrayPush(),e=require_getPrototype(),s=require_getSymbols(),o=requireStubArray(),c=Object.getOwnPropertySymbols,d=c?function(g){for(var b=[];g;)a(b,s(g)),g=e(g);return b}:o;return _getSymbolsIn=d,_getSymbolsIn}var _copySymbolsIn,hasRequired_copySymbolsIn;function require_copySymbolsIn(){if(hasRequired_copySymbolsIn)return _copySymbolsIn;hasRequired_copySymbolsIn=1;var a=require_copyObject(),e=require_getSymbolsIn();function s(o,c){return a(o,e(o),c)}return _copySymbolsIn=s,_copySymbolsIn}var _baseGetAllKeys,hasRequired_baseGetAllKeys;function require_baseGetAllKeys(){if(hasRequired_baseGetAllKeys)return _baseGetAllKeys;hasRequired_baseGetAllKeys=1;var a=require_arrayPush(),e=requireIsArray();function s(o,c,d){var g=c(o);return e(o)?g:a(g,d(o))}return _baseGetAllKeys=s,_baseGetAllKeys}var _getAllKeys,hasRequired_getAllKeys;function require_getAllKeys(){if(hasRequired_getAllKeys)return _getAllKeys;hasRequired_getAllKeys=1;var a=require_baseGetAllKeys(),e=require_getSymbols(),s=requireKeys();function o(c){return a(c,s,e)}return _getAllKeys=o,_getAllKeys}var _getAllKeysIn,hasRequired_getAllKeysIn;function require_getAllKeysIn(){if(hasRequired_getAllKeysIn)return _getAllKeysIn;hasRequired_getAllKeysIn=1;var a=require_baseGetAllKeys(),e=require_getSymbolsIn(),s=requireKeysIn();function o(c){return a(c,s,e)}return _getAllKeysIn=o,_getAllKeysIn}var _DataView,hasRequired_DataView;function require_DataView(){if(hasRequired_DataView)return _DataView;hasRequired_DataView=1;var a=require_getNative(),e=require_root(),s=a(e,"DataView");return _DataView=s,_DataView}var _Promise,hasRequired_Promise;function require_Promise(){if(hasRequired_Promise)return _Promise;hasRequired_Promise=1;var a=require_getNative(),e=require_root(),s=a(e,"Promise");return _Promise=s,_Promise}var _Set,hasRequired_Set;function require_Set(){if(hasRequired_Set)return _Set;hasRequired_Set=1;var a=require_getNative(),e=require_root(),s=a(e,"Set");return _Set=s,_Set}var _WeakMap,hasRequired_WeakMap;function require_WeakMap(){if(hasRequired_WeakMap)return _WeakMap;hasRequired_WeakMap=1;var a=require_getNative(),e=require_root(),s=a(e,"WeakMap");return _WeakMap=s,_WeakMap}var _getTag,hasRequired_getTag;function require_getTag(){if(hasRequired_getTag)return _getTag;hasRequired_getTag=1;var a=require_DataView(),e=require_Map(),s=require_Promise(),o=require_Set(),c=require_WeakMap(),d=require_baseGetTag(),g=require_toSource(),b="[object Map]",j="[object Object]",_e="[object Promise]",er="[object Set]",rr="[object WeakMap]",tr="[object DataView]",nr=g(a),ar=g(e),lr=g(s),or=g(o),ir=g(c),sr=d;return(a&&sr(new a(new ArrayBuffer(1)))!=tr||e&&sr(new e)!=b||s&&sr(s.resolve())!=_e||o&&sr(new o)!=er||c&&sr(new c)!=rr)&&(sr=function(ur){var cr=d(ur),fr=cr==j?ur.constructor:void 0,hr=fr?g(fr):"";if(hr)switch(hr){case nr:return tr;case ar:return b;case lr:return _e;case or:return er;case ir:return rr}return cr}),_getTag=sr,_getTag}var _initCloneArray,hasRequired_initCloneArray;function require_initCloneArray(){if(hasRequired_initCloneArray)return _initCloneArray;hasRequired_initCloneArray=1;var a=Object.prototype,e=a.hasOwnProperty;function s(o){var c=o.length,d=new o.constructor(c);return c&&typeof o[0]=="string"&&e.call(o,"index")&&(d.index=o.index,d.input=o.input),d}return _initCloneArray=s,_initCloneArray}var _Uint8Array,hasRequired_Uint8Array;function require_Uint8Array(){if(hasRequired_Uint8Array)return _Uint8Array;hasRequired_Uint8Array=1;var a=require_root(),e=a.Uint8Array;return _Uint8Array=e,_Uint8Array}var _cloneArrayBuffer,hasRequired_cloneArrayBuffer;function require_cloneArrayBuffer(){if(hasRequired_cloneArrayBuffer)return _cloneArrayBuffer;hasRequired_cloneArrayBuffer=1;var a=require_Uint8Array();function e(s){var o=new s.constructor(s.byteLength);return new a(o).set(new a(s)),o}return _cloneArrayBuffer=e,_cloneArrayBuffer}var _cloneDataView,hasRequired_cloneDataView;function require_cloneDataView(){if(hasRequired_cloneDataView)return _cloneDataView;hasRequired_cloneDataView=1;var a=require_cloneArrayBuffer();function e(s,o){var c=o?a(s.buffer):s.buffer;return new s.constructor(c,s.byteOffset,s.byteLength)}return _cloneDataView=e,_cloneDataView}var _cloneRegExp,hasRequired_cloneRegExp;function require_cloneRegExp(){if(hasRequired_cloneRegExp)return _cloneRegExp;hasRequired_cloneRegExp=1;var a=/\w*$/;function e(s){var o=new s.constructor(s.source,a.exec(s));return o.lastIndex=s.lastIndex,o}return _cloneRegExp=e,_cloneRegExp}var _cloneSymbol,hasRequired_cloneSymbol;function require_cloneSymbol(){if(hasRequired_cloneSymbol)return _cloneSymbol;hasRequired_cloneSymbol=1;var a=require_Symbol(),e=a?a.prototype:void 0,s=e?e.valueOf:void 0;function o(c){return s?Object(s.call(c)):{}}return _cloneSymbol=o,_cloneSymbol}var _cloneTypedArray,hasRequired_cloneTypedArray;function require_cloneTypedArray(){if(hasRequired_cloneTypedArray)return _cloneTypedArray;hasRequired_cloneTypedArray=1;var a=require_cloneArrayBuffer();function e(s,o){var c=o?a(s.buffer):s.buffer;return new s.constructor(c,s.byteOffset,s.length)}return _cloneTypedArray=e,_cloneTypedArray}var _initCloneByTag,hasRequired_initCloneByTag;function require_initCloneByTag(){if(hasRequired_initCloneByTag)return _initCloneByTag;hasRequired_initCloneByTag=1;var a=require_cloneArrayBuffer(),e=require_cloneDataView(),s=require_cloneRegExp(),o=require_cloneSymbol(),c=require_cloneTypedArray(),d="[object Boolean]",g="[object Date]",b="[object Map]",j="[object Number]",_e="[object RegExp]",er="[object Set]",rr="[object String]",tr="[object Symbol]",nr="[object ArrayBuffer]",ar="[object DataView]",lr="[object Float32Array]",or="[object Float64Array]",ir="[object Int8Array]",sr="[object Int16Array]",ur="[object Int32Array]",cr="[object Uint8Array]",fr="[object Uint8ClampedArray]",hr="[object Uint16Array]",dr="[object Uint32Array]";function vr(gr,pr,mr){var yr=gr.constructor;switch(pr){case nr:return a(gr);case d:case g:return new yr(+gr);case ar:return e(gr,mr);case lr:case or:case ir:case sr:case ur:case cr:case fr:case hr:case dr:return c(gr,mr);case b:return new yr;case j:case rr:return new yr(gr);case _e:return s(gr);case er:return new yr;case tr:return o(gr)}}return _initCloneByTag=vr,_initCloneByTag}var _baseCreate,hasRequired_baseCreate;function require_baseCreate(){if(hasRequired_baseCreate)return _baseCreate;hasRequired_baseCreate=1;var a=requireIsObject(),e=Object.create,s=function(){function o(){}return function(c){if(!a(c))return{};if(e)return e(c);o.prototype=c;var d=new o;return o.prototype=void 0,d}}();return _baseCreate=s,_baseCreate}var _initCloneObject,hasRequired_initCloneObject;function require_initCloneObject(){if(hasRequired_initCloneObject)return _initCloneObject;hasRequired_initCloneObject=1;var a=require_baseCreate(),e=require_getPrototype(),s=require_isPrototype();function o(c){return typeof c.constructor=="function"&&!s(c)?a(e(c)):{}}return _initCloneObject=o,_initCloneObject}var _baseIsMap,hasRequired_baseIsMap;function require_baseIsMap(){if(hasRequired_baseIsMap)return _baseIsMap;hasRequired_baseIsMap=1;var a=require_getTag(),e=requireIsObjectLike(),s="[object Map]";function o(c){return e(c)&&a(c)==s}return _baseIsMap=o,_baseIsMap}var isMap_1,hasRequiredIsMap;function requireIsMap(){if(hasRequiredIsMap)return isMap_1;hasRequiredIsMap=1;var a=require_baseIsMap(),e=require_baseUnary(),s=require_nodeUtil(),o=s&&s.isMap,c=o?e(o):a;return isMap_1=c,isMap_1}var _baseIsSet,hasRequired_baseIsSet;function require_baseIsSet(){if(hasRequired_baseIsSet)return _baseIsSet;hasRequired_baseIsSet=1;var a=require_getTag(),e=requireIsObjectLike(),s="[object Set]";function o(c){return e(c)&&a(c)==s}return _baseIsSet=o,_baseIsSet}var isSet_1,hasRequiredIsSet;function requireIsSet(){if(hasRequiredIsSet)return isSet_1;hasRequiredIsSet=1;var a=require_baseIsSet(),e=require_baseUnary(),s=require_nodeUtil(),o=s&&s.isSet,c=o?e(o):a;return isSet_1=c,isSet_1}var _baseClone,hasRequired_baseClone;function require_baseClone(){if(hasRequired_baseClone)return _baseClone;hasRequired_baseClone=1;var a=require_Stack(),e=require_arrayEach(),s=require_assignValue(),o=require_baseAssign(),c=require_baseAssignIn(),d=require_cloneBuffer(),g=require_copyArray(),b=require_copySymbols(),j=require_copySymbolsIn(),_e=require_getAllKeys(),er=require_getAllKeysIn(),rr=require_getTag(),tr=require_initCloneArray(),nr=require_initCloneByTag(),ar=require_initCloneObject(),lr=requireIsArray(),or=requireIsBuffer(),ir=requireIsMap(),sr=requireIsObject(),ur=requireIsSet(),cr=requireKeys(),fr=requireKeysIn(),hr=1,dr=2,vr=4,gr="[object Arguments]",pr="[object Array]",mr="[object Boolean]",yr="[object Date]",br="[object Error]",Er="[object Function]",_r="[object GeneratorFunction]",Rr="[object Map]",Cr="[object Number]",wr="[object Object]",$r="[object RegExp]",Ar="[object Set]",Sr="[object String]",kr="[object Symbol]",Mr="[object WeakMap]",qr="[object ArrayBuffer]",Tr="[object DataView]",Pr="[object Float32Array]",Br="[object Float64Array]",Ur="[object Int8Array]",Nr="[object Int16Array]",Ir="[object Int32Array]",Dr="[object Uint8Array]",Or="[object Uint8ClampedArray]",jr="[object Uint16Array]",Wr="[object Uint32Array]",Xr={};Xr[gr]=Xr[pr]=Xr[qr]=Xr[Tr]=Xr[mr]=Xr[yr]=Xr[Pr]=Xr[Br]=Xr[Ur]=Xr[Nr]=Xr[Ir]=Xr[Rr]=Xr[Cr]=Xr[wr]=Xr[$r]=Xr[Ar]=Xr[Sr]=Xr[kr]=Xr[Dr]=Xr[Or]=Xr[jr]=Xr[Wr]=!0,Xr[br]=Xr[Er]=Xr[Mr]=!1;function dt(Vr,Zr,et,Yr,Qr,Jr){var rt,tt=Zr&hr,lt=Zr&dr,pt=Zr&vr;if(et&&(rt=Qr?et(Vr,Yr,Qr,Jr):et(Vr)),rt!==void 0)return rt;if(!sr(Vr))return Vr;var yt=lr(Vr);if(yt){if(rt=tr(Vr),!tt)return g(Vr,rt)}else{var gt=rr(Vr),bt=gt==Er||gt==_r;if(or(Vr))return d(Vr,tt);if(gt==wr||gt==gr||bt&&!Qr){if(rt=lt||bt?{}:ar(Vr),!tt)return lt?j(Vr,c(rt,Vr)):b(Vr,o(rt,Vr))}else{if(!Xr[gt])return Qr?Vr:{};rt=nr(Vr,gt,tt)}}Jr||(Jr=new a);var ct=Jr.get(Vr);if(ct)return ct;Jr.set(Vr,rt),ur(Vr)?Vr.forEach(function(xr){rt.add(dt(xr,Zr,et,xr,Vr,Jr))}):ir(Vr)&&Vr.forEach(function(xr,Lr){rt.set(Lr,dt(xr,Zr,et,Lr,Vr,Jr))});var nt=pt?lt?er:_e:lt?fr:cr,Gr=yt?void 0:nt(Vr);return e(Gr||Vr,function(xr,Lr){Gr&&(Lr=xr,xr=Vr[Lr]),s(rt,Lr,dt(xr,Zr,et,Lr,Vr,Jr))}),rt}return _baseClone=dt,_baseClone}var clone_1,hasRequiredClone;function requireClone(){if(hasRequiredClone)return clone_1;hasRequiredClone=1;var a=require_baseClone(),e=4;function s(o){return a(o,e)}return clone_1=s,clone_1}var constant_1,hasRequiredConstant;function requireConstant(){if(hasRequiredConstant)return constant_1;hasRequiredConstant=1;function a(e){return function(){return e}}return constant_1=a,constant_1}var _createBaseFor,hasRequired_createBaseFor;function require_createBaseFor(){if(hasRequired_createBaseFor)return _createBaseFor;hasRequired_createBaseFor=1;function a(e){return function(s,o,c){for(var d=-1,g=Object(s),b=c(s),j=b.length;j--;){var _e=b[e?j:++d];if(o(g[_e],_e,g)===!1)break}return s}}return _createBaseFor=a,_createBaseFor}var _baseFor,hasRequired_baseFor;function require_baseFor(){if(hasRequired_baseFor)return _baseFor;hasRequired_baseFor=1;var a=require_createBaseFor(),e=a();return _baseFor=e,_baseFor}var _baseForOwn,hasRequired_baseForOwn;function require_baseForOwn(){if(hasRequired_baseForOwn)return _baseForOwn;hasRequired_baseForOwn=1;var a=require_baseFor(),e=requireKeys();function s(o,c){return o&&a(o,c,e)}return _baseForOwn=s,_baseForOwn}var _createBaseEach,hasRequired_createBaseEach;function require_createBaseEach(){if(hasRequired_createBaseEach)return _createBaseEach;hasRequired_createBaseEach=1;var a=requireIsArrayLike();function e(s,o){return function(c,d){if(c==null)return c;if(!a(c))return s(c,d);for(var g=c.length,b=o?g:-1,j=Object(c);(o?b--:++b<g)&&d(j[b],b,j)!==!1;);return c}}return _createBaseEach=e,_createBaseEach}var _baseEach,hasRequired_baseEach;function require_baseEach(){if(hasRequired_baseEach)return _baseEach;hasRequired_baseEach=1;var a=require_baseForOwn(),e=require_createBaseEach(),s=e(a);return _baseEach=s,_baseEach}var identity_1,hasRequiredIdentity;function requireIdentity(){if(hasRequiredIdentity)return identity_1;hasRequiredIdentity=1;function a(e){return e}return identity_1=a,identity_1}var _castFunction,hasRequired_castFunction;function require_castFunction(){if(hasRequired_castFunction)return _castFunction;hasRequired_castFunction=1;var a=requireIdentity();function e(s){return typeof s=="function"?s:a}return _castFunction=e,_castFunction}var forEach_1,hasRequiredForEach;function requireForEach(){if(hasRequiredForEach)return forEach_1;hasRequiredForEach=1;var a=require_arrayEach(),e=require_baseEach(),s=require_castFunction(),o=requireIsArray();function c(d,g){var b=o(d)?a:e;return b(d,s(g))}return forEach_1=c,forEach_1}var each,hasRequiredEach;function requireEach(){return hasRequiredEach||(hasRequiredEach=1,each=requireForEach()),each}var _baseFilter,hasRequired_baseFilter;function require_baseFilter(){if(hasRequired_baseFilter)return _baseFilter;hasRequired_baseFilter=1;var a=require_baseEach();function e(s,o){var c=[];return a(s,function(d,g,b){o(d,g,b)&&c.push(d)}),c}return _baseFilter=e,_baseFilter}var _setCacheAdd,hasRequired_setCacheAdd;function require_setCacheAdd(){if(hasRequired_setCacheAdd)return _setCacheAdd;hasRequired_setCacheAdd=1;var a="__lodash_hash_undefined__";function e(s){return this.__data__.set(s,a),this}return _setCacheAdd=e,_setCacheAdd}var _setCacheHas,hasRequired_setCacheHas;function require_setCacheHas(){if(hasRequired_setCacheHas)return _setCacheHas;hasRequired_setCacheHas=1;function a(e){return this.__data__.has(e)}return _setCacheHas=a,_setCacheHas}var _SetCache,hasRequired_SetCache;function require_SetCache(){if(hasRequired_SetCache)return _SetCache;hasRequired_SetCache=1;var a=require_MapCache(),e=require_setCacheAdd(),s=require_setCacheHas();function o(c){var d=-1,g=c==null?0:c.length;for(this.__data__=new a;++d<g;)this.add(c[d])}return o.prototype.add=o.prototype.push=e,o.prototype.has=s,_SetCache=o,_SetCache}var _arraySome,hasRequired_arraySome;function require_arraySome(){if(hasRequired_arraySome)return _arraySome;hasRequired_arraySome=1;function a(e,s){for(var o=-1,c=e==null?0:e.length;++o<c;)if(s(e[o],o,e))return!0;return!1}return _arraySome=a,_arraySome}var _cacheHas,hasRequired_cacheHas;function require_cacheHas(){if(hasRequired_cacheHas)return _cacheHas;hasRequired_cacheHas=1;function a(e,s){return e.has(s)}return _cacheHas=a,_cacheHas}var _equalArrays,hasRequired_equalArrays;function require_equalArrays(){if(hasRequired_equalArrays)return _equalArrays;hasRequired_equalArrays=1;var a=require_SetCache(),e=require_arraySome(),s=require_cacheHas(),o=1,c=2;function d(g,b,j,_e,er,rr){var tr=j&o,nr=g.length,ar=b.length;if(nr!=ar&&!(tr&&ar>nr))return!1;var lr=rr.get(g),or=rr.get(b);if(lr&&or)return lr==b&&or==g;var ir=-1,sr=!0,ur=j&c?new a:void 0;for(rr.set(g,b),rr.set(b,g);++ir<nr;){var cr=g[ir],fr=b[ir];if(_e)var hr=tr?_e(fr,cr,ir,b,g,rr):_e(cr,fr,ir,g,b,rr);if(hr!==void 0){if(hr)continue;sr=!1;break}if(ur){if(!e(b,function(dr,vr){if(!s(ur,vr)&&(cr===dr||er(cr,dr,j,_e,rr)))return ur.push(vr)})){sr=!1;break}}else if(!(cr===fr||er(cr,fr,j,_e,rr))){sr=!1;break}}return rr.delete(g),rr.delete(b),sr}return _equalArrays=d,_equalArrays}var _mapToArray,hasRequired_mapToArray;function require_mapToArray(){if(hasRequired_mapToArray)return _mapToArray;hasRequired_mapToArray=1;function a(e){var s=-1,o=Array(e.size);return e.forEach(function(c,d){o[++s]=[d,c]}),o}return _mapToArray=a,_mapToArray}var _setToArray,hasRequired_setToArray;function require_setToArray(){if(hasRequired_setToArray)return _setToArray;hasRequired_setToArray=1;function a(e){var s=-1,o=Array(e.size);return e.forEach(function(c){o[++s]=c}),o}return _setToArray=a,_setToArray}var _equalByTag,hasRequired_equalByTag;function require_equalByTag(){if(hasRequired_equalByTag)return _equalByTag;hasRequired_equalByTag=1;var a=require_Symbol(),e=require_Uint8Array(),s=requireEq(),o=require_equalArrays(),c=require_mapToArray(),d=require_setToArray(),g=1,b=2,j="[object Boolean]",_e="[object Date]",er="[object Error]",rr="[object Map]",tr="[object Number]",nr="[object RegExp]",ar="[object Set]",lr="[object String]",or="[object Symbol]",ir="[object ArrayBuffer]",sr="[object DataView]",ur=a?a.prototype:void 0,cr=ur?ur.valueOf:void 0;function fr(hr,dr,vr,gr,pr,mr,yr){switch(vr){case sr:if(hr.byteLength!=dr.byteLength||hr.byteOffset!=dr.byteOffset)return!1;hr=hr.buffer,dr=dr.buffer;case ir:return!(hr.byteLength!=dr.byteLength||!mr(new e(hr),new e(dr)));case j:case _e:case tr:return s(+hr,+dr);case er:return hr.name==dr.name&&hr.message==dr.message;case nr:case lr:return hr==dr+"";case rr:var br=c;case ar:var Er=gr&g;if(br||(br=d),hr.size!=dr.size&&!Er)return!1;var _r=yr.get(hr);if(_r)return _r==dr;gr|=b,yr.set(hr,dr);var Rr=o(br(hr),br(dr),gr,pr,mr,yr);return yr.delete(hr),Rr;case or:if(cr)return cr.call(hr)==cr.call(dr)}return!1}return _equalByTag=fr,_equalByTag}var _equalObjects,hasRequired_equalObjects;function require_equalObjects(){if(hasRequired_equalObjects)return _equalObjects;hasRequired_equalObjects=1;var a=require_getAllKeys(),e=1,s=Object.prototype,o=s.hasOwnProperty;function c(d,g,b,j,_e,er){var rr=b&e,tr=a(d),nr=tr.length,ar=a(g),lr=ar.length;if(nr!=lr&&!rr)return!1;for(var or=nr;or--;){var ir=tr[or];if(!(rr?ir in g:o.call(g,ir)))return!1}var sr=er.get(d),ur=er.get(g);if(sr&&ur)return sr==g&&ur==d;var cr=!0;er.set(d,g),er.set(g,d);for(var fr=rr;++or<nr;){ir=tr[or];var hr=d[ir],dr=g[ir];if(j)var vr=rr?j(dr,hr,ir,g,d,er):j(hr,dr,ir,d,g,er);if(!(vr===void 0?hr===dr||_e(hr,dr,b,j,er):vr)){cr=!1;break}fr||(fr=ir=="constructor")}if(cr&&!fr){var gr=d.constructor,pr=g.constructor;gr!=pr&&"constructor"in d&&"constructor"in g&&!(typeof gr=="function"&&gr instanceof gr&&typeof pr=="function"&&pr instanceof pr)&&(cr=!1)}return er.delete(d),er.delete(g),cr}return _equalObjects=c,_equalObjects}var _baseIsEqualDeep,hasRequired_baseIsEqualDeep;function require_baseIsEqualDeep(){if(hasRequired_baseIsEqualDeep)return _baseIsEqualDeep;hasRequired_baseIsEqualDeep=1;var a=require_Stack(),e=require_equalArrays(),s=require_equalByTag(),o=require_equalObjects(),c=require_getTag(),d=requireIsArray(),g=requireIsBuffer(),b=requireIsTypedArray(),j=1,_e="[object Arguments]",er="[object Array]",rr="[object Object]",tr=Object.prototype,nr=tr.hasOwnProperty;function ar(lr,or,ir,sr,ur,cr){var fr=d(lr),hr=d(or),dr=fr?er:c(lr),vr=hr?er:c(or);dr=dr==_e?rr:dr,vr=vr==_e?rr:vr;var gr=dr==rr,pr=vr==rr,mr=dr==vr;if(mr&&g(lr)){if(!g(or))return!1;fr=!0,gr=!1}if(mr&&!gr)return cr||(cr=new a),fr||b(lr)?e(lr,or,ir,sr,ur,cr):s(lr,or,dr,ir,sr,ur,cr);if(!(ir&j)){var yr=gr&&nr.call(lr,"__wrapped__"),br=pr&&nr.call(or,"__wrapped__");if(yr||br){var Er=yr?lr.value():lr,_r=br?or.value():or;return cr||(cr=new a),ur(Er,_r,ir,sr,cr)}}return mr?(cr||(cr=new a),o(lr,or,ir,sr,ur,cr)):!1}return _baseIsEqualDeep=ar,_baseIsEqualDeep}var _baseIsEqual,hasRequired_baseIsEqual;function require_baseIsEqual(){if(hasRequired_baseIsEqual)return _baseIsEqual;hasRequired_baseIsEqual=1;var a=require_baseIsEqualDeep(),e=requireIsObjectLike();function s(o,c,d,g,b){return o===c?!0:o==null||c==null||!e(o)&&!e(c)?o!==o&&c!==c:a(o,c,d,g,s,b)}return _baseIsEqual=s,_baseIsEqual}var _baseIsMatch,hasRequired_baseIsMatch;function require_baseIsMatch(){if(hasRequired_baseIsMatch)return _baseIsMatch;hasRequired_baseIsMatch=1;var a=require_Stack(),e=require_baseIsEqual(),s=1,o=2;function c(d,g,b,j){var _e=b.length,er=_e,rr=!j;if(d==null)return!er;for(d=Object(d);_e--;){var tr=b[_e];if(rr&&tr[2]?tr[1]!==d[tr[0]]:!(tr[0]in d))return!1}for(;++_e<er;){tr=b[_e];var nr=tr[0],ar=d[nr],lr=tr[1];if(rr&&tr[2]){if(ar===void 0&&!(nr in d))return!1}else{var or=new a;if(j)var ir=j(ar,lr,nr,d,g,or);if(!(ir===void 0?e(lr,ar,s|o,j,or):ir))return!1}}return!0}return _baseIsMatch=c,_baseIsMatch}var _isStrictComparable,hasRequired_isStrictComparable;function require_isStrictComparable(){if(hasRequired_isStrictComparable)return _isStrictComparable;hasRequired_isStrictComparable=1;var a=requireIsObject();function e(s){return s===s&&!a(s)}return _isStrictComparable=e,_isStrictComparable}var _getMatchData,hasRequired_getMatchData;function require_getMatchData(){if(hasRequired_getMatchData)return _getMatchData;hasRequired_getMatchData=1;var a=require_isStrictComparable(),e=requireKeys();function s(o){for(var c=e(o),d=c.length;d--;){var g=c[d],b=o[g];c[d]=[g,b,a(b)]}return c}return _getMatchData=s,_getMatchData}var _matchesStrictComparable,hasRequired_matchesStrictComparable;function require_matchesStrictComparable(){if(hasRequired_matchesStrictComparable)return _matchesStrictComparable;hasRequired_matchesStrictComparable=1;function a(e,s){return function(o){return o==null?!1:o[e]===s&&(s!==void 0||e in Object(o))}}return _matchesStrictComparable=a,_matchesStrictComparable}var _baseMatches,hasRequired_baseMatches;function require_baseMatches(){if(hasRequired_baseMatches)return _baseMatches;hasRequired_baseMatches=1;var a=require_baseIsMatch(),e=require_getMatchData(),s=require_matchesStrictComparable();function o(c){var d=e(c);return d.length==1&&d[0][2]?s(d[0][0],d[0][1]):function(g){return g===c||a(g,c,d)}}return _baseMatches=o,_baseMatches}var isSymbol_1,hasRequiredIsSymbol;function requireIsSymbol(){if(hasRequiredIsSymbol)return isSymbol_1;hasRequiredIsSymbol=1;var a=require_baseGetTag(),e=requireIsObjectLike(),s="[object Symbol]";function o(c){return typeof c=="symbol"||e(c)&&a(c)==s}return isSymbol_1=o,isSymbol_1}var _isKey,hasRequired_isKey;function require_isKey(){if(hasRequired_isKey)return _isKey;hasRequired_isKey=1;var a=requireIsArray(),e=requireIsSymbol(),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;function c(d,g){if(a(d))return!1;var b=typeof d;return b=="number"||b=="symbol"||b=="boolean"||d==null||e(d)?!0:o.test(d)||!s.test(d)||g!=null&&d in Object(g)}return _isKey=c,_isKey}var memoize_1,hasRequiredMemoize;function requireMemoize(){if(hasRequiredMemoize)return memoize_1;hasRequiredMemoize=1;var a=require_MapCache(),e="Expected a function";function s(o,c){if(typeof o!="function"||c!=null&&typeof c!="function")throw new TypeError(e);var d=function(){var g=arguments,b=c?c.apply(this,g):g[0],j=d.cache;if(j.has(b))return j.get(b);var _e=o.apply(this,g);return d.cache=j.set(b,_e)||j,_e};return d.cache=new(s.Cache||a),d}return s.Cache=a,memoize_1=s,memoize_1}var _memoizeCapped,hasRequired_memoizeCapped;function require_memoizeCapped(){if(hasRequired_memoizeCapped)return _memoizeCapped;hasRequired_memoizeCapped=1;var a=requireMemoize(),e=500;function s(o){var c=a(o,function(g){return d.size===e&&d.clear(),g}),d=c.cache;return c}return _memoizeCapped=s,_memoizeCapped}var _stringToPath,hasRequired_stringToPath;function require_stringToPath(){if(hasRequired_stringToPath)return _stringToPath;hasRequired_stringToPath=1;var a=require_memoizeCapped(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,o=a(function(c){var d=[];return c.charCodeAt(0)===46&&d.push(""),c.replace(e,function(g,b,j,_e){d.push(j?_e.replace(s,"$1"):b||g)}),d});return _stringToPath=o,_stringToPath}var _arrayMap,hasRequired_arrayMap;function require_arrayMap(){if(hasRequired_arrayMap)return _arrayMap;hasRequired_arrayMap=1;function a(e,s){for(var o=-1,c=e==null?0:e.length,d=Array(c);++o<c;)d[o]=s(e[o],o,e);return d}return _arrayMap=a,_arrayMap}var _baseToString,hasRequired_baseToString;function require_baseToString(){if(hasRequired_baseToString)return _baseToString;hasRequired_baseToString=1;var a=require_Symbol(),e=require_arrayMap(),s=requireIsArray(),o=requireIsSymbol(),c=a?a.prototype:void 0,d=c?c.toString:void 0;function g(b){if(typeof b=="string")return b;if(s(b))return e(b,g)+"";if(o(b))return d?d.call(b):"";var j=b+"";return j=="0"&&1/b==-1/0?"-0":j}return _baseToString=g,_baseToString}var toString_1,hasRequiredToString;function requireToString(){if(hasRequiredToString)return toString_1;hasRequiredToString=1;var a=require_baseToString();function e(s){return s==null?"":a(s)}return toString_1=e,toString_1}var _castPath,hasRequired_castPath;function require_castPath(){if(hasRequired_castPath)return _castPath;hasRequired_castPath=1;var a=requireIsArray(),e=require_isKey(),s=require_stringToPath(),o=requireToString();function c(d,g){return a(d)?d:e(d,g)?[d]:s(o(d))}return _castPath=c,_castPath}var _toKey,hasRequired_toKey;function require_toKey(){if(hasRequired_toKey)return _toKey;hasRequired_toKey=1;var a=requireIsSymbol();function e(s){if(typeof s=="string"||a(s))return s;var o=s+"";return o=="0"&&1/s==-1/0?"-0":o}return _toKey=e,_toKey}var _baseGet,hasRequired_baseGet;function require_baseGet(){if(hasRequired_baseGet)return _baseGet;hasRequired_baseGet=1;var a=require_castPath(),e=require_toKey();function s(o,c){c=a(c,o);for(var d=0,g=c.length;o!=null&&d<g;)o=o[e(c[d++])];return d&&d==g?o:void 0}return _baseGet=s,_baseGet}var get_1,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get_1;hasRequiredGet=1;var a=require_baseGet();function e(s,o,c){var d=s==null?void 0:a(s,o);return d===void 0?c:d}return get_1=e,get_1}var _baseHasIn,hasRequired_baseHasIn;function require_baseHasIn(){if(hasRequired_baseHasIn)return _baseHasIn;hasRequired_baseHasIn=1;function a(e,s){return e!=null&&s in Object(e)}return _baseHasIn=a,_baseHasIn}var _hasPath,hasRequired_hasPath;function require_hasPath(){if(hasRequired_hasPath)return _hasPath;hasRequired_hasPath=1;var a=require_castPath(),e=requireIsArguments(),s=requireIsArray(),o=require_isIndex(),c=requireIsLength(),d=require_toKey();function g(b,j,_e){j=a(j,b);for(var er=-1,rr=j.length,tr=!1;++er<rr;){var nr=d(j[er]);if(!(tr=b!=null&&_e(b,nr)))break;b=b[nr]}return tr||++er!=rr?tr:(rr=b==null?0:b.length,!!rr&&c(rr)&&o(nr,rr)&&(s(b)||e(b)))}return _hasPath=g,_hasPath}var hasIn_1,hasRequiredHasIn;function requireHasIn(){if(hasRequiredHasIn)return hasIn_1;hasRequiredHasIn=1;var a=require_baseHasIn(),e=require_hasPath();function s(o,c){return o!=null&&e(o,c,a)}return hasIn_1=s,hasIn_1}var _baseMatchesProperty,hasRequired_baseMatchesProperty;function require_baseMatchesProperty(){if(hasRequired_baseMatchesProperty)return _baseMatchesProperty;hasRequired_baseMatchesProperty=1;var a=require_baseIsEqual(),e=requireGet(),s=requireHasIn(),o=require_isKey(),c=require_isStrictComparable(),d=require_matchesStrictComparable(),g=require_toKey(),b=1,j=2;function _e(er,rr){return o(er)&&c(rr)?d(g(er),rr):function(tr){var nr=e(tr,er);return nr===void 0&&nr===rr?s(tr,er):a(rr,nr,b|j)}}return _baseMatchesProperty=_e,_baseMatchesProperty}var _baseProperty,hasRequired_baseProperty;function require_baseProperty(){if(hasRequired_baseProperty)return _baseProperty;hasRequired_baseProperty=1;function a(e){return function(s){return s==null?void 0:s[e]}}return _baseProperty=a,_baseProperty}var _basePropertyDeep,hasRequired_basePropertyDeep;function require_basePropertyDeep(){if(hasRequired_basePropertyDeep)return _basePropertyDeep;hasRequired_basePropertyDeep=1;var a=require_baseGet();function e(s){return function(o){return a(o,s)}}return _basePropertyDeep=e,_basePropertyDeep}var property_1,hasRequiredProperty;function requireProperty(){if(hasRequiredProperty)return property_1;hasRequiredProperty=1;var a=require_baseProperty(),e=require_basePropertyDeep(),s=require_isKey(),o=require_toKey();function c(d){return s(d)?a(o(d)):e(d)}return property_1=c,property_1}var _baseIteratee,hasRequired_baseIteratee;function require_baseIteratee(){if(hasRequired_baseIteratee)return _baseIteratee;hasRequired_baseIteratee=1;var a=require_baseMatches(),e=require_baseMatchesProperty(),s=requireIdentity(),o=requireIsArray(),c=requireProperty();function d(g){return typeof g=="function"?g:g==null?s:typeof g=="object"?o(g)?e(g[0],g[1]):a(g):c(g)}return _baseIteratee=d,_baseIteratee}var filter_1,hasRequiredFilter;function requireFilter(){if(hasRequiredFilter)return filter_1;hasRequiredFilter=1;var a=require_arrayFilter(),e=require_baseFilter(),s=require_baseIteratee(),o=requireIsArray();function c(d,g){var b=o(d)?a:e;return b(d,s(g,3))}return filter_1=c,filter_1}var _baseHas,hasRequired_baseHas;function require_baseHas(){if(hasRequired_baseHas)return _baseHas;hasRequired_baseHas=1;var a=Object.prototype,e=a.hasOwnProperty;function s(o,c){return o!=null&&e.call(o,c)}return _baseHas=s,_baseHas}var has_1,hasRequiredHas;function requireHas(){if(hasRequiredHas)return has_1;hasRequiredHas=1;var a=require_baseHas(),e=require_hasPath();function s(o,c){return o!=null&&e(o,c,a)}return has_1=s,has_1}var isEmpty_1,hasRequiredIsEmpty;function requireIsEmpty(){if(hasRequiredIsEmpty)return isEmpty_1;hasRequiredIsEmpty=1;var a=require_baseKeys(),e=require_getTag(),s=requireIsArguments(),o=requireIsArray(),c=requireIsArrayLike(),d=requireIsBuffer(),g=require_isPrototype(),b=requireIsTypedArray(),j="[object Map]",_e="[object Set]",er=Object.prototype,rr=er.hasOwnProperty;function tr(nr){if(nr==null)return!0;if(c(nr)&&(o(nr)||typeof nr=="string"||typeof nr.splice=="function"||d(nr)||b(nr)||s(nr)))return!nr.length;var ar=e(nr);if(ar==j||ar==_e)return!nr.size;if(g(nr))return!a(nr).length;for(var lr in nr)if(rr.call(nr,lr))return!1;return!0}return isEmpty_1=tr,isEmpty_1}var isUndefined_1,hasRequiredIsUndefined;function requireIsUndefined(){if(hasRequiredIsUndefined)return isUndefined_1;hasRequiredIsUndefined=1;function a(e){return e===void 0}return isUndefined_1=a,isUndefined_1}var _baseMap,hasRequired_baseMap;function require_baseMap(){if(hasRequired_baseMap)return _baseMap;hasRequired_baseMap=1;var a=require_baseEach(),e=requireIsArrayLike();function s(o,c){var d=-1,g=e(o)?Array(o.length):[];return a(o,function(b,j,_e){g[++d]=c(b,j,_e)}),g}return _baseMap=s,_baseMap}var map_1,hasRequiredMap;function requireMap(){if(hasRequiredMap)return map_1;hasRequiredMap=1;var a=require_arrayMap(),e=require_baseIteratee(),s=require_baseMap(),o=requireIsArray();function c(d,g){var b=o(d)?a:s;return b(d,e(g,3))}return map_1=c,map_1}var _arrayReduce,hasRequired_arrayReduce;function require_arrayReduce(){if(hasRequired_arrayReduce)return _arrayReduce;hasRequired_arrayReduce=1;function a(e,s,o,c){var d=-1,g=e==null?0:e.length;for(c&&g&&(o=e[++d]);++d<g;)o=s(o,e[d],d,e);return o}return _arrayReduce=a,_arrayReduce}var _baseReduce,hasRequired_baseReduce;function require_baseReduce(){if(hasRequired_baseReduce)return _baseReduce;hasRequired_baseReduce=1;function a(e,s,o,c,d){return d(e,function(g,b,j){o=c?(c=!1,g):s(o,g,b,j)}),o}return _baseReduce=a,_baseReduce}var reduce_1,hasRequiredReduce;function requireReduce(){if(hasRequiredReduce)return reduce_1;hasRequiredReduce=1;var a=require_arrayReduce(),e=require_baseEach(),s=require_baseIteratee(),o=require_baseReduce(),c=requireIsArray();function d(g,b,j){var _e=c(g)?a:o,er=arguments.length<3;return _e(g,s(b,4),j,er,e)}return reduce_1=d,reduce_1}var isString_1,hasRequiredIsString;function requireIsString(){if(hasRequiredIsString)return isString_1;hasRequiredIsString=1;var a=require_baseGetTag(),e=requireIsArray(),s=requireIsObjectLike(),o="[object String]";function c(d){return typeof d=="string"||!e(d)&&s(d)&&a(d)==o}return isString_1=c,isString_1}var _asciiSize,hasRequired_asciiSize;function require_asciiSize(){if(hasRequired_asciiSize)return _asciiSize;hasRequired_asciiSize=1;var a=require_baseProperty(),e=a("length");return _asciiSize=e,_asciiSize}var _hasUnicode,hasRequired_hasUnicode;function require_hasUnicode(){if(hasRequired_hasUnicode)return _hasUnicode;hasRequired_hasUnicode=1;var a="\\ud800-\\udfff",e="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",c=e+s+o,d="\\ufe0e\\ufe0f",g="\\u200d",b=RegExp("["+g+a+c+d+"]");function j(_e){return b.test(_e)}return _hasUnicode=j,_hasUnicode}var _unicodeSize,hasRequired_unicodeSize;function require_unicodeSize(){if(hasRequired_unicodeSize)return _unicodeSize;hasRequired_unicodeSize=1;var a="\\ud800-\\udfff",e="\\u0300-\\u036f",s="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",c=e+s+o,d="\\ufe0e\\ufe0f",g="["+a+"]",b="["+c+"]",j="\\ud83c[\\udffb-\\udfff]",_e="(?:"+b+"|"+j+")",er="[^"+a+"]",rr="(?:\\ud83c[\\udde6-\\uddff]){2}",tr="[\\ud800-\\udbff][\\udc00-\\udfff]",nr="\\u200d",ar=_e+"?",lr="["+d+"]?",or="(?:"+nr+"(?:"+[er,rr,tr].join("|")+")"+lr+ar+")*",ir=lr+ar+or,sr="(?:"+[er+b+"?",b,rr,tr,g].join("|")+")",ur=RegExp(j+"(?="+j+")|"+sr+ir,"g");function cr(fr){for(var hr=ur.lastIndex=0;ur.test(fr);)++hr;return hr}return _unicodeSize=cr,_unicodeSize}var _stringSize,hasRequired_stringSize;function require_stringSize(){if(hasRequired_stringSize)return _stringSize;hasRequired_stringSize=1;var a=require_asciiSize(),e=require_hasUnicode(),s=require_unicodeSize();function o(c){return e(c)?s(c):a(c)}return _stringSize=o,_stringSize}var size_1,hasRequiredSize;function requireSize(){if(hasRequiredSize)return size_1;hasRequiredSize=1;var a=require_baseKeys(),e=require_getTag(),s=requireIsArrayLike(),o=requireIsString(),c=require_stringSize(),d="[object Map]",g="[object Set]";function b(j){if(j==null)return 0;if(s(j))return o(j)?c(j):j.length;var _e=e(j);return _e==d||_e==g?j.size:a(j).length}return size_1=b,size_1}var transform_1,hasRequiredTransform;function requireTransform(){if(hasRequiredTransform)return transform_1;hasRequiredTransform=1;var a=require_arrayEach(),e=require_baseCreate(),s=require_baseForOwn(),o=require_baseIteratee(),c=require_getPrototype(),d=requireIsArray(),g=requireIsBuffer(),b=requireIsFunction(),j=requireIsObject(),_e=requireIsTypedArray();function er(rr,tr,nr){var ar=d(rr),lr=ar||g(rr)||_e(rr);if(tr=o(tr,4),nr==null){var or=rr&&rr.constructor;lr?nr=ar?new or:[]:j(rr)?nr=b(or)?e(c(rr)):{}:nr={}}return(lr?a:s)(rr,function(ir,sr,ur){return tr(nr,ir,sr,ur)}),nr}return transform_1=er,transform_1}var _isFlattenable,hasRequired_isFlattenable;function require_isFlattenable(){if(hasRequired_isFlattenable)return _isFlattenable;hasRequired_isFlattenable=1;var a=require_Symbol(),e=requireIsArguments(),s=requireIsArray(),o=a?a.isConcatSpreadable:void 0;function c(d){return s(d)||e(d)||!!(o&&d&&d[o])}return _isFlattenable=c,_isFlattenable}var _baseFlatten,hasRequired_baseFlatten;function require_baseFlatten(){if(hasRequired_baseFlatten)return _baseFlatten;hasRequired_baseFlatten=1;var a=require_arrayPush(),e=require_isFlattenable();function s(o,c,d,g,b){var j=-1,_e=o.length;for(d||(d=e),b||(b=[]);++j<_e;){var er=o[j];c>0&&d(er)?c>1?s(er,c-1,d,g,b):a(b,er):g||(b[b.length]=er)}return b}return _baseFlatten=s,_baseFlatten}var _apply,hasRequired_apply;function require_apply(){if(hasRequired_apply)return _apply;hasRequired_apply=1;function a(e,s,o){switch(o.length){case 0:return e.call(s);case 1:return e.call(s,o[0]);case 2:return e.call(s,o[0],o[1]);case 3:return e.call(s,o[0],o[1],o[2])}return e.apply(s,o)}return _apply=a,_apply}var _overRest,hasRequired_overRest;function require_overRest(){if(hasRequired_overRest)return _overRest;hasRequired_overRest=1;var a=require_apply(),e=Math.max;function s(o,c,d){return c=e(c===void 0?o.length-1:c,0),function(){for(var g=arguments,b=-1,j=e(g.length-c,0),_e=Array(j);++b<j;)_e[b]=g[c+b];b=-1;for(var er=Array(c+1);++b<c;)er[b]=g[b];return er[c]=d(_e),a(o,this,er)}}return _overRest=s,_overRest}var _baseSetToString,hasRequired_baseSetToString;function require_baseSetToString(){if(hasRequired_baseSetToString)return _baseSetToString;hasRequired_baseSetToString=1;var a=requireConstant(),e=require_defineProperty(),s=requireIdentity(),o=e?function(c,d){return e(c,"toString",{configurable:!0,enumerable:!1,value:a(d),writable:!0})}:s;return _baseSetToString=o,_baseSetToString}var _shortOut,hasRequired_shortOut;function require_shortOut(){if(hasRequired_shortOut)return _shortOut;hasRequired_shortOut=1;var a=800,e=16,s=Date.now;function o(c){var d=0,g=0;return function(){var b=s(),j=e-(b-g);if(g=b,j>0){if(++d>=a)return arguments[0]}else d=0;return c.apply(void 0,arguments)}}return _shortOut=o,_shortOut}var _setToString,hasRequired_setToString;function require_setToString(){if(hasRequired_setToString)return _setToString;hasRequired_setToString=1;var a=require_baseSetToString(),e=require_shortOut(),s=e(a);return _setToString=s,_setToString}var _baseRest,hasRequired_baseRest;function require_baseRest(){if(hasRequired_baseRest)return _baseRest;hasRequired_baseRest=1;var a=requireIdentity(),e=require_overRest(),s=require_setToString();function o(c,d){return s(e(c,d,a),c+"")}return _baseRest=o,_baseRest}var _baseFindIndex,hasRequired_baseFindIndex;function require_baseFindIndex(){if(hasRequired_baseFindIndex)return _baseFindIndex;hasRequired_baseFindIndex=1;function a(e,s,o,c){for(var d=e.length,g=o+(c?1:-1);c?g--:++g<d;)if(s(e[g],g,e))return g;return-1}return _baseFindIndex=a,_baseFindIndex}var _baseIsNaN,hasRequired_baseIsNaN;function require_baseIsNaN(){if(hasRequired_baseIsNaN)return _baseIsNaN;hasRequired_baseIsNaN=1;function a(e){return e!==e}return _baseIsNaN=a,_baseIsNaN}var _strictIndexOf,hasRequired_strictIndexOf;function require_strictIndexOf(){if(hasRequired_strictIndexOf)return _strictIndexOf;hasRequired_strictIndexOf=1;function a(e,s,o){for(var c=o-1,d=e.length;++c<d;)if(e[c]===s)return c;return-1}return _strictIndexOf=a,_strictIndexOf}var _baseIndexOf,hasRequired_baseIndexOf;function require_baseIndexOf(){if(hasRequired_baseIndexOf)return _baseIndexOf;hasRequired_baseIndexOf=1;var a=require_baseFindIndex(),e=require_baseIsNaN(),s=require_strictIndexOf();function o(c,d,g){return d===d?s(c,d,g):a(c,e,g)}return _baseIndexOf=o,_baseIndexOf}var _arrayIncludes,hasRequired_arrayIncludes;function require_arrayIncludes(){if(hasRequired_arrayIncludes)return _arrayIncludes;hasRequired_arrayIncludes=1;var a=require_baseIndexOf();function e(s,o){var c=s==null?0:s.length;return!!c&&a(s,o,0)>-1}return _arrayIncludes=e,_arrayIncludes}var _arrayIncludesWith,hasRequired_arrayIncludesWith;function require_arrayIncludesWith(){if(hasRequired_arrayIncludesWith)return _arrayIncludesWith;hasRequired_arrayIncludesWith=1;function a(e,s,o){for(var c=-1,d=e==null?0:e.length;++c<d;)if(o(s,e[c]))return!0;return!1}return _arrayIncludesWith=a,_arrayIncludesWith}var noop_1,hasRequiredNoop;function requireNoop(){if(hasRequiredNoop)return noop_1;hasRequiredNoop=1;function a(){}return noop_1=a,noop_1}var _createSet,hasRequired_createSet;function require_createSet(){if(hasRequired_createSet)return _createSet;hasRequired_createSet=1;var a=require_Set(),e=requireNoop(),s=require_setToArray(),o=1/0,c=a&&1/s(new a([,-0]))[1]==o?function(d){return new a(d)}:e;return _createSet=c,_createSet}var _baseUniq,hasRequired_baseUniq;function require_baseUniq(){if(hasRequired_baseUniq)return _baseUniq;hasRequired_baseUniq=1;var a=require_SetCache(),e=require_arrayIncludes(),s=require_arrayIncludesWith(),o=require_cacheHas(),c=require_createSet(),d=require_setToArray(),g=200;function b(j,_e,er){var rr=-1,tr=e,nr=j.length,ar=!0,lr=[],or=lr;if(er)ar=!1,tr=s;else if(nr>=g){var ir=_e?null:c(j);if(ir)return d(ir);ar=!1,tr=o,or=new a}else or=_e?[]:lr;e:for(;++rr<nr;){var sr=j[rr],ur=_e?_e(sr):sr;if(sr=er||sr!==0?sr:0,ar&&ur===ur){for(var cr=or.length;cr--;)if(or[cr]===ur)continue e;_e&&or.push(ur),lr.push(sr)}else tr(or,ur,er)||(or!==lr&&or.push(ur),lr.push(sr))}return lr}return _baseUniq=b,_baseUniq}var isArrayLikeObject_1,hasRequiredIsArrayLikeObject;function requireIsArrayLikeObject(){if(hasRequiredIsArrayLikeObject)return isArrayLikeObject_1;hasRequiredIsArrayLikeObject=1;var a=requireIsArrayLike(),e=requireIsObjectLike();function s(o){return e(o)&&a(o)}return isArrayLikeObject_1=s,isArrayLikeObject_1}var union_1,hasRequiredUnion;function requireUnion(){if(hasRequiredUnion)return union_1;hasRequiredUnion=1;var a=require_baseFlatten(),e=require_baseRest(),s=require_baseUniq(),o=requireIsArrayLikeObject(),c=e(function(d){return s(a(d,1,o,!0))});return union_1=c,union_1}var _baseValues,hasRequired_baseValues;function require_baseValues(){if(hasRequired_baseValues)return _baseValues;hasRequired_baseValues=1;var a=require_arrayMap();function e(s,o){return a(o,function(c){return s[c]})}return _baseValues=e,_baseValues}var values_1,hasRequiredValues;function requireValues(){if(hasRequiredValues)return values_1;hasRequiredValues=1;var a=require_baseValues(),e=requireKeys();function s(o){return o==null?[]:a(o,e(o))}return values_1=s,values_1}var lodash_1$1,hasRequiredLodash$1;function requireLodash$1(){if(hasRequiredLodash$1)return lodash_1$1;hasRequiredLodash$1=1;var a;if(typeof commonjsRequire=="function")try{a={clone:requireClone(),constant:requireConstant(),each:requireEach(),filter:requireFilter(),has:requireHas(),isArray:requireIsArray(),isEmpty:requireIsEmpty(),isFunction:requireIsFunction(),isUndefined:requireIsUndefined(),keys:requireKeys(),map:requireMap(),reduce:requireReduce(),size:requireSize(),transform:requireTransform(),union:requireUnion(),values:requireValues()}}catch{}return a||(a=window._),lodash_1$1=a,lodash_1$1}var graph,hasRequiredGraph;function requireGraph(){if(hasRequiredGraph)return graph;hasRequiredGraph=1;var a=requireLodash$1();graph=c;var e="\0",s="\0",o="";function c(er){this._isDirected=a.has(er,"directed")?er.directed:!0,this._isMultigraph=a.has(er,"multigraph")?er.multigraph:!1,this._isCompound=a.has(er,"compound")?er.compound:!1,this._label=void 0,this._defaultNodeLabelFn=a.constant(void 0),this._defaultEdgeLabelFn=a.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[s]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}c.prototype._nodeCount=0,c.prototype._edgeCount=0,c.prototype.isDirected=function(){return this._isDirected},c.prototype.isMultigraph=function(){return this._isMultigraph},c.prototype.isCompound=function(){return this._isCompound},c.prototype.setGraph=function(er){return this._label=er,this},c.prototype.graph=function(){return this._label},c.prototype.setDefaultNodeLabel=function(er){return a.isFunction(er)||(er=a.constant(er)),this._defaultNodeLabelFn=er,this},c.prototype.nodeCount=function(){return this._nodeCount},c.prototype.nodes=function(){return a.keys(this._nodes)},c.prototype.sources=function(){var er=this;return a.filter(this.nodes(),function(rr){return a.isEmpty(er._in[rr])})},c.prototype.sinks=function(){var er=this;return a.filter(this.nodes(),function(rr){return a.isEmpty(er._out[rr])})},c.prototype.setNodes=function(er,rr){var tr=arguments,nr=this;return a.each(er,function(ar){tr.length>1?nr.setNode(ar,rr):nr.setNode(ar)}),this},c.prototype.setNode=function(er,rr){return a.has(this._nodes,er)?(arguments.length>1&&(this._nodes[er]=rr),this):(this._nodes[er]=arguments.length>1?rr:this._defaultNodeLabelFn(er),this._isCompound&&(this._parent[er]=s,this._children[er]={},this._children[s][er]=!0),this._in[er]={},this._preds[er]={},this._out[er]={},this._sucs[er]={},++this._nodeCount,this)},c.prototype.node=function(er){return this._nodes[er]},c.prototype.hasNode=function(er){return a.has(this._nodes,er)},c.prototype.removeNode=function(er){var rr=this;if(a.has(this._nodes,er)){var tr=function(nr){rr.removeEdge(rr._edgeObjs[nr])};delete this._nodes[er],this._isCompound&&(this._removeFromParentsChildList(er),delete this._parent[er],a.each(this.children(er),function(nr){rr.setParent(nr)}),delete this._children[er]),a.each(a.keys(this._in[er]),tr),delete this._in[er],delete this._preds[er],a.each(a.keys(this._out[er]),tr),delete this._out[er],delete this._sucs[er],--this._nodeCount}return this},c.prototype.setParent=function(er,rr){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(a.isUndefined(rr))rr=s;else{rr+="";for(var tr=rr;!a.isUndefined(tr);tr=this.parent(tr))if(tr===er)throw new Error("Setting "+rr+" as parent of "+er+" would create a cycle");this.setNode(rr)}return this.setNode(er),this._removeFromParentsChildList(er),this._parent[er]=rr,this._children[rr][er]=!0,this},c.prototype._removeFromParentsChildList=function(er){delete this._children[this._parent[er]][er]},c.prototype.parent=function(er){if(this._isCompound){var rr=this._parent[er];if(rr!==s)return rr}},c.prototype.children=function(er){if(a.isUndefined(er)&&(er=s),this._isCompound){var rr=this._children[er];if(rr)return a.keys(rr)}else{if(er===s)return this.nodes();if(this.hasNode(er))return[]}},c.prototype.predecessors=function(er){var rr=this._preds[er];if(rr)return a.keys(rr)},c.prototype.successors=function(er){var rr=this._sucs[er];if(rr)return a.keys(rr)},c.prototype.neighbors=function(er){var rr=this.predecessors(er);if(rr)return a.union(rr,this.successors(er))},c.prototype.isLeaf=function(er){var rr;return this.isDirected()?rr=this.successors(er):rr=this.neighbors(er),rr.length===0},c.prototype.filterNodes=function(er){var rr=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});rr.setGraph(this.graph());var tr=this;a.each(this._nodes,function(lr,or){er(or)&&rr.setNode(or,lr)}),a.each(this._edgeObjs,function(lr){rr.hasNode(lr.v)&&rr.hasNode(lr.w)&&rr.setEdge(lr,tr.edge(lr))});var nr={};function ar(lr){var or=tr.parent(lr);return or===void 0||rr.hasNode(or)?(nr[lr]=or,or):or in nr?nr[or]:ar(or)}return this._isCompound&&a.each(rr.nodes(),function(lr){rr.setParent(lr,ar(lr))}),rr},c.prototype.setDefaultEdgeLabel=function(er){return a.isFunction(er)||(er=a.constant(er)),this._defaultEdgeLabelFn=er,this},c.prototype.edgeCount=function(){return this._edgeCount},c.prototype.edges=function(){return a.values(this._edgeObjs)},c.prototype.setPath=function(er,rr){var tr=this,nr=arguments;return a.reduce(er,function(ar,lr){return nr.length>1?tr.setEdge(ar,lr,rr):tr.setEdge(ar,lr),lr}),this},c.prototype.setEdge=function(){var er,rr,tr,nr,ar=!1,lr=arguments[0];typeof lr=="object"&&lr!==null&&"v"in lr?(er=lr.v,rr=lr.w,tr=lr.name,arguments.length===2&&(nr=arguments[1],ar=!0)):(er=lr,rr=arguments[1],tr=arguments[3],arguments.length>2&&(nr=arguments[2],ar=!0)),er=""+er,rr=""+rr,a.isUndefined(tr)||(tr=""+tr);var or=b(this._isDirected,er,rr,tr);if(a.has(this._edgeLabels,or))return ar&&(this._edgeLabels[or]=nr),this;if(!a.isUndefined(tr)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(er),this.setNode(rr),this._edgeLabels[or]=ar?nr:this._defaultEdgeLabelFn(er,rr,tr);var ir=j(this._isDirected,er,rr,tr);return er=ir.v,rr=ir.w,Object.freeze(ir),this._edgeObjs[or]=ir,d(this._preds[rr],er),d(this._sucs[er],rr),this._in[rr][or]=ir,this._out[er][or]=ir,this._edgeCount++,this},c.prototype.edge=function(er,rr,tr){var nr=arguments.length===1?_e(this._isDirected,arguments[0]):b(this._isDirected,er,rr,tr);return this._edgeLabels[nr]},c.prototype.hasEdge=function(er,rr,tr){var nr=arguments.length===1?_e(this._isDirected,arguments[0]):b(this._isDirected,er,rr,tr);return a.has(this._edgeLabels,nr)},c.prototype.removeEdge=function(er,rr,tr){var nr=arguments.length===1?_e(this._isDirected,arguments[0]):b(this._isDirected,er,rr,tr),ar=this._edgeObjs[nr];return ar&&(er=ar.v,rr=ar.w,delete this._edgeLabels[nr],delete this._edgeObjs[nr],g(this._preds[rr],er),g(this._sucs[er],rr),delete this._in[rr][nr],delete this._out[er][nr],this._edgeCount--),this},c.prototype.inEdges=function(er,rr){var tr=this._in[er];if(tr){var nr=a.values(tr);return rr?a.filter(nr,function(ar){return ar.v===rr}):nr}},c.prototype.outEdges=function(er,rr){var tr=this._out[er];if(tr){var nr=a.values(tr);return rr?a.filter(nr,function(ar){return ar.w===rr}):nr}},c.prototype.nodeEdges=function(er,rr){var tr=this.inEdges(er,rr);if(tr)return tr.concat(this.outEdges(er,rr))};function d(er,rr){er[rr]?er[rr]++:er[rr]=1}function g(er,rr){--er[rr]||delete er[rr]}function b(er,rr,tr,nr){var ar=""+rr,lr=""+tr;if(!er&&ar>lr){var or=ar;ar=lr,lr=or}return ar+o+lr+o+(a.isUndefined(nr)?e:nr)}function j(er,rr,tr,nr){var ar=""+rr,lr=""+tr;if(!er&&ar>lr){var or=ar;ar=lr,lr=or}var ir={v:ar,w:lr};return nr&&(ir.name=nr),ir}function _e(er,rr){return b(er,rr.v,rr.w,rr.name)}return graph}var version$1,hasRequiredVersion$1;function requireVersion$1(){return hasRequiredVersion$1||(hasRequiredVersion$1=1,version$1="2.1.8"),version$1}var lib,hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,lib={Graph:requireGraph(),version:requireVersion$1()}),lib}var json,hasRequiredJson;function requireJson(){if(hasRequiredJson)return json;hasRequiredJson=1;var a=requireLodash$1(),e=requireGraph();json={write:s,read:d};function s(g){var b={options:{directed:g.isDirected(),multigraph:g.isMultigraph(),compound:g.isCompound()},nodes:o(g),edges:c(g)};return a.isUndefined(g.graph())||(b.value=a.clone(g.graph())),b}function o(g){return a.map(g.nodes(),function(b){var j=g.node(b),_e=g.parent(b),er={v:b};return a.isUndefined(j)||(er.value=j),a.isUndefined(_e)||(er.parent=_e),er})}function c(g){return a.map(g.edges(),function(b){var j=g.edge(b),_e={v:b.v,w:b.w};return a.isUndefined(b.name)||(_e.name=b.name),a.isUndefined(j)||(_e.value=j),_e})}function d(g){var b=new e(g.options).setGraph(g.value);return a.each(g.nodes,function(j){b.setNode(j.v,j.value),j.parent&&b.setParent(j.v,j.parent)}),a.each(g.edges,function(j){b.setEdge({v:j.v,w:j.w,name:j.name},j.value)}),b}return json}var components_1,hasRequiredComponents;function requireComponents(){if(hasRequiredComponents)return components_1;hasRequiredComponents=1;var a=requireLodash$1();components_1=e;function e(s){var o={},c=[],d;function g(b){a.has(o,b)||(o[b]=!0,d.push(b),a.each(s.successors(b),g),a.each(s.predecessors(b),g))}return a.each(s.nodes(),function(b){d=[],g(b),d.length&&c.push(d)}),c}return components_1}var priorityQueue,hasRequiredPriorityQueue;function requirePriorityQueue(){if(hasRequiredPriorityQueue)return priorityQueue;hasRequiredPriorityQueue=1;var a=requireLodash$1();priorityQueue=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(s){return s.key})},e.prototype.has=function(s){return a.has(this._keyIndices,s)},e.prototype.priority=function(s){var o=this._keyIndices[s];if(o!==void 0)return this._arr[o].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(s,o){var c=this._keyIndices;if(s=String(s),!a.has(c,s)){var d=this._arr,g=d.length;return c[s]=g,d.push({key:s,priority:o}),this._decrease(g),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var s=this._arr.pop();return delete this._keyIndices[s.key],this._heapify(0),s.key},e.prototype.decrease=function(s,o){var c=this._keyIndices[s];if(o>this._arr[c].priority)throw new Error("New priority is greater than current priority. Key: "+s+" Old: "+this._arr[c].priority+" New: "+o);this._arr[c].priority=o,this._decrease(c)},e.prototype._heapify=function(s){var o=this._arr,c=2*s,d=c+1,g=s;c<o.length&&(g=o[c].priority<o[g].priority?c:g,d<o.length&&(g=o[d].priority<o[g].priority?d:g),g!==s&&(this._swap(s,g),this._heapify(g)))},e.prototype._decrease=function(s){for(var o=this._arr,c=o[s].priority,d;s!==0&&(d=s>>1,!(o[d].priority<c));)this._swap(s,d),s=d},e.prototype._swap=function(s,o){var c=this._arr,d=this._keyIndices,g=c[s],b=c[o];c[s]=b,c[o]=g,d[b.key]=s,d[g.key]=o},priorityQueue}var dijkstra_1,hasRequiredDijkstra;function requireDijkstra(){if(hasRequiredDijkstra)return dijkstra_1;hasRequiredDijkstra=1;var a=requireLodash$1(),e=requirePriorityQueue();dijkstra_1=o;var s=a.constant(1);function o(d,g,b,j){return c(d,String(g),b||s,j||function(_e){return d.outEdges(_e)})}function c(d,g,b,j){var _e={},er=new e,rr,tr,nr=function(ar){var lr=ar.v!==rr?ar.v:ar.w,or=_e[lr],ir=b(ar),sr=tr.distance+ir;if(ir<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+ar+" Weight: "+ir);sr<or.distance&&(or.distance=sr,or.predecessor=rr,er.decrease(lr,sr))};for(d.nodes().forEach(function(ar){var lr=ar===g?0:Number.POSITIVE_INFINITY;_e[ar]={distance:lr},er.add(ar,lr)});er.size()>0&&(rr=er.removeMin(),tr=_e[rr],tr.distance!==Number.POSITIVE_INFINITY);)j(rr).forEach(nr);return _e}return dijkstra_1}var dijkstraAll_1,hasRequiredDijkstraAll;function requireDijkstraAll(){if(hasRequiredDijkstraAll)return dijkstraAll_1;hasRequiredDijkstraAll=1;var a=requireDijkstra(),e=requireLodash$1();dijkstraAll_1=s;function s(o,c,d){return e.transform(o.nodes(),function(g,b){g[b]=a(o,b,c,d)},{})}return dijkstraAll_1}var tarjan_1,hasRequiredTarjan;function requireTarjan(){if(hasRequiredTarjan)return tarjan_1;hasRequiredTarjan=1;var a=requireLodash$1();tarjan_1=e;function e(s){var o=0,c=[],d={},g=[];function b(j){var _e=d[j]={onStack:!0,lowlink:o,index:o++};if(c.push(j),s.successors(j).forEach(function(tr){a.has(d,tr)?d[tr].onStack&&(_e.lowlink=Math.min(_e.lowlink,d[tr].index)):(b(tr),_e.lowlink=Math.min(_e.lowlink,d[tr].lowlink))}),_e.lowlink===_e.index){var er=[],rr;do rr=c.pop(),d[rr].onStack=!1,er.push(rr);while(j!==rr);g.push(er)}}return s.nodes().forEach(function(j){a.has(d,j)||b(j)}),g}return tarjan_1}var findCycles_1,hasRequiredFindCycles;function requireFindCycles(){if(hasRequiredFindCycles)return findCycles_1;hasRequiredFindCycles=1;var a=requireLodash$1(),e=requireTarjan();findCycles_1=s;function s(o){return a.filter(e(o),function(c){return c.length>1||c.length===1&&o.hasEdge(c[0],c[0])})}return findCycles_1}var floydWarshall_1,hasRequiredFloydWarshall;function requireFloydWarshall(){if(hasRequiredFloydWarshall)return floydWarshall_1;hasRequiredFloydWarshall=1;var a=requireLodash$1();floydWarshall_1=s;var e=a.constant(1);function s(c,d,g){return o(c,d||e,g||function(b){return c.outEdges(b)})}function o(c,d,g){var b={},j=c.nodes();return j.forEach(function(_e){b[_e]={},b[_e][_e]={distance:0},j.forEach(function(er){_e!==er&&(b[_e][er]={distance:Number.POSITIVE_INFINITY})}),g(_e).forEach(function(er){var rr=er.v===_e?er.w:er.v,tr=d(er);b[_e][rr]={distance:tr,predecessor:_e}})}),j.forEach(function(_e){var er=b[_e];j.forEach(function(rr){var tr=b[rr];j.forEach(function(nr){var ar=tr[_e],lr=er[nr],or=tr[nr],ir=ar.distance+lr.distance;ir<or.distance&&(or.distance=ir,or.predecessor=lr.predecessor)})})}),b}return floydWarshall_1}var topsort_1,hasRequiredTopsort;function requireTopsort(){if(hasRequiredTopsort)return topsort_1;hasRequiredTopsort=1;var a=requireLodash$1();topsort_1=e,e.CycleException=s;function e(o){var c={},d={},g=[];function b(j){if(a.has(d,j))throw new s;a.has(c,j)||(d[j]=!0,c[j]=!0,a.each(o.predecessors(j),b),delete d[j],g.push(j))}if(a.each(o.sinks(),b),a.size(c)!==o.nodeCount())throw new s;return g}function s(){}return s.prototype=new Error,topsort_1}var isAcyclic_1,hasRequiredIsAcyclic;function requireIsAcyclic(){if(hasRequiredIsAcyclic)return isAcyclic_1;hasRequiredIsAcyclic=1;var a=requireTopsort();isAcyclic_1=e;function e(s){try{a(s)}catch(o){if(o instanceof a.CycleException)return!1;throw o}return!0}return isAcyclic_1}var dfs_1,hasRequiredDfs;function requireDfs(){if(hasRequiredDfs)return dfs_1;hasRequiredDfs=1;var a=requireLodash$1();dfs_1=e;function e(o,c,d){a.isArray(c)||(c=[c]);var g=(o.isDirected()?o.successors:o.neighbors).bind(o),b=[],j={};return a.each(c,function(_e){if(!o.hasNode(_e))throw new Error("Graph does not have node: "+_e);s(o,_e,d==="post",j,g,b)}),b}function s(o,c,d,g,b,j){a.has(g,c)||(g[c]=!0,d||j.push(c),a.each(b(c),function(_e){s(o,_e,d,g,b,j)}),d&&j.push(c))}return dfs_1}var postorder_1,hasRequiredPostorder;function requirePostorder(){if(hasRequiredPostorder)return postorder_1;hasRequiredPostorder=1;var a=requireDfs();postorder_1=e;function e(s,o){return a(s,o,"post")}return postorder_1}var preorder_1,hasRequiredPreorder;function requirePreorder(){if(hasRequiredPreorder)return preorder_1;hasRequiredPreorder=1;var a=requireDfs();preorder_1=e;function e(s,o){return a(s,o,"pre")}return preorder_1}var prim_1,hasRequiredPrim;function requirePrim(){if(hasRequiredPrim)return prim_1;hasRequiredPrim=1;var a=requireLodash$1(),e=requireGraph(),s=requirePriorityQueue();prim_1=o;function o(c,d){var g=new e,b={},j=new s,_e;function er(tr){var nr=tr.v===_e?tr.w:tr.v,ar=j.priority(nr);if(ar!==void 0){var lr=d(tr);lr<ar&&(b[nr]=_e,j.decrease(nr,lr))}}if(c.nodeCount()===0)return g;a.each(c.nodes(),function(tr){j.add(tr,Number.POSITIVE_INFINITY),g.setNode(tr)}),j.decrease(c.nodes()[0],0);for(var rr=!1;j.size()>0;){if(_e=j.removeMin(),a.has(b,_e))g.setEdge(_e,b[_e]);else{if(rr)throw new Error("Input graph is not connected: "+c);rr=!0}c.nodeEdges(_e).forEach(er)}return g}return prim_1}var alg,hasRequiredAlg;function requireAlg(){return hasRequiredAlg||(hasRequiredAlg=1,alg={components:requireComponents(),dijkstra:requireDijkstra(),dijkstraAll:requireDijkstraAll(),findCycles:requireFindCycles(),floydWarshall:requireFloydWarshall(),isAcyclic:requireIsAcyclic(),postorder:requirePostorder(),preorder:requirePreorder(),prim:requirePrim(),tarjan:requireTarjan(),topsort:requireTopsort()}),alg}var graphlib,hasRequiredGraphlib$1;function requireGraphlib$1(){if(hasRequiredGraphlib$1)return graphlib;hasRequiredGraphlib$1=1;var a=requireLib();return graphlib={Graph:a.Graph,json:requireJson(),alg:requireAlg(),version:a.version},graphlib}var graphlib_1,hasRequiredGraphlib;function requireGraphlib(){if(hasRequiredGraphlib)return graphlib_1;hasRequiredGraphlib=1;var a;if(typeof commonjsRequire=="function")try{a=requireGraphlib$1()}catch{}return a||(a=window.graphlib),graphlib_1=a,graphlib_1}var cloneDeep_1,hasRequiredCloneDeep;function requireCloneDeep(){if(hasRequiredCloneDeep)return cloneDeep_1;hasRequiredCloneDeep=1;var a=require_baseClone(),e=1,s=4;function o(c){return a(c,e|s)}return cloneDeep_1=o,cloneDeep_1}var _isIterateeCall,hasRequired_isIterateeCall;function require_isIterateeCall(){if(hasRequired_isIterateeCall)return _isIterateeCall;hasRequired_isIterateeCall=1;var a=requireEq(),e=requireIsArrayLike(),s=require_isIndex(),o=requireIsObject();function c(d,g,b){if(!o(b))return!1;var j=typeof g;return(j=="number"?e(b)&&s(g,b.length):j=="string"&&g in b)?a(b[g],d):!1}return _isIterateeCall=c,_isIterateeCall}var defaults_1,hasRequiredDefaults;function requireDefaults(){if(hasRequiredDefaults)return defaults_1;hasRequiredDefaults=1;var a=require_baseRest(),e=requireEq(),s=require_isIterateeCall(),o=requireKeysIn(),c=Object.prototype,d=c.hasOwnProperty,g=a(function(b,j){b=Object(b);var _e=-1,er=j.length,rr=er>2?j[2]:void 0;for(rr&&s(j[0],j[1],rr)&&(er=1);++_e<er;)for(var tr=j[_e],nr=o(tr),ar=-1,lr=nr.length;++ar<lr;){var or=nr[ar],ir=b[or];(ir===void 0||e(ir,c[or])&&!d.call(b,or))&&(b[or]=tr[or])}return b});return defaults_1=g,defaults_1}var _createFind,hasRequired_createFind;function require_createFind(){if(hasRequired_createFind)return _createFind;hasRequired_createFind=1;var a=require_baseIteratee(),e=requireIsArrayLike(),s=requireKeys();function o(c){return function(d,g,b){var j=Object(d);if(!e(d)){var _e=a(g,3);d=s(d),g=function(rr){return _e(j[rr],rr,j)}}var er=c(d,g,b);return er>-1?j[_e?d[er]:er]:void 0}}return _createFind=o,_createFind}var _trimmedEndIndex,hasRequired_trimmedEndIndex;function require_trimmedEndIndex(){if(hasRequired_trimmedEndIndex)return _trimmedEndIndex;hasRequired_trimmedEndIndex=1;var a=/\s/;function e(s){for(var o=s.length;o--&&a.test(s.charAt(o)););return o}return _trimmedEndIndex=e,_trimmedEndIndex}var _baseTrim,hasRequired_baseTrim;function require_baseTrim(){if(hasRequired_baseTrim)return _baseTrim;hasRequired_baseTrim=1;var a=require_trimmedEndIndex(),e=/^\s+/;function s(o){return o&&o.slice(0,a(o)+1).replace(e,"")}return _baseTrim=s,_baseTrim}var toNumber_1,hasRequiredToNumber;function requireToNumber(){if(hasRequiredToNumber)return toNumber_1;hasRequiredToNumber=1;var a=require_baseTrim(),e=requireIsObject(),s=requireIsSymbol(),o=NaN,c=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,g=/^0o[0-7]+$/i,b=parseInt;function j(_e){if(typeof _e=="number")return _e;if(s(_e))return o;if(e(_e)){var er=typeof _e.valueOf=="function"?_e.valueOf():_e;_e=e(er)?er+"":er}if(typeof _e!="string")return _e===0?_e:+_e;_e=a(_e);var rr=d.test(_e);return rr||g.test(_e)?b(_e.slice(2),rr?2:8):c.test(_e)?o:+_e}return toNumber_1=j,toNumber_1}var toFinite_1,hasRequiredToFinite;function requireToFinite(){if(hasRequiredToFinite)return toFinite_1;hasRequiredToFinite=1;var a=requireToNumber(),e=1/0,s=17976931348623157e292;function o(c){if(!c)return c===0?c:0;if(c=a(c),c===e||c===-e){var d=c<0?-1:1;return d*s}return c===c?c:0}return toFinite_1=o,toFinite_1}var toInteger_1,hasRequiredToInteger;function requireToInteger(){if(hasRequiredToInteger)return toInteger_1;hasRequiredToInteger=1;var a=requireToFinite();function e(s){var o=a(s),c=o%1;return o===o?c?o-c:o:0}return toInteger_1=e,toInteger_1}var findIndex_1,hasRequiredFindIndex;function requireFindIndex(){if(hasRequiredFindIndex)return findIndex_1;hasRequiredFindIndex=1;var a=require_baseFindIndex(),e=require_baseIteratee(),s=requireToInteger(),o=Math.max;function c(d,g,b){var j=d==null?0:d.length;if(!j)return-1;var _e=b==null?0:s(b);return _e<0&&(_e=o(j+_e,0)),a(d,e(g,3),_e)}return findIndex_1=c,findIndex_1}var find_1,hasRequiredFind;function requireFind(){if(hasRequiredFind)return find_1;hasRequiredFind=1;var a=require_createFind(),e=requireFindIndex(),s=a(e);return find_1=s,find_1}var flatten_1,hasRequiredFlatten;function requireFlatten(){if(hasRequiredFlatten)return flatten_1;hasRequiredFlatten=1;var a=require_baseFlatten();function e(s){var o=s==null?0:s.length;return o?a(s,1):[]}return flatten_1=e,flatten_1}var forIn_1,hasRequiredForIn;function requireForIn(){if(hasRequiredForIn)return forIn_1;hasRequiredForIn=1;var a=require_baseFor(),e=require_castFunction(),s=requireKeysIn();function o(c,d){return c==null?c:a(c,e(d),s)}return forIn_1=o,forIn_1}var last_1,hasRequiredLast;function requireLast(){if(hasRequiredLast)return last_1;hasRequiredLast=1;function a(e){var s=e==null?0:e.length;return s?e[s-1]:void 0}return last_1=a,last_1}var mapValues_1,hasRequiredMapValues;function requireMapValues(){if(hasRequiredMapValues)return mapValues_1;hasRequiredMapValues=1;var a=require_baseAssignValue(),e=require_baseForOwn(),s=require_baseIteratee();function o(c,d){var g={};return d=s(d,3),e(c,function(b,j,_e){a(g,j,d(b,j,_e))}),g}return mapValues_1=o,mapValues_1}var _baseExtremum,hasRequired_baseExtremum;function require_baseExtremum(){if(hasRequired_baseExtremum)return _baseExtremum;hasRequired_baseExtremum=1;var a=requireIsSymbol();function e(s,o,c){for(var d=-1,g=s.length;++d<g;){var b=s[d],j=o(b);if(j!=null&&(_e===void 0?j===j&&!a(j):c(j,_e)))var _e=j,er=b}return er}return _baseExtremum=e,_baseExtremum}var _baseGt,hasRequired_baseGt;function require_baseGt(){if(hasRequired_baseGt)return _baseGt;hasRequired_baseGt=1;function a(e,s){return e>s}return _baseGt=a,_baseGt}var max_1,hasRequiredMax;function requireMax(){if(hasRequiredMax)return max_1;hasRequiredMax=1;var a=require_baseExtremum(),e=require_baseGt(),s=requireIdentity();function o(c){return c&&c.length?a(c,s,e):void 0}return max_1=o,max_1}var _assignMergeValue,hasRequired_assignMergeValue;function require_assignMergeValue(){if(hasRequired_assignMergeValue)return _assignMergeValue;hasRequired_assignMergeValue=1;var a=require_baseAssignValue(),e=requireEq();function s(o,c,d){(d!==void 0&&!e(o[c],d)||d===void 0&&!(c in o))&&a(o,c,d)}return _assignMergeValue=s,_assignMergeValue}var isPlainObject_1,hasRequiredIsPlainObject;function requireIsPlainObject(){if(hasRequiredIsPlainObject)return isPlainObject_1;hasRequiredIsPlainObject=1;var a=require_baseGetTag(),e=require_getPrototype(),s=requireIsObjectLike(),o="[object Object]",c=Function.prototype,d=Object.prototype,g=c.toString,b=d.hasOwnProperty,j=g.call(Object);function _e(er){if(!s(er)||a(er)!=o)return!1;var rr=e(er);if(rr===null)return!0;var tr=b.call(rr,"constructor")&&rr.constructor;return typeof tr=="function"&&tr instanceof tr&&g.call(tr)==j}return isPlainObject_1=_e,isPlainObject_1}var _safeGet,hasRequired_safeGet;function require_safeGet(){if(hasRequired_safeGet)return _safeGet;hasRequired_safeGet=1;function a(e,s){if(!(s==="constructor"&&typeof e[s]=="function")&&s!="__proto__")return e[s]}return _safeGet=a,_safeGet}var toPlainObject_1,hasRequiredToPlainObject;function requireToPlainObject(){if(hasRequiredToPlainObject)return toPlainObject_1;hasRequiredToPlainObject=1;var a=require_copyObject(),e=requireKeysIn();function s(o){return a(o,e(o))}return toPlainObject_1=s,toPlainObject_1}var _baseMergeDeep,hasRequired_baseMergeDeep;function require_baseMergeDeep(){if(hasRequired_baseMergeDeep)return _baseMergeDeep;hasRequired_baseMergeDeep=1;var a=require_assignMergeValue(),e=require_cloneBuffer(),s=require_cloneTypedArray(),o=require_copyArray(),c=require_initCloneObject(),d=requireIsArguments(),g=requireIsArray(),b=requireIsArrayLikeObject(),j=requireIsBuffer(),_e=requireIsFunction(),er=requireIsObject(),rr=requireIsPlainObject(),tr=requireIsTypedArray(),nr=require_safeGet(),ar=requireToPlainObject();function lr(or,ir,sr,ur,cr,fr,hr){var dr=nr(or,sr),vr=nr(ir,sr),gr=hr.get(vr);if(gr){a(or,sr,gr);return}var pr=fr?fr(dr,vr,sr+"",or,ir,hr):void 0,mr=pr===void 0;if(mr){var yr=g(vr),br=!yr&&j(vr),Er=!yr&&!br&&tr(vr);pr=vr,yr||br||Er?g(dr)?pr=dr:b(dr)?pr=o(dr):br?(mr=!1,pr=e(vr,!0)):Er?(mr=!1,pr=s(vr,!0)):pr=[]:rr(vr)||d(vr)?(pr=dr,d(dr)?pr=ar(dr):(!er(dr)||_e(dr))&&(pr=c(vr))):mr=!1}mr&&(hr.set(vr,pr),cr(pr,vr,ur,fr,hr),hr.delete(vr)),a(or,sr,pr)}return _baseMergeDeep=lr,_baseMergeDeep}var _baseMerge,hasRequired_baseMerge;function require_baseMerge(){if(hasRequired_baseMerge)return _baseMerge;hasRequired_baseMerge=1;var a=require_Stack(),e=require_assignMergeValue(),s=require_baseFor(),o=require_baseMergeDeep(),c=requireIsObject(),d=requireKeysIn(),g=require_safeGet();function b(j,_e,er,rr,tr){j!==_e&&s(_e,function(nr,ar){if(tr||(tr=new a),c(nr))o(j,_e,ar,er,b,rr,tr);else{var lr=rr?rr(g(j,ar),nr,ar+"",j,_e,tr):void 0;lr===void 0&&(lr=nr),e(j,ar,lr)}},d)}return _baseMerge=b,_baseMerge}var _createAssigner,hasRequired_createAssigner;function require_createAssigner(){if(hasRequired_createAssigner)return _createAssigner;hasRequired_createAssigner=1;var a=require_baseRest(),e=require_isIterateeCall();function s(o){return a(function(c,d){var g=-1,b=d.length,j=b>1?d[b-1]:void 0,_e=b>2?d[2]:void 0;for(j=o.length>3&&typeof j=="function"?(b--,j):void 0,_e&&e(d[0],d[1],_e)&&(j=b<3?void 0:j,b=1),c=Object(c);++g<b;){var er=d[g];er&&o(c,er,g,j)}return c})}return _createAssigner=s,_createAssigner}var merge_1,hasRequiredMerge;function requireMerge(){if(hasRequiredMerge)return merge_1;hasRequiredMerge=1;var a=require_baseMerge(),e=require_createAssigner(),s=e(function(o,c,d){a(o,c,d)});return merge_1=s,merge_1}var _baseLt,hasRequired_baseLt;function require_baseLt(){if(hasRequired_baseLt)return _baseLt;hasRequired_baseLt=1;function a(e,s){return e<s}return _baseLt=a,_baseLt}var min_1,hasRequiredMin;function requireMin(){if(hasRequiredMin)return min_1;hasRequiredMin=1;var a=require_baseExtremum(),e=require_baseLt(),s=requireIdentity();function o(c){return c&&c.length?a(c,s,e):void 0}return min_1=o,min_1}var minBy_1,hasRequiredMinBy;function requireMinBy(){if(hasRequiredMinBy)return minBy_1;hasRequiredMinBy=1;var a=require_baseExtremum(),e=require_baseIteratee(),s=require_baseLt();function o(c,d){return c&&c.length?a(c,e(d,2),s):void 0}return minBy_1=o,minBy_1}var now_1,hasRequiredNow;function requireNow(){if(hasRequiredNow)return now_1;hasRequiredNow=1;var a=require_root(),e=function(){return a.Date.now()};return now_1=e,now_1}var _baseSet,hasRequired_baseSet;function require_baseSet(){if(hasRequired_baseSet)return _baseSet;hasRequired_baseSet=1;var a=require_assignValue(),e=require_castPath(),s=require_isIndex(),o=requireIsObject(),c=require_toKey();function d(g,b,j,_e){if(!o(g))return g;b=e(b,g);for(var er=-1,rr=b.length,tr=rr-1,nr=g;nr!=null&&++er<rr;){var ar=c(b[er]),lr=j;if(ar==="__proto__"||ar==="constructor"||ar==="prototype")return g;if(er!=tr){var or=nr[ar];lr=_e?_e(or,ar,nr):void 0,lr===void 0&&(lr=o(or)?or:s(b[er+1])?[]:{})}a(nr,ar,lr),nr=nr[ar]}return g}return _baseSet=d,_baseSet}var _basePickBy,hasRequired_basePickBy;function require_basePickBy(){if(hasRequired_basePickBy)return _basePickBy;hasRequired_basePickBy=1;var a=require_baseGet(),e=require_baseSet(),s=require_castPath();function o(c,d,g){for(var b=-1,j=d.length,_e={};++b<j;){var er=d[b],rr=a(c,er);g(rr,er)&&e(_e,s(er,c),rr)}return _e}return _basePickBy=o,_basePickBy}var _basePick,hasRequired_basePick;function require_basePick(){if(hasRequired_basePick)return _basePick;hasRequired_basePick=1;var a=require_basePickBy(),e=requireHasIn();function s(o,c){return a(o,c,function(d,g){return e(o,g)})}return _basePick=s,_basePick}var _flatRest,hasRequired_flatRest;function require_flatRest(){if(hasRequired_flatRest)return _flatRest;hasRequired_flatRest=1;var a=requireFlatten(),e=require_overRest(),s=require_setToString();function o(c){return s(e(c,void 0,a),c+"")}return _flatRest=o,_flatRest}var pick_1,hasRequiredPick;function requirePick(){if(hasRequiredPick)return pick_1;hasRequiredPick=1;var a=require_basePick(),e=require_flatRest(),s=e(function(o,c){return o==null?{}:a(o,c)});return pick_1=s,pick_1}var _baseRange,hasRequired_baseRange;function require_baseRange(){if(hasRequired_baseRange)return _baseRange;hasRequired_baseRange=1;var a=Math.ceil,e=Math.max;function s(o,c,d,g){for(var b=-1,j=e(a((c-o)/(d||1)),0),_e=Array(j);j--;)_e[g?j:++b]=o,o+=d;return _e}return _baseRange=s,_baseRange}var _createRange,hasRequired_createRange;function require_createRange(){if(hasRequired_createRange)return _createRange;hasRequired_createRange=1;var a=require_baseRange(),e=require_isIterateeCall(),s=requireToFinite();function o(c){return function(d,g,b){return b&&typeof b!="number"&&e(d,g,b)&&(g=b=void 0),d=s(d),g===void 0?(g=d,d=0):g=s(g),b=b===void 0?d<g?1:-1:s(b),a(d,g,b,c)}}return _createRange=o,_createRange}var range_1,hasRequiredRange;function requireRange(){if(hasRequiredRange)return range_1;hasRequiredRange=1;var a=require_createRange(),e=a();return range_1=e,range_1}var _baseSortBy,hasRequired_baseSortBy;function require_baseSortBy(){if(hasRequired_baseSortBy)return _baseSortBy;hasRequired_baseSortBy=1;function a(e,s){var o=e.length;for(e.sort(s);o--;)e[o]=e[o].value;return e}return _baseSortBy=a,_baseSortBy}var _compareAscending,hasRequired_compareAscending;function require_compareAscending(){if(hasRequired_compareAscending)return _compareAscending;hasRequired_compareAscending=1;var a=requireIsSymbol();function e(s,o){if(s!==o){var c=s!==void 0,d=s===null,g=s===s,b=a(s),j=o!==void 0,_e=o===null,er=o===o,rr=a(o);if(!_e&&!rr&&!b&&s>o||b&&j&&er&&!_e&&!rr||d&&j&&er||!c&&er||!g)return 1;if(!d&&!b&&!rr&&s<o||rr&&c&&g&&!d&&!b||_e&&c&&g||!j&&g||!er)return-1}return 0}return _compareAscending=e,_compareAscending}var _compareMultiple,hasRequired_compareMultiple;function require_compareMultiple(){if(hasRequired_compareMultiple)return _compareMultiple;hasRequired_compareMultiple=1;var a=require_compareAscending();function e(s,o,c){for(var d=-1,g=s.criteria,b=o.criteria,j=g.length,_e=c.length;++d<j;){var er=a(g[d],b[d]);if(er){if(d>=_e)return er;var rr=c[d];return er*(rr=="desc"?-1:1)}}return s.index-o.index}return _compareMultiple=e,_compareMultiple}var _baseOrderBy,hasRequired_baseOrderBy;function require_baseOrderBy(){if(hasRequired_baseOrderBy)return _baseOrderBy;hasRequired_baseOrderBy=1;var a=require_arrayMap(),e=require_baseGet(),s=require_baseIteratee(),o=require_baseMap(),c=require_baseSortBy(),d=require_baseUnary(),g=require_compareMultiple(),b=requireIdentity(),j=requireIsArray();function _e(er,rr,tr){rr.length?rr=a(rr,function(lr){return j(lr)?function(or){return e(or,lr.length===1?lr[0]:lr)}:lr}):rr=[b];var nr=-1;rr=a(rr,d(s));var ar=o(er,function(lr,or,ir){var sr=a(rr,function(ur){return ur(lr)});return{criteria:sr,index:++nr,value:lr}});return c(ar,function(lr,or){return g(lr,or,tr)})}return _baseOrderBy=_e,_baseOrderBy}var sortBy_1,hasRequiredSortBy;function requireSortBy(){if(hasRequiredSortBy)return sortBy_1;hasRequiredSortBy=1;var a=require_baseFlatten(),e=require_baseOrderBy(),s=require_baseRest(),o=require_isIterateeCall(),c=s(function(d,g){if(d==null)return[];var b=g.length;return b>1&&o(d,g[0],g[1])?g=[]:b>2&&o(g[0],g[1],g[2])&&(g=[g[0]]),e(d,a(g,1),[])});return sortBy_1=c,sortBy_1}var uniqueId_1,hasRequiredUniqueId;function requireUniqueId(){if(hasRequiredUniqueId)return uniqueId_1;hasRequiredUniqueId=1;var a=requireToString(),e=0;function s(o){var c=++e;return a(o)+c}return uniqueId_1=s,uniqueId_1}var _baseZipObject,hasRequired_baseZipObject;function require_baseZipObject(){if(hasRequired_baseZipObject)return _baseZipObject;hasRequired_baseZipObject=1;function a(e,s,o){for(var c=-1,d=e.length,g=s.length,b={};++c<d;){var j=c<g?s[c]:void 0;o(b,e[c],j)}return b}return _baseZipObject=a,_baseZipObject}var zipObject_1,hasRequiredZipObject;function requireZipObject(){if(hasRequiredZipObject)return zipObject_1;hasRequiredZipObject=1;var a=require_assignValue(),e=require_baseZipObject();function s(o,c){return e(o||[],c||[],a)}return zipObject_1=s,zipObject_1}var lodash_1,hasRequiredLodash;function requireLodash(){if(hasRequiredLodash)return lodash_1;hasRequiredLodash=1;var a;if(typeof commonjsRequire=="function")try{a={cloneDeep:requireCloneDeep(),constant:requireConstant(),defaults:requireDefaults(),each:requireEach(),filter:requireFilter(),find:requireFind(),flatten:requireFlatten(),forEach:requireForEach(),forIn:requireForIn(),has:requireHas(),isUndefined:requireIsUndefined(),last:requireLast(),map:requireMap(),mapValues:requireMapValues(),max:requireMax(),merge:requireMerge(),min:requireMin(),minBy:requireMinBy(),now:requireNow(),pick:requirePick(),range:requireRange(),reduce:requireReduce(),sortBy:requireSortBy(),uniqueId:requireUniqueId(),values:requireValues(),zipObject:requireZipObject()}}catch{}return a||(a=window._),lodash_1=a,lodash_1}var list,hasRequiredList;function requireList(){if(hasRequiredList)return list;hasRequiredList=1,list=a;function a(){var o={};o._next=o._prev=o,this._sentinel=o}a.prototype.dequeue=function(){var o=this._sentinel,c=o._prev;if(c!==o)return e(c),c},a.prototype.enqueue=function(o){var c=this._sentinel;o._prev&&o._next&&e(o),o._next=c._next,c._next._prev=o,c._next=o,o._prev=c},a.prototype.toString=function(){for(var o=[],c=this._sentinel,d=c._prev;d!==c;)o.push(JSON.stringify(d,s)),d=d._prev;return"["+o.join(", ")+"]"};function e(o){o._prev._next=o._next,o._next._prev=o._prev,delete o._next,delete o._prev}function s(o,c){if(o!=="_next"&&o!=="_prev")return c}return list}var greedyFas,hasRequiredGreedyFas;function requireGreedyFas(){if(hasRequiredGreedyFas)return greedyFas;hasRequiredGreedyFas=1;var a=requireLodash(),e=requireGraphlib().Graph,s=requireList();greedyFas=c;var o=a.constant(1);function c(_e,er){if(_e.nodeCount()<=1)return[];var rr=b(_e,er||o),tr=d(rr.graph,rr.buckets,rr.zeroIdx);return a.flatten(a.map(tr,function(nr){return _e.outEdges(nr.v,nr.w)}),!0)}function d(_e,er,rr){for(var tr=[],nr=er[er.length-1],ar=er[0],lr;_e.nodeCount();){for(;lr=ar.dequeue();)g(_e,er,rr,lr);for(;lr=nr.dequeue();)g(_e,er,rr,lr);if(_e.nodeCount()){for(var or=er.length-2;or>0;--or)if(lr=er[or].dequeue(),lr){tr=tr.concat(g(_e,er,rr,lr,!0));break}}}return tr}function g(_e,er,rr,tr,nr){var ar=nr?[]:void 0;return a.forEach(_e.inEdges(tr.v),function(lr){var or=_e.edge(lr),ir=_e.node(lr.v);nr&&ar.push({v:lr.v,w:lr.w}),ir.out-=or,j(er,rr,ir)}),a.forEach(_e.outEdges(tr.v),function(lr){var or=_e.edge(lr),ir=lr.w,sr=_e.node(ir);sr.in-=or,j(er,rr,sr)}),_e.removeNode(tr.v),ar}function b(_e,er){var rr=new e,tr=0,nr=0;a.forEach(_e.nodes(),function(or){rr.setNode(or,{v:or,in:0,out:0})}),a.forEach(_e.edges(),function(or){var ir=rr.edge(or.v,or.w)||0,sr=er(or),ur=ir+sr;rr.setEdge(or.v,or.w,ur),nr=Math.max(nr,rr.node(or.v).out+=sr),tr=Math.max(tr,rr.node(or.w).in+=sr)});var ar=a.range(nr+tr+3).map(function(){return new s}),lr=tr+1;return a.forEach(rr.nodes(),function(or){j(ar,lr,rr.node(or))}),{graph:rr,buckets:ar,zeroIdx:lr}}function j(_e,er,rr){rr.out?rr.in?_e[rr.out-rr.in+er].enqueue(rr):_e[_e.length-1].enqueue(rr):_e[0].enqueue(rr)}return greedyFas}var acyclic,hasRequiredAcyclic;function requireAcyclic(){if(hasRequiredAcyclic)return acyclic;hasRequiredAcyclic=1;var a=requireLodash(),e=requireGreedyFas();acyclic={run:s,undo:c};function s(d){var g=d.graph().acyclicer==="greedy"?e(d,b(d)):o(d);a.forEach(g,function(j){var _e=d.edge(j);d.removeEdge(j),_e.forwardName=j.name,_e.reversed=!0,d.setEdge(j.w,j.v,_e,a.uniqueId("rev"))});function b(j){return function(_e){return j.edge(_e).weight}}}function o(d){var g=[],b={},j={};function _e(er){a.has(j,er)||(j[er]=!0,b[er]=!0,a.forEach(d.outEdges(er),function(rr){a.has(b,rr.w)?g.push(rr):_e(rr.w)}),delete b[er])}return a.forEach(d.nodes(),_e),g}function c(d){a.forEach(d.edges(),function(g){var b=d.edge(g);if(b.reversed){d.removeEdge(g);var j=b.forwardName;delete b.reversed,delete b.forwardName,d.setEdge(g.w,g.v,b,j)}})}return acyclic}var util$1,hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return util$1;hasRequiredUtil$1=1;var a=requireLodash(),e=requireGraphlib().Graph;util$1={addDummyNode:s,simplify:o,asNonCompoundGraph:c,successorWeights:d,predecessorWeights:g,intersectRect:b,buildLayerMatrix:j,normalizeRanks:_e,removeEmptyRanks:er,addBorderNode:rr,maxRank:tr,partition:nr,time:ar,notime:lr};function s(or,ir,sr,ur){var cr;do cr=a.uniqueId(ur);while(or.hasNode(cr));return sr.dummy=ir,or.setNode(cr,sr),cr}function o(or){var ir=new e().setGraph(or.graph());return a.forEach(or.nodes(),function(sr){ir.setNode(sr,or.node(sr))}),a.forEach(or.edges(),function(sr){var ur=ir.edge(sr.v,sr.w)||{weight:0,minlen:1},cr=or.edge(sr);ir.setEdge(sr.v,sr.w,{weight:ur.weight+cr.weight,minlen:Math.max(ur.minlen,cr.minlen)})}),ir}function c(or){var ir=new e({multigraph:or.isMultigraph()}).setGraph(or.graph());return a.forEach(or.nodes(),function(sr){or.children(sr).length||ir.setNode(sr,or.node(sr))}),a.forEach(or.edges(),function(sr){ir.setEdge(sr,or.edge(sr))}),ir}function d(or){var ir=a.map(or.nodes(),function(sr){var ur={};return a.forEach(or.outEdges(sr),function(cr){ur[cr.w]=(ur[cr.w]||0)+or.edge(cr).weight}),ur});return a.zipObject(or.nodes(),ir)}function g(or){var ir=a.map(or.nodes(),function(sr){var ur={};return a.forEach(or.inEdges(sr),function(cr){ur[cr.v]=(ur[cr.v]||0)+or.edge(cr).weight}),ur});return a.zipObject(or.nodes(),ir)}function b(or,ir){var sr=or.x,ur=or.y,cr=ir.x-sr,fr=ir.y-ur,hr=or.width/2,dr=or.height/2;if(!cr&&!fr)throw new Error("Not possible to find intersection inside of the rectangle");var vr,gr;return Math.abs(fr)*hr>Math.abs(cr)*dr?(fr<0&&(dr=-dr),vr=dr*cr/fr,gr=dr):(cr<0&&(hr=-hr),vr=hr,gr=hr*fr/cr),{x:sr+vr,y:ur+gr}}function j(or){var ir=a.map(a.range(tr(or)+1),function(){return[]});return a.forEach(or.nodes(),function(sr){var ur=or.node(sr),cr=ur.rank;a.isUndefined(cr)||(ir[cr][ur.order]=sr)}),ir}function _e(or){var ir=a.min(a.map(or.nodes(),function(sr){return or.node(sr).rank}));a.forEach(or.nodes(),function(sr){var ur=or.node(sr);a.has(ur,"rank")&&(ur.rank-=ir)})}function er(or){var ir=a.min(a.map(or.nodes(),function(fr){return or.node(fr).rank})),sr=[];a.forEach(or.nodes(),function(fr){var hr=or.node(fr).rank-ir;sr[hr]||(sr[hr]=[]),sr[hr].push(fr)});var ur=0,cr=or.graph().nodeRankFactor;a.forEach(sr,function(fr,hr){a.isUndefined(fr)&&hr%cr!==0?--ur:ur&&a.forEach(fr,function(dr){or.node(dr).rank+=ur})})}function rr(or,ir,sr,ur){var cr={width:0,height:0};return arguments.length>=4&&(cr.rank=sr,cr.order=ur),s(or,"border",cr,ir)}function tr(or){return a.max(a.map(or.nodes(),function(ir){var sr=or.node(ir).rank;if(!a.isUndefined(sr))return sr}))}function nr(or,ir){var sr={lhs:[],rhs:[]};return a.forEach(or,function(ur){ir(ur)?sr.lhs.push(ur):sr.rhs.push(ur)}),sr}function ar(or,ir){var sr=a.now();try{return ir()}finally{console.log(or+" time: "+(a.now()-sr)+"ms")}}function lr(or,ir){return ir()}return util$1}var normalize,hasRequiredNormalize;function requireNormalize(){if(hasRequiredNormalize)return normalize;hasRequiredNormalize=1;var a=requireLodash(),e=requireUtil$1();normalize={run:s,undo:c};function s(d){d.graph().dummyChains=[],a.forEach(d.edges(),function(g){o(d,g)})}function o(d,g){var b=g.v,j=d.node(b).rank,_e=g.w,er=d.node(_e).rank,rr=g.name,tr=d.edge(g),nr=tr.labelRank;if(er!==j+1){d.removeEdge(g);var ar,lr,or;for(or=0,++j;j<er;++or,++j)tr.points=[],lr={width:0,height:0,edgeLabel:tr,edgeObj:g,rank:j},ar=e.addDummyNode(d,"edge",lr,"_d"),j===nr&&(lr.width=tr.width,lr.height=tr.height,lr.dummy="edge-label",lr.labelpos=tr.labelpos),d.setEdge(b,ar,{weight:tr.weight},rr),or===0&&d.graph().dummyChains.push(ar),b=ar;d.setEdge(b,_e,{weight:tr.weight},rr)}}function c(d){a.forEach(d.graph().dummyChains,function(g){var b=d.node(g),j=b.edgeLabel,_e;for(d.setEdge(b.edgeObj,j);b.dummy;)_e=d.successors(g)[0],d.removeNode(g),j.points.push({x:b.x,y:b.y}),b.dummy==="edge-label"&&(j.x=b.x,j.y=b.y,j.width=b.width,j.height=b.height),g=_e,b=d.node(g)})}return normalize}var util,hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util;hasRequiredUtil=1;var a=requireLodash();util={longestPath:e,slack:s};function e(o){var c={};function d(g){var b=o.node(g);if(a.has(c,g))return b.rank;c[g]=!0;var j=a.min(a.map(o.outEdges(g),function(_e){return d(_e.w)-o.edge(_e).minlen}));return(j===Number.POSITIVE_INFINITY||j===void 0||j===null)&&(j=0),b.rank=j}a.forEach(o.sources(),d)}function s(o,c){return o.node(c.w).rank-o.node(c.v).rank-o.edge(c).minlen}return util}var feasibleTree_1,hasRequiredFeasibleTree;function requireFeasibleTree(){if(hasRequiredFeasibleTree)return feasibleTree_1;hasRequiredFeasibleTree=1;var a=requireLodash(),e=requireGraphlib().Graph,s=requireUtil().slack;feasibleTree_1=o;function o(b){var j=new e({directed:!1}),_e=b.nodes()[0],er=b.nodeCount();j.setNode(_e,{});for(var rr,tr;c(j,b)<er;)rr=d(j,b),tr=j.hasNode(rr.v)?s(b,rr):-s(b,rr),g(j,b,tr);return j}function c(b,j){function _e(er){a.forEach(j.nodeEdges(er),function(rr){var tr=rr.v,nr=er===tr?rr.w:tr;!b.hasNode(nr)&&!s(j,rr)&&(b.setNode(nr,{}),b.setEdge(er,nr,{}),_e(nr))})}return a.forEach(b.nodes(),_e),b.nodeCount()}function d(b,j){return a.minBy(j.edges(),function(_e){if(b.hasNode(_e.v)!==b.hasNode(_e.w))return s(j,_e)})}function g(b,j,_e){a.forEach(b.nodes(),function(er){j.node(er).rank+=_e})}return feasibleTree_1}var networkSimplex_1,hasRequiredNetworkSimplex;function requireNetworkSimplex(){if(hasRequiredNetworkSimplex)return networkSimplex_1;hasRequiredNetworkSimplex=1;var a=requireLodash(),e=requireFeasibleTree(),s=requireUtil().slack,o=requireUtil().longestPath,c=requireGraphlib().alg.preorder,d=requireGraphlib().alg.postorder,g=requireUtil$1().simplify;networkSimplex_1=b,b.initLowLimValues=rr,b.initCutValues=j,b.calcCutValue=er,b.leaveEdge=nr,b.enterEdge=ar,b.exchangeEdges=lr;function b(ur){ur=g(ur),o(ur);var cr=e(ur);rr(cr),j(cr,ur);for(var fr,hr;fr=nr(cr);)hr=ar(cr,ur,fr),lr(cr,ur,fr,hr)}function j(ur,cr){var fr=d(ur,ur.nodes());fr=fr.slice(0,fr.length-1),a.forEach(fr,function(hr){_e(ur,cr,hr)})}function _e(ur,cr,fr){var hr=ur.node(fr),dr=hr.parent;ur.edge(fr,dr).cutvalue=er(ur,cr,fr)}function er(ur,cr,fr){var hr=ur.node(fr),dr=hr.parent,vr=!0,gr=cr.edge(fr,dr),pr=0;return gr||(vr=!1,gr=cr.edge(dr,fr)),pr=gr.weight,a.forEach(cr.nodeEdges(fr),function(mr){var yr=mr.v===fr,br=yr?mr.w:mr.v;if(br!==dr){var Er=yr===vr,_r=cr.edge(mr).weight;if(pr+=Er?_r:-_r,ir(ur,fr,br)){var Rr=ur.edge(fr,br).cutvalue;pr+=Er?-Rr:Rr}}}),pr}function rr(ur,cr){arguments.length<2&&(cr=ur.nodes()[0]),tr(ur,{},1,cr)}function tr(ur,cr,fr,hr,dr){var vr=fr,gr=ur.node(hr);return cr[hr]=!0,a.forEach(ur.neighbors(hr),function(pr){a.has(cr,pr)||(fr=tr(ur,cr,fr,pr,hr))}),gr.low=vr,gr.lim=fr++,dr?gr.parent=dr:delete gr.parent,fr}function nr(ur){return a.find(ur.edges(),function(cr){return ur.edge(cr).cutvalue<0})}function ar(ur,cr,fr){var hr=fr.v,dr=fr.w;cr.hasEdge(hr,dr)||(hr=fr.w,dr=fr.v);var vr=ur.node(hr),gr=ur.node(dr),pr=vr,mr=!1;vr.lim>gr.lim&&(pr=gr,mr=!0);var yr=a.filter(cr.edges(),function(br){return mr===sr(ur,ur.node(br.v),pr)&&mr!==sr(ur,ur.node(br.w),pr)});return a.minBy(yr,function(br){return s(cr,br)})}function lr(ur,cr,fr,hr){var dr=fr.v,vr=fr.w;ur.removeEdge(dr,vr),ur.setEdge(hr.v,hr.w,{}),rr(ur),j(ur,cr),or(ur,cr)}function or(ur,cr){var fr=a.find(ur.nodes(),function(dr){return!cr.node(dr).parent}),hr=c(ur,fr);hr=hr.slice(1),a.forEach(hr,function(dr){var vr=ur.node(dr).parent,gr=cr.edge(dr,vr),pr=!1;gr||(gr=cr.edge(vr,dr),pr=!0),cr.node(dr).rank=cr.node(vr).rank+(pr?gr.minlen:-gr.minlen)})}function ir(ur,cr,fr){return ur.hasEdge(cr,fr)}function sr(ur,cr,fr){return fr.low<=cr.lim&&cr.lim<=fr.lim}return networkSimplex_1}var rank_1,hasRequiredRank;function requireRank(){if(hasRequiredRank)return rank_1;hasRequiredRank=1;var a=requireUtil(),e=a.longestPath,s=requireFeasibleTree(),o=requireNetworkSimplex();rank_1=c;function c(j){switch(j.graph().ranker){case"network-simplex":b(j);break;case"tight-tree":g(j);break;case"longest-path":d(j);break;default:b(j)}}var d=e;function g(j){e(j),s(j)}function b(j){o(j)}return rank_1}var parentDummyChains_1,hasRequiredParentDummyChains;function requireParentDummyChains(){if(hasRequiredParentDummyChains)return parentDummyChains_1;hasRequiredParentDummyChains=1;var a=requireLodash();parentDummyChains_1=e;function e(c){var d=o(c);a.forEach(c.graph().dummyChains,function(g){for(var b=c.node(g),j=b.edgeObj,_e=s(c,d,j.v,j.w),er=_e.path,rr=_e.lca,tr=0,nr=er[tr],ar=!0;g!==j.w;){if(b=c.node(g),ar){for(;(nr=er[tr])!==rr&&c.node(nr).maxRank<b.rank;)tr++;nr===rr&&(ar=!1)}if(!ar){for(;tr<er.length-1&&c.node(nr=er[tr+1]).minRank<=b.rank;)tr++;nr=er[tr]}c.setParent(g,nr),g=c.successors(g)[0]}})}function s(c,d,g,b){var j=[],_e=[],er=Math.min(d[g].low,d[b].low),rr=Math.max(d[g].lim,d[b].lim),tr,nr;tr=g;do tr=c.parent(tr),j.push(tr);while(tr&&(d[tr].low>er||rr>d[tr].lim));for(nr=tr,tr=b;(tr=c.parent(tr))!==nr;)_e.push(tr);return{path:j.concat(_e.reverse()),lca:nr}}function o(c){var d={},g=0;function b(j){var _e=g;a.forEach(c.children(j),b),d[j]={low:_e,lim:g++}}return a.forEach(c.children(),b),d}return parentDummyChains_1}var nestingGraph,hasRequiredNestingGraph;function requireNestingGraph(){if(hasRequiredNestingGraph)return nestingGraph;hasRequiredNestingGraph=1;var a=requireLodash(),e=requireUtil$1();nestingGraph={run:s,cleanup:g};function s(b){var j=e.addDummyNode(b,"root",{},"_root"),_e=c(b),er=a.max(a.values(_e))-1,rr=2*er+1;b.graph().nestingRoot=j,a.forEach(b.edges(),function(nr){b.edge(nr).minlen*=rr});var tr=d(b)+1;a.forEach(b.children(),function(nr){o(b,j,rr,tr,er,_e,nr)}),b.graph().nodeRankFactor=rr}function o(b,j,_e,er,rr,tr,nr){var ar=b.children(nr);if(!ar.length){nr!==j&&b.setEdge(j,nr,{weight:0,minlen:_e});return}var lr=e.addBorderNode(b,"_bt"),or=e.addBorderNode(b,"_bb"),ir=b.node(nr);b.setParent(lr,nr),ir.borderTop=lr,b.setParent(or,nr),ir.borderBottom=or,a.forEach(ar,function(sr){o(b,j,_e,er,rr,tr,sr);var ur=b.node(sr),cr=ur.borderTop?ur.borderTop:sr,fr=ur.borderBottom?ur.borderBottom:sr,hr=ur.borderTop?er:2*er,dr=cr!==fr?1:rr-tr[nr]+1;b.setEdge(lr,cr,{weight:hr,minlen:dr,nestingEdge:!0}),b.setEdge(fr,or,{weight:hr,minlen:dr,nestingEdge:!0})}),b.parent(nr)||b.setEdge(j,lr,{weight:0,minlen:rr+tr[nr]})}function c(b){var j={};function _e(er,rr){var tr=b.children(er);tr&&tr.length&&a.forEach(tr,function(nr){_e(nr,rr+1)}),j[er]=rr}return a.forEach(b.children(),function(er){_e(er,1)}),j}function d(b){return a.reduce(b.edges(),function(j,_e){return j+b.edge(_e).weight},0)}function g(b){var j=b.graph();b.removeNode(j.nestingRoot),delete j.nestingRoot,a.forEach(b.edges(),function(_e){var er=b.edge(_e);er.nestingEdge&&b.removeEdge(_e)})}return nestingGraph}var addBorderSegments_1,hasRequiredAddBorderSegments;function requireAddBorderSegments(){if(hasRequiredAddBorderSegments)return addBorderSegments_1;hasRequiredAddBorderSegments=1;var a=requireLodash(),e=requireUtil$1();addBorderSegments_1=s;function s(c){function d(g){var b=c.children(g),j=c.node(g);if(b.length&&a.forEach(b,d),a.has(j,"minRank")){j.borderLeft=[],j.borderRight=[];for(var _e=j.minRank,er=j.maxRank+1;_e<er;++_e)o(c,"borderLeft","_bl",g,j,_e),o(c,"borderRight","_br",g,j,_e)}}a.forEach(c.children(),d)}function o(c,d,g,b,j,_e){var er={width:0,height:0,rank:_e,borderType:d},rr=j[d][_e-1],tr=e.addDummyNode(c,"border",er,g);j[d][_e]=tr,c.setParent(tr,b),rr&&c.setEdge(rr,tr,{weight:1})}return addBorderSegments_1}var coordinateSystem,hasRequiredCoordinateSystem;function requireCoordinateSystem(){if(hasRequiredCoordinateSystem)return coordinateSystem;hasRequiredCoordinateSystem=1;var a=requireLodash();coordinateSystem={adjust:e,undo:s};function e(_e){var er=_e.graph().rankdir.toLowerCase();(er==="lr"||er==="rl")&&o(_e)}function s(_e){var er=_e.graph().rankdir.toLowerCase();(er==="bt"||er==="rl")&&d(_e),(er==="lr"||er==="rl")&&(b(_e),o(_e))}function o(_e){a.forEach(_e.nodes(),function(er){c(_e.node(er))}),a.forEach(_e.edges(),function(er){c(_e.edge(er))})}function c(_e){var er=_e.width;_e.width=_e.height,_e.height=er}function d(_e){a.forEach(_e.nodes(),function(er){g(_e.node(er))}),a.forEach(_e.edges(),function(er){var rr=_e.edge(er);a.forEach(rr.points,g),a.has(rr,"y")&&g(rr)})}function g(_e){_e.y=-_e.y}function b(_e){a.forEach(_e.nodes(),function(er){j(_e.node(er))}),a.forEach(_e.edges(),function(er){var rr=_e.edge(er);a.forEach(rr.points,j),a.has(rr,"x")&&j(rr)})}function j(_e){var er=_e.x;_e.x=_e.y,_e.y=er}return coordinateSystem}var initOrder_1,hasRequiredInitOrder;function requireInitOrder(){if(hasRequiredInitOrder)return initOrder_1;hasRequiredInitOrder=1;var a=requireLodash();initOrder_1=e;function e(s){var o={},c=a.filter(s.nodes(),function(_e){return!s.children(_e).length}),d=a.max(a.map(c,function(_e){return s.node(_e).rank})),g=a.map(a.range(d+1),function(){return[]});function b(_e){if(!a.has(o,_e)){o[_e]=!0;var er=s.node(_e);g[er.rank].push(_e),a.forEach(s.successors(_e),b)}}var j=a.sortBy(c,function(_e){return s.node(_e).rank});return a.forEach(j,b),g}return initOrder_1}var crossCount_1,hasRequiredCrossCount;function requireCrossCount(){if(hasRequiredCrossCount)return crossCount_1;hasRequiredCrossCount=1;var a=requireLodash();crossCount_1=e;function e(o,c){for(var d=0,g=1;g<c.length;++g)d+=s(o,c[g-1],c[g]);return d}function s(o,c,d){for(var g=a.zipObject(d,a.map(d,function(tr,nr){return nr})),b=a.flatten(a.map(c,function(tr){return a.sortBy(a.map(o.outEdges(tr),function(nr){return{pos:g[nr.w],weight:o.edge(nr).weight}}),"pos")}),!0),j=1;j<d.length;)j<<=1;var _e=2*j-1;j-=1;var er=a.map(new Array(_e),function(){return 0}),rr=0;return a.forEach(b.forEach(function(tr){var nr=tr.pos+j;er[nr]+=tr.weight;for(var ar=0;nr>0;)nr%2&&(ar+=er[nr+1]),nr=nr-1>>1,er[nr]+=tr.weight;rr+=tr.weight*ar})),rr}return crossCount_1}var barycenter_1,hasRequiredBarycenter;function requireBarycenter(){if(hasRequiredBarycenter)return barycenter_1;hasRequiredBarycenter=1;var a=requireLodash();barycenter_1=e;function e(s,o){return a.map(o,function(c){var d=s.inEdges(c);if(d.length){var g=a.reduce(d,function(b,j){var _e=s.edge(j),er=s.node(j.v);return{sum:b.sum+_e.weight*er.order,weight:b.weight+_e.weight}},{sum:0,weight:0});return{v:c,barycenter:g.sum/g.weight,weight:g.weight}}else return{v:c}})}return barycenter_1}var resolveConflicts_1,hasRequiredResolveConflicts;function requireResolveConflicts(){if(hasRequiredResolveConflicts)return resolveConflicts_1;hasRequiredResolveConflicts=1;var a=requireLodash();resolveConflicts_1=e;function e(c,d){var g={};a.forEach(c,function(j,_e){var er=g[j.v]={indegree:0,in:[],out:[],vs:[j.v],i:_e};a.isUndefined(j.barycenter)||(er.barycenter=j.barycenter,er.weight=j.weight)}),a.forEach(d.edges(),function(j){var _e=g[j.v],er=g[j.w];!a.isUndefined(_e)&&!a.isUndefined(er)&&(er.indegree++,_e.out.push(g[j.w]))});var b=a.filter(g,function(j){return!j.indegree});return s(b)}function s(c){var d=[];function g(_e){return function(er){er.merged||(a.isUndefined(er.barycenter)||a.isUndefined(_e.barycenter)||er.barycenter>=_e.barycenter)&&o(_e,er)}}function b(_e){return function(er){er.in.push(_e),--er.indegree===0&&c.push(er)}}for(;c.length;){var j=c.pop();d.push(j),a.forEach(j.in.reverse(),g(j)),a.forEach(j.out,b(j))}return a.map(a.filter(d,function(_e){return!_e.merged}),function(_e){return a.pick(_e,["vs","i","barycenter","weight"])})}function o(c,d){var g=0,b=0;c.weight&&(g+=c.barycenter*c.weight,b+=c.weight),d.weight&&(g+=d.barycenter*d.weight,b+=d.weight),c.vs=d.vs.concat(c.vs),c.barycenter=g/b,c.weight=b,c.i=Math.min(d.i,c.i),d.merged=!0}return resolveConflicts_1}var sort_1,hasRequiredSort;function requireSort(){if(hasRequiredSort)return sort_1;hasRequiredSort=1;var a=requireLodash(),e=requireUtil$1();sort_1=s;function s(d,g){var b=e.partition(d,function(lr){return a.has(lr,"barycenter")}),j=b.lhs,_e=a.sortBy(b.rhs,function(lr){return-lr.i}),er=[],rr=0,tr=0,nr=0;j.sort(c(!!g)),nr=o(er,_e,nr),a.forEach(j,function(lr){nr+=lr.vs.length,er.push(lr.vs),rr+=lr.barycenter*lr.weight,tr+=lr.weight,nr=o(er,_e,nr)});var ar={vs:a.flatten(er,!0)};return tr&&(ar.barycenter=rr/tr,ar.weight=tr),ar}function o(d,g,b){for(var j;g.length&&(j=a.last(g)).i<=b;)g.pop(),d.push(j.vs),b++;return b}function c(d){return function(g,b){return g.barycenter<b.barycenter?-1:g.barycenter>b.barycenter?1:d?b.i-g.i:g.i-b.i}}return sort_1}var sortSubgraph_1,hasRequiredSortSubgraph;function requireSortSubgraph(){if(hasRequiredSortSubgraph)return sortSubgraph_1;hasRequiredSortSubgraph=1;var a=requireLodash(),e=requireBarycenter(),s=requireResolveConflicts(),o=requireSort();sortSubgraph_1=c;function c(b,j,_e,er){var rr=b.children(j),tr=b.node(j),nr=tr?tr.borderLeft:void 0,ar=tr?tr.borderRight:void 0,lr={};nr&&(rr=a.filter(rr,function(fr){return fr!==nr&&fr!==ar}));var or=e(b,rr);a.forEach(or,function(fr){if(b.children(fr.v).length){var hr=c(b,fr.v,_e,er);lr[fr.v]=hr,a.has(hr,"barycenter")&&g(fr,hr)}});var ir=s(or,_e);d(ir,lr);var sr=o(ir,er);if(nr&&(sr.vs=a.flatten([nr,sr.vs,ar],!0),b.predecessors(nr).length)){var ur=b.node(b.predecessors(nr)[0]),cr=b.node(b.predecessors(ar)[0]);a.has(sr,"barycenter")||(sr.barycenter=0,sr.weight=0),sr.barycenter=(sr.barycenter*sr.weight+ur.order+cr.order)/(sr.weight+2),sr.weight+=2}return sr}function d(b,j){a.forEach(b,function(_e){_e.vs=a.flatten(_e.vs.map(function(er){return j[er]?j[er].vs:er}),!0)})}function g(b,j){a.isUndefined(b.barycenter)?(b.barycenter=j.barycenter,b.weight=j.weight):(b.barycenter=(b.barycenter*b.weight+j.barycenter*j.weight)/(b.weight+j.weight),b.weight+=j.weight)}return sortSubgraph_1}var buildLayerGraph_1,hasRequiredBuildLayerGraph;function requireBuildLayerGraph(){if(hasRequiredBuildLayerGraph)return buildLayerGraph_1;hasRequiredBuildLayerGraph=1;var a=requireLodash(),e=requireGraphlib().Graph;buildLayerGraph_1=s;function s(c,d,g){var b=o(c),j=new e({compound:!0}).setGraph({root:b}).setDefaultNodeLabel(function(_e){return c.node(_e)});return a.forEach(c.nodes(),function(_e){var er=c.node(_e),rr=c.parent(_e);(er.rank===d||er.minRank<=d&&d<=er.maxRank)&&(j.setNode(_e),j.setParent(_e,rr||b),a.forEach(c[g](_e),function(tr){var nr=tr.v===_e?tr.w:tr.v,ar=j.edge(nr,_e),lr=a.isUndefined(ar)?0:ar.weight;j.setEdge(nr,_e,{weight:c.edge(tr).weight+lr})}),a.has(er,"minRank")&&j.setNode(_e,{borderLeft:er.borderLeft[d],borderRight:er.borderRight[d]}))}),j}function o(c){for(var d;c.hasNode(d=a.uniqueId("_root")););return d}return buildLayerGraph_1}var addSubgraphConstraints_1,hasRequiredAddSubgraphConstraints;function requireAddSubgraphConstraints(){if(hasRequiredAddSubgraphConstraints)return addSubgraphConstraints_1;hasRequiredAddSubgraphConstraints=1;var a=requireLodash();addSubgraphConstraints_1=e;function e(s,o,c){var d={},g;a.forEach(c,function(b){for(var j=s.parent(b),_e,er;j;){if(_e=s.parent(j),_e?(er=d[_e],d[_e]=j):(er=g,g=j),er&&er!==j){o.setEdge(er,j);return}j=_e}})}return addSubgraphConstraints_1}var order_1,hasRequiredOrder;function requireOrder(){if(hasRequiredOrder)return order_1;hasRequiredOrder=1;var a=requireLodash(),e=requireInitOrder(),s=requireCrossCount(),o=requireSortSubgraph(),c=requireBuildLayerGraph(),d=requireAddSubgraphConstraints(),g=requireGraphlib().Graph,b=requireUtil$1();order_1=j;function j(tr){var nr=b.maxRank(tr),ar=_e(tr,a.range(1,nr+1),"inEdges"),lr=_e(tr,a.range(nr-1,-1,-1),"outEdges"),or=e(tr);rr(tr,or);for(var ir=Number.POSITIVE_INFINITY,sr,ur=0,cr=0;cr<4;++ur,++cr){er(ur%2?ar:lr,ur%4>=2),or=b.buildLayerMatrix(tr);var fr=s(tr,or);fr<ir&&(cr=0,sr=a.cloneDeep(or),ir=fr)}rr(tr,sr)}function _e(tr,nr,ar){return a.map(nr,function(lr){return c(tr,lr,ar)})}function er(tr,nr){var ar=new g;a.forEach(tr,function(lr){var or=lr.graph().root,ir=o(lr,or,ar,nr);a.forEach(ir.vs,function(sr,ur){lr.node(sr).order=ur}),d(lr,ar,ir.vs)})}function rr(tr,nr){a.forEach(nr,function(ar){a.forEach(ar,function(lr,or){tr.node(lr).order=or})})}return order_1}var bk,hasRequiredBk;function requireBk(){if(hasRequiredBk)return bk;hasRequiredBk=1;var a=requireLodash(),e=requireGraphlib().Graph,s=requireUtil$1();bk={positionX:ar,findType1Conflicts:o,findType2Conflicts:c,addConflict:g,hasConflict:b,verticalAlignment:j,horizontalCompaction:_e,alignCoordinates:tr,findSmallestWidthAlignment:rr,balance:nr};function o(ir,sr){var ur={};function cr(fr,hr){var dr=0,vr=0,gr=fr.length,pr=a.last(hr);return a.forEach(hr,function(mr,yr){var br=d(ir,mr),Er=br?ir.node(br).order:gr;(br||mr===pr)&&(a.forEach(hr.slice(vr,yr+1),function(_r){a.forEach(ir.predecessors(_r),function(Rr){var Cr=ir.node(Rr),wr=Cr.order;(wr<dr||Er<wr)&&!(Cr.dummy&&ir.node(_r).dummy)&&g(ur,Rr,_r)})}),vr=yr+1,dr=Er)}),hr}return a.reduce(sr,cr),ur}function c(ir,sr){var ur={};function cr(hr,dr,vr,gr,pr){var mr;a.forEach(a.range(dr,vr),function(yr){mr=hr[yr],ir.node(mr).dummy&&a.forEach(ir.predecessors(mr),function(br){var Er=ir.node(br);Er.dummy&&(Er.order<gr||Er.order>pr)&&g(ur,br,mr)})})}function fr(hr,dr){var vr=-1,gr,pr=0;return a.forEach(dr,function(mr,yr){if(ir.node(mr).dummy==="border"){var br=ir.predecessors(mr);br.length&&(gr=ir.node(br[0]).order,cr(dr,pr,yr,vr,gr),pr=yr,vr=gr)}cr(dr,pr,dr.length,gr,hr.length)}),dr}return a.reduce(sr,fr),ur}function d(ir,sr){if(ir.node(sr).dummy)return a.find(ir.predecessors(sr),function(ur){return ir.node(ur).dummy})}function g(ir,sr,ur){if(sr>ur){var cr=sr;sr=ur,ur=cr}var fr=ir[sr];fr||(ir[sr]=fr={}),fr[ur]=!0}function b(ir,sr,ur){if(sr>ur){var cr=sr;sr=ur,ur=cr}return a.has(ir[sr],ur)}function j(ir,sr,ur,cr){var fr={},hr={},dr={};return a.forEach(sr,function(vr){a.forEach(vr,function(gr,pr){fr[gr]=gr,hr[gr]=gr,dr[gr]=pr})}),a.forEach(sr,function(vr){var gr=-1;a.forEach(vr,function(pr){var mr=cr(pr);if(mr.length){mr=a.sortBy(mr,function(Rr){return dr[Rr]});for(var yr=(mr.length-1)/2,br=Math.floor(yr),Er=Math.ceil(yr);br<=Er;++br){var _r=mr[br];hr[pr]===pr&&gr<dr[_r]&&!b(ur,pr,_r)&&(hr[_r]=pr,hr[pr]=fr[pr]=fr[_r],gr=dr[_r])}}})}),{root:fr,align:hr}}function _e(ir,sr,ur,cr,fr){var hr={},dr=er(ir,sr,ur,fr),vr=fr?"borderLeft":"borderRight";function gr(yr,br){for(var Er=dr.nodes(),_r=Er.pop(),Rr={};_r;)Rr[_r]?yr(_r):(Rr[_r]=!0,Er.push(_r),Er=Er.concat(br(_r))),_r=Er.pop()}function pr(yr){hr[yr]=dr.inEdges(yr).reduce(function(br,Er){return Math.max(br,hr[Er.v]+dr.edge(Er))},0)}function mr(yr){var br=dr.outEdges(yr).reduce(function(_r,Rr){return Math.min(_r,hr[Rr.w]-dr.edge(Rr))},Number.POSITIVE_INFINITY),Er=ir.node(yr);br!==Number.POSITIVE_INFINITY&&Er.borderType!==vr&&(hr[yr]=Math.max(hr[yr],br))}return gr(pr,dr.predecessors.bind(dr)),gr(mr,dr.successors.bind(dr)),a.forEach(cr,function(yr){hr[yr]=hr[ur[yr]]}),hr}function er(ir,sr,ur,cr){var fr=new e,hr=ir.graph(),dr=lr(hr.nodesep,hr.edgesep,cr);return a.forEach(sr,function(vr){var gr;a.forEach(vr,function(pr){var mr=ur[pr];if(fr.setNode(mr),gr){var yr=ur[gr],br=fr.edge(yr,mr);fr.setEdge(yr,mr,Math.max(dr(ir,pr,gr),br||0))}gr=pr})}),fr}function rr(ir,sr){return a.minBy(a.values(sr),function(ur){var cr=Number.NEGATIVE_INFINITY,fr=Number.POSITIVE_INFINITY;return a.forIn(ur,function(hr,dr){var vr=or(ir,dr)/2;cr=Math.max(hr+vr,cr),fr=Math.min(hr-vr,fr)}),cr-fr})}function tr(ir,sr){var ur=a.values(sr),cr=a.min(ur),fr=a.max(ur);a.forEach(["u","d"],function(hr){a.forEach(["l","r"],function(dr){var vr=hr+dr,gr=ir[vr],pr;if(gr!==sr){var mr=a.values(gr);pr=dr==="l"?cr-a.min(mr):fr-a.max(mr),pr&&(ir[vr]=a.mapValues(gr,function(yr){return yr+pr}))}})})}function nr(ir,sr){return a.mapValues(ir.ul,function(ur,cr){if(sr)return ir[sr.toLowerCase()][cr];var fr=a.sortBy(a.map(ir,cr));return(fr[1]+fr[2])/2})}function ar(ir){var sr=s.buildLayerMatrix(ir),ur=a.merge(o(ir,sr),c(ir,sr)),cr={},fr;a.forEach(["u","d"],function(dr){fr=dr==="u"?sr:a.values(sr).reverse(),a.forEach(["l","r"],function(vr){vr==="r"&&(fr=a.map(fr,function(yr){return a.values(yr).reverse()}));var gr=(dr==="u"?ir.predecessors:ir.successors).bind(ir),pr=j(ir,fr,ur,gr),mr=_e(ir,fr,pr.root,pr.align,vr==="r");vr==="r"&&(mr=a.mapValues(mr,function(yr){return-yr})),cr[dr+vr]=mr})});var hr=rr(ir,cr);return tr(cr,hr),nr(cr,ir.graph().align)}function lr(ir,sr,ur){return function(cr,fr,hr){var dr=cr.node(fr),vr=cr.node(hr),gr=0,pr;if(gr+=dr.width/2,a.has(dr,"labelpos"))switch(dr.labelpos.toLowerCase()){case"l":pr=-dr.width/2;break;case"r":pr=dr.width/2;break}if(pr&&(gr+=ur?pr:-pr),pr=0,gr+=(dr.dummy?sr:ir)/2,gr+=(vr.dummy?sr:ir)/2,gr+=vr.width/2,a.has(vr,"labelpos"))switch(vr.labelpos.toLowerCase()){case"l":pr=vr.width/2;break;case"r":pr=-vr.width/2;break}return pr&&(gr+=ur?pr:-pr),pr=0,gr}}function or(ir,sr){return ir.node(sr).width}return bk}var position_1,hasRequiredPosition;function requirePosition(){if(hasRequiredPosition)return position_1;hasRequiredPosition=1;var a=requireLodash(),e=requireUtil$1(),s=requireBk().positionX;position_1=o;function o(d){d=e.asNonCompoundGraph(d),c(d),a.forEach(s(d),function(g,b){d.node(b).x=g})}function c(d){var g=e.buildLayerMatrix(d),b=d.graph().ranksep,j=0;a.forEach(g,function(_e){var er=a.max(a.map(_e,function(rr){return d.node(rr).height}));a.forEach(_e,function(rr){d.node(rr).y=j+er/2}),j+=er+b})}return position_1}var layout_1,hasRequiredLayout;function requireLayout(){if(hasRequiredLayout)return layout_1;hasRequiredLayout=1;var a=requireLodash(),e=requireAcyclic(),s=requireNormalize(),o=requireRank(),c=requireUtil$1().normalizeRanks,d=requireParentDummyChains(),g=requireUtil$1().removeEmptyRanks,b=requireNestingGraph(),j=requireAddBorderSegments(),_e=requireCoordinateSystem(),er=requireOrder(),rr=requirePosition(),tr=requireUtil$1(),nr=requireGraphlib().Graph;layout_1=ar;function ar(qr,Tr){var Pr=Tr&&Tr.debugTiming?tr.time:tr.notime;Pr("layout",function(){var Br=Pr("  buildLayoutGraph",function(){return gr(qr)});Pr("  runLayout",function(){lr(Br,Pr)}),Pr("  updateInputGraph",function(){or(qr,Br)})})}function lr(qr,Tr){Tr("    makeSpaceForEdgeLabels",function(){pr(qr)}),Tr("    removeSelfEdges",function(){$r(qr)}),Tr("    acyclic",function(){e.run(qr)}),Tr("    nestingGraph.run",function(){b.run(qr)}),Tr("    rank",function(){o(tr.asNonCompoundGraph(qr))}),Tr("    injectEdgeLabelProxies",function(){mr(qr)}),Tr("    removeEmptyRanks",function(){g(qr)}),Tr("    nestingGraph.cleanup",function(){b.cleanup(qr)}),Tr("    normalizeRanks",function(){c(qr)}),Tr("    assignRankMinMax",function(){yr(qr)}),Tr("    removeEdgeLabelProxies",function(){br(qr)}),Tr("    normalize.run",function(){s.run(qr)}),Tr("    parentDummyChains",function(){d(qr)}),Tr("    addBorderSegments",function(){j(qr)}),Tr("    order",function(){er(qr)}),Tr("    insertSelfEdges",function(){Ar(qr)}),Tr("    adjustCoordinateSystem",function(){_e.adjust(qr)}),Tr("    position",function(){rr(qr)}),Tr("    positionSelfEdges",function(){Sr(qr)}),Tr("    removeBorderNodes",function(){wr(qr)}),Tr("    normalize.undo",function(){s.undo(qr)}),Tr("    fixupEdgeLabelCoords",function(){Rr(qr)}),Tr("    undoCoordinateSystem",function(){_e.undo(qr)}),Tr("    translateGraph",function(){Er(qr)}),Tr("    assignNodeIntersects",function(){_r(qr)}),Tr("    reversePoints",function(){Cr(qr)}),Tr("    acyclic.undo",function(){e.undo(qr)})}function or(qr,Tr){a.forEach(qr.nodes(),function(Pr){var Br=qr.node(Pr),Ur=Tr.node(Pr);Br&&(Br.x=Ur.x,Br.y=Ur.y,Tr.children(Pr).length&&(Br.width=Ur.width,Br.height=Ur.height))}),a.forEach(qr.edges(),function(Pr){var Br=qr.edge(Pr),Ur=Tr.edge(Pr);Br.points=Ur.points,a.has(Ur,"x")&&(Br.x=Ur.x,Br.y=Ur.y)}),qr.graph().width=Tr.graph().width,qr.graph().height=Tr.graph().height}var ir=["nodesep","edgesep","ranksep","marginx","marginy"],sr={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},ur=["acyclicer","ranker","rankdir","align"],cr=["width","height"],fr={width:0,height:0},hr=["minlen","weight","width","height","labeloffset"],dr={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},vr=["labelpos"];function gr(qr){var Tr=new nr({multigraph:!0,compound:!0}),Pr=Mr(qr.graph());return Tr.setGraph(a.merge({},sr,kr(Pr,ir),a.pick(Pr,ur))),a.forEach(qr.nodes(),function(Br){var Ur=Mr(qr.node(Br));Tr.setNode(Br,a.defaults(kr(Ur,cr),fr)),Tr.setParent(Br,qr.parent(Br))}),a.forEach(qr.edges(),function(Br){var Ur=Mr(qr.edge(Br));Tr.setEdge(Br,a.merge({},dr,kr(Ur,hr),a.pick(Ur,vr)))}),Tr}function pr(qr){var Tr=qr.graph();Tr.ranksep/=2,a.forEach(qr.edges(),function(Pr){var Br=qr.edge(Pr);Br.minlen*=2,Br.labelpos.toLowerCase()!=="c"&&(Tr.rankdir==="TB"||Tr.rankdir==="BT"?Br.width+=Br.labeloffset:Br.height+=Br.labeloffset)})}function mr(qr){a.forEach(qr.edges(),function(Tr){var Pr=qr.edge(Tr);if(Pr.width&&Pr.height){var Br=qr.node(Tr.v),Ur=qr.node(Tr.w),Nr={rank:(Ur.rank-Br.rank)/2+Br.rank,e:Tr};tr.addDummyNode(qr,"edge-proxy",Nr,"_ep")}})}function yr(qr){var Tr=0;a.forEach(qr.nodes(),function(Pr){var Br=qr.node(Pr);Br.borderTop&&(Br.minRank=qr.node(Br.borderTop).rank,Br.maxRank=qr.node(Br.borderBottom).rank,Tr=a.max(Tr,Br.maxRank))}),qr.graph().maxRank=Tr}function br(qr){a.forEach(qr.nodes(),function(Tr){var Pr=qr.node(Tr);Pr.dummy==="edge-proxy"&&(qr.edge(Pr.e).labelRank=Pr.rank,qr.removeNode(Tr))})}function Er(qr){var Tr=Number.POSITIVE_INFINITY,Pr=0,Br=Number.POSITIVE_INFINITY,Ur=0,Nr=qr.graph(),Ir=Nr.marginx||0,Dr=Nr.marginy||0;function Or(jr){var Wr=jr.x,Xr=jr.y,dt=jr.width,Vr=jr.height;Tr=Math.min(Tr,Wr-dt/2),Pr=Math.max(Pr,Wr+dt/2),Br=Math.min(Br,Xr-Vr/2),Ur=Math.max(Ur,Xr+Vr/2)}a.forEach(qr.nodes(),function(jr){Or(qr.node(jr))}),a.forEach(qr.edges(),function(jr){var Wr=qr.edge(jr);a.has(Wr,"x")&&Or(Wr)}),Tr-=Ir,Br-=Dr,a.forEach(qr.nodes(),function(jr){var Wr=qr.node(jr);Wr.x-=Tr,Wr.y-=Br}),a.forEach(qr.edges(),function(jr){var Wr=qr.edge(jr);a.forEach(Wr.points,function(Xr){Xr.x-=Tr,Xr.y-=Br}),a.has(Wr,"x")&&(Wr.x-=Tr),a.has(Wr,"y")&&(Wr.y-=Br)}),Nr.width=Pr-Tr+Ir,Nr.height=Ur-Br+Dr}function _r(qr){a.forEach(qr.edges(),function(Tr){var Pr=qr.edge(Tr),Br=qr.node(Tr.v),Ur=qr.node(Tr.w),Nr,Ir;Pr.points?(Nr=Pr.points[0],Ir=Pr.points[Pr.points.length-1]):(Pr.points=[],Nr=Ur,Ir=Br),Pr.points.unshift(tr.intersectRect(Br,Nr)),Pr.points.push(tr.intersectRect(Ur,Ir))})}function Rr(qr){a.forEach(qr.edges(),function(Tr){var Pr=qr.edge(Tr);if(a.has(Pr,"x"))switch((Pr.labelpos==="l"||Pr.labelpos==="r")&&(Pr.width-=Pr.labeloffset),Pr.labelpos){case"l":Pr.x-=Pr.width/2+Pr.labeloffset;break;case"r":Pr.x+=Pr.width/2+Pr.labeloffset;break}})}function Cr(qr){a.forEach(qr.edges(),function(Tr){var Pr=qr.edge(Tr);Pr.reversed&&Pr.points.reverse()})}function wr(qr){a.forEach(qr.nodes(),function(Tr){if(qr.children(Tr).length){var Pr=qr.node(Tr),Br=qr.node(Pr.borderTop),Ur=qr.node(Pr.borderBottom),Nr=qr.node(a.last(Pr.borderLeft)),Ir=qr.node(a.last(Pr.borderRight));Pr.width=Math.abs(Ir.x-Nr.x),Pr.height=Math.abs(Ur.y-Br.y),Pr.x=Nr.x+Pr.width/2,Pr.y=Br.y+Pr.height/2}}),a.forEach(qr.nodes(),function(Tr){qr.node(Tr).dummy==="border"&&qr.removeNode(Tr)})}function $r(qr){a.forEach(qr.edges(),function(Tr){if(Tr.v===Tr.w){var Pr=qr.node(Tr.v);Pr.selfEdges||(Pr.selfEdges=[]),Pr.selfEdges.push({e:Tr,label:qr.edge(Tr)}),qr.removeEdge(Tr)}})}function Ar(qr){var Tr=tr.buildLayerMatrix(qr);a.forEach(Tr,function(Pr){var Br=0;a.forEach(Pr,function(Ur,Nr){var Ir=qr.node(Ur);Ir.order=Nr+Br,a.forEach(Ir.selfEdges,function(Dr){tr.addDummyNode(qr,"selfedge",{width:Dr.label.width,height:Dr.label.height,rank:Ir.rank,order:Nr+ ++Br,e:Dr.e,label:Dr.label},"_se")}),delete Ir.selfEdges})})}function Sr(qr){a.forEach(qr.nodes(),function(Tr){var Pr=qr.node(Tr);if(Pr.dummy==="selfedge"){var Br=qr.node(Pr.e.v),Ur=Br.x+Br.width/2,Nr=Br.y,Ir=Pr.x-Ur,Dr=Br.height/2;qr.setEdge(Pr.e,Pr.label),qr.removeNode(Tr),Pr.label.points=[{x:Ur+2*Ir/3,y:Nr-Dr},{x:Ur+5*Ir/6,y:Nr-Dr},{x:Ur+Ir,y:Nr},{x:Ur+5*Ir/6,y:Nr+Dr},{x:Ur+2*Ir/3,y:Nr+Dr}],Pr.label.x=Pr.x,Pr.label.y=Pr.y}})}function kr(qr,Tr){return a.mapValues(a.pick(qr,Tr),Number)}function Mr(qr){var Tr={};return a.forEach(qr,function(Pr,Br){Tr[Br.toLowerCase()]=Pr}),Tr}return layout_1}var debug,hasRequiredDebug;function requireDebug(){if(hasRequiredDebug)return debug;hasRequiredDebug=1;var a=requireLodash(),e=requireUtil$1(),s=requireGraphlib().Graph;debug={debugOrdering:o};function o(c){var d=e.buildLayerMatrix(c),g=new s({compound:!0,multigraph:!0}).setGraph({});return a.forEach(c.nodes(),function(b){g.setNode(b,{label:b}),g.setParent(b,"layer"+c.node(b).rank)}),a.forEach(c.edges(),function(b){g.setEdge(b.v,b.w,{},b.name)}),a.forEach(d,function(b,j){var _e="layer"+j;g.setNode(_e,{rank:"same"}),a.reduce(b,function(er,rr){return g.setEdge(er,rr,{style:"invis"}),rr})}),g}return debug}var version,hasRequiredVersion;function requireVersion(){return hasRequiredVersion||(hasRequiredVersion=1,version="0.8.5"),version}var dagre$1,hasRequiredDagre;function requireDagre(){return hasRequiredDagre||(hasRequiredDagre=1,dagre$1={graphlib:requireGraphlib(),layout:requireLayout(),debug:requireDebug(),util:{time:requireUtil$1().time,notime:requireUtil$1().notime},version:requireVersion()}),dagre$1}(function(a,e){(function(o,c){a.exports=c(requireDagre())})(commonjsGlobal$1,function(s){return function(o){var c={};function d(g){if(c[g])return c[g].exports;var b=c[g]={i:g,l:!1,exports:{}};return o[g].call(b.exports,b,b.exports,d),b.l=!0,b.exports}return d.m=o,d.c=c,d.d=function(g,b,j){d.o(g,b)||Object.defineProperty(g,b,{enumerable:!0,get:j})},d.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},d.t=function(g,b){if(b&1&&(g=d(g)),b&8||b&4&&typeof g=="object"&&g&&g.__esModule)return g;var j=Object.create(null);if(d.r(j),Object.defineProperty(j,"default",{enumerable:!0,value:g}),b&2&&typeof g!="string")for(var _e in g)d.d(j,_e,(function(er){return g[er]}).bind(null,_e));return j},d.n=function(g){var b=g&&g.__esModule?function(){return g.default}:function(){return g};return d.d(b,"a",b),b},d.o=function(g,b){return Object.prototype.hasOwnProperty.call(g,b)},d.p="",d(d.s=0)}([function(o,c,d){var g=d(1),b=function(_e){_e&&_e("layout","dagre",g)};typeof cytoscape<"u"&&b(cytoscape),o.exports=b},function(o,c,d){function g(tr){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(ar){return typeof ar}:g=function(ar){return ar&&typeof Symbol=="function"&&ar.constructor===Symbol&&ar!==Symbol.prototype?"symbol":typeof ar},g(tr)}var b=function(nr){return typeof nr=="function"},j=d(2),_e=d(3),er=d(4);function rr(tr){this.options=_e({},j,tr)}rr.prototype.run=function(){var tr=this.options,nr=this,ar=tr.cy,lr=tr.eles,or=function(Sr,kr){return b(kr)?kr.apply(Sr,[Sr]):kr},ir=tr.boundingBox||{x1:0,y1:0,w:ar.width(),h:ar.height()};ir.x2===void 0&&(ir.x2=ir.x1+ir.w),ir.w===void 0&&(ir.w=ir.x2-ir.x1),ir.y2===void 0&&(ir.y2=ir.y1+ir.h),ir.h===void 0&&(ir.h=ir.y2-ir.y1);var sr=new er.graphlib.Graph({multigraph:!0,compound:!0}),ur={},cr=function(Sr,kr){kr!=null&&(ur[Sr]=kr)};cr("nodesep",tr.nodeSep),cr("edgesep",tr.edgeSep),cr("ranksep",tr.rankSep),cr("rankdir",tr.rankDir),cr("align",tr.align),cr("ranker",tr.ranker),cr("acyclicer",tr.acyclicer),sr.setGraph(ur),sr.setDefaultEdgeLabel(function(){return{}}),sr.setDefaultNodeLabel(function(){return{}});var fr=lr.nodes();b(tr.sort)&&(fr=fr.sort(tr.sort));for(var hr=0;hr<fr.length;hr++){var dr=fr[hr],vr=dr.layoutDimensions(tr);sr.setNode(dr.id(),{width:vr.w,height:vr.h,name:dr.id()})}for(var gr=0;gr<fr.length;gr++){var pr=fr[gr];pr.isChild()&&sr.setParent(pr.id(),pr.parent().id())}var mr=lr.edges().stdFilter(function(Ar){return!Ar.source().isParent()&&!Ar.target().isParent()});b(tr.sort)&&(mr=mr.sort(tr.sort));for(var yr=0;yr<mr.length;yr++){var br=mr[yr];sr.setEdge(br.source().id(),br.target().id(),{minlen:or(br,tr.minLen),weight:or(br,tr.edgeWeight),name:br.id()},br.id())}er.layout(sr);for(var Er=sr.nodes(),_r=0;_r<Er.length;_r++){var Rr=Er[_r],Cr=sr.node(Rr);ar.getElementById(Rr).scratch().dagre=Cr}var wr;tr.boundingBox?(wr={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},fr.forEach(function(Ar){var Sr=Ar.scratch().dagre;wr.x1=Math.min(wr.x1,Sr.x),wr.x2=Math.max(wr.x2,Sr.x),wr.y1=Math.min(wr.y1,Sr.y),wr.y2=Math.max(wr.y2,Sr.y)}),wr.w=wr.x2-wr.x1,wr.h=wr.y2-wr.y1):wr=ir;var $r=function(Sr){if(tr.boundingBox){var kr=wr.w===0?0:(Sr.x-wr.x1)/wr.w,Mr=wr.h===0?0:(Sr.y-wr.y1)/wr.h;return{x:ir.x1+kr*ir.w,y:ir.y1+Mr*ir.h}}else return Sr};return fr.layoutPositions(nr,tr,function(Ar){Ar=g(Ar)==="object"?Ar:this;var Sr=Ar.scratch().dagre;return $r({x:Sr.x,y:Sr.y})}),this},o.exports=rr},function(o,c){var d={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,align:void 0,acyclicer:void 0,ranker:void 0,minLen:function(b){return 1},edgeWeight:function(b){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(b,j){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(b,j){return j},ready:function(){},sort:void 0,stop:function(){}};o.exports=d},function(o,c){o.exports=Object.assign!=null?Object.assign.bind(Object):function(d){for(var g=arguments.length,b=new Array(g>1?g-1:0),j=1;j<g;j++)b[j-1]=arguments[j];return b.forEach(function(_e){Object.keys(_e).forEach(function(er){return d[er]=_e[er]})}),d}},function(o,c){o.exports=s}])})})(cytoscapeDagre);var cytoscapeDagreExports=cytoscapeDagre.exports;const dagre=getDefaultExportFromCjs$1(cytoscapeDagreExports),ThemeContext=reactExports.createContext(void 0);function ThemeProvider({children:a}){const[e,s]=reactExports.useState(()=>localStorage.getItem("theme")||"dark");reactExports.useEffect(()=>{localStorage.setItem("theme",e);const c=document.documentElement;e==="dark"?(c.classList.add("dark"),c.style.colorScheme="dark"):(c.classList.remove("dark"),c.style.colorScheme="light")},[e]);const o=()=>{s(c=>c==="dark"?"light":"dark")};return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:{theme:e,toggleTheme:o,setTheme:s},children:a})}function useTheme(){const a=reactExports.useContext(ThemeContext);if(!a)throw new Error("useTheme must be used within ThemeProvider");return a}function PayloadModal({isOpen:a,eventType:e,mode:s,onSend:o,onClose:c}){const[d,g]=reactExports.useState("{}"),[b,j]=reactExports.useState(null),[_e,er]=reactExports.useState(null);reactExports.useEffect(()=>{a&&(g(s==="payload"?"{}":`{
  "type": "${e}"
}`),j(null),er(null))},[a,e,s]);const rr=ir=>{if(g(ir),!ir.trim()){j("JSON cannot be empty"),er(null);return}try{JSON.parse(ir),j(null),er(null)}catch(sr){j(sr.message);const ur=sr.message.match(/position (\d+)/);if(ur){const cr=parseInt(ur[1],10),hr=(ir.substring(0,cr).match(/\n/g)||[]).length+1;er(hr)}else er(null)}},tr=()=>{try{const ir=JSON.parse(d);s==="payload"?o(e,{type:e,payload:ir}):o(e,ir),c()}catch{}},nr=ir=>{ir.key==="Enter"&&(ir.metaKey||ir.ctrlKey)?(ir.preventDefault(),b||tr()):ir.key==="Escape"&&c()},ar=()=>{try{const ir=JSON.parse(d),sr=JSON.stringify(ir,null,2);g(sr),j(null),er(null)}catch{}},lr=ir=>{const sr=ir.clipboardData.getData("text");try{const ur=JSON.parse(sr),cr=JSON.stringify(ur,null,2);ir.preventDefault(),g(cr),j(null),er(null)}catch{}};if(!a)return null;const or=d.split(`
`);return jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-[200]",onClick:c,children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl max-w-2xl w-full mx-4 border-2 border-slate-300 dark:border-slate-600",onClick:ir=>ir.stopPropagation(),children:[jsxRuntimeExports.jsx("div",{className:"px-6 py-4 border-b border-slate-300 dark:border-slate-700",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:s==="payload"?"Send Event with Payload":"Send Custom Event"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:["Event: ",jsxRuntimeExports.jsx("span",{className:"font-mono font-semibold text-blue-600 dark:text-blue-400",children:e}),s==="payload"&&jsxRuntimeExports.jsx("span",{className:"ml-2 text-xs",children:"(payload will be sent as event.payload)"})]})]}),jsxRuntimeExports.jsx("button",{onClick:c,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 text-2xl leading-none",children:""})]})}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300",children:s==="payload"?"Payload Object (JSON):":"Full Event (JSON):"}),jsxRuntimeExports.jsx("button",{onClick:ar,className:"px-3 py-1 text-xs bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 rounded font-semibold transition",title:"Format JSON (Ctrl/Cmd + Shift + F)",children:"Format JSON"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-12 bg-slate-100 dark:bg-slate-900 border-r border-slate-300 dark:border-slate-700 rounded-l flex flex-col text-right pr-2 pt-3 font-mono text-xs text-slate-500 dark:text-slate-500 select-none overflow-hidden",children:or.map((ir,sr)=>jsxRuntimeExports.jsx("div",{className:`leading-6 ${_e===sr+1?"bg-red-200 dark:bg-red-900/30 text-red-600 dark:text-red-400 font-bold":""}`,children:sr+1},sr))}),jsxRuntimeExports.jsx("textarea",{value:d,onChange:ir=>rr(ir.target.value),onKeyDown:nr,onPaste:lr,className:`w-full pl-14 pr-4 py-3 bg-white dark:bg-slate-900 border-2 rounded font-mono text-sm h-64 resize-none focus:outline-none focus:ring-2 ${b?"border-red-500 focus:ring-red-500 text-red-700 dark:text-red-300":"border-slate-300 dark:border-slate-700 focus:ring-blue-500 text-slate-900 dark:text-slate-100"}`,placeholder:'{"key": "value"}',spellCheck:!1})]}),b&&jsxRuntimeExports.jsx("div",{className:"mt-3 p-3 bg-red-100 dark:bg-red-900/20 border border-red-500 rounded",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-red-600 dark:text-red-400 font-bold text-sm",children:""}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold text-red-700 dark:text-red-400",children:"Invalid JSON"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-red-600 dark:text-red-300 mt-1 font-mono",children:b}),_e&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-red-600 dark:text-red-300 mt-1",children:["Error on line ",_e]})]})]})}),jsxRuntimeExports.jsxs("p",{className:"mt-3 text-xs text-slate-500 dark:text-slate-400",children:["Press ",jsxRuntimeExports.jsx("kbd",{className:"px-2 py-0.5 bg-slate-200 dark:bg-slate-700 rounded border border-slate-300 dark:border-slate-600 font-mono",children:"Cmd/Ctrl + Enter"})," to send, ",jsxRuntimeExports.jsx("kbd",{className:"px-2 py-0.5 bg-slate-200 dark:bg-slate-700 rounded border border-slate-300 dark:border-slate-600 font-mono",children:"Esc"})," to cancel"]})]}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 border-t border-slate-300 dark:border-slate-700 flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:tr,disabled:!!b,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-slate-300 dark:disabled:bg-slate-700 disabled:text-slate-500 dark:disabled:text-slate-500 disabled:cursor-not-allowed text-white rounded font-semibold transition",children:"Send Event"}),jsxRuntimeExports.jsx("button",{onClick:c,className:"px-4 py-2 bg-slate-300 dark:bg-slate-700 hover:bg-slate-400 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded font-semibold transition",children:"Cancel"})]})]})})}function ContextMenu({x:a,y:e,onSendWithPayload:s,onClose:o}){const c=reactExports.useRef(null),[d,g]=reactExports.useState({x:a,y:e});return reactExports.useEffect(()=>{if(c.current){const b=c.current.getBoundingClientRect(),j=c.current.parentElement;if(!j)return;const _e=j.getBoundingClientRect(),er=_e.width,rr=_e.height;let tr=a,nr=e;tr+=5,nr+=5,tr+b.width>er&&(tr=Math.max(10,er-b.width-10)),nr+b.height>rr&&(nr=Math.max(10,rr-b.height-10)),tr<10&&(tr=10),nr<10&&(nr=10),g({x:tr,y:nr})}},[a,e]),reactExports.useEffect(()=>{const b=_e=>{c.current&&!c.current.contains(_e.target)&&o()},j=_e=>{_e.key==="Escape"&&o()};return document.addEventListener("mousedown",b),document.addEventListener("keydown",j),()=>{document.removeEventListener("mousedown",b),document.removeEventListener("keydown",j)}},[o]),jsxRuntimeExports.jsx("div",{ref:c,className:"absolute z-[100] bg-white dark:bg-slate-800 rounded-lg shadow-2xl border border-slate-300 dark:border-slate-600 py-1 min-w-[200px]",style:{left:d.x,top:d.y},children:jsxRuntimeExports.jsxs("button",{onClick:()=>{s(),o()},className:"w-full px-4 py-2 text-left text-sm text-slate-900 dark:text-slate-100 hover:bg-slate-100 dark:hover:bg-slate-700 transition flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-semibold",children:"Send with Payload"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Add custom payload data"})]})]})})}function EventListMenu({x:a,y:e,events:s,onEventSelect:o,onClose:c}){const d=reactExports.useRef(null),[g,b]=reactExports.useState({x:a,y:e});return reactExports.useEffect(()=>{if(d.current){const j=d.current.getBoundingClientRect(),_e=d.current.parentElement;if(!_e)return;const er=_e.getBoundingClientRect(),rr=er.width,tr=er.height;let nr=a,ar=e;nr+=5,ar+=5,nr+j.width>rr&&(nr=Math.max(10,rr-j.width-10)),ar+j.height>tr&&(ar=Math.max(10,tr-j.height-10)),nr<10&&(nr=10),ar<10&&(ar=10),b({x:nr,y:ar})}},[a,e]),reactExports.useEffect(()=>{const j=er=>{d.current&&!d.current.contains(er.target)&&c()},_e=er=>{er.key==="Escape"&&c()};return document.addEventListener("mousedown",j),document.addEventListener("keydown",_e),()=>{document.removeEventListener("mousedown",j),document.removeEventListener("keydown",_e)}},[c]),jsxRuntimeExports.jsxs("div",{ref:d,className:"absolute z-[100] bg-white dark:bg-slate-800 rounded-lg shadow-2xl border border-slate-300 dark:border-slate-600 py-2 min-w-[200px] max-h-[400px] overflow-y-auto",style:{left:g.x,top:g.y},children:[jsxRuntimeExports.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wide",children:"Send Event"}),jsxRuntimeExports.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 my-1"}),s.length===0?jsxRuntimeExports.jsx("div",{className:"px-4 py-3 text-sm text-slate-500 dark:text-slate-400 text-center",children:"No events available"}):s.map(j=>jsxRuntimeExports.jsxs("button",{onClick:()=>{o(j),c()},className:"w-full px-4 py-2 text-left text-sm text-slate-900 dark:text-slate-100 hover:bg-blue-50 dark:hover:bg-slate-700 transition flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-mono text-xs",children:""}),jsxRuntimeExports.jsx("span",{className:"font-medium font-mono",children:j})]},j))]})}cytoscape$1.use(dagre);function StateMachineDiagram({config:a,activeStates:e,context:s,eventLog:o,onEventClick:c,onReset:d,onRewind:g,onForward:b,onFullRewind:j,onFullForward:_e,onPlay:er,onPause:rr,canRewind:tr,canForward:nr,historyIndex:ar,historyLength:lr,isHalted:or,isPlaying:ir,onShowToast:sr,onClearLog:ur}){const{theme:cr}=useTheme(),fr=reactExports.useRef(null),hr=reactExports.useRef(null),dr=reactExports.useRef(null),vr=reactExports.useRef(c),[gr,pr]=reactExports.useState(!1),[mr,yr]=reactExports.useState(!1),[br,Er]=reactExports.useState("payload"),[_r,Rr]=reactExports.useState(""),[Cr,wr]=reactExports.useState(null),[$r,Ar]=reactExports.useState(null),[Sr,kr]=reactExports.useState(!0),[Mr,qr]=reactExports.useState(!0),[Tr,Pr]=reactExports.useState(null),Br=reactExports.useMemo(()=>{const Vr=new Set,Zr=et=>{if(et.on)for(const Yr of Object.keys(et.on))Vr.add(Yr);if(et.states)for(const Yr of Object.values(et.states))Zr(Yr)};for(const et of Object.values(a.states))Zr(et);return Array.from(Vr).sort()},[a]);reactExports.useEffect(()=>{const Vr=()=>{pr(!!document.fullscreenElement),setTimeout(()=>{dr.current&&(dr.current.resize(),dr.current.fit(),dr.current.center())},100)};return document.addEventListener("fullscreenchange",Vr),()=>{document.removeEventListener("fullscreenchange",Vr)}},[]),reactExports.useEffect(()=>{vr.current=c},[c]);const Ur=Vr=>{const Zr=Vr?"#3b82f6":"#2563eb",et=Vr?"#2563eb":"#1d4ed8",Yr=Vr?"#64748b":"#94a3b8";return[{selector:"node",style:{"background-color":Zr,label:"data(label)",color:"#fff","text-valign":"center","text-halign":"center","font-weight":"bold","text-wrap":"wrap","text-max-width":"100px","font-size":"10px",width:140,height:80,"border-width":3,"border-color":et}},{selector:"edge",style:{width:2,"line-color":Yr,"target-arrow-color":Yr,"target-arrow-shape":"triangle","curve-style":"bezier","arrow-scale":1,label:"data(label)","font-size":"9px","text-wrap":"wrap","text-max-width":"120px","text-margin-y":"-8","text-background-color":Vr?"#0f172a":"#ffffff","text-background-opacity":.95,"text-background-padding":"3px",color:Vr?"#94a3b8":"#64748b"}},{selector:"node:parent",style:{"background-opacity":.15,"background-color":Vr?"#64748b":"#cbd5e1","border-color":Vr?"#475569":"#94a3b8","border-width":2,"text-valign":"top","text-halign":"center","font-weight":"bold",color:Vr?"#cbd5e1":"#475569","font-size":"11px",padding:"20"}},{selector:"node.active",style:{"background-color":"#10b981","border-color":"#059669","border-width":4}},{selector:"node:parent.active",style:{"background-color":"#10b981","background-opacity":.2,"border-color":"#059669","border-width":3}},{selector:"node.highlighted",style:{"background-color":"#06b6d4","border-color":"#0891b2","border-width":4}},{selector:"edge.highlighted",style:{"line-color":"#06b6d4","target-arrow-color":"#06b6d4",width:3}},{selector:"node[isStartNode]",style:{"background-color":Vr?"#1e293b":"#cbd5e1",width:20,height:20,shape:"ellipse",label:"","border-width":2,"border-color":Vr?"#475569":"#94a3b8"}},{selector:"edge[isStartEdge]",style:{width:3,"line-color":Vr?"#475569":"#94a3b8","target-arrow-color":Vr?"#475569":"#94a3b8"}},{selector:"edge[isAlways]",style:{"line-style":"dashed","line-dash-pattern":[6,3],width:2.5,"line-color":Vr?"#8b5cf6":"#7c3aed","target-arrow-color":Vr?"#8b5cf6":"#7c3aed"}},{selector:"node.halted",style:{"background-color":"#a855f7","border-color":"#9333ea","border-width":4}}]};reactExports.useEffect(()=>{if(!fr.current)return;const Vr=cr==="dark",Zr=buildElements(a);dr.current=cytoscape$1({container:fr.current,elements:Zr,wheelSensitivity:3,style:Ur(Vr),layout:{name:"dagre",rankDir:"LR",padding:50,spacingFactor:1.3,nodeDimensionsIncludeLabels:!0,rankSep:120,edgeSep:40}}),dr.current.on("tap","edge",Qr=>{var tt;console.log("Edge clicked");const Jr=Qr.target,rt=Jr.data();rt.eventType&&!rt.isStartEdge&&!rt.isAlways&&vr.current(rt.eventType),(tt=dr.current)==null||tt.elements().removeClass("highlighted"),Jr.addClass("highlighted")}),dr.current.on("cxttap","edge",Qr=>{var tt;const Jr=Qr.target,rt=Jr.data();if(rt.eventType&&!rt.isStartEdge&&!rt.isAlways){const lt=Qr.renderedPosition||Qr.position;fr.current&&wr({x:lt.x,y:lt.y,eventType:rt.eventType})}(tt=dr.current)==null||tt.elements().removeClass("highlighted"),Jr.addClass("highlighted")}),dr.current.on("tap","node",Qr=>{var rt;const Jr=Qr.target;(rt=dr.current)==null||rt.elements().removeClass("highlighted"),Jr.addClass("highlighted"),Jr.connectedEdges().addClass("highlighted")}),dr.current.on("cxttap","node",Qr=>{var lt;const Jr=Qr.target;if(Jr.data("isStartNode"))return;const rt=Qr.renderedPosition||Qr.position;fr.current&&Ar({x:rt.x,y:rt.y}),(lt=dr.current)==null||lt.elements().removeClass("highlighted"),Jr.addClass("highlighted"),Jr.connectedEdges().addClass("highlighted")}),dr.current.on("tap",Qr=>{var Jr;Qr.target===dr.current&&((Jr=dr.current)==null||Jr.elements().removeClass("highlighted"),wr(null),Ar(null))}),dr.current.on("cxttap",Qr=>{Qr.target===dr.current&&(wr(null),Ar(null))});const et=fr.current,Yr=Qr=>{Qr.preventDefault()};return et.addEventListener("contextmenu",Yr),()=>{var Qr;et.removeEventListener("contextmenu",Yr),(Qr=dr.current)==null||Qr.destroy()}},[]),reactExports.useEffect(()=>{if(!dr.current)return;const Vr=buildElements(a);dr.current.elements().remove(),dr.current.add(Vr),dr.current.layout({name:"dagre",rankDir:"LR",padding:50,spacingFactor:1.3,nodeDimensionsIncludeLabels:!0,rankSep:120,edgeSep:40}).run()},[a]),reactExports.useEffect(()=>{if(!dr.current)return;const Vr=cr==="dark";dr.current.style(Ur(Vr))},[cr]),reactExports.useEffect(()=>{dr.current&&(dr.current.nodes().removeClass("active"),dr.current.nodes().removeClass("halted"),e.forEach(Vr=>{var et;const Zr=(et=dr.current)==null?void 0:et.getElementById(Vr);Zr&&Zr.length>0&&(or&&Zr.data("isFinal")?Zr.addClass("halted"):Zr.addClass("active"))}))},[e,or]);const Nr=()=>{dr.current&&(dr.current.zoom(dr.current.zoom()+.1),dr.current.center())},Ir=()=>{dr.current&&(dr.current.zoom(dr.current.zoom()-.1),dr.current.center())},Dr=()=>{dr.current&&(dr.current.fit(),dr.current.center())},Or=async()=>{if(hr.current)try{document.fullscreenElement?await document.exitFullscreen():await hr.current.requestFullscreen()}catch(Vr){console.error("Error toggling fullscreen:",Vr)}},jr=(Vr,Zr)=>{console.log(`Sending event: ${Vr}`,Zr),vr.current(Vr,Zr);const et=Zr&&Object.keys(Zr).length>0?" with payload":"";sr(`Event sent: ${Vr}${et}`,"success")},Wr=()=>{yr(!1),Rr("")},Xr=()=>{Cr&&(Rr(Cr.eventType),Er("payload"),yr(!0),wr(null))},dt=Vr=>{Rr(Vr),Er("payload"),yr(!0),Ar(null)};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{ref:hr,className:`relative bg-slate-100 dark:bg-slate-800 rounded-lg shadow-2xl p-4 ${gr?"bg-white dark:bg-slate-950":""}`,children:[jsxRuntimeExports.jsx(PayloadModal,{isOpen:mr,eventType:_r,mode:br,onSend:jr,onClose:Wr}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"State Machine Diagram"}),or&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-purple-500 text-white rounded-lg font-semibold text-sm",children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:"State Machine Halted"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 bg-slate-200 dark:bg-slate-700 rounded-lg px-2 py-1",children:[jsxRuntimeExports.jsx("button",{onClick:j,disabled:!tr||ir,className:"px-2 py-1 bg-blue-600 hover:bg-blue-500 disabled:bg-slate-400 disabled:cursor-not-allowed text-white rounded text-xs transition font-semibold",title:"Rewind to start",children:""}),jsxRuntimeExports.jsx("button",{onClick:()=>g(1),disabled:!tr||ir,className:"px-2 py-1 bg-blue-600 hover:bg-blue-500 disabled:bg-slate-400 disabled:cursor-not-allowed text-white rounded text-xs transition font-semibold",title:"Rewind 1 step",children:""}),ir?jsxRuntimeExports.jsx("button",{onClick:rr,className:"px-2 py-1 bg-orange-600 hover:bg-orange-500 text-white rounded text-xs transition font-semibold",title:"Pause playback",children:""}):jsxRuntimeExports.jsx("button",{onClick:er,disabled:!nr,className:"px-2 py-1 bg-green-600 hover:bg-green-500 disabled:bg-slate-400 disabled:cursor-not-allowed text-white rounded text-xs transition font-semibold",title:"Play (step forward every second)",children:""}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-mono text-slate-700 dark:text-slate-300 min-w-[60px] text-center",children:[ar+1,"/",lr]}),jsxRuntimeExports.jsx("button",{onClick:()=>b(1),disabled:!nr||ir,className:"px-2 py-1 bg-blue-600 hover:bg-blue-500 disabled:bg-slate-400 disabled:cursor-not-allowed text-white rounded text-xs transition font-semibold",title:"Fast forward 1 step",children:""}),jsxRuntimeExports.jsx("button",{onClick:_e,disabled:!nr||ir,className:"px-2 py-1 bg-blue-600 hover:bg-blue-500 disabled:bg-slate-400 disabled:cursor-not-allowed text-white rounded text-xs transition font-semibold",title:"Fast forward to end",children:""})]}),jsxRuntimeExports.jsx("button",{onClick:d,className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white rounded text-sm transition font-semibold",title:"Reset machine",children:"Reset"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 ml-4 border-l border-slate-400 dark:border-slate-600 pl-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-700 dark:text-slate-300",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 rounded bg-blue-500 border-2 border-blue-600"}),jsxRuntimeExports.jsx("span",{children:"Inactive"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-700 dark:text-slate-300",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 rounded bg-green-500 border-2 border-green-600"}),jsxRuntimeExports.jsx("span",{children:"Active"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-700 dark:text-slate-300",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 rounded bg-cyan-500 border-2 border-cyan-600"}),jsxRuntimeExports.jsx("span",{children:"Selected"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-700 dark:text-slate-300",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 rounded bg-purple-500 border-2 border-purple-600"}),jsxRuntimeExports.jsx("span",{children:"Halted"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-700 dark:text-slate-300",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-300 dark:bg-slate-800 border-2 border-slate-500 dark:border-slate-600"}),jsxRuntimeExports.jsx("span",{children:"Start"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-700 dark:text-slate-300",children:[jsxRuntimeExports.jsx("svg",{width:"20",height:"4",className:"flex-shrink-0",children:jsxRuntimeExports.jsx("line",{x1:"0",y1:"2",x2:"20",y2:"2",stroke:"#7c3aed",strokeWidth:"2",strokeDasharray:"4,2"})}),jsxRuntimeExports.jsx("span",{children:"Always"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-700 dark:text-slate-300",children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:"Guard"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 ml-4 border-l border-slate-400 dark:border-slate-600 pl-4",children:[jsxRuntimeExports.jsx("button",{onClick:Nr,className:"px-3 py-1 bg-slate-300 dark:bg-slate-700 hover:bg-slate-400 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded font-bold transition",title:"Zoom In",children:"+"}),jsxRuntimeExports.jsx("button",{onClick:Ir,className:"px-3 py-1 bg-slate-300 dark:bg-slate-700 hover:bg-slate-400 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded font-bold transition",title:"Zoom Out",children:"-"}),jsxRuntimeExports.jsx("button",{onClick:Dr,className:"px-3 py-1 bg-slate-300 dark:bg-slate-700 hover:bg-slate-400 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded text-sm transition",children:"Fit"}),jsxRuntimeExports.jsx("button",{onClick:Or,className:"px-3 py-1 bg-slate-400 dark:bg-slate-600 hover:bg-slate-500 dark:hover:bg-slate-500 text-white rounded text-sm transition font-semibold",children:gr?" Exit":" Fullscreen"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{ref:fr,className:`bg-white dark:bg-slate-900 rounded border-2 border-slate-300 dark:border-slate-700 ${gr?"h-[calc(100vh-6rem)] flex-1":"h-[600px]"}`}),Cr&&jsxRuntimeExports.jsx(ContextMenu,{x:Cr.x,y:Cr.y,onSendWithPayload:Xr,onClose:()=>wr(null)}),$r&&jsxRuntimeExports.jsx(EventListMenu,{x:$r.x,y:$r.y,events:Br,onEventSelect:dt,onClose:()=>Ar(null)}),Sr?jsxRuntimeExports.jsxs("div",{className:"absolute top-4 right-4 z-10 bg-slate-50 dark:bg-slate-800 border-2 border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-w-sm max-h-[calc(100%-2rem)] overflow-hidden flex flex-col pointer-events-auto",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-slate-100 dark:bg-slate-700 px-3 py-2 border-b border-slate-300 dark:border-slate-600 flex justify-between items-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-slate-100",children:"Context"}),jsxRuntimeExports.jsx("button",{onClick:()=>kr(!1),className:"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100 transition",title:"Hide context",children:""})]}),jsxRuntimeExports.jsx("div",{className:"p-3 overflow-auto flex-1",children:jsxRuntimeExports.jsx("pre",{className:"text-xs font-mono text-slate-800 dark:text-slate-200 whitespace-pre-wrap break-words",children:JSON.stringify(s,null,2)})})]}):jsxRuntimeExports.jsx("button",{onClick:()=>kr(!0),className:"absolute top-4 right-4 z-10 px-3 py-2 bg-slate-100 dark:bg-slate-700 border-2 border-slate-300 dark:border-slate-600 rounded-lg shadow-lg text-xs font-bold text-slate-900 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition pointer-events-auto",title:"Show context",children:"Show Context"}),Mr?jsxRuntimeExports.jsxs("div",{className:"absolute top-4 left-4 z-10 bg-slate-50 dark:bg-slate-800 border-2 border-slate-300 dark:border-slate-600 rounded-lg shadow-lg w-80 max-h-[calc(100%-2rem)] overflow-hidden flex flex-col pointer-events-auto",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 bg-slate-100 dark:bg-slate-700 px-3 py-2 border-b border-slate-300 dark:border-slate-600 flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-slate-100",children:"Event Log"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:o.length})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[o.length>0&&jsxRuntimeExports.jsx("button",{onClick:ur,className:"text-xs px-2 py-1 bg-red-600 hover:bg-red-500 text-white rounded font-semibold transition",title:"Clear log",children:"Clear"}),jsxRuntimeExports.jsx("button",{onClick:()=>qr(!1),className:"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100 transition",title:"Hide event log",children:""})]})]}),jsxRuntimeExports.jsx("div",{className:"overflow-auto flex-1 p-2",children:o.length===0?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full text-slate-500 dark:text-slate-400",children:jsxRuntimeExports.jsxs("div",{className:"text-center text-xs",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl mb-1",children:""}),jsxRuntimeExports.jsx("p",{children:"No events yet"})]})}):jsxRuntimeExports.jsx("div",{className:"space-y-1",children:o.map((Vr,Zr)=>{const et=Zr===ar-1;return jsxRuntimeExports.jsxs("div",{className:`rounded border overflow-hidden ${et?"bg-green-50 dark:bg-green-900/20 border-green-500 dark:border-green-600 ring-2 ring-green-500 dark:ring-green-600":"bg-white dark:bg-slate-900 border-slate-300 dark:border-slate-700"}`,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Pr(Tr===Zr?null:Zr),className:"w-full px-2 py-2 flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-800 transition text-left",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("span",{className:`font-mono text-xs px-1.5 py-0.5 rounded font-bold flex-shrink-0 ${et?"bg-green-200 dark:bg-green-800 text-green-800 dark:text-green-200":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400"}`,children:["#",Vr.seq]}),jsxRuntimeExports.jsx("span",{className:"text-xs font-semibold text-slate-900 dark:text-slate-100 truncate",children:Vr.type})]}),jsxRuntimeExports.jsx("span",{className:"text-slate-400 dark:text-slate-500 text-xs flex-shrink-0",children:Tr===Zr?"":""})]}),Tr===Zr&&jsxRuntimeExports.jsx("div",{className:"px-2 py-2 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-950",children:jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Time"}),jsxRuntimeExports.jsx("p",{className:"text-xs font-mono text-slate-800 dark:text-slate-200",children:(()=>{const Yr=new Date(Vr.timestamp);return Yr.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})+"."+Yr.getMilliseconds().toString().padStart(3,"0")})()})]}),Vr.payload&&Object.keys(Vr.payload).length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Payload"}),jsxRuntimeExports.jsx("pre",{className:"text-xs bg-white dark:bg-slate-900 p-2 rounded border border-slate-200 dark:border-slate-700 overflow-x-auto font-mono text-slate-800 dark:text-slate-200",children:JSON.stringify(Vr.payload,null,2)})]}),Vr.resultingState&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"State"}),jsxRuntimeExports.jsx("pre",{className:"text-xs bg-white dark:bg-slate-900 p-2 rounded border border-slate-200 dark:border-slate-700 overflow-x-auto font-mono text-slate-800 dark:text-slate-200",children:JSON.stringify(Vr.resultingState,null,2)})]})]})})]},Zr)})})})]}):jsxRuntimeExports.jsx("button",{onClick:()=>qr(!0),className:"absolute top-4 left-4 z-10 px-3 py-2 bg-slate-100 dark:bg-slate-700 border-2 border-slate-300 dark:border-slate-600 rounded-lg shadow-lg text-xs font-bold text-slate-900 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition pointer-events-auto",title:"Show event log",children:"Show Event Log"})]})]})})}function buildElements(a){const e=[],s=new Map;function o(g,b,j){const _e=j?`${j}.${g}`:g;if(s.set(g,_e),s.set(_e,_e),b.states)for(const[er,rr]of Object.entries(b.states))o(er,rr,_e)}for(const[g,b]of Object.entries(a.states))o(g,b,null);function c(g,b){if(g.includes(".")&&s.has(g))return g;if(s.has(g))return s.get(g);const j=b.split(".");if(j.length>1){j.pop();const _e=[...j,g].join(".");if(s.has(_e))return _e}return g}function d(g,b,j,_e){const er=j?`${j}.${g}`:g;if(e.push({data:{id:er,label:g,parent:j,isFinal:b.type==="final"}}),_e){const rr=`__START__${er}`;e.push({data:{id:rr,label:"",isStartNode:!0,parent:j}}),e.push({data:{id:`start_to_${er}`,source:rr,target:er,label:"",isStartEdge:!0}})}if(b.always&&(Array.isArray(b.always)?b.always:[b.always]).forEach((tr,nr)=>{const ar=typeof tr=="string"?{target:tr}:tr;if(ar&&typeof ar=="object"&&ar.target){const lr=c(ar.target,er);if(s.has(lr)){const or=ar.guard?Array.isArray(ar.guard)?ar.guard:[ar.guard]:[],sr=`always${or.length>0?` [ ${or.join(", ")}]`:""}`;e.push({data:{id:`${er}_to_${lr}_always_${nr}`,source:er,target:lr,label:sr,eventType:null,isAlways:!0,guards:or}})}}}),b.on)for(const[rr,tr]of Object.entries(b.on))(Array.isArray(tr)?tr:[tr]).forEach((ar,lr)=>{const or=typeof ar=="string"?{target:ar}:ar;if(or&&typeof or=="object"){const ir=or.target;if(ir){const sr=c(ir,er);if(s.has(sr)){const ur=or.guard?Array.isArray(or.guard)?or.guard:[or.guard]:[],cr=ur.length>0?` [ ${ur.join(", ")}]`:"",fr=`${rr}${cr}`;e.push({data:{id:`${er}_to_${sr}_on_${rr}_${lr}`,source:er,target:sr,label:fr,eventType:rr,guards:ur}})}}}});if(b.states)for(const[rr,tr]of Object.entries(b.states))d(rr,tr,er,b.initial===rr)}for(const[g,b]of Object.entries(a.states))d(g,b,null,a.initial===g);return e}function _arrayLikeToArray(a,e){(e==null||e>a.length)&&(e=a.length);for(var s=0,o=Array(e);s<e;s++)o[s]=a[s];return o}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _defineProperty$1(a,e,s){return(e=_toPropertyKey(e))in a?Object.defineProperty(a,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[e]=s,a}function _iterableToArrayLimit(a,e){var s=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(s!=null){var o,c,d,g,b=[],j=!0,_e=!1;try{if(d=(s=s.call(a)).next,e!==0)for(;!(j=(o=d.call(s)).done)&&(b.push(o.value),b.length!==e);j=!0);}catch(er){_e=!0,c=er}finally{try{if(!j&&s.return!=null&&(g=s.return(),Object(g)!==g))return}finally{if(_e)throw c}}return b}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ownKeys$1(a,e){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);e&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(a,c).enumerable})),s.push.apply(s,o)}return s}function _objectSpread2$1(a){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(s),!0).forEach(function(o){_defineProperty$1(a,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):ownKeys$1(Object(s)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(s,o))})}return a}function _objectWithoutProperties(a,e){if(a==null)return{};var s,o,c=_objectWithoutPropertiesLoose(a,e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);for(o=0;o<d.length;o++)s=d[o],e.indexOf(s)===-1&&{}.propertyIsEnumerable.call(a,s)&&(c[s]=a[s])}return c}function _objectWithoutPropertiesLoose(a,e){if(a==null)return{};var s={};for(var o in a)if({}.hasOwnProperty.call(a,o)){if(e.indexOf(o)!==-1)continue;s[o]=a[o]}return s}function _slicedToArray(a,e){return _arrayWithHoles(a)||_iterableToArrayLimit(a,e)||_unsupportedIterableToArray(a,e)||_nonIterableRest()}function _toPrimitive(a,e){if(typeof a!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var o=s.call(a,e);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function _toPropertyKey(a){var e=_toPrimitive(a,"string");return typeof e=="symbol"?e:e+""}function _unsupportedIterableToArray(a,e){if(a){if(typeof a=="string")return _arrayLikeToArray(a,e);var s={}.toString.call(a).slice(8,-1);return s==="Object"&&a.constructor&&(s=a.constructor.name),s==="Map"||s==="Set"?Array.from(a):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray(a,e):void 0}}function _defineProperty(a,e,s){return e in a?Object.defineProperty(a,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[e]=s,a}function ownKeys(a,e){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);e&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(a,c).enumerable})),s.push.apply(s,o)}return s}function _objectSpread2(a){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(s),!0).forEach(function(o){_defineProperty(a,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(s,o))})}return a}function compose$1(){for(var a=arguments.length,e=new Array(a),s=0;s<a;s++)e[s]=arguments[s];return function(o){return e.reduceRight(function(c,d){return d(c)},o)}}function curry$1(a){return function e(){for(var s=this,o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];return c.length>=a.length?a.apply(this,c):function(){for(var g=arguments.length,b=new Array(g),j=0;j<g;j++)b[j]=arguments[j];return e.apply(s,[].concat(c,b))}}}function isObject$1(a){return{}.toString.call(a).includes("Object")}function isEmpty(a){return!Object.keys(a).length}function isFunction(a){return typeof a=="function"}function hasOwnProperty(a,e){return Object.prototype.hasOwnProperty.call(a,e)}function validateChanges(a,e){return isObject$1(e)||errorHandler$1("changeType"),Object.keys(e).some(function(s){return!hasOwnProperty(a,s)})&&errorHandler$1("changeField"),e}function validateSelector(a){isFunction(a)||errorHandler$1("selectorType")}function validateHandler(a){isFunction(a)||isObject$1(a)||errorHandler$1("handlerType"),isObject$1(a)&&Object.values(a).some(function(e){return!isFunction(e)})&&errorHandler$1("handlersType")}function validateInitial(a){a||errorHandler$1("initialIsRequired"),isObject$1(a)||errorHandler$1("initialType"),isEmpty(a)&&errorHandler$1("initialContent")}function throwError$1(a,e){throw new Error(a[e]||a.default)}var errorMessages$1={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},errorHandler$1=curry$1(throwError$1)(errorMessages$1),validators$1={changes:validateChanges,selector:validateSelector,handler:validateHandler,initial:validateInitial};function create(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};validators$1.initial(a),validators$1.handler(e);var s={current:a},o=curry$1(didStateUpdate)(s,e),c=curry$1(updateState)(s),d=curry$1(validators$1.changes)(a),g=curry$1(extractChanges)(s);function b(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(er){return er};return validators$1.selector(_e),_e(s.current)}function j(_e){compose$1(o,c,d,g)(_e)}return[b,j]}function extractChanges(a,e){return isFunction(e)?e(a.current):e}function updateState(a,e){return a.current=_objectSpread2(_objectSpread2({},a.current),e),e}function didStateUpdate(a,e,s){return isFunction(e)?e(a.current):Object.keys(s).forEach(function(o){var c;return(c=e[o])===null||c===void 0?void 0:c.call(e,a.current[o])}),s}var index={create},config$1={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function curry(a){return function e(){for(var s=this,o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];return c.length>=a.length?a.apply(this,c):function(){for(var g=arguments.length,b=new Array(g),j=0;j<g;j++)b[j]=arguments[j];return e.apply(s,[].concat(c,b))}}}function isObject(a){return{}.toString.call(a).includes("Object")}function validateConfig(a){return a||errorHandler("configIsRequired"),isObject(a)||errorHandler("configType"),a.urls?(informAboutDeprecation(),{paths:{vs:a.urls.monacoBase}}):a}function informAboutDeprecation(){console.warn(errorMessages.deprecation)}function throwError(a,e){throw new Error(a[e]||a.default)}var errorMessages={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},errorHandler=curry(throwError)(errorMessages),validators={config:validateConfig},compose=function(){for(var e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return function(c){return s.reduceRight(function(d,g){return g(d)},c)}};function merge(a,e){return Object.keys(e).forEach(function(s){e[s]instanceof Object&&a[s]&&Object.assign(e[s],merge(a[s],e[s]))}),_objectSpread2$1(_objectSpread2$1({},a),e)}var CANCELATION_MESSAGE={type:"cancelation",msg:"operation is manually canceled"};function makeCancelable(a){var e=!1,s=new Promise(function(o,c){a.then(function(d){return e?c(CANCELATION_MESSAGE):o(d)}),a.catch(c)});return s.cancel=function(){return e=!0},s}var _excluded=["monaco"],_state$create=index.create({config:config$1,isInitialized:!1,resolve:null,reject:null,monaco:null}),_state$create2=_slicedToArray(_state$create,2),getState=_state$create2[0],setState=_state$create2[1];function config(a){var e=validators.config(a),s=e.monaco,o=_objectWithoutProperties(e,_excluded);setState(function(c){return{config:merge(c.config,o),monaco:s}})}function init(){var a=getState(function(e){var s=e.monaco,o=e.isInitialized,c=e.resolve;return{monaco:s,isInitialized:o,resolve:c}});if(!a.isInitialized){if(setState({isInitialized:!0}),a.monaco)return a.resolve(a.monaco),makeCancelable(wrapperPromise);if(window.monaco&&window.monaco.editor)return storeMonacoInstance(window.monaco),a.resolve(window.monaco),makeCancelable(wrapperPromise);compose(injectScripts,getMonacoLoaderScript)(configureLoader)}return makeCancelable(wrapperPromise)}function injectScripts(a){return document.body.appendChild(a)}function createScript(a){var e=document.createElement("script");return a&&(e.src=a),e}function getMonacoLoaderScript(a){var e=getState(function(o){var c=o.config,d=o.reject;return{config:c,reject:d}}),s=createScript("".concat(e.config.paths.vs,"/loader.js"));return s.onload=function(){return a()},s.onerror=e.reject,s}function configureLoader(){var a=getState(function(s){var o=s.config,c=s.resolve,d=s.reject;return{config:o,resolve:c,reject:d}}),e=window.require;e.config(a.config),e(["vs/editor/editor.main"],function(s){var o=s.m||s;storeMonacoInstance(o),a.resolve(o)},function(s){a.reject(s)})}function storeMonacoInstance(a){getState().monaco||setState({monaco:a})}function __getMonacoInstance(){return getState(function(a){var e=a.monaco;return e})}var wrapperPromise=new Promise(function(a,e){return setState({resolve:a,reject:e})}),loader={config,init,__getMonacoInstance},le={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},v=le,ae={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Y=ae;function Me({children:a}){return React.createElement("div",{style:Y.container},a)}var Z=Me,$=Z;function Ee({width:a,height:e,isEditorReady:s,loading:o,_ref:c,className:d,wrapperProps:g}){return React.createElement("section",{style:{...v.wrapper,width:a,height:e},...g},!s&&React.createElement($,null,o),React.createElement("div",{ref:c,style:{...v.fullWidth,...!s&&v.hide},className:d}))}var ee=Ee,H=reactExports.memo(ee);function Ce(a){reactExports.useEffect(a,[])}var k=Ce;function he(a,e,s=!0){let o=reactExports.useRef(!0);reactExports.useEffect(o.current||!s?()=>{o.current=!1}:a,e)}var l=he;function D(){}function h(a,e,s,o){return De(a,o)||be(a,e,s,o)}function De(a,e){return a.editor.getModel(te(a,e))}function be(a,e,s,o){return a.editor.createModel(e,s,o?te(a,o):void 0)}function te(a,e){return a.Uri.parse(e)}function Oe({original:a,modified:e,language:s,originalLanguage:o,modifiedLanguage:c,originalModelPath:d,modifiedModelPath:g,keepCurrentOriginalModel:b=!1,keepCurrentModifiedModel:j=!1,theme:_e="light",loading:er="Loading...",options:rr={},height:tr="100%",width:nr="100%",className:ar,wrapperProps:lr={},beforeMount:or=D,onMount:ir=D}){let[sr,ur]=reactExports.useState(!1),[cr,fr]=reactExports.useState(!0),hr=reactExports.useRef(null),dr=reactExports.useRef(null),vr=reactExports.useRef(null),gr=reactExports.useRef(ir),pr=reactExports.useRef(or),mr=reactExports.useRef(!1);k(()=>{let _r=loader.init();return _r.then(Rr=>(dr.current=Rr)&&fr(!1)).catch(Rr=>(Rr==null?void 0:Rr.type)!=="cancelation"&&console.error("Monaco initialization: error:",Rr)),()=>hr.current?Er():_r.cancel()}),l(()=>{if(hr.current&&dr.current){let _r=hr.current.getOriginalEditor(),Rr=h(dr.current,a||"",o||s||"text",d||"");Rr!==_r.getModel()&&_r.setModel(Rr)}},[d],sr),l(()=>{if(hr.current&&dr.current){let _r=hr.current.getModifiedEditor(),Rr=h(dr.current,e||"",c||s||"text",g||"");Rr!==_r.getModel()&&_r.setModel(Rr)}},[g],sr),l(()=>{let _r=hr.current.getModifiedEditor();_r.getOption(dr.current.editor.EditorOption.readOnly)?_r.setValue(e||""):e!==_r.getValue()&&(_r.executeEdits("",[{range:_r.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),_r.pushUndoStop())},[e],sr),l(()=>{var _r,Rr;(Rr=(_r=hr.current)==null?void 0:_r.getModel())==null||Rr.original.setValue(a||"")},[a],sr),l(()=>{let{original:_r,modified:Rr}=hr.current.getModel();dr.current.editor.setModelLanguage(_r,o||s||"text"),dr.current.editor.setModelLanguage(Rr,c||s||"text")},[s,o,c],sr),l(()=>{var _r;(_r=dr.current)==null||_r.editor.setTheme(_e)},[_e],sr),l(()=>{var _r;(_r=hr.current)==null||_r.updateOptions(rr)},[rr],sr);let yr=reactExports.useCallback(()=>{var Cr;if(!dr.current)return;pr.current(dr.current);let _r=h(dr.current,a||"",o||s||"text",d||""),Rr=h(dr.current,e||"",c||s||"text",g||"");(Cr=hr.current)==null||Cr.setModel({original:_r,modified:Rr})},[s,e,c,a,o,d,g]),br=reactExports.useCallback(()=>{var _r;!mr.current&&vr.current&&(hr.current=dr.current.editor.createDiffEditor(vr.current,{automaticLayout:!0,...rr}),yr(),(_r=dr.current)==null||_r.editor.setTheme(_e),ur(!0),mr.current=!0)},[rr,_e,yr]);reactExports.useEffect(()=>{sr&&gr.current(hr.current,dr.current)},[sr]),reactExports.useEffect(()=>{!cr&&!sr&&br()},[cr,sr,br]);function Er(){var Rr,Cr,wr,$r;let _r=(Rr=hr.current)==null?void 0:Rr.getModel();b||((Cr=_r==null?void 0:_r.original)==null||Cr.dispose()),j||((wr=_r==null?void 0:_r.modified)==null||wr.dispose()),($r=hr.current)==null||$r.dispose()}return React.createElement(H,{width:nr,height:tr,isEditorReady:sr,loading:er,_ref:vr,className:ar,wrapperProps:lr})}var ie=Oe;reactExports.memo(ie);function He(a){let e=reactExports.useRef();return reactExports.useEffect(()=>{e.current=a},[a]),e.current}var se=He,_=new Map;function Ve({defaultValue:a,defaultLanguage:e,defaultPath:s,value:o,language:c,path:d,theme:g="light",line:b,loading:j="Loading...",options:_e={},overrideServices:er={},saveViewState:rr=!0,keepCurrentModel:tr=!1,width:nr="100%",height:ar="100%",className:lr,wrapperProps:or={},beforeMount:ir=D,onMount:sr=D,onChange:ur,onValidate:cr=D}){let[fr,hr]=reactExports.useState(!1),[dr,vr]=reactExports.useState(!0),gr=reactExports.useRef(null),pr=reactExports.useRef(null),mr=reactExports.useRef(null),yr=reactExports.useRef(sr),br=reactExports.useRef(ir),Er=reactExports.useRef(),_r=reactExports.useRef(o),Rr=se(d),Cr=reactExports.useRef(!1),wr=reactExports.useRef(!1);k(()=>{let Sr=loader.init();return Sr.then(kr=>(gr.current=kr)&&vr(!1)).catch(kr=>(kr==null?void 0:kr.type)!=="cancelation"&&console.error("Monaco initialization: error:",kr)),()=>pr.current?Ar():Sr.cancel()}),l(()=>{var kr,Mr,qr,Tr;let Sr=h(gr.current,a||o||"",e||c||"",d||s||"");Sr!==((kr=pr.current)==null?void 0:kr.getModel())&&(rr&&_.set(Rr,(Mr=pr.current)==null?void 0:Mr.saveViewState()),(qr=pr.current)==null||qr.setModel(Sr),rr&&((Tr=pr.current)==null||Tr.restoreViewState(_.get(d))))},[d],fr),l(()=>{var Sr;(Sr=pr.current)==null||Sr.updateOptions(_e)},[_e],fr),l(()=>{!pr.current||o===void 0||(pr.current.getOption(gr.current.editor.EditorOption.readOnly)?pr.current.setValue(o):o!==pr.current.getValue()&&(wr.current=!0,pr.current.executeEdits("",[{range:pr.current.getModel().getFullModelRange(),text:o,forceMoveMarkers:!0}]),pr.current.pushUndoStop(),wr.current=!1))},[o],fr),l(()=>{var kr,Mr;let Sr=(kr=pr.current)==null?void 0:kr.getModel();Sr&&c&&((Mr=gr.current)==null||Mr.editor.setModelLanguage(Sr,c))},[c],fr),l(()=>{var Sr;b!==void 0&&((Sr=pr.current)==null||Sr.revealLine(b))},[b],fr),l(()=>{var Sr;(Sr=gr.current)==null||Sr.editor.setTheme(g)},[g],fr);let $r=reactExports.useCallback(()=>{var Sr;if(!(!mr.current||!gr.current)&&!Cr.current){br.current(gr.current);let kr=d||s,Mr=h(gr.current,o||a||"",e||c||"",kr||"");pr.current=(Sr=gr.current)==null?void 0:Sr.editor.create(mr.current,{model:Mr,automaticLayout:!0,..._e},er),rr&&pr.current.restoreViewState(_.get(kr)),gr.current.editor.setTheme(g),b!==void 0&&pr.current.revealLine(b),hr(!0),Cr.current=!0}},[a,e,s,o,c,d,_e,er,rr,g,b]);reactExports.useEffect(()=>{fr&&yr.current(pr.current,gr.current)},[fr]),reactExports.useEffect(()=>{!dr&&!fr&&$r()},[dr,fr,$r]),_r.current=o,reactExports.useEffect(()=>{var Sr,kr;fr&&ur&&((Sr=Er.current)==null||Sr.dispose(),Er.current=(kr=pr.current)==null?void 0:kr.onDidChangeModelContent(Mr=>{wr.current||ur(pr.current.getValue(),Mr)}))},[fr,ur]),reactExports.useEffect(()=>{if(fr){let Sr=gr.current.editor.onDidChangeMarkers(kr=>{var qr;let Mr=(qr=pr.current.getModel())==null?void 0:qr.uri;if(Mr&&kr.find(Tr=>Tr.path===Mr.path)){let Tr=gr.current.editor.getModelMarkers({resource:Mr});cr==null||cr(Tr)}});return()=>{Sr==null||Sr.dispose()}}return()=>{}},[fr,cr]);function Ar(){var Sr,kr;(Sr=Er.current)==null||Sr.dispose(),tr?rr&&_.set(d,pr.current.saveViewState()):(kr=pr.current.getModel())==null||kr.dispose(),pr.current.dispose()}return React.createElement(H,{width:nr,height:ar,isEditorReady:fr,loading:j,_ref:mr,className:lr,wrapperProps:or})}var fe=Ve,de=reactExports.memo(fe),Ft=de;function CodeEditor({value:a,onChange:e,onApply:s,hasUnsavedChanges:o,onLoadExample:c}){const{theme:d}=useTheme();return jsxRuntimeExports.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-lg shadow-2xl p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Configuration Editor"}),jsxRuntimeExports.jsx("button",{onClick:s,disabled:!o,className:"px-3 py-1 bg-green-600 hover:bg-green-500 disabled:bg-slate-400 disabled:cursor-not-allowed text-white rounded text-xs font-semibold transition",title:"Apply changes and reload machine",children:"Apply"}),o&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-orange-600 dark:text-orange-400 font-semibold flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"inline-block w-2 h-2 bg-orange-600 dark:bg-orange-400 rounded-full"}),"Unsaved changes"]})]}),c&&jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400 font-semibold mr-1",children:"Examples:"}),jsxRuntimeExports.jsx("button",{onClick:()=>c("counter"),className:"px-3 py-1 bg-blue-600 hover:bg-blue-500 text-white rounded font-semibold transition text-xs",title:"Counter Example",children:"Counter"}),jsxRuntimeExports.jsx("button",{onClick:()=>c("trafficLight"),className:"px-3 py-1 bg-green-600 hover:bg-green-500 text-white rounded font-semibold transition text-xs",title:"Traffic Light Example",children:"Traffic Light"}),jsxRuntimeExports.jsx("button",{onClick:()=>c("formWorkflow"),className:"px-3 py-1 bg-purple-600 hover:bg-purple-500 text-white rounded font-semibold transition text-xs",title:"Form Workflow Example",children:"Form Workflow"}),jsxRuntimeExports.jsx("button",{onClick:()=>c("parallelMedia"),className:"px-3 py-1 bg-orange-600 hover:bg-orange-500 text-white rounded font-semibold transition text-xs",title:"Media Player Example",children:"Media Player"})]})]}),jsxRuntimeExports.jsx("div",{className:"border-2 border-slate-300 dark:border-slate-700 rounded overflow-hidden",children:jsxRuntimeExports.jsx(Ft,{height:"500px",defaultLanguage:"javascript",theme:d==="dark"?"vs-dark":"light",value:a,onChange:g=>e(g||""),options:{minimap:{enabled:!1},fontSize:13,lineNumbers:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2}})})]})}function StateDisplay({stateValue:a,context:e,isHalted:s}){const o=c=>typeof c=="string"?c:typeof c=="object"&&c!==null?JSON.stringify(c,null,2):String(c);return jsxRuntimeExports.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-lg shadow-2xl p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-4",children:"Current State"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"State:"}),jsxRuntimeExports.jsx("span",{className:`px-4 py-2 rounded-full font-bold text-sm ${s?"bg-red-100 dark:bg-red-500/20 text-red-600 dark:text-red-400 border-2 border-red-500":"bg-green-100 dark:bg-green-500/20 text-green-600 dark:text-green-400 border-2 border-green-500"}`,children:o(a)}),s&&jsxRuntimeExports.jsx("span",{className:"text-xs text-red-500 dark:text-red-400 font-semibold",children:"HALTED"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg p-4 border border-slate-300 dark:border-slate-700",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Context:"}),jsxRuntimeExports.jsx("pre",{className:"text-xs text-slate-600 dark:text-slate-400 font-mono overflow-auto max-h-48",children:JSON.stringify(e,null,2)})]})]})]})}function EventControls({availableEvents:a,onSendEvent:e,disabled:s=!1}){const[o,c]=reactExports.useState(""),[d,g]=reactExports.useState("{}"),[b,j]=reactExports.useState(!1),[_e,er]=reactExports.useState(null),rr=ar=>{er(ar),j(!0)},tr=()=>{if(_e){try{const ar=JSON.parse(d);e(_e,{type:_e,...ar})}catch{e(_e,{type:_e})}j(!1),er(null),g("{}")}},nr=()=>{if(o.trim()){try{const ar=JSON.parse(d);e(o,{type:o,...ar})}catch{e(o,{type:o})}c(""),g("{}")}};return jsxRuntimeExports.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-lg shadow-2xl p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-4",children:"Send Events"}),b&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-md w-full mx-4 border-2 border-slate-300 dark:border-slate-600",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-slate-100 mb-4",children:["Event: ",_e]}),jsxRuntimeExports.jsx("label",{className:"block text-sm text-slate-700 dark:text-slate-300 mb-2",children:"Payload (JSON):"}),jsxRuntimeExports.jsx("textarea",{value:d,onChange:ar=>g(ar.target.value),className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-700 rounded text-slate-900 dark:text-slate-100 font-mono text-sm h-32",placeholder:'{"key": "value"}'}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 mt-4",children:[jsxRuntimeExports.jsx("button",{onClick:tr,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded font-semibold transition",children:"Send"}),jsxRuntimeExports.jsx("button",{onClick:()=>{j(!1),er(null),g("{}")},className:"flex-1 px-4 py-2 bg-slate-300 dark:bg-slate-700 hover:bg-slate-400 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded font-semibold transition",children:"Cancel"})]})]})}),a.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Available Events:"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.map(ar=>jsxRuntimeExports.jsx("button",{onClick:()=>rr(ar),disabled:s,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-slate-300 dark:disabled:bg-slate-700 disabled:text-slate-500 dark:disabled:text-slate-500 text-white rounded font-semibold transition text-sm",children:ar},ar))})]}),jsxRuntimeExports.jsxs("div",{className:"border-t border-slate-300 dark:border-slate-700 pt-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Custom Event:"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("input",{type:"text",value:o,onChange:ar=>c(ar.target.value),placeholder:"EVENT_TYPE",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-700 rounded text-slate-900 dark:text-slate-100 font-mono text-sm",disabled:s}),jsxRuntimeExports.jsx("textarea",{value:d,onChange:ar=>g(ar.target.value),placeholder:'{"key": "value"}',className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-700 rounded text-slate-900 dark:text-slate-100 font-mono text-sm h-24",disabled:s}),jsxRuntimeExports.jsx("button",{onClick:nr,disabled:s||!o.trim(),className:"w-full px-4 py-3 bg-green-600 hover:bg-green-500 disabled:bg-slate-300 dark:disabled:bg-slate-700 disabled:text-slate-500 dark:disabled:text-slate-500 text-white rounded font-bold transition",children:"Send Custom Event"})]})]}),s&&jsxRuntimeExports.jsx("p",{className:"mt-4 text-sm text-yellow-600 dark:text-yellow-400 text-center",children:"Machine is halted. Reset to continue."})]})}function EventLog({events:a,onClear:e}){const[s,o]=reactExports.useState(null),c=g=>{o(s===g?null:g)},d=g=>{const b=new Date(g);return b.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})+"."+b.getMilliseconds().toString().padStart(3,"0")};return jsxRuntimeExports.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-lg shadow-2xl p-6 flex flex-col h-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Event Log"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:[a.length," event",a.length!==1?"s":""]}),a.length>0&&jsxRuntimeExports.jsx("button",{onClick:e,className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white rounded text-sm font-semibold transition",children:"Clear"})]})]}),a.length===0?jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center justify-center text-slate-500 dark:text-slate-400",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl mb-2",children:""}),jsxRuntimeExports.jsx("p",{children:"No events logged yet"}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-1",children:"Send events to see them here"})]})}):jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-auto space-y-2",children:a.map((g,b)=>jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg border border-slate-300 dark:border-slate-700 overflow-hidden",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>c(b),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-800 transition text-left",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[jsxRuntimeExports.jsxs("span",{className:"font-mono text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 px-2 py-1 rounded font-bold",children:["#",g.seq]}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:g.type}),jsxRuntimeExports.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 font-mono",children:d(g.timestamp)})]}),jsxRuntimeExports.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:s===b?"":""})]}),s===b&&jsxRuntimeExports.jsx("div",{className:"px-4 py-3 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-950",children:jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2 uppercase",children:"Full Event"}),jsxRuntimeExports.jsx("pre",{className:"text-xs bg-white dark:bg-slate-900 p-3 rounded border border-slate-200 dark:border-slate-700 overflow-x-auto font-mono text-slate-800 dark:text-slate-200",children:JSON.stringify(g.payload,null,2)})]}),g.resultingState&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2 uppercase",children:"Resulting State"}),jsxRuntimeExports.jsx("pre",{className:"text-xs bg-white dark:bg-slate-900 p-3 rounded border border-slate-200 dark:border-slate-700 overflow-x-auto font-mono text-slate-800 dark:text-slate-200",children:JSON.stringify(g.resultingState,null,2)})]})]})})]},b))})]})}function Toast({message:a,type:e="info",duration:s=3e3,onClose:o}){reactExports.useEffect(()=>{const g=setTimeout(()=>{o()},s);return()=>clearTimeout(g)},[s,o]);const c={info:"bg-blue-600",success:"bg-green-600",warning:"bg-orange-600",error:"bg-red-600"},d={info:"",success:"",warning:"",error:""};return jsxRuntimeExports.jsx("div",{className:"fixed top-4 right-4 z-50 animate-slide-in-right",children:jsxRuntimeExports.jsxs("div",{className:`${c[e]} text-white px-6 py-4 rounded-lg shadow-2xl flex items-center gap-3 min-w-[300px] max-w-[500px]`,children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:d[e]}),jsxRuntimeExports.jsx("p",{className:"flex-1 font-semibold",children:a}),jsxRuntimeExports.jsx("button",{onClick:o,className:"text-white hover:text-gray-200 font-bold text-xl leading-none",children:""})]})})}const LinkedInIcon=({className:a})=>jsxRuntimeExports.jsx("svg",{className:a,width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),Footer=()=>jsxRuntimeExports.jsx("footer",{className:"mt-12 py-6 px-8 bg-slate-100 dark:bg-slate-900 border-t border-slate-300 dark:border-slate-800 text-center text-slate-600 dark:text-slate-400 text-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2",children:[jsxRuntimeExports.jsx("p",{children:" 2026 Konstantin Rybakov. All rights reserved."}),jsxRuntimeExports.jsxs("a",{href:"https://www.linkedin.com/in/konstantin-rybakov-15245121/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-slate-700 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:["Get in touch ",jsxRuntimeExports.jsx(LinkedInIcon,{className:"inline-block"})]})]})}),examples={counter:`// Counter Example
({
  initialContext: { count: 0 },
  initial: 'active',
  timeTravel: true,
  
  reducers: {
    increment: ({ context }) => {
      return { count: context.count + 1 };
    },
    decrement: ({ context }) => {
      return { count: context.count - 1 };
    },
    reset: () => {
      return { count: 0 };
    },
  },
  
  states: {
    active: {
      on: {
        INCREMENT: { assign: 'increment' },
        DECREMENT: { assign: 'decrement' },
        RESET: { assign: 'reset' },
      },
    },
  },
})`,trafficLight:`// Traffic Light Example
({
  initialContext: { 
    cycleCount: 0,
    timestamp: Date.now()
  },
  initial: 'green',
  timeTravel: true,
  
  reducers: {
    incrementCycle: ({ context }) => {
      return { 
        cycleCount: context.cycleCount + 1,
        timestamp: Date.now()
      };
    },
  },
  
  states: {
    green: {
      on: {
        TIMER: { target: 'yellow', assign: 'incrementCycle' },
      },
    },
    yellow: {
      on: {
        TIMER: 'red',
      },
    },
    red: {
      on: {
        TIMER: 'green',
      },
    },
  },
})`,formWorkflow:`// Form Workflow Example
({
  initialContext: {
    formData: { name: '', email: '' },
    errors: [],
    submitAttempts: 0,
  },
  initial: 'editing',
  timeTravel: true,
  
  guards: {
    isValid: ({ context }) => 
      context.formData.name.length > 0 && 
      context.formData.email.includes('@'),
  },
  
  reducers: {
    incrementAttempts: ({ context }) => {
      return { 
        submitAttempts: context.submitAttempts + 1 
      };
    },
    setErrors: ({ context, event }) => {
      return {
        errors: event.payload?.errors || ['Validation failed']
      };
    },
    clearErrors: () => {
      return { errors: [] };
    },
    updateForm: ({ context, event }) => {
      console.log('Updating form with:', event.payload);
      return {
        formData: { ...context.formData, ...event.payload }
      };
   },
  },
  
  states: {
    editing: {
      on: {
        UPDATE: { assign: 'updateForm' },
        SUBMIT: 'submitting',
      },
    },
    
    submitting: {
      initial: 'validating',
      onEntry: ['incrementAttempts'],
      
      states: {
        validating: {
          always: [
            { target: 'sending', guard: 'isValid' },
            { target: 'failed' }
          ],
        },
        
        sending: {
          on: {
            SUCCESS: 'success',
            ERROR: { target: 'failed', assign: 'setErrors' },
          },
        },
        
        failed: {
          on: {
            RETRY: { target: 'editing', assign: 'clearErrors' },
          },
        },
        
        success: {
          type: 'final',
        },
      },
    },
  },
})`,parallelMedia:`// Advanced Parallel Media Player Example
({
  initialContext: { 
    volume: 50, 
    isPlaying: false,
    currentTime: 0,
    isPoweredOn: false,
    bufferLevel: 100,
    networkQuality: 'good',
    subtitlesEnabled: false,
    quality: 'HD'
  },
  initial: 'off',
  timeTravel: true,
  
  reducers: {
    powerOn: () => {
      return { 
        isPoweredOn: true,
        bufferLevel: 100,
        networkQuality: 'good'
      };
    },
    powerOff: () => {
      return { 
        isPoweredOn: false, 
        isPlaying: false,
        bufferLevel: 0
      };
    },
    play: () => {
      return { isPlaying: true };
    },
    pause: () => {
      return { isPlaying: false };
    },
    volumeUp: ({ context }) => {
      return { 
        volume: Math.min(100, context.volume + 10) 
      };
    },
    volumeDown: ({ context }) => {
      return { 
        volume: Math.max(0, context.volume - 10) 
      };
    },
    mute: () => {
      return { volume: 0 };
    },
    unmute: () => {
      return { volume: 50 };
    },
    startBuffering: ({ context }) => {
      return { 
        bufferLevel: Math.max(0, context.bufferLevel - 20) 
      };
    },
    finishBuffering: () => {
      return { bufferLevel: 100 };
    },
    networkDegraded: () => {
      return { networkQuality: 'poor' };
    },
    networkRestored: () => {
      return { networkQuality: 'good' };
    },
    enableSubtitles: () => {
      return { subtitlesEnabled: true };
    },
    disableSubtitles: () => {
      return { subtitlesEnabled: false };
    },
    setSD: () => {
      return { quality: 'SD' };
    },
    setHD: () => {
      return { quality: 'HD' };
    },
    set4K: () => {
      return { quality: '4K' };
    },
  },
  
  states: {
    off: {
      on: {
        POWER_ON: { target: 'on', assign: 'powerOn' },
      },
    },
    
    on: {
      type: 'parallel',
      onExit: ['powerOff'],
      
      on: {
        POWER_OFF: 'off',
      },
      
      states: {
        // Playback control
        playback: {
          initial: 'paused',
          states: {
            playing: {
              on: { 
                PAUSE: { target: 'paused', assign: 'pause' } 
              },
            },
            paused: {
              on: { 
                PLAY: { target: 'playing', assign: 'play' } 
              },
            },
          },
        },
        
        // Volume control
        volume: {
          initial: 'normal',
          states: {
            normal: {
              on: {
                VOLUME_UP: { assign: 'volumeUp' },
                VOLUME_DOWN: { assign: 'volumeDown' },
                MUTE: { target: 'muted', assign: 'mute' },
              },
            },
            muted: {
              on: {
                UNMUTE: { target: 'normal', assign: 'unmute' },
              },
            },
          },
        },
        
        // Buffer status
        buffer: {
          initial: 'ready',
          states: {
            ready: {
              on: {
                BUFFER_LOW: { target: 'buffering', assign: 'startBuffering' },
              },
            },
            buffering: {
              on: {
                BUFFER_COMPLETE: { target: 'ready', assign: 'finishBuffering' },
              },
            },
          },
        },
        
        // Network status
        network: {
          initial: 'connected',
          states: {
            connected: {
              on: {
                CONNECTION_LOST: { target: 'disconnected', assign: 'networkDegraded' },
              },
            },
            disconnected: {
              on: {
                CONNECTION_RESTORED: { target: 'connected', assign: 'networkRestored' },
              },
            },
          },
        },
        
        // Subtitle control
        subtitles: {
          initial: 'hidden',
          states: {
            hidden: {
              on: {
                SHOW_SUBTITLES: { target: 'visible', assign: 'enableSubtitles' },
              },
            },
            visible: {
              on: {
                HIDE_SUBTITLES: { target: 'hidden', assign: 'disableSubtitles' },
              },
            },
          },
        },
        
        // Quality control
        quality: {
          initial: 'hd',
          states: {
            sd: {
              on: {
                SET_HD: { target: 'hd', assign: 'setHD' },
                SET_4K: { target: 'uhd', assign: 'set4K' },
              },
            },
            hd: {
              on: {
                SET_SD: { target: 'sd', assign: 'setSD' },
                SET_4K: { target: 'uhd', assign: 'set4K' },
              },
            },
            uhd: {
              on: {
                SET_SD: { target: 'sd', assign: 'setSD' },
                SET_HD: { target: 'hd', assign: 'setHD' },
              },
            },
          },
        },
      },
    },
  },
})`};function App(){const{theme,toggleTheme}=useTheme(),[code,setCode]=reactExports.useState(examples.trafficLight),[loadedCode,setLoadedCode]=reactExports.useState(examples.trafficLight),[machine,setMachine]=reactExports.useState(null),[config,setConfig]=reactExports.useState(null),[error,setError]=reactExports.useState(null),[activeStates,setActiveStates]=reactExports.useState(new Set),[activeTab,setActiveTab]=reactExports.useState("controls"),[eventLog,setEventLog]=reactExports.useState([]),[eventSeq,setEventSeq]=reactExports.useState(0),[toast,setToast]=reactExports.useState(null),[initialized,setInitialized]=reactExports.useState(!1),[isPlaying,setIsPlaying]=reactExports.useState(!1),hasUnsavedChanges=code!==loadedCode;reactExports.useEffect(()=>{if(!initialized)try{const loadedConfig=eval(examples.trafficLight),newMachine=new StateMachine(loadedConfig).start();setMachine(newMachine),setConfig(loadedConfig),setActiveStates(new Set(newMachine.getActiveStateNodes())),setInitialized(!0)}catch(a){console.error("Failed to auto-load traffic light example:",a)}},[initialized]);const availableEvents=reactExports.useMemo(()=>{if(!machine)return[];const a=new Set,e=machine.root,s=o=>{if(o._onTransitions)for(const c of o._onTransitions.keys())c.startsWith("__")||a.add(c);if(o.children)for(const c of o.children)s(c)};return s(e),Array.from(a)},[machine]),loadConfiguration=reactExports.useCallback(()=>{try{const loadedConfig=eval(code);if(!loadedConfig||typeof loadedConfig!="object")throw new Error("Configuration must be an object");if(!loadedConfig.initialContext)throw new Error("Configuration must have initialContext property");if(!loadedConfig.initial)throw new Error("Configuration must have initial property");if(!loadedConfig.states)throw new Error("Configuration must have states property");const newMachine=new StateMachine(loadedConfig).start();setMachine(newMachine),setConfig(loadedConfig),setActiveStates(new Set(newMachine.getActiveStateNodes())),setError(null),setEventLog([]),setEventSeq(0),setLoadedCode(code),setToast({message:"Configuration applied successfully",type:"success"})}catch(a){setError(a.message||"Failed to load configuration"),setMachine(null),setConfig(null)}},[code]);reactExports.useEffect(()=>{machine&&machine.isHalted()&&setToast({message:"State Machine Halted",type:"warning"})},[machine,activeStates]);const handleSendEvent=reactExports.useCallback((a,e)=>{if(machine)try{const s=e||{type:a};console.log("Sending event to machine:",s);const o=machine.getHistoryIndex(),c=machine.getHistoryLength()-1,d=o<c;machine.send(s);const g=eventSeq+1,b={value:machine.getStateValue(),context:machine.getContext()};setEventLog(j=>d?[...j.slice(0,o),{seq:g,type:a,payload:s,timestamp:Date.now(),resultingState:b}]:[...j,{seq:g,type:a,payload:s,timestamp:Date.now(),resultingState:b}]),setEventSeq(g),setActiveStates(new Set(machine.getActiveStateNodes())),setError(null)}catch(s){setError(s.message||"Failed to send event")}},[machine,eventSeq]),handleRewind=reactExports.useCallback((a=1)=>{if(machine)try{machine.rewind(a),setActiveStates(new Set(machine.getActiveStateNodes())),setError(null)}catch(e){setError(e.message||"Failed to rewind")}},[machine]),handleForward=reactExports.useCallback((a=1)=>{if(machine)try{machine.ff(a),setActiveStates(new Set(machine.getActiveStateNodes())),setError(null)}catch(e){setError(e.message||"Failed to fast-forward")}},[machine]),handleFullRewind=reactExports.useCallback(()=>{if(!machine)return;const a=machine.getHistoryIndex();a>0&&handleRewind(a)},[machine,handleRewind]),handleFullForward=reactExports.useCallback(()=>{if(!machine)return;const a=machine.getHistoryIndex(),e=machine.getHistoryLength()-1;a<e&&handleForward(e-a)},[machine,handleForward]),handlePlay=reactExports.useCallback(()=>{setIsPlaying(!0)},[]),handlePause=reactExports.useCallback(()=>{setIsPlaying(!1)},[]);reactExports.useEffect(()=>{if(!isPlaying||!machine)return;const a=setInterval(()=>{machine.getHistoryIndex()<machine.getHistoryLength()-1?handleForward(1):setIsPlaying(!1)},1e3);return()=>clearInterval(a)},[isPlaying,machine,handleForward]);const canRewind=machine?machine.getHistoryIndex()>0:!1,canForward=machine?machine.getHistoryIndex()<machine.getHistoryLength()-1:!1,handleReset=reactExports.useCallback(()=>{setIsPlaying(!1),loadConfiguration()},[loadConfiguration]),handleClearLog=reactExports.useCallback(()=>{setEventLog([]),setEventSeq(0)},[]),loadExample=reactExports.useCallback(exampleKey=>{setCode(examples[exampleKey]);try{const loadedConfig=eval(examples[exampleKey]);if(!loadedConfig||typeof loadedConfig!="object")throw new Error("Configuration must be an object");if(!loadedConfig.initialContext)throw new Error("Configuration must have initialContext property");if(!loadedConfig.initial)throw new Error("Configuration must have initial property");if(!loadedConfig.states)throw new Error("Configuration must have states property");const newMachine=new StateMachine(loadedConfig).start();setMachine(newMachine),setConfig(loadedConfig),setActiveStates(new Set(newMachine.getActiveStateNodes())),setError(null),setEventLog([]),setEventSeq(0),setLoadedCode(examples[exampleKey])}catch(a){setError(a.message||"Failed to load configuration"),setMachine(null),setConfig(null)}},[]);return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-white dark:bg-slate-950 text-slate-900 dark:text-slate-100",children:[jsxRuntimeExports.jsx("header",{className:"bg-slate-100 dark:bg-slate-900 border-b border-slate-300 dark:border-slate-800 py-6 px-8 shadow-xl",children:jsxRuntimeExports.jsx("div",{className:"max-w-[1800px] mx-auto",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-500 to-purple-600 bg-clip-text text-transparent mb-2",children:"FSMator UI 0.0.1"}),jsxRuntimeExports.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:"Visual State Machine Simulator"}),jsxRuntimeExports.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-xs mt-1",children:["Powered by ",jsxRuntimeExports.jsx("a",{href:"https://github.com/viocost/fsmator",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300 underline",children:"FSMator 0.2.0"})]})]}),jsxRuntimeExports.jsx("button",{onClick:toggleTheme,className:"px-4 py-2 bg-slate-200 dark:bg-slate-800 hover:bg-slate-300 dark:hover:bg-slate-700 rounded-lg transition shadow-md",title:`Switch to ${theme==="dark"?"light":"dark"} theme`,children:theme==="dark"?"":""})]})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-[1800px] mx-auto p-8",children:[error&&jsxRuntimeExports.jsxs("div",{className:"mb-6 bg-red-100 dark:bg-red-500/20 border-2 border-red-500 rounded-lg p-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-red-600 dark:text-red-400 font-bold mb-1",children:"Error"}),jsxRuntimeExports.jsx("pre",{className:"text-red-700 dark:text-red-300 text-sm font-mono",children:error})]}),jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2 border-b border-slate-300 dark:border-slate-700",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>setActiveTab("controls"),className:`px-6 py-3 font-semibold transition relative ${activeTab==="controls"?"text-blue-600 dark:text-blue-400":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:["Controls & State",activeTab==="controls"&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>setActiveTab("editor"),className:`px-6 py-3 font-semibold transition relative ${activeTab==="editor"?"text-blue-600 dark:text-blue-400":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:["Code Editor",activeTab==="editor"&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>setActiveTab("diagram"),disabled:!machine,className:`px-6 py-3 font-semibold transition relative disabled:opacity-50 disabled:cursor-not-allowed ${activeTab==="diagram"?"text-blue-600 dark:text-blue-400":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:["Interactive Diagram",activeTab==="diagram"&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400"})]})]})}),activeTab==="controls"&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[jsxRuntimeExports.jsx("div",{className:"space-y-6",children:machine?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-lg shadow-2xl p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:"Time Travel"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 font-mono",children:[machine.getHistoryIndex()+1," / ",machine.getHistoryLength()]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 flex-wrap",children:[jsxRuntimeExports.jsx("button",{onClick:handleFullRewind,disabled:!canRewind||isPlaying,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-slate-400 disabled:cursor-not-allowed text-white rounded font-semibold transition text-sm",title:"Rewind to start",children:" Start"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleRewind(1),disabled:!canRewind||isPlaying,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-slate-400 disabled:cursor-not-allowed text-white rounded font-semibold transition text-sm",title:"Rewind 1 step",children:" Back"}),isPlaying?jsxRuntimeExports.jsx("button",{onClick:handlePause,className:"px-4 py-2 bg-orange-600 hover:bg-orange-500 text-white rounded font-semibold transition text-sm",title:"Pause playback",children:" Pause"}):jsxRuntimeExports.jsx("button",{onClick:handlePlay,disabled:!canForward,className:"px-4 py-2 bg-green-600 hover:bg-green-500 disabled:bg-slate-400 disabled:cursor-not-allowed text-white rounded font-semibold transition text-sm",title:"Play (step forward every second)",children:" Play"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleForward(1),disabled:!canForward||isPlaying,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-slate-400 disabled:cursor-not-allowed text-white rounded font-semibold transition text-sm",title:"Forward 1 step",children:"Forward "}),jsxRuntimeExports.jsx("button",{onClick:handleFullForward,disabled:!canForward||isPlaying,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-slate-400 disabled:cursor-not-allowed text-white rounded font-semibold transition text-sm",title:"Fast forward to end",children:"End "})]})]}),jsxRuntimeExports.jsx(StateDisplay,{stateValue:machine.getStateValue(),context:machine.getContext(),isHalted:machine.isHalted()}),jsxRuntimeExports.jsx(EventControls,{availableEvents,onSendEvent:handleSendEvent,disabled:machine.isHalted()})]}):jsxRuntimeExports.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-lg shadow-2xl p-12 text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-6xl mb-4",children:""}),jsxRuntimeExports.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:"Load a configuration to start the simulator"})]})}),jsxRuntimeExports.jsx("div",{className:"h-[800px]",children:jsxRuntimeExports.jsx(EventLog,{events:eventLog,onClear:handleClearLog})})]}),activeTab==="editor"&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx(CodeEditor,{value:code,onChange:setCode,onApply:loadConfiguration,hasUnsavedChanges,onLoadExample:loadExample}),jsxRuntimeExports.jsx("div",{className:"flex gap-3",children:jsxRuntimeExports.jsx("button",{onClick:handleReset,disabled:!machine,className:"px-6 py-3 bg-slate-300 dark:bg-slate-700 hover:bg-slate-400 dark:hover:bg-slate-600 disabled:bg-slate-200 dark:disabled:bg-slate-800 disabled:text-slate-400 dark:disabled:text-slate-600 text-slate-900 dark:text-white rounded-lg font-bold transition",children:"Reset"})})]}),activeTab==="diagram"&&machine&&config&&jsxRuntimeExports.jsx(StateMachineDiagram,{config,activeStates,context:machine.getContext(),eventLog,onEventClick:handleSendEvent,onReset:handleReset,onRewind:handleRewind,onForward:handleForward,onFullRewind:handleFullRewind,onFullForward:handleFullForward,onPlay:handlePlay,onPause:handlePause,canRewind,canForward,historyIndex:machine.getHistoryIndex(),historyLength:machine.getHistoryLength(),isHalted:machine.isHalted(),isPlaying,onShowToast:(a,e)=>setToast({message:a,type:e}),onClearLog:handleClearLog})]}),toast&&jsxRuntimeExports.jsx(Toast,{message:toast.message,type:toast.type,onClose:()=>setToast(null)}),jsxRuntimeExports.jsx(Footer,{})]})}client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(ThemeProvider,{children:jsxRuntimeExports.jsx(App,{})})}));
